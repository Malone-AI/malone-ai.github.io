<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>çº¢é»‘æ ‘å³æ—‹</title>
      <link href="/2025/04/09/red-black-tree3/"/>
      <url>/2025/04/09/red-black-tree3/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©ç»§ç»­å­¦ä¹ çº¢é»‘æ ‘ã€‚</p><p>å¦‚æœ‰é”™è¯¯æœ›å¤§å®¶æŒ‡æ­£ğŸ§ã€‚</p><hr><p>çº¢é»‘æ ‘æœ‰å‡ ä¸ª<strong>å…³é”®æ€§è´¨</strong>ï¼š</p><ol><li>æ¯ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²æˆ–é»‘è‰²ï¼›</li><li>æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²ï¼›</li><li>å¶å­èŠ‚ç‚¹ï¼ˆNILï¼‰æ˜¯é»‘è‰²ï¼›</li><li>çº¢è‰²èŠ‚ç‚¹çš„å­èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²ï¼›</li><li>ä»ä»»ä¸€èŠ‚ç‚¹åˆ°å…¶æ‰€æœ‰å¶å­èŠ‚ç‚¹çš„è·¯å¾„åŒ…å«ç›¸åŒæ•°é‡çš„é»‘è‰²èŠ‚ç‚¹ã€‚</li></ol><p>è¿™äº›æ€§è´¨ä¿è¯äº†çº¢é»‘æ ‘çš„å¹³è¡¡æ€§ï¼Œè¿™äº›æ€§è´¨å¾ˆé‡è¦ï¼Œæ¯å›éƒ½æ¥é‡æ¸©ä¸€ä¸‹ã€‚</p><hr><p>ä¸Šå›å·²ç»å­¦ä¹ äº†çº¢é»‘æ ‘çš„å·¦æ—‹æ“ä½œï¼Œè¿™å›æ¥å­¦ä¹ çº¢é»‘æ ‘çš„å³æ—‹æ“ä½œã€‚å³æ—‹æ“ä½œå…¶å®ä¸å·¦æ—‹æ“ä½œæ˜¯å¯¹ç§°ï¼Œæ ¹æœ¬ä¸éœ€è¦è®²ã€‚ä½†æ˜¯è¿™ç§æ°´æ–‡ç« çš„å¤§å¥½æœºä¼šæˆ‘æ€ä¹ˆèƒ½è½»æ˜“æ”¾è¿‡ï¼Ÿ</p><hr><p>æœ¬å›ä¸»è¦å…³æ³¨<strong>å³æ—‹</strong>æ“ä½œã€‚</p><p>å³æ—‹çš„ç›®çš„æ˜¯<strong>å°†èŠ‚ç‚¹ y ä¸å…¶å·¦å­èŠ‚ç‚¹ x çš„ä½ç½®è¿›è¡Œæ—‹è½¬ï¼Œä½¿ x æˆä¸ºæ–°çš„çˆ¶èŠ‚ç‚¹ï¼Œy æˆä¸º x çš„å³å­èŠ‚ç‚¹</strong>ã€‚</p><p>ä¼ªä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">RIGHT-ROTATE(T, x)</span><br><span class="line">    y = x.left              // å°†xçš„å·¦å­©å­ä¿å­˜ä¸ºy</span><br><span class="line">    x.left = y.right        // å°†yçš„å³å­©å­è®¾ä¸ºxçš„æ–°å·¦å­©å­</span><br><span class="line">    <span class="keyword">if</span> y.right != T.nil     // å¦‚æœyçš„å³å­©å­å­˜åœ¨</span><br><span class="line">        y.right.p = x       // æ›´æ–°è¯¥å³å­©å­çš„çˆ¶æŒ‡é’ˆæŒ‡å‘x</span><br><span class="line">    y.p = x.p               // å°†yçš„çˆ¶æŒ‡é’ˆè®¾ä¸ºxçš„çˆ¶èŠ‚ç‚¹ï¼Œyå–ä»£xçš„ä½ç½®</span><br><span class="line">    <span class="keyword">if</span> x.p == T.nil         // å¦‚æœxæ˜¯æ ¹èŠ‚ç‚¹</span><br><span class="line">        T.root = y          // æ›´æ–°æ ¹èŠ‚ç‚¹ä¸ºy</span><br><span class="line">    <span class="keyword">elif</span> x == x.p.left      // å¦‚æœxæ˜¯å…¶çˆ¶èŠ‚ç‚¹çš„å·¦å­©å­</span><br><span class="line">        x.p.left = y        // çˆ¶èŠ‚ç‚¹çš„å·¦å­©å­æŒ‡å‘y</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        x.p.right = y       // çˆ¶èŠ‚ç‚¹çš„å³å­©å­æŒ‡å‘y</span><br><span class="line">    y.right = x             // å°†yçš„å³å­©å­è®¾ä¸ºx</span><br><span class="line">    x.p = y                 // æ›´æ–°xçš„çˆ¶èŠ‚ç‚¹ä¸ºy</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>çº¢é»‘æ ‘çš„å·¦æ—‹</title>
      <link href="/2025/04/08/red-black-tree2/"/>
      <url>/2025/04/08/red-black-tree2/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©ç»§ç»­å­¦ä¹ çº¢é»‘æ ‘ã€‚</p><p>å¦‚æœ‰é”™è¯¯æœ›å¤§å®¶æŒ‡æ­£ğŸ§ã€‚</p><hr><p>ä¸Šå›è¯´åˆ°çº¢é»‘æ ‘æœ‰å‡ ä¸ª<strong>å…³é”®æ€§è´¨</strong>ï¼š</p><ol><li>æ¯ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²æˆ–é»‘è‰²ï¼›</li><li>æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²ï¼›</li><li>å¶å­èŠ‚ç‚¹ï¼ˆNILï¼‰æ˜¯é»‘è‰²ï¼›</li><li>çº¢è‰²èŠ‚ç‚¹çš„å­èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²ï¼›</li><li>ä»ä»»ä¸€èŠ‚ç‚¹åˆ°å…¶æ‰€æœ‰å¶å­èŠ‚ç‚¹çš„è·¯å¾„åŒ…å«ç›¸åŒæ•°é‡çš„é»‘è‰²èŠ‚ç‚¹ã€‚</li></ol><p>è¿™äº›æ€§è´¨ä¿è¯äº†çº¢é»‘æ ‘çš„å¹³è¡¡æ€§ã€‚</p><p>å¹¶ä¸”è¯´åˆ°äº†ä¸€ä¸ªå…·æœ‰nä¸ªå†…éƒ¨èŠ‚ç‚¹çš„çº¢é»‘æ ‘çš„é«˜åº¦hâ‰¤2log(n + 1)ï¼Œä¹Ÿå°±æ˜¯O(log n)ã€‚å› æ­¤çº¢é»‘æ ‘çš„æ’å…¥å’Œåˆ é™¤éƒ½å¯ä»¥åœ¨O(log n)çš„æ—¶é—´å†…å®Œæˆã€‚</p><p>ä½†æ˜¯æ’å…¥å’Œåˆ é™¤æ“ä½œå¿…ç„¶ä¼šç ´åçº¢é»‘æ ‘çš„ç»“æ„ï¼Œä½¿å…¶ä¸æ»¡è¶³ä¸Šè¿°5æ¡æ€§è´¨ã€‚</p><p>ä¸ºäº†ç»´æŠ¤è¿™äº›æ€§è´¨ï¼Œå°±éœ€è¦ä¿®æ”¹çº¢é»‘æ ‘ä¸­æŸäº›èŠ‚ç‚¹çš„é¢œè‰²ä»¥åŠæŒ‡é’ˆçš„ç»“æ„ã€‚</p><p>å…¶ä¸­ï¼ŒæŒ‡é’ˆç»“æ„çš„ä¿®æ”¹æ¶‰åŠåˆ°ä¸¤ç§æ“ä½œï¼š<strong>å·¦æ—‹</strong>å’Œ<strong>å³æ—‹</strong>ã€‚</p><hr><p>æœ¬å›ä¸»è¦å…³æ³¨<strong>å·¦æ—‹</strong>æ“ä½œã€‚</p><p>å·¦æ—‹çš„ç›®çš„æ˜¯<strong>å°†èŠ‚ç‚¹ x ä¸å…¶å³å­èŠ‚ç‚¹ y çš„ä½ç½®è¿›è¡Œæ—‹è½¬ï¼Œä½¿ y æˆä¸ºæ–°çš„çˆ¶èŠ‚ç‚¹ï¼Œx æˆä¸º y çš„å·¦å­èŠ‚ç‚¹</strong>ã€‚</p><p>ä¼ªä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">LEFT-ROTATE(T, x)</span><br><span class="line">    y = x.right             // å°†xçš„å³å­©å­ä¿å­˜ä¸ºy</span><br><span class="line">    x.right = y.left        // å°†yçš„å·¦å­©å­è®¾ä¸ºxçš„æ–°å³å­©å­ã€‚è¿™æ­¥å°†yåŸæ¥çš„å·¦å­æ ‘è½¬ç§»åˆ°xçš„å³è¾¹ã€‚</span><br><span class="line">    <span class="keyword">if</span> y.left != T.nil      // å¦‚æœyçš„å·¦å­©å­ä¸æ˜¯T.nil</span><br><span class="line">        y.left.p = x        // æ›´æ–°è¿™ä¸ªå·¦å­©å­çš„çˆ¶æŒ‡é’ˆæŒ‡å‘x</span><br><span class="line">    y.p = x.p               // æ›´æ–°yçš„çˆ¶æŒ‡é’ˆä¸ºxçš„çˆ¶æŒ‡é’ˆï¼Œå³yç°åœ¨è¦å–ä»£xçš„ä½ç½®</span><br><span class="line">    <span class="keyword">if</span> x.p == T.nil         // å¦‚æœxçš„çˆ¶èŠ‚ç‚¹æ˜¯nilï¼Œè¯´æ˜xæ˜¯æ ¹èŠ‚ç‚¹</span><br><span class="line">        T.root = y          // æ‰€ä»¥æ—‹è½¬åyæˆä¸ºæ–°çš„æ ¹</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> x == x.p.left   // åˆ¤æ–­xæ˜¯å…¶çˆ¶èŠ‚ç‚¹çš„å·¦å­©å­</span><br><span class="line">        x.p.left = y        // çˆ¶èŠ‚ç‚¹çš„å·¦å­©å­æŒ‡å‘y</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        x.p.right = y       // xæ˜¯å…¶çˆ¶èŠ‚ç‚¹çš„å³å­©å­ï¼Œçˆ¶èŠ‚ç‚¹çš„å³å­©å­æŒ‡å‘y</span><br><span class="line">    y.left = x              // yçš„å·¦å­©å­è®¾ä¸ºx</span><br><span class="line">    x.p = y                 // æ›´æ–°xçš„çˆ¶èŠ‚ç‚¹ä¸ºyã€‚è¿™ä¸€æ­¥ä¸ä¸Šä¸€æ­¥å…±åŒå®Œæˆxå’Œyä¹‹é—´çš„çˆ¶å­å…³ç³»äº¤æ¢</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¢é»‘æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ºä»€ä¹ˆä¸€æ£µæœ‰nä¸ªå†…éƒ¨èŠ‚ç‚¹çš„çº¢é»‘æ ‘çš„é«˜åº¦è‡³å¤šä¸º2log(n + 1)</title>
      <link href="/2025/04/07/red-black-tree1/"/>
      <url>/2025/04/07/red-black-tree1/</url>
      
        <content type="html"><![CDATA[<p>å¥½ä¹…æ²¡æ›´æ–°åšå®¢äº†ï¼Œå¤§æ¦‚æœ‰17å¤©å·¦å³ã€‚ä»Šå¤©å°æ›´ä¸€æ³¢ã€‚</p><p>è¦è®¨è®ºçš„å†…å®¹æ˜¯<strong>ä¸ºä»€ä¹ˆä¸€æ£µæœ‰nä¸ªå†…éƒ¨èŠ‚ç‚¹çš„çº¢é»‘æ ‘çš„é«˜åº¦è‡³å¤šä¸º2log(n + 1)</strong>ï¼Ÿï¼ˆè¿™é‡Œçš„logæ˜¯ä»¥2ä¸ºåº•æ•°çš„ï¼‰ã€‚</p><p>å¦‚æœ‰é”™è¯¯æœ›å¤§å®¶æŒ‡æ­£ğŸ§ã€‚</p><hr><p>çº¢é»‘æ ‘æœ‰å‡ ä¸ª<strong>å…³é”®æ€§è´¨</strong>ï¼š</p><ol><li>æ¯ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²æˆ–é»‘è‰²ï¼›</li><li>æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²ï¼›</li><li>å¶å­èŠ‚ç‚¹ï¼ˆNILï¼‰æ˜¯é»‘è‰²ï¼›</li><li>çº¢è‰²èŠ‚ç‚¹çš„å­èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²ï¼›</li><li>ä»ä»»ä¸€èŠ‚ç‚¹åˆ°å…¶æ‰€æœ‰å¶å­èŠ‚ç‚¹çš„è·¯å¾„åŒ…å«ç›¸åŒæ•°é‡çš„é»‘è‰²èŠ‚ç‚¹ã€‚</li></ol><p>è¿™äº›æ€§è´¨ä¿è¯äº†çº¢é»‘æ ‘çš„å¹³è¡¡æ€§ã€‚</p><hr><p><strong>çº¢é»‘æ ‘çš„é«˜åº¦</strong>æŒ‡çš„æ˜¯ä»æ ¹åˆ°å¶å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„çš„<strong>è¾¹æ•°</strong>ï¼ˆæ³¨æ„ä¸æ˜¯èŠ‚ç‚¹ä¸ªæ•°ã€‚è¿™é‡Œæä¸€å˜´æ˜¯å› ä¸ºè¿™å‡ ä¸ªæœˆåˆ·leetcodeé¢˜æœ‰äº›é¢˜ç›®ä¼šä»¥èŠ‚ç‚¹ä¸ªæ•°æ¥ç®—è·¯å¾„é•¿åº¦ï¼Œæˆ‘å®¹æ˜“æ··æ·†ğŸ˜‚ï¼‰ã€‚æ ¹æ®çº¢é»‘æ ‘çš„æ€§è´¨ï¼Œç‰¹åˆ«æ˜¯ç¬¬å››æ¡å’Œç¬¬äº”æ¡ï¼Œå¯ä»¥æ¨æ–­å‡ºæ ‘çš„é«˜åº¦ä¸ä¼šå¤ªé«˜ã€‚</p><hr><p><strong>é»‘é«˜</strong>æ˜¯æŒ‡ä»èŠ‚ç‚¹å‡ºå‘åˆ°å¶å­èŠ‚ç‚¹è·¯å¾„ä¸Šçš„é»‘è‰²èŠ‚ç‚¹æ•°é‡ã€‚æ ¹æ®æ€§è´¨4ï¼ˆçº¢è‰²èŠ‚ç‚¹çš„å­èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²ï¼‰å’Œæ€§è´¨5ï¼ˆä»ä»»ä¸€èŠ‚ç‚¹åˆ°å…¶æ‰€æœ‰å¶å­èŠ‚ç‚¹çš„è·¯å¾„åŒ…å«ç›¸åŒæ•°é‡çš„é»‘è‰²èŠ‚ç‚¹ï¼‰ï¼Œçº¢é»‘æ ‘çš„é»‘é«˜è‡³å°‘æ˜¯h/2ï¼Œå…¶ä¸­hæ˜¯æ ‘çš„é«˜åº¦ã€‚ä¸€å¼€å§‹æˆ‘éå¸¸æ€€ç–‘è¿™ä¸ªç»“è®ºï¼Œå› ä¸ºå¦‚æœä¸€æ¡è·¯å¾„ä¸Šæ˜¯å…¨é»‘èŠ‚ç‚¹ï¼ˆæ ¹æ®æ€§è´¨4è¿™å®Œå…¨æˆç«‹ï¼‰å‘¢ï¼Ÿ</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™æ¡è·¯å¾„çš„é»‘é«˜ç­‰äºæ ‘çš„é«˜åº¦hï¼Œå› ä¸ºæ‰€æœ‰çš„èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²ï¼Œæ‰€ä»¥é»‘é«˜h_b = hã€‚è€Œå¯¹äºç»“è®ºçº¢é»‘æ ‘çš„é»‘é«˜è‡³å°‘æ˜¯æ ‘é«˜hçš„ä¸€åŠï¼Œå³h_b â‰¥ h/2ã€‚å¦‚æœè·¯å¾„å…¨é»‘ï¼Œé‚£ä¹ˆh_b = hï¼Œæ˜¾ç„¶æ»¡è¶³h_b â‰¥ h/2ã€‚å¦å¤–å› ä¸ºçº¢è‰²èŠ‚ç‚¹ä¸èƒ½è¿ç»­ï¼Œæ‰€ä»¥æ¯å‡ºç°ä¸€ä¸ªçº¢è‰²èŠ‚ç‚¹ï¼Œå¿…é¡»æœ‰ä¸€ä¸ªé»‘è‰²èŠ‚ç‚¹è·Ÿéšï¼Œæ‰€ä»¥æ˜¯h/2ã€‚</p><hr><p>å‡è®¾çº¢é»‘æ ‘çš„é«˜åº¦ä¸ºhï¼Œå†…éƒ¨èŠ‚ç‚¹æ•°ä¸ºnã€‚ç”±äºçº¢é»‘æ ‘çš„é»‘é«˜è‡³å°‘æ˜¯h/2ï¼Œé‚£ä¹ˆæ ¹æ®æ™®é€šäºŒå‰æœç´¢æ ‘çš„æ€§è´¨ï¼Œä»¥é»‘é«˜ä¸ºåŸºå‡†ï¼Œæœ€å°‘èŠ‚ç‚¹æ•°çš„æƒ…å†µæ˜¯å®Œå…¨äºŒå‰æ ‘ï¼Œå³n &gt;= 2^(bh) -1ï¼Œå…¶ä¸­bhæ˜¯é»‘é«˜ã€‚è¿™é‡Œbh &gt;= h/2ï¼Œæ‰€ä»¥ä»£å…¥å¾—åˆ°n &gt;= 2^(h/2) -1ï¼Œè§£è¿™ä¸ªä¸ç­‰å¼å¯ä»¥å¾—åˆ°h &lt;= 2log(n+1)ã€‚</p><p>æœ€ç»ˆå¾—åˆ°ç»“è®º<strong>ä¸€æ£µæœ‰nä¸ªå†…éƒ¨èŠ‚ç‚¹çš„çº¢é»‘æ ‘çš„é«˜åº¦è‡³å¤šä¸º2log(n + 1)</strong>ã€‚</p><hr>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¢é»‘æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤±çœ </title>
      <link href="/2025/03/19/my-feelings5/"/>
      <url>/2025/03/19/my-feelings5/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘å¤±çœ æ¯”è¾ƒä¸¥é‡ï¼Œæ˜¨æ™šç¡ç€æ˜¯åœ¨1ç‚¹å·¦å³ï¼Œé†’æ¥æ˜¯åœ¨5ç‚¹å·¦å³ï¼Œç„¶åèººäº†ä¸€ä¸ªå¤šå°æ—¶ï¼Œå®¿èˆå¼€ç¯äº†ï¼Œæ•²ä»£ç åˆ°å…«ç‚¹åŠå»ä¸Šæ—©å…«ã€‚ç„¶åä¸Šä½“è‚²è¯¾ï¼Œä¸€ç›´åˆ°12ç‚¹ã€‚è¿‘ä¸€ä¸ªæœˆæ—¥å‡ç¡çœ ä¸è¶³6ä¸ªå°æ—¶ï¼Œå¹¶ä¸æ˜¯ä¸æƒ³ç¡ï¼Œæ˜¯çœŸå¾—ç¡ä¸ç€QvQã€‚</p><p>æ¥ä¸‹æ¥çš„æ—¥å­æ„Ÿè§‰æœ‰ç‚¹éš¾è¿‡å‘€ï¼Œç›®å‰è®¡åˆ’ä½¿åŠ²å„¿å†™ä»£ç ï¼Œä½¿åŠ²å„¿æ”¹ç®€å†ï¼Œæ€»æœ‰å›°å¾—æ—¶å€™ï¼ˆä½†æ„¿å¦‚æ­¤ï¼‰ã€‚</p><p>æ˜¨å¤©å¼€å§‹å†³å®šæç®€å†™åšå®¢ï¼Œä¸€ä¸‹å­æ„Ÿè§‰æ•ˆç‡æé«˜äº†ä¸å°‘ã€‚é€šè¿‡gitç®¡ç†ä»£ç çš„æ–¹å¼æ¥è¿›è¡Œå¤ç›˜çš„æ–¹å¼æ•ˆç‡è¿˜æ˜¯éå¸¸å¾—å¯è§‚çš„ã€‚</p><p>å¤šåšåšé¡¹ç›®å§ï¼Œä¸‹ä¸€ä¸ªé¡¹ç›®è¯¥åšä»€ä¹ˆå‘¢ï¼Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> æ‚è°ˆ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å¤ç›˜ä¸€ä¸‹æœ€è¿‘ï¼ˆ3æœˆ18æ—¥ï¼‰</title>
      <link href="/2025/03/18/my-feelings4/"/>
      <url>/2025/03/18/my-feelings4/</url>
      
        <content type="html"><![CDATA[<p>è‡ªä¸Šä¸Šå‘¨å¬äº†å…¥èŒç¾å›¢çš„å­¦é•¿çš„å»ºè®®ï¼Œå·²ç»ç®—æ˜¯å…¨é¢è½¬Javaäº†ã€‚JavaEEç®—æ˜¯åŸºæœ¬å›äº†ï¼Œå’ŒC++åŸºæœ¬å·®ä¸äº†å¤šå°‘ï¼Œå°±æ˜¯ä¸€äº›åŸºæœ¬çš„æ•°æ®ç»“æ„å’Œç‰¹æ€§ä¸ä¸€æ ·ï¼Œè¿™å‡ å¤©ä¸€ç›´åœ¨é€šè¿‡Leetcodeç®—æ³•é¢˜çš„æ–¹å¼æ¥ç†Ÿç»ƒã€‚</p><p>å­¦äº†å¾ˆé•¿ä¸€æ®µæ—¶é—´çš„Springbootå’ŒVueï¼Œä¸»è¦æ˜¯è·Ÿç€Bç«™è§†é¢‘åšä¸€ä¸ªç®€å•é¡¹ç›®ã€‚å¤ç›˜äº†ä¸€ä¸‹ï¼Œå‘ç°è‡ªå·±åŸºæœ¬ä¸Šä¸€ä¸ª1å°æ—¶çš„è§†é¢‘èƒ½çœ‹ä¸€ä¸‹åˆï¼Œç©¶å…¶åŸå› ï¼Œæˆ‘å½’ç»“ä¸ºâ€œé’»ç‰›è§’å°–â€ï¼ŒèŠ±äº†å¾ˆå¤§åŠŸå¤«åœ¨å†™åšå®¢è®°å½•ä¸Šäº†ï¼Œæƒ³ç€æ–¹ä¾¿å¤ä¹ ã€‚ä½†æ˜¯ç¡®å®æ˜¯å¤ä¹ æ¯”è¾ƒæ–¹ä¾¿ï¼Œä½†æ˜¯æ•ˆç‡å¹¶ä¸æ˜¯å¾ˆé«˜ã€‚</p><p>ç›®å‰å†³å®šå¼€å§‹ä¸€ä¸‹æç®€å†™åšå®¢æ–¹å¼ï¼Œä¸å¤ªä½œè¿‡å¤šè§£é‡Šï¼Œä»…ä»…æˆªå›¾+ä¸‰è¨€ä¸¤è¯­ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ‚è°ˆ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Springboot3 + Vue3 å®ç°ç™»é™†æ³¨å†Œ</title>
      <link href="/2025/03/17/project-test9/"/>
      <url>/2025/03/17/project-test9/</url>
      
        <content type="html"><![CDATA[<h1>1. å‰ç«¯æ­å»º</h1><p>åœ¨vue/src/viewsç›®å½•ä¸‹æ–°å»ºlogin.vueã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;align-items: center;justify-content: center;background-color: aquamarine;height: 100vh;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;width: 50%;background-color: white;border-radius: 5px;overflow: hidden;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;@/assets/imgs/login.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1;display: flex;align-items: center;justify-content: center;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span> <span class="attr">:model</span>=<span class="string">&quot;data.form&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 80%&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;data.rules&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-weight: bold; font-size: 20px;margin-bottom: 20px;text-align: center;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            æ¬¢ è¿ ç™» é™†</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥ç”¨æˆ·å&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.username&quot;</span> <span class="attr">:prefix-icon</span>=<span class="string">&quot;User&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥å¯†ç &quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.password&quot;</span> <span class="attr">show-password</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;role&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-select</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.role&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">label</span>=<span class="string">&quot;ç®¡ç†å‘˜&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ADMIN&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">label</span>=<span class="string">&quot;ç”¨æˆ·&quot;</span> <span class="attr">value</span>=<span class="string">&quot;USER&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!--          &lt;el-form-item prop=&quot;vaildCode&quot;&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!--            &lt;div style=&quot;display: flex;&quot;&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!--              &lt;el-input&gt;&lt;/el-input&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!--              &lt;div style=&quot;flex: 1;&quot;&gt;1313&lt;/div&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!--            &lt;/div&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!--          &lt;/el-form-item&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;login&quot;</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1;&quot;</span>&gt;</span>è¿˜æ²¡æœ‰è´¦å·ï¼Ÿå»<span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;color: aquamarine&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/register&quot;</span>&gt;</span>æ³¨å†Œ<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1;text-align: right;cursor: pointer;color: aquamarine;&quot;</span>&gt;</span>å¿˜è®°å¯†ç <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123;<span class="title class_">User</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;@element-plus/icons-vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123;reactive, ref&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123;<span class="title class_">ElMessage</span>&#125; <span class="keyword">from</span> <span class="string">&quot;element-plus&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;@/router/index.js&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&quot;@/utils/request.js&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> formRef = <span class="title function_">ref</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> data = <span class="title function_">reactive</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">form</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">role</span>: <span class="string">&#x27;ADMIN&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">rules</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">username</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#123;<span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;è¯·è¾“å…¥è´¦å·&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#123;<span class="attr">min</span>: <span class="number">3</span>, <span class="attr">message</span>: <span class="string">&#x27;è´¦å·æœ€å°‘3ä½&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">password</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#123;<span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;è¯·è¾“å…¥å¯†ç &#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">login</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  formRef.<span class="property">value</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">if</span> (valid) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      request.<span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>, data.<span class="property">form</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="string">&#x27;200&#x27;</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="comment">// å­˜å‚¨ç”¨æˆ·ä¿¡æ¯</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;code_user&quot;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(res.<span class="property">data</span> || &#123;&#125;))</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(<span class="string">&quot;ç™»é™†æˆåŠŸ&quot;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          router.<span class="title function_">push</span>(<span class="string">&quot;/&quot;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h1>2. ç™»é™†</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// com/example/controller/AdminController.java</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/login&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">login</span><span class="params">(<span class="meta">@RequestBody</span> Admin admin)</span> &#123;</span><br><span class="line">    <span class="type">Admin</span> <span class="variable">dbAdmin</span> <span class="operator">=</span> adminService.login(admin);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// com/example/service/AdminService.java</span></span><br><span class="line"><span class="keyword">public</span> Admin <span class="title function_">login</span><span class="params">(Admin admin)</span> &#123;</span><br><span class="line">    <span class="comment">// 1. éªŒè¯è´¦å·æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">    <span class="type">Admin</span> <span class="variable">dbAdmin</span> <span class="operator">=</span> adminMapper.selectByUsername(admin.getUsername());</span><br><span class="line">    <span class="keyword">if</span> (dbAdmin == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomerException</span>(<span class="string">&quot;è´¦å·ä¸å­˜åœ¨&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. éªŒè¯å¯†ç </span></span><br><span class="line">    <span class="keyword">if</span> (!dbAdmin.getPassword().equals(admin.getPassword())) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomerException</span>(<span class="string">&quot;è´¦å·æˆ–å¯†ç é”™è¯¯&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dbAdmin;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç™»é™†æŒ‰é’®ç»‘å®šäº‹ä»¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button type=<span class="string">&quot;primary&quot;</span> style=<span class="string">&quot;width: 100%;&quot;</span> @click=<span class="string">&quot;login&quot;</span>&gt;ç™»å½•&lt;/el-button&gt;</span><br></pre></td></tr></table></figure><p>login:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue/src/views/login.vue</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">login</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  formRef.<span class="property">value</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (valid) &#123;</span><br><span class="line">      request.<span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>, data.<span class="property">form</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="string">&#x27;200&#x27;</span>) &#123;</span><br><span class="line">          <span class="comment">// å­˜å‚¨ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">          <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;code_user&quot;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(res.<span class="property">data</span> || &#123;&#125;))</span><br><span class="line">          <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(<span class="string">&quot;ç™»é™†æˆåŠŸ&quot;</span>)</span><br><span class="line">          router.<span class="title function_">push</span>(<span class="string">&quot;/&quot;</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åˆ«å¿˜è®°è¿è¡Œspringbootå·¥ç¨‹ï¼Œå†å»æµ‹è¯•loginã€‚</p><p>å­˜å‚¨çš„ç”¨æˆ·ä¿¡æ¯ï¼š<br><img src="image.png" alt="alt text"></p><h1>3. é€€å‡ºç™»é™†</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue/src/views/Manager.vue</span></span><br><span class="line">&lt;el-dropdown-item @click=<span class="string">&quot;logout&quot;</span>&gt;é€€å‡ºç™»é™†&lt;/el-dropdown-item&gt;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue/src/views/Manager.vue</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">logout</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;code_user&#x27;</span>) <span class="comment">// æ¸…é™¤ç¼“å­˜</span></span><br><span class="line">  location.<span class="property">href</span> = <span class="string">&#x27;/login&#x27;</span> <span class="comment">// é‡å®šå‘åˆ°loginè·¯ç”±</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>4. ä¿æŠ¤</h1><p>åœ¨<code>&lt;script&gt;&lt;/script&gt;</code>ä¹‹é—´æ·»åŠ ä¸€ä¸‹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue/src/views/Manager.vue</span></span><br><span class="line"><span class="keyword">let</span> userStr = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;code_user&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> (userStr) &#123;</span><br><span class="line">  <span class="keyword">let</span> user = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(userStr)</span><br><span class="line">  <span class="keyword">if</span> (!user.<span class="property">id</span>) &#123;</span><br><span class="line">    location.<span class="property">href</span> = <span class="string">&#x27;/login&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  location.<span class="property">href</span> = <span class="string">&#x27;/login&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”¨äºéªŒè¯ç”¨æˆ·æ˜¯å¦ç™»é™†</p><h1>5. å¢åŠ ç”¨æˆ·</h1><p>æ–°å»ºæ•°æ®åº“è¡¨userï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span> `<span class="keyword">user</span>` (</span><br><span class="line">  `id` <span class="type">int</span> <span class="keyword">NOT NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ID&#x27;</span>,</span><br><span class="line">  `username` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è´¦å·&#x27;</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¯†ç &#x27;</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åç§°&#x27;</span>,</span><br><span class="line">  `phone` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ‰‹æœº&#x27;</span>,</span><br><span class="line">  `email` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;é‚®ç®±&#x27;</span>,</span><br><span class="line">  `role` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è§’è‰²&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY KEY</span> (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `username_index` (`username`) COMMENT <span class="string">&#x27;è´¦å·&#x27;</span></span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">36</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8mb4_unicode_ci COMMENT<span class="operator">=</span><span class="string">&#x27;ç”¨æˆ·ä¿¡æ¯&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="image-2.png" alt="alt text"></p><p>roleé¡¹ç”¨äºåŒºåˆ†ç”¨æˆ·å’Œç®¡ç†å‘˜ã€‚</p><p>ç®¡ç†å‘˜è¡¨ä¹Ÿæ–°å¢ä¸€é¡¹roleï¼š</p><p><img src="image-1.png" alt="alt text"></p><p>å¤åˆ¶com/example/entity/Admin.javaç²˜è´´é‡å‘½åä¸ºUserã€‚</p><p>å¹¶ç»™Admin.javaå’ŒUser.javaæ–°å¢private String roleå±æ€§ï¼Œé…ç½®getterå’Œsetterã€‚</p><p>å¤åˆ¶com/example/controller/AdminController.javaç²˜è´´é‡å‘½åä¸ºUserControllerï¼Œå¹¶æŠŠï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/admin&quot;)</span></span><br></pre></td></tr></table></figure><p>æ”¹æˆ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br></pre></td></tr></table></figure><p>å¹¶æŠŠé‡Œé¢æ‰€æœ‰çš„Adminæ”¹æˆUserã€‚</p><p>å¤åˆ¶com/example/service/AdminService.javaç²˜è´´é‡å‘½åä¸ºUserServiceï¼Œå¹¶æŠŠAdminæ¢æˆUserã€‚</p><p>å¤åˆ¶com/example/mapper/AdminMapper.javaå¹¶ç²˜è´´é‡å‘½åä¸ºUserMapperï¼Œå¹¶æŠŠAdminæ¢æˆUserã€‚</p><p>å¤åˆ¶src/main/resources/mapper/AdminMapper.xmlï¼Œå¹¶ç²˜è´´é‡å‘½åä¸ºUserMapper.xmlï¼Œå¹¶æŠŠAdminæ¢æˆUserã€‚</p><p>æŠŠvue/src/views/Admin.vueç²˜è´´ä¸ºUser.vueã€‚</p><p>æ–°å¢è·¯ç”±ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue/src/router/index.js</span></span><br><span class="line">&#123;<span class="attr">path</span>: <span class="string">&#x27;admin&#x27;</span>, <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/Admin.vue&#x27;</span>)&#125;,</span><br><span class="line">&#123;<span class="attr">path</span>: <span class="string">&#x27;user&#x27;</span>, <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/User.vue&#x27;</span>)&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue/src/views/Manager.vue</span></span><br><span class="line">&lt;el-menu-item index=<span class="string">&quot;/manager/admin&quot;</span>&gt;ç®¡ç†å‘˜ä¿¡æ¯&lt;/el-menu-item&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">&quot;/manager/user&quot;</span>&gt;</span>ç”¨æˆ·ä¿¡æ¯<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼š<br><img src="image-3.png" alt=""></p><p>é‡å¯åç«¯å³å¯ã€‚</p><h1>6. æ³¨å†Œ</h1><p>æŠŠlogin.vueå¤åˆ¶ç²˜è´´ä¸ºregister.vueã€‚</p><p>æ–°å¢è·¯ç”±ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue/src/router/index.js</span></span><br><span class="line">&#123; <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>, <span class="attr">component</span>: <span class="keyword">import</span>(<span class="string">&#x27;../views/login.vue&#x27;</span>),&#125;,</span><br><span class="line">&#123; <span class="attr">path</span>: <span class="string">&#x27;/register&#x27;</span>, <span class="attr">component</span>: <span class="keyword">import</span>(<span class="string">&#x27;../views/register.vue&#x27;</span>),&#125;,</span><br></pre></td></tr></table></figure><p>register.vueï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;align-items: center;justify-content: center;background-color: aquamarine;height: 100vh;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;width: 50%;background-color: white;border-radius: 5px;overflow: hidden;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;@/assets/imgs/register.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1;display: flex;align-items: center;justify-content: center;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">status-icon</span> <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span> <span class="attr">:model</span>=<span class="string">&quot;data.form&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 80%&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;data.rules&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-weight: bold; font-size: 20px;margin-bottom: 20px;text-align: center;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            æ¬¢ è¿ æ³¨ å†Œ</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥ç”¨æˆ·å&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.username&quot;</span> <span class="attr">:prefix-icon</span>=<span class="string">&quot;User&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥å¯†ç &quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.password&quot;</span> <span class="attr">show-password</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;confirmPassword&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·å†æ¬¡è¾“å…¥å¯†ç &quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.confirmPassword&quot;</span> <span class="attr">show-password</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!--          &lt;el-form-item prop=&quot;vaildCode&quot;&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!--            &lt;div style=&quot;display: flex;&quot;&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!--              &lt;el-input&gt;&lt;/el-input&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!--              &lt;div style=&quot;flex: 1;&quot;&gt;1313&lt;/div&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!--            &lt;/div&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!--          &lt;/el-form-item&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;success&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;register&quot;</span>&gt;</span>æ³¨å†Œ<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1;&quot;</span>&gt;</span>å·²æœ‰è´¦å·ï¼Ÿè¯·<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/login&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color: #248243;cursor: pointer;&quot;</span>&gt;</span>ç™»é™†<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123;<span class="title class_">User</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;@element-plus/icons-vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123;reactive, ref&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123;<span class="title class_">ElMessage</span>&#125; <span class="keyword">from</span> <span class="string">&quot;element-plus&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;@/router/index.js&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&quot;@/utils/request.js&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">validatePass</span> = (<span class="params">rule, value, callback</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// valueè¡¨ç¤ºç”¨æˆ·è¾“å…¥çš„confirmPassword</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">if</span> (value !== data.<span class="property">form</span>.<span class="property">password</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸åŒ¹é…&#x27;</span>))</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">callback</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> formRef = <span class="title function_">ref</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> data = <span class="title function_">reactive</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">form</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">validCode</span>: <span class="string">&#x27;&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">rules</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">username</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#123;<span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;è¯·è¾“å…¥è´¦å·&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#123;<span class="attr">min</span>: <span class="number">3</span>, <span class="attr">message</span>: <span class="string">&#x27;è´¦å·æœ€å°‘3ä½&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">password</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#123;<span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;è¯·è¾“å…¥å¯†ç &#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">confirmPassword</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#123;<span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;è¯·å†æ¬¡è¾“å…¥å¯†ç &#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#123;<span class="attr">validator</span>: validatePass, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">register</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  formRef.<span class="property">value</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">if</span> (valid) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      request.<span class="title function_">post</span>(<span class="string">&#x27;/register&#x27;</span>, data.<span class="property">form</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="string">&#x27;200&#x27;</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(<span class="string">&quot;æ³¨å†ŒæˆåŠŸ&quot;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          router.<span class="title function_">push</span>(<span class="string">&quot;/login&quot;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>æ¯”loginå¤šäº†ä¸€ä¸ªconfirmPasswordã€‚</p><ul><li>æ–°å¢æ³¨å†Œæ¥å£</li></ul><p>controllerå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// com/example/controller/WebController.java</span></span><br><span class="line"><span class="meta">@Resource</span></span><br><span class="line">UserService userService; <span class="comment">// æ³¨å…¥UserService</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@PostMapping(&quot;/register&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">register</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">    userService.register(user);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Serviceå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UserService.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">register</span><span class="params">(User user)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.add(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Springboot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot3 + Vue3 å®ç° Excel æ‰¹é‡å¯¼å‡ºå¯¼å…¥</title>
      <link href="/2025/03/17/project-test8/"/>
      <url>/2025/03/17/project-test8/</url>
      
        <content type="html"><![CDATA[<h1>å‰è¨€</h1><p>ä¸»è¦ä½¿ç”¨Javaå·¥å…·ç±»Hutoolæ¥å®ç°ï¼Œ<a href="https://doc.hutool.cn/pages/index/">Hutoolå®˜ç½‘</a>ã€‚</p><h1>1. æ‰¹é‡å¯¼å‡º</h1><h2 id="1-1-æµç¨‹">1.1 æµç¨‹</h2><p>å¯¼å‡ºæ•°æ®æµç¨‹</p><ol><li>æ‹¿åˆ°æ‰€æœ‰æ•°æ®</li><li>æ„å»º ExcelWriter å¯¹è±¡</li><li>è®¾ç½®ä¸­æ–‡è¡¨å¤´</li><li>å†™å‡ºæ•°æ®åˆ°writer</li><li>è®¾ç½®è¾“å‡ºçš„æ–‡ä»¶çš„åç§°ä»¥åŠè¾“å‡ºæµçš„å¤´ä¿¡æ¯</li><li>å†™å‡ºåˆ°è¾“å‡ºæµ å¹¶å…³é—­ writer</li></ol><h2 id="1-2-æä¾›åç«¯æ¥å£">1.2 æä¾›åç«¯æ¥å£</h2><p>å…ˆéœ€è¦æä¾›åç«¯çš„æ‰¹é‡å¯¼å‡ºæ¥å£ï¼Œç”±å‰ç«¯è°ƒç”¨ã€‚</p><p>Controllerå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/export&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">exportData</span><span class="params">(HttpServletResponse response)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">    <span class="comment">// 1. æ‹¿åˆ°æ‰€æœ‰æ•°æ®</span></span><br><span class="line">    List&lt;Admin&gt; admins = adminService.selectAll();</span><br><span class="line">    <span class="comment">// 2. æ„å»ºExcelWriterå¯¹è±¡</span></span><br><span class="line">    <span class="type">ExcelWriter</span> <span class="variable">writer</span> <span class="operator">=</span> ExcelUtil.getWriter(<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">// 3. è®¾ç½®ä¸­æ–‡è¡¨å¤´</span></span><br><span class="line">    writer.addHeaderAlias(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;è´¦å·&quot;</span>);</span><br><span class="line">    writer.addHeaderAlias(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;åç§°&quot;</span>);</span><br><span class="line">    writer.addHeaderAlias(<span class="string">&quot;phone&quot;</span>, <span class="string">&quot;ç”µè¯&quot;</span>);</span><br><span class="line">    writer.addHeaderAlias(<span class="string">&quot;email&quot;</span>, <span class="string">&quot;é‚®ç®±&quot;</span>);</span><br><span class="line">    <span class="comment">// 4. å†™å‡ºæ•°æ®åˆ°writer</span></span><br><span class="line">    writer.write(admins);</span><br><span class="line">    <span class="comment">// 5. è®¾ç½®è¾“å‡ºçš„æ–‡ä»¶çš„åç§°ä»¥åŠè¾“å‡ºæµçš„å¤´ä¿¡æ¯</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> URLEncoder.encode(<span class="string">&quot;ç®¡ç†å‘˜ä¿¡æ¯&quot;</span>, StandardCharsets.UTF_8);</span><br><span class="line">    response.setContentType(<span class="string">&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8&quot;</span>);</span><br><span class="line">    response.setHeader(<span class="string">&quot;Content-disposition&quot;</span>, <span class="string">&quot;attachment;filename=&quot;</span> + fileName + <span class="string">&quot;.xlsx&quot;</span>);</span><br><span class="line">    <span class="comment">// 6. å†™å‡ºåˆ°è¾“å‡ºæµ å¹¶å…³é—­ writer</span></span><br><span class="line">    <span class="type">ServletOutputStream</span> <span class="variable">os</span> <span class="operator">=</span> response.getOutputStream();</span><br><span class="line">    writer.flush(os);</span><br><span class="line">    writer.close();</span><br><span class="line">    os.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡è¾“å‡ºæµçš„æ–¹å¼å¯¼å‡ºã€‚</p><ol><li>è°ƒç”¨åå°æœåŠ¡æŸ¥è¯¢æ‰€æœ‰ç®¡ç†å‘˜æ•°æ®ï¼ˆ<code>adminService.selectAll()</code>ï¼‰ã€‚</li><li>ä½¿ç”¨ Hutool çš„ <code>ExcelUtil</code> åˆ›å»ºä¸€ä¸ª ExcelWriter å¯¹è±¡ã€‚</li><li>é€šè¿‡ <code>writer.addHeaderAlias</code> è®¾ç½®è¡¨å¤´åˆ«åï¼Œå°†æ•°æ®åº“å­—æ®µåæ˜ å°„ä¸ºä¸­æ–‡è¡¨å¤´ã€‚</li><li>è°ƒç”¨ <code>writer.write(admins)</code> å°†æŸ¥è¯¢å¾—åˆ°çš„æ•°æ®å†™å…¥ Excel æ–‡ä»¶ã€‚</li><li>è®¾ç½®å“åº”å¤´ï¼ŒæŒ‡å®šæ–‡ä»¶åå’Œ MIME ç±»å‹ï¼Œä½¿æµè§ˆå™¨è¯†åˆ«ä¸ºæ–‡ä»¶ä¸‹è½½ã€‚</li><li>è·å–å“åº”è¾“å‡ºæµï¼Œå¹¶å°† Excel æ–‡ä»¶æ•°æ®å†™å…¥è¾“å‡ºæµï¼Œæœ€ååˆ·æ–°å¹¶å…³é—­æµã€‚</li></ol><p>è¿™ç§è®¾è®¡ä½¿å¾—å‰ç«¯é€šè¿‡è®¿é—® <code>/admin/export</code> æ¥å£å³å¯è§¦å‘æ–‡ä»¶ä¸‹è½½ã€‚</p><ul><li><code>exportData</code> ä¸ºä»€ä¹ˆæ·»åŠ  <code>throws Exception</code>ï¼š</li></ul><p><code>exportData</code> æ–¹æ³•æ¶‰åŠåˆ°æ–‡ä»¶è¾“å‡ºã€URLç¼–ç ã€æµæ“ä½œç­‰ï¼Œå¾ˆå¯èƒ½æŠ›å‡º IO æˆ–ç¼–ç ç›¸å…³å¼‚å¸¸ã€‚å¦‚æœä¸åœ¨æ–¹æ³•ç­¾åä¸Šå£°æ˜ <code>throws Exception</code>ï¼Œå°±å¿…é¡»åœ¨æ–¹æ³•å†…éƒ¨æ•è·å¹¶å¤„ç†è¿™äº›å¼‚å¸¸ã€‚æ·»åŠ  <code>throws Exception</code> å¯è®©å¼‚å¸¸ç”±å…¨å±€å¼‚å¸¸å¤„ç†å™¨ç»Ÿä¸€ç®¡ç†ï¼ŒåŒæ—¶ç®€åŒ–æ–¹æ³•å†…éƒ¨çš„å¼‚å¸¸å¤„ç†é€»è¾‘ã€‚</p><h2 id="1-3-è¿è¡ŒæŠ¥é”™">1.3 è¿è¡ŒæŠ¥é”™</h2><p>è¿è¡Œåæç¤ºç¼ºå°‘ä¾èµ–ï¼Œæ·»åŠ ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.poi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>poi-ooxml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="1-4-è¿è¡Œå‡ºç°çš„é—®é¢˜">1.4 è¿è¡Œå‡ºç°çš„é—®é¢˜</h2><p>å†æ¬¡è¿è¡Œåä¼šè‡ªåŠ¨ä¸‹è½½ä¸€ä¸ªexcelæ–‡ä»¶ï¼Œæ‰“å¼€ä¸€çœ‹ï¼Œå‘ç°è¡¨å¤´ç«Ÿç„¶åŒ…å«passwordã€‚</p><p>å› ä¸ºé»˜è®¤çš„å¯¼å‡ºæ˜¯åŒ…å«æ‰€æœ‰çš„å­—æ®µã€‚</p><p>æ·»åŠ ä¸‹é¢è¿™è¡Œä»£ç å³å¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">writer.setOnlyAlias(<span class="literal">true</span>);</span><br></pre></td></tr></table></figure><h2 id="1-5-å‰ç«¯æŒ‰é’®ç»‘å®š">1.5 å‰ç«¯æŒ‰é’®ç»‘å®š</h2><p>ç»™æ‰¹é‡å¯¼å‡ºæŒ‰é’®ç»‘å®šäº‹ä»¶exportDataï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button type=<span class="string">&quot;info&quot;</span> <span class="meta">@click</span>=<span class="string">&quot;exportData&quot;</span>&gt;æ‰¹é‡å¯¼å‡º&lt;/el-button&gt;</span><br></pre></td></tr></table></figure><p>ç„¶åå®šä¹‰è¿™ä¸ªæ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">exportData</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">open</span>(<span class="string">&quot;http://localhost:9999/admin/export&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶æ‰¹é‡å¯¼å‡ºåŠŸèƒ½å°±æ˜¯å®ç°äº†ã€‚</p><h1>2. æ¡ä»¶å¯¼å‡º</h1><p>æŠŠexportDataæ–¹æ³•æ”¹æˆï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="variable">exportData</span> <span class="operator">=</span> () =&gt; &#123;</span><br><span class="line">  <span class="type">let</span> <span class="variable">url</span> <span class="operator">=</span> `http:<span class="comment">//localhost:9999/admin/export?username=$&#123;data.username&#125;&amp;name=$&#123;data.name&#125;`</span></span><br><span class="line">  window.open(url)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œç»™åç«¯çš„exportæ¥å£ä¼ é€’äº†ä¸¤ä¸ªå‚æ•°ï¼Œä½†æ˜¯æˆ‘ä»¬è®¾ç½®çš„æ¥å£å¹¶ä¸æ¥æ”¶è¿™ä¸¤ä¸ªå‚æ•°ï¼Œå› æ­¤åç«¯exportæ¥å£è¦ä¿®æ”¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/export&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">exportData</span><span class="params">(Admin admin, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">    <span class="comment">// 1. æ‹¿åˆ°æ‰€æœ‰æ•°æ®</span></span><br><span class="line">    List&lt;Admin&gt; admins = adminService.selectAll(admin);</span><br><span class="line">    <span class="comment">// ... </span></span><br><span class="line">    <span class="comment">// ä¿æŒä¸å˜</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œè®©controllerå±‚æ¥æ”¶ä¸€ä¸ªAdminå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™Serviceå±‚å‚æ•°ä¼ é€’ã€‚</p><p>Serviceå±‚æ¥å£selectAllåŸæ¥æ˜¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Admin&gt; <span class="title function_">selectAll</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> adminMapper.selectAll(<span class="literal">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å› æ­¤ä¹Ÿè¦ä¿®æ”¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Admin&gt; <span class="title function_">selectAll</span><span class="params">(Admin admin)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> adminMapper.selectAll(admin);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>mapperå±‚çš„æ¥å£ä¸ç”¨å†åšä¿®æ”¹ã€‚</p><p>ä½†æ˜¯è¿™æ ·æœ‰ä¸ªé—®é¢˜ã€‚</p><p>åœ¨Admin.vueä¸­ï¼Œdataçš„å®šä¹‰ä¸ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">  <span class="attr">username</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">pageNum</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">pageSize</span>: <span class="number">5</span>,</span><br><span class="line">  <span class="attr">total</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">tableData</span>: [],</span><br><span class="line">  <span class="attr">formVisible</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">form</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="attr">username</span>: [</span><br><span class="line">      &#123;<span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&quot;è¯·å¡«å†™è´¦å·&quot;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">name</span>: [</span><br><span class="line">      &#123;<span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&quot;è¯·å¡«å†™åç§°&quot;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">phone</span>: [</span><br><span class="line">      &#123;<span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&quot;è¯·å¡«å†™ç”µè¯&quot;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">email</span>: [</span><br><span class="line">      &#123;<span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&quot;è¯·å¡«å†™é‚®ç®±&quot;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">rows</span>: []</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><code>username</code> å’Œ <code>name</code> éƒ½é»˜è®¤ä¸º nullï¼Œå³ä¸ºç©ºã€‚ä½†æ˜¯ä¼ åˆ°åç«¯ï¼Œè¿™ä¸¤ä¸ªå±æ€§å°±ä¸æ˜¯ nullï¼Œå˜æˆå­—ç¬¦ä¸² â€œnullâ€ äº†ã€‚</p><p>ç»™controllerå±‚çš„<code>exportData</code>æ¥å£æ‰“ä¸Šæ–­ç‚¹ï¼Œå¯åŠ¨springbootå·¥ç¨‹çš„è°ƒè¯•ï¼Œå†å»å‰ç«¯ç‚¹å‡»<code>æ‰¹é‡å¯¼å‡º</code>æŒ‰é’®ï¼Œå°±å¯ä»¥å‘ç°å‰ç«¯å‘å‡ºçš„è¯·æ±‚ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:9999/admin/export?username=null&amp;name=null</span><br></pre></td></tr></table></figure><p>å¹¶ä¸”å¯ä»¥çœ‹åˆ°ä¼ é€’ç»™åç«¯controllerå±‚çš„adminçš„å±æ€§ï¼š<br><img src="image.png" alt="alt text"><br><img src="/images/project-test8_1.png" alt=""></p><p>å¯ä»¥çœ‹åˆ°ç¡®å®æ˜¯&quot;null&quot;å­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯nullã€‚</p><p>è¿™æ ·å»åç«¯æŸ¥è¯¢è‚¯å®šæ˜¯ä»€ä¹ˆä¹ŸæŸ¥ä¸åˆ°ã€‚</p><p>æˆ‘ä»¬æœŸæœ›çš„æ˜¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:9999/admin/export?username=&amp;name=</span><br></pre></td></tr></table></figure><p>å› æ­¤å‰ç«¯çš„exportDataæ–¹æ³•è¦è¿›è¡Œä¿®æ”¹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">exportData</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> url = <span class="string">`http://localhost:9999/admin/export?username=<span class="subst">$&#123;data.username === <span class="literal">null</span> ? <span class="string">&#x27;&#x27;</span> : data.username&#125;</span>&amp;name=<span class="subst">$&#123;data.name === <span class="literal">null</span> ? <span class="string">&#x27;&#x27;</span> : data.name&#125;</span>`</span></span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">open</span>(url)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä¸‰ç›®è¿ç®—ç¬¦æ¥åˆ¤æ–­usernameå’Œnameæ˜¯å¦ä¸ºnullï¼Œä¸ºnullå°±ä¼ é€’â€™'å³ç©ºå­—ç¬¦ä¸²ï¼›ä¸ä¸ºnullå°±ç›´æ¥ä¼ é€’ã€‚</p><p>æ­¤æ—¶å†å»ç‚¹å‡»æ‰¹é‡å¯¼å‡ºæŒ‰é’®ä¼šå‘ç°å‰ç«¯å‘é€çš„è¯·æ±‚ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:9999/admin/export?username=&amp;name=</span><br></pre></td></tr></table></figure><p>å¹¶ä¸”ä¼ é€’ç»™åç«¯Controllerå±‚ä¸­adminçš„usernameå’Œnameå±æ€§å‡ä¸º&quot;&quot;ç©ºå­—ç¬¦ä¸²ã€‚ç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸã€‚</p><p>ä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ã€‚</p><p>åœ¨å‰ç«¯é¡µé¢æˆ‘ä»¬ä¸è¿›è¡ŒæŸ¥è¯¢ï¼Œç„¶åç‚¹å‡»æ‰¹é‡å¯¼å‡ºæ—¶å¯¼å‡ºçš„excelåŒ…å«æ‰€æœ‰çš„æ•°æ®ã€‚</p><p>ä½†æ˜¯ï¼Œæˆ‘ä»¬è¿›è¡ŒæŸ¥è¯¢ï¼Œç„¶åç‚¹å‡»æ‰¹é‡å¯¼å‡ºæ—¶å¯¼å‡ºçš„excelä¾ç„¶åŒ…å«æ‰€æœ‰çš„æ•°æ®ã€‚</p><p>è¿™æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨XMLæ˜ å°„é‡Œåªåˆ¤æ–­äº†usernameå’Œnameæ˜¯å¦ä¸ºnullï¼Œè€Œæ²¡æœ‰åˆ¤æ–­å®ƒä»¬æ˜¯å¦ä¸ºç©ºå­—ç¬¦ä¸²ã€‚</p><p>å› æ­¤ä¿®æ”¹XMLæ˜ å°„ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.example.entity.Admin&quot;</span>&gt;</span></span><br><span class="line">    select * from `admin`</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;username != null and username != &#x27;&#x27;&quot;</span>&gt;</span>username like concat(&#x27;%&#x27;, #&#123;username&#125;, &#x27;%&#x27;)<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null and name != &#x27;&#x27;&quot;</span>&gt;</span>and name like concat(&#x27;%&#x27;, #&#123;name&#125;, &#x27;%&#x27;)<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    order by id desc</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ¥åˆ¤æ–­æ˜¯å¦ä¸ºç©ºå­—ç¬¦ä¸²ã€‚</p><h1>3. é€‰æ‹©å¯¼å‡º</h1><p>å³æˆ‘ä»¬é€šè¿‡å‰ç«¯é€‰æ‹©éƒ¨åˆ†è¡Œæ•°æ®è¿›è¡Œå¯¼å‡ºã€‚</p><p>è§†é¢‘é‡Œè®²å¾—å¤ªç¹çå¤ªéº»çƒ¦äº†ï¼Œè‡ªå·±å®ç°äº†ä¸€ä¸ªã€‚</p><h2 id="3-1-å‰ç«¯äº‹ä»¶">3.1 å‰ç«¯äº‹ä»¶</h2><p>ä¿®æ”¹ä¸€ä¸‹<code>exportData</code>æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">exportData</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (data.<span class="property">rows</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> ids = data.<span class="property">rows</span>.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">id</span>)</span><br><span class="line">    <span class="keyword">let</span> url = <span class="string">`http://localhost:9999/admin/exportBatch?ids=<span class="subst">$&#123;ids&#125;</span>`</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">open</span>(url)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> url = <span class="string">`http://localhost:9999/admin/export?username=<span class="subst">$&#123;data.username === <span class="literal">null</span> ? <span class="string">&#x27;&#x27;</span> : data.username&#125;</span>&amp;name=<span class="subst">$&#123;data.name === <span class="literal">null</span> ? <span class="string">&#x27;&#x27;</span> : data.name&#125;</span>`</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">open</span>(url)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®©å®ƒæ ¹æ®<code>data.rows.length</code>çš„é•¿åº¦åˆ¤æ–­è°ƒç”¨å“ªä¸ªåç«¯æ¥å£ã€‚</p><p><code>data.rows</code>é»˜è®¤æ˜¯nullï¼Œä½†æ˜¯é€‰æ‹©æ•°æ®åï¼Œé€šè¿‡äº‹ä»¶handleSelectionChange å¯ä»¥ä½¿ data.rows ä¸é€‰æ‹©çš„æ•°æ®è¿›è¡Œç»‘å®šã€‚</p><p>å› æ­¤<code>data.rows.length</code>å¤§äº0æ—¶è°ƒç”¨Controllerå±‚<code>exportBatch</code>æ¥å£ï¼Œå¦åˆ™è°ƒç”¨<code>export</code>æ¥å£ã€‚</p><p>åœ¨<code>exportBatch</code>ä¸­ï¼Œå°†é€‰æ‹©çš„æ•°æ®çš„idæ˜ å°„ä¸ºç±»ä¼¼[1, 2, 3]ï¼Œç„¶åä¼ é€’ç»™åç«¯æ¥å£ã€‚</p><h2 id="3-2-å®šä¹‰åç«¯æ¥å£">3.2 å®šä¹‰åç«¯æ¥å£</h2><p>å…ˆæ˜¯Controllerå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/exportBatch&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">exportBatch</span><span class="params">(<span class="meta">@RequestParam</span> String ids, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">// å°†å­—ç¬¦ä¸²idsè½¬ä¸ºæ•´æ•°åˆ—è¡¨</span></span><br><span class="line">    String[] idArray = ids.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">    List&lt;Integer&gt; idList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (String id : idArray) &#123;</span><br><span class="line">        idList.add(Integer.parseInt(id));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ ¹æ®idåˆ—è¡¨æŸ¥è¯¢æ•°æ®</span></span><br><span class="line">    List&lt;Admin&gt; list = adminService.SelectByIds(idList);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. æ„å»ºExcelWriterå¯¹è±¡</span></span><br><span class="line">    <span class="type">ExcelWriter</span> <span class="variable">writer</span> <span class="operator">=</span> ExcelUtil.getWriter(<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">// 3. è®¾ç½®ä¸­æ–‡è¡¨å¤´</span></span><br><span class="line">    writer.addHeaderAlias(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;è´¦å·&quot;</span>);</span><br><span class="line">    writer.addHeaderAlias(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;åç§°&quot;</span>);</span><br><span class="line">    writer.addHeaderAlias(<span class="string">&quot;phone&quot;</span>, <span class="string">&quot;ç”µè¯&quot;</span>);</span><br><span class="line">    writer.addHeaderAlias(<span class="string">&quot;email&quot;</span>, <span class="string">&quot;é‚®ç®±&quot;</span>);</span><br><span class="line">    writer.setOnlyAlias(<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">// 4. å†™å‡ºæ•°æ®åˆ°writer</span></span><br><span class="line">    writer.write(list);</span><br><span class="line">    <span class="comment">// 5. è®¾ç½®è¾“å‡ºçš„æ–‡ä»¶çš„åç§°ä»¥åŠè¾“å‡ºæµçš„å¤´ä¿¡æ¯</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> URLEncoder.encode(<span class="string">&quot;ç®¡ç†å‘˜ä¿¡æ¯&quot;</span>, StandardCharsets.UTF_8);</span><br><span class="line">    response.setContentType(<span class="string">&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8&quot;</span>);</span><br><span class="line">    response.setHeader(<span class="string">&quot;Content-disposition&quot;</span>, <span class="string">&quot;attachment;filename=&quot;</span> + fileName + <span class="string">&quot;.xlsx&quot;</span>);</span><br><span class="line">    <span class="comment">// 6. å†™å‡ºåˆ°è¾“å‡ºæµ å¹¶å…³é—­ writer</span></span><br><span class="line">    <span class="type">ServletOutputStream</span> <span class="variable">os</span> <span class="operator">=</span> response.getOutputStream();</span><br><span class="line">    writer.flush(os);</span><br><span class="line">    writer.close();</span><br><span class="line">    os.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥æ”¶å‰ç«¯ä¼ æ¥çš„idså‚æ•°ï¼Œå…ˆå°†æ¯ä¸ªidè½¬æ¢ä¸ºStringå­˜å‚¨åœ¨ä¸€ä¸ªString[]ä¸­ï¼Œç„¶åè½¬æˆIntegerå¯¹è±¡å­˜å‚¨åœ¨<code>List&lt;Integer&gt;</code>ä¸­ï¼Œç„¶åè°ƒç”¨Serviceå±‚æ¥å£ï¼Œå¹¶å°†è¿™ä¸ª<code>List&lt;Integer&gt;</code>ä¼ é€’ã€‚åé¢å’Œ<code>export</code>æ¥å£ä¸€è‡´ã€‚</p><p>ç„¶åæ˜¯Serviceå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Admin&gt; <span class="title function_">SelectByIds</span><span class="params">(List&lt;Integer&gt; ids)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> adminMapper.selectByIds(ids);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€æ˜¯Mapperå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Admin&gt; <span class="title function_">selectByIds</span><span class="params">(List&lt;Integer&gt; ids)</span>;</span><br></pre></td></tr></table></figure><p>XMLæ˜ å°„ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByIds&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.example.entity.Admin&quot;</span>&gt;</span></span><br><span class="line">    select * from `admin` where id in</span><br><span class="line">        <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span></span><br><span class="line">            #&#123;id&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span>ï¼š</span><br></pre></td></tr></table></figure><p>æ˜¯ MyBatis æä¾›çš„ä¸€ä¸ªåŠ¨æ€ SQL æ ‡ç­¾ï¼Œç”¨äºéå†é›†åˆã€‚</p><ul><li>collection=â€œlistâ€ï¼šæŒ‡å®šè¦éå†çš„é›†åˆï¼Œé€šå¸¸æ˜¯æ–¹æ³•å‚æ•°ä¼ é€’çš„ Listã€‚</li><li>item=â€œidâ€ï¼šæŒ‡å®šéå†æ—¶çš„æ¯ä¸ªå…ƒç´ çš„å˜é‡åã€‚</li><li>open=â€œ(â€ï¼šåœ¨éå†å¼€å§‹å‰æ·»åŠ çš„å­—ç¬¦ä¸²ï¼Œè¿™é‡Œæ˜¯å·¦æ‹¬å· (ã€‚</li><li>separator=â€œ,â€ï¼šæ¯ä¸ªå…ƒç´ ä¹‹é—´çš„åˆ†éš”ç¬¦ï¼Œè¿™é‡Œæ˜¯é€—å· ,ã€‚</li><li>close=â€œ)â€ï¼šåœ¨éå†ç»“æŸåæ·»åŠ çš„å­—ç¬¦ä¸²ï¼Œè¿™é‡Œæ˜¯å³æ‹¬å· )ã€‚</li><li>#{id}ï¼šè¿™æ˜¯ MyBatis çš„å ä½ç¬¦ï¼Œç”¨äºå°† id çš„å€¼æ’å…¥åˆ° SQL è¯­å¥ä¸­ã€‚</li></ul><p>è¿™ä¸ªæ˜ å°„çš„ä½œç”¨æ˜¯ç”Ÿæˆä¸€ä¸ª SQL æŸ¥è¯¢ï¼Œç”¨äºæ ¹æ®ä¸€ç»„ ID æ‰¹é‡æŸ¥è¯¢ admin è¡¨ä¸­çš„è®°å½•ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¼ å…¥çš„ list æ˜¯ [1, 2, 3]ï¼Œç”Ÿæˆçš„ SQL è¯­å¥å°†æ˜¯ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> `admin` <span class="keyword">where</span> id <span class="keyword">in</span> (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±èƒ½æ ¹æ®ä¼ å…¥çš„ ID åˆ—è¡¨æŸ¥è¯¢å¯¹åº”çš„è®°å½•ã€‚</p><p>è¿™æ ·å°±å®ç°è¿™ä¸ªé€‰æ‹©å¯¼å‡ºçš„åŠŸèƒ½äº†ã€‚</p><h1>4. æ‰¹é‡å¯¼å…¥</h1><h2 id="4-1-æµç¨‹">4.1 æµç¨‹</h2><ol><li>è·å–è¾“å…¥æµï¼Œæ„å»º Reader å¯¹è±¡</li><li>é€šè¿‡Reader è¯»å– excel é‡Œé¢çš„æ•°æ®</li><li>å°†æ•°æ®å†™åˆ°æ•°æ®åº“</li></ol><h2 id="4-2-å®šä¹‰åç«¯æ¥å£">4.2 å®šä¹‰åç«¯æ¥å£</h2><p>Controllerå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/import&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">importData</span><span class="params">(<span class="meta">@RequestParam(&quot;file&quot;)</span> MultipartFile file)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">// 1. è·å–è¾“å…¥æµï¼Œæ„å»º Reader å¯¹è±¡</span></span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> file.getInputStream();</span><br><span class="line">    <span class="type">ExcelReader</span> <span class="variable">reader</span> <span class="operator">=</span> ExcelUtil.getReader(inputStream);</span><br><span class="line">    <span class="comment">// 2. é€šè¿‡Reader è¯»å– excel é‡Œé¢çš„æ•°æ®</span></span><br><span class="line">    reader.addHeaderAlias(<span class="string">&quot;è´¦å·&quot;</span>, <span class="string">&quot;username&quot;</span>);</span><br><span class="line">    reader.addHeaderAlias(<span class="string">&quot;åç§°&quot;</span>, <span class="string">&quot;name&quot;</span>);</span><br><span class="line">    reader.addHeaderAlias(<span class="string">&quot;ç”µè¯&quot;</span>, <span class="string">&quot;phone&quot;</span>);</span><br><span class="line">    reader.addHeaderAlias( <span class="string">&quot;é‚®ç®±&quot;</span>, <span class="string">&quot;email&quot;</span>);</span><br><span class="line">    List&lt;Admin&gt; list = reader.readAll(Admin.class); <span class="comment">// å°†è¡¨æ ¼æ•°æ®è½¬æ¢ä¸ºList&lt;Admin&gt;</span></span><br><span class="line">    <span class="comment">// 3. å°†æ•°æ®å†™åˆ°æ•°æ®åº“</span></span><br><span class="line">    <span class="keyword">for</span> (Admin admin : list) &#123;</span><br><span class="line">        adminService.add(admin);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„Controllerå±‚ä¹‹é—´é€šè¿‡forå¾ªç¯ä¾æ¬¡è°ƒç”¨Serviceå±‚æ¥å£addæ¥å®ç°æ‰¹é‡å¯¼å…¥ã€‚</p><h2 id="4-3-å‰ç«¯ç»‘å®šäº‹ä»¶">4.3 å‰ç«¯ç»‘å®šäº‹ä»¶</h2><p>æŠŠæ‰¹é‡å¯¼å‡ºæŒ‰é’®æ”¹ä¸ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button type=<span class="string">&quot;primary&quot;</span> @click=<span class="string">&quot;handlerAdd&quot;</span>&gt;æ–°å¢&lt;/el-button&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;deleteBatch&quot;</span>&gt;</span>æ‰¹é‡åˆ é™¤<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">el-upload</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">action</span>=<span class="string">&quot;http://localhost:9999/admin/import&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">style</span>=<span class="string">&quot;display: inline-block; margin-left: 10px&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">:on-success</span>=<span class="string">&quot;handlerImport&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  :show-file-list=&quot;false&quot;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;success&quot;</span>&gt;</span>æ‰¹é‡å¯¼å…¥<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;info&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;exportData&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-left: 10px&quot;</span>&gt;</span>æ‰¹é‡å¯¼å‡º<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>ç„¶åå®šä¹‰handlerImportäº‹ä»¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handlerImport</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(<span class="string">&quot;æ‰¹é‡å¯¼å…¥æˆåŠŸ&quot;</span>)</span><br><span class="line">  <span class="title function_">load</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å®ç°äº†æ‰¹é‡å¯¼å…¥ã€‚</p><h1>å£°æ˜</h1><p>æœ¬æ–‡æ˜¯å¯¹Bç«™è§†é¢‘<a href="https://www.bilibili.com/video/BV1FBAmePEJS?spm_id_from=333.788.videopod.sections&amp;vd_source=a0f19e79b7da02f4fa318d91be5bc86a">ã€å¸¦å°ç™½åšæ¯•è®¾ã€‘07. Springboot3+Vue3å®ç°excelæ‰¹é‡å¯¼å…¥å¯¼å‡º</a>çš„å­¦ä¹ è®°å½•ï¼Œä¾µæƒè”ç³»åˆ ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Springboot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot3 + Vue3 å®ç°æ•°æ®çš„ç¼–è¾‘ä¸åˆ é™¤</title>
      <link href="/2025/03/16/project-test7/"/>
      <url>/2025/03/16/project-test7/</url>
      
        <content type="html"><![CDATA[<h1>1. ç¼–è¾‘æ•°æ®</h1><h2 id="1-1-æµç¨‹">1.1 æµç¨‹</h2><ol><li>åœ¨ç¼–è¾‘çš„æŒ‰é’®ä¸Šé¢åŠ ä¸Šç‚¹å‡»äº‹ä»¶</li><li>å®šä¹‰å¼¹çª—å’Œè¡¨å•çš„é¡µé¢ä»£ç </li><li>ç‚¹å‡»è§¦å‘å¼¹çª—æ‰“å¼€(å°†è¡Œå¯¹è±¡çš„æ•°æ® row æ·±åº¦æ‹·è´ç»™ form å¯¹è±¡)</li><li>è¡¨å•åšä¸€ä¸‹æ•°æ®ç»‘å®šä»¥åŠè¡¨å•éªŒè¯</li><li>åå°è¦æœ‰å¯¹åº”çš„ä¿®æ”¹çš„æ¥å£æ¥æ¥å—æ•°æ®</li><li>ä¿®æ”¹çš„æ¥å£è´Ÿè´£æŠŠæ•°æ®æ›´æ–°åˆ°æ•°æ®åº“é‡Œé¢</li><li>è¡¨å•è¾“å…¥æ•°æ®åç‚¹å‡»ç¡®è®¤æŒ‰é’®ï¼ŒæŠŠè¡¨å•çš„æ•°æ®ä¼ ç»™åå°æ¥å£</li><li>åœ¨ä¿®æ”¹æˆåŠŸä¹‹åå†æ¬¡åŠ è½½è¡¨æ ¼çš„æ•°æ®ï¼Œå…³é—­å¼¹çª—</li></ol><h2 id="1-2-å‰ç«¯æ·»åŠ æŒ‰é’®å¹¶ç»‘å®šäº‹ä»¶">1.2 å‰ç«¯æ·»åŠ æŒ‰é’®å¹¶ç»‘å®šäº‹ä»¶</h2><p>åœ¨å‰ç«¯çš„è¡¨å•ä¸­æ·»åŠ ç¼–è¾‘å’Œåˆ é™¤æŒ‰é’®ï¼Œç¼–è¾‘è¯¥è¡¨å•é¡¹æˆ–è€…ç›´æ¥åˆ é™¤ã€‚</p><p>å…ˆåœ¨å‰ç«¯æ·»åŠ æŒ‰é’®ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table :data=<span class="string">&quot;data.tableData&quot;</span> style=<span class="string">&quot;width: 100%&quot;</span> :header-cell-style=<span class="string">&quot;&#123;color: &#x27;#333&#x27;, backgroundColor: &#x27;#eaf4FF&#x27;&#125;&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span> <span class="attr">width</span>=<span class="string">&quot;55&quot;</span>/&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span> <span class="attr">label</span>=<span class="string">&quot;è´¦å·&quot;</span>/&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span> <span class="attr">label</span>=<span class="string">&quot;åç§°&quot;</span>/&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;phone&quot;</span> <span class="attr">label</span>=<span class="string">&quot;ç”µè¯&quot;</span>/&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;email&quot;</span> <span class="attr">label</span>=<span class="string">&quot;é‚®ç®±&quot;</span>/&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;æ“ä½œ&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">icon</span>=<span class="string">&quot;Edit&quot;</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">icon</span>=<span class="string">&quot;Delete&quot;</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line">&lt;/el-table&gt;</span><br></pre></td></tr></table></figure><p>ä¸­çš„è¿™ä¸¤è¡Œï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button type=<span class="string">&quot;primary&quot;</span> icon=<span class="string">&quot;Edit&quot;</span> circle&gt;&lt;/el-button&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">icon</span>=<span class="string">&quot;Delete&quot;</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>ç„¶åå‰ç«¯ï¼š<br><img src="image.png" alt="alt text"><br><img src="/images/project-test7_1.png" alt=""></p><p>ç»™ç¼–è¾‘æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶<code>@click=&quot;handlerEdit()&quot;</code>ï¼Œå¹¶ä¸”éœ€è¦å°†é‚£ä¸€è¡Œçš„æ•°æ®æ‹¿è¿‡æ¥ã€‚</p><p>Element Plus çš„ el-table åœ¨æ¯ä¸€è¡Œéƒ½ä¼šä¸ºå…¶ slot æä¾›ä¸€ä¸ªä½œç”¨åŸŸå¯¹è±¡ï¼ˆscopeï¼‰ï¼Œè¯¥å¯¹è±¡åŒ…å«äº†å½“å‰è¡Œçš„æ•°æ®ï¼ˆå³ scope.rowï¼‰ï¼Œä»¥åŠå½“å‰åˆ—ä¿¡æ¯ã€‚ä½¿ç”¨ &lt;template #default=â€œscopeâ€&gt; å°±èƒ½æ‹¿åˆ°åŒ…å«ä¸€è¡Œæ•°æ®çš„ scope å¯¹è±¡ï¼Œç„¶åé€šè¿‡ scope.row è·å–è¯¥è¡Œçš„å®Œæ•´æ•°æ®ä¿¡æ¯</p><p>å› æ­¤ä¿®æ”¹ä¸ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;template #<span class="keyword">default</span>=<span class="string">&quot;scope&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">icon</span>=<span class="string">&quot;Edit&quot;</span> <span class="attr">circle</span> @<span class="attr">click</span>=<span class="string">&quot;handlerEdit(scope.row)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">icon</span>=<span class="string">&quot;Delete&quot;</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>å¹¶å°† scope.row ä¹Ÿå°±æ˜¯å°†é‚£è¡Œæ•°æ®ä¼ é€’ç»™ handlerEdit ã€‚</p><p>ç„¶åå®šä¹‰ handlerEdit æ–¹æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const handlerEdit = (row) =&gt; &#123;</span><br><span class="line">  data.form = row</span><br><span class="line">  data.formVisible = true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŠŠè¡Œå¯¹è±¡rowèµ‹å€¼ç»™dataçš„formå¯¹è±¡ï¼Œç„¶åé€šè¿‡formå¯¹è±¡ä¼ é€’ç»™åç«¯æ¥å£ã€‚ä½†æ˜¯å­˜åœ¨é—®é¢˜ã€‚</p><p>å½“ç‚¹ä¸‹ç¼–è¾‘æŒ‰é’®æ—¶ï¼Œå»ç¼–è¾‘åï¼Œæ²¡æŒ‰ä¸‹ä¿å­˜ï¼Œå‰ç«¯æ¸²æŸ“çš„æ•°æ®å°±å‘ç”Ÿå˜åŒ–äº†ã€‚è¿™æ˜¯å› ä¸º<strong>æµ…æ‹·è´</strong>çš„é—®é¢˜ã€‚</p><p>ç‚¹å‡»ç¼–è¾‘æŒ‰é’®æ—¶ç›´æ¥å°† tableData ä¸­æŸä¸€è¡Œå¯¹è±¡çš„å¼•ç”¨èµ‹å€¼ç»™äº† data.formï¼Œè€Œå¯¹è±¡æ˜¯<strong>å¼•ç”¨ç±»å‹</strong>ã€‚å¦‚æœåœ¨æœªä¿å­˜å‰ä¿®æ”¹äº†è¡¨å•æ•°æ®ï¼Œç”±äºå®ƒä»¬<strong>å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡</strong>ï¼Œè¡¨æ ¼ä¸­çš„æ•°æ®ä¹Ÿä¼šéšä¹‹å˜åŒ–ã€‚ä¸ºé¿å…è¿™ç§æƒ…å†µï¼Œå› ä½¿ç”¨<strong>æ·±æ‹·è´</strong>ï¼Œåœ¨èµ‹å€¼æ—¶åˆ›å»ºä¸€ä¸ªå‰¯æœ¬ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handlerEdit</span> = (<span class="params">row</span>) =&gt; &#123;</span><br><span class="line">  data.<span class="property">form</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(row))</span><br><span class="line">  data.<span class="property">formVisible</span> = <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>JSON.parse(JSON.stringify(row))</code>é€šè¿‡ JSON çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–åˆ›å»ºäº†ä¸€ä¸ª<strong>æ·±æ‹·è´</strong>ï¼Œç”Ÿæˆäº†ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸åŸå§‹å¯¹è±¡å®Œå…¨ç‹¬ç«‹ã€‚</p><h2 id="1-3-æ·»åŠ åç«¯æ¥å£">1.3 æ·»åŠ åç«¯æ¥å£</h2><p>ç°åœ¨å¦‚æœç‚¹å‡»ç¼–è¾‘æŒ‰é’®ï¼Œç¼–è¾‘åç‚¹å‡»ä¿å­˜æŒ‰é’®æ—¶è§¦å‘çš„åç«¯æ¥å£æ˜¯<code>add</code>æ¥å£ã€‚ä¹Ÿå°±æ˜¯æ–°å¢äº†ä¸€ä¸ªæ•°æ®ï¼Œè€Œä¸æ˜¯æ›´æ–°ã€‚å› æ­¤åç«¯æ·»åŠ ä¸€ä¸ª<code>update</code>æ¥å£ã€‚</p><p>controllerå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/update&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> Admin admin)</span> &#123;</span><br><span class="line">    adminService.update(admin);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>serviceå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Admin admin)</span> &#123;</span><br><span class="line">    adminMapper.updateById(admin);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>mapperå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">updateById</span><span class="params">(Admin admin)</span>;</span><br></pre></td></tr></table></figure><p>XMLæ˜ å°„ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateById&quot;</span>&gt;</span></span><br><span class="line">    update `admin` set username = #&#123;username&#125;, password = #&#123;password&#125;, name = #&#123;name&#125;, phone = #&#123;phone&#125;, email = #&#123;email&#125;</span><br><span class="line">    where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure><p>XMLæ˜ å°„é‡Œæœ€åçš„<code>where id = #&#123;id&#125;</code>å¾ˆå…³é”®ï¼Œå› ä¸ºä¿®æ”¹ä¸€å®šä¼šæœ‰ä¸€ä¸ªä¸»é”®IDï¼Œæ²¡æœ‰å°±ä¸èƒ½ä¿®æ”¹æ•°æ®ã€‚</p><h2 id="1-4-å‰ç«¯æ·»åŠ ç»‘å®šçš„äº‹ä»¶">1.4 å‰ç«¯æ·»åŠ ç»‘å®šçš„äº‹ä»¶</h2><p>æ–°å¢æ•°æ®æ—¶ç‚¹å‡»ä¿å­˜æŒ‰é’®åï¼Œè°ƒç”¨äº†å‰ç«¯ä¸­å®šä¹‰çš„<code>add</code>æ–¹æ³•å»å‘åç«¯å‘é€è¯·æ±‚ã€‚</p><p>å’Œæ–°å¢æ•°æ®ç±»ä¼¼ï¼Œä¿®æ”¹æ—¶ä¹Ÿå¦‚æ­¤ã€‚å‰ç«¯æ·»åŠ ä¸€ä¸ªupdateæ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">update</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  formRef.<span class="property">value</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (valid) &#123; <span class="comment">// éªŒè¯é€šè¿‡æ—¶</span></span><br><span class="line">      request.<span class="title function_">put</span>(<span class="string">&quot;/admin/update&quot;</span>, data.<span class="property">form</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="string">&#x27;200&#x27;</span>) &#123;</span><br><span class="line">          data.<span class="property">formVisible</span> = <span class="literal">false</span></span><br><span class="line">          <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(<span class="string">&#x27;ä¿®æ”¹æˆåŠŸ&#x27;</span>)</span><br><span class="line">          <span class="title function_">load</span>()</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          data.<span class="property">formVisible</span> = <span class="literal">false</span></span><br><span class="line">          <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™é‡Œå‘åç«¯æäº¤è¯·æ±‚ä½¿ç”¨çš„æ˜¯<code>put</code>è€Œä¸æ˜¯<code>post</code>ï¼Œè¿™æ˜¯å› ä¸ºï¼š<br>åœ¨ RESTful é£æ ¼ä¸­ï¼Œå‘åå°æäº¤è¯·æ±‚æ—¶é€šå¸¸ä½¿ç”¨ä¸åŒçš„ HTTP æ–¹æ³•æ¥è¡¨è¾¾ä¸åŒçš„æ“ä½œè¯­ä¹‰ï¼š</p><ul><li>POST ç”¨äºæ–°å¢æ•°æ®ï¼Œå› ä¸ºæ–°å¢æ“ä½œæ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„èµ„æºã€‚</li><li>PUT ç”¨äºä¿®æ”¹æ•°æ®ï¼Œå› ä¸ºä¿®æ”¹æ“ä½œæ˜¯æ›´æ–°å·²å­˜åœ¨çš„èµ„æºã€‚<br>è¿™ç§åŒºåˆ†ä¸ä»…è®©æ¥å£è®¾è®¡æ›´ç¬¦åˆ HTTP æ ‡å‡†ï¼Œä¹Ÿè®©ä»£ç æ›´å…·å¯è¯»æ€§ã€‚</li></ul><p>æ¥ä¸‹æ¥è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œç‚¹å‡»ç¼–è¾‘æŒ‰é’®åè¿›è¡Œä¿®æ”¹ï¼Œç„¶åç‚¹å‡»ä¿å­˜æŒ‰é’®ã€‚è¿™ä¸ªä¿å­˜æŒ‰é’®ç»‘å®šçš„äº‹ä»¶æ˜¯<code>add</code>ï¼Œæ€ä¹ˆè®©æ–°å¢çš„ä¿å­˜æŒ‰é’®å’Œç¼–è¾‘çš„ä¿å­˜æŒ‰é’®ç»‘å®šä¸åŒçš„äº‹ä»¶ã€‚</p><p>è®©ä¿å­˜æŒ‰é’®<strong>ç»‘å®šsaveäº‹ä»¶</strong>ï¼Œç„¶åé‡æ–°å®šä¹‰ä¸€ä¸ªsaveæ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">save</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  data.<span class="property">form</span>.<span class="property">id</span> ? <span class="title function_">update</span>() : <span class="title function_">add</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>saveæ–¹æ³•åˆ¤æ–­formå¯¹è±¡é‡Œçš„idå±æ€§æ¥åˆ¤æ–­ï¼Œå¦‚æœidä¸ä¸ºç©ºå°±æ‰§è¡Œupdateå¦åˆ™æ‰§è¡Œaddã€‚è¿™æ ·å°±è®©ä¿å­˜æŒ‰é’®åŒæ—¶å…¼å®¹äº†updateå’Œaddã€‚</p><p>æ­¤æ—¶å†å»ç¼–è¾‘æ•°æ®åä¿å­˜ï¼Œæç¤º<code>æœªæ‰¾åˆ°æ¥å£</code>ï¼ŒçŠ¶æ€ç ä¸º404ã€‚</p><p>åŸå› æ˜¯å‰ç«¯è°ƒç”¨çš„æ˜¯ PUT è¯·æ±‚ï¼Œè€Œåç«¯çš„ <code>AdminController.update</code> æ¥å£ä½¿ç”¨çš„æ˜¯ @PostMappingã€‚HTTP æ–¹æ³•ä¸åŒ¹é…å¯¼è‡´è·¯ç”±æ‰¾ä¸åˆ°ï¼Œä»è€Œè¿”å› 404ã€‚ä¿®æ”¹åç«¯æ˜ å°„ä¸º @PutMapping å³å¯ã€‚</p><h1>2. åˆ é™¤æ•°æ®</h1><h2 id="2-1-ç»‘å®šäº‹ä»¶å¹¶å®šä¹‰å‰ç«¯æ¥å£">2.1 ç»‘å®šäº‹ä»¶å¹¶å®šä¹‰å‰ç«¯æ¥å£</h2><p>å°†åˆ é™¤æŒ‰é’®ç»‘å®šäº‹ä»¶ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button type=<span class="string">&quot;danger&quot;</span> icon=<span class="string">&quot;Delete&quot;</span> circle <span class="meta">@click</span>=<span class="string">&quot;del(scope.row.id)&quot;</span>&gt;&lt;/el-button&gt;</span><br></pre></td></tr></table></figure><p>ç»‘å®š<code>del</code>äº‹ä»¶ï¼Œæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯é‚£è¡Œæ•°æ®çš„idã€‚</p><p>ç„¶åå®šä¹‰delæ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">del</span> = (<span class="params">id</span>) =&gt; &#123;</span><br><span class="line">  <span class="title class_">ElMessageBox</span>.<span class="title function_">confirm</span>(<span class="string">&quot;è¯¥æ“ä½œä¸å¯é€†ï¼Œæ‚¨ç¡®è®¤åˆ é™¤æ”¹è¡Œæ•°æ®å—ï¼Ÿ&quot;</span>, <span class="string">&#x27;åˆ é™¤ç¡®è®¤&#x27;</span>, &#123;<span class="attr">type</span>: <span class="string">&#x27;warning&#x27;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    request.<span class="title function_">delete</span>(<span class="string">&#x27;/admin/delete/&#x27;</span> + id).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="string">&#x27;200&#x27;</span>) &#123;</span><br><span class="line">        <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(<span class="string">&#x27;åˆ é™¤æˆåŠŸ&#x27;</span>)</span><br><span class="line">        <span class="title function_">load</span>()</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-2-å®šä¹‰åç«¯æ¥å£">2.2 å®šä¹‰åç«¯æ¥å£</h2><p>å…ˆæ˜¯controllerå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DeleteMapping(&quot;/delete/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span> &#123;</span><br><span class="line">    adminService.delete(admin);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ·»åŠ <code>@DeleteMapping</code>æ³¨è§£ï¼Œè¡¨ç¤ºè¯¥æ–¹æ³•ä¸“é—¨å¤„ç† HTTP DELETE è¯·æ±‚ï¼›åé¢çš„<code>/&#123;id&#125;</code>æ˜¯è·¯å¾„å‚æ•°çš„å ä½ç¬¦ï¼Œå®ƒå…è®¸å®¢æˆ·ç«¯é€šè¿‡ URL ä¼ é€’ä¸€ä¸ªå…·ä½“çš„ id å€¼ã€‚</p><p>æ–¹æ³•å‚æ•°ä¸Šçš„ <code>@PathVariable Integer id</code> è¡¨ç¤ºå°† URL ä¸­å¯¹åº”ä½ç½®çš„å‚æ•°è§£æå¹¶èµ‹å€¼ç»™ <code>id</code> å‚æ•°ï¼Œä»è€Œåœ¨æ–¹æ³•å†…éƒ¨ä½¿ç”¨ã€‚</p><p>ä¾‹å¦‚ï¼Œå½“è¯·æ±‚ DELETE <code>/admin/delete/5</code> æ—¶ï¼ŒSpring ä¼šå°† 5 èµ‹å€¼ç»™å‚æ•° <code>id</code>ã€‚</p><p>ç„¶åserviceå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">    adminMapper.deleteById(id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åmapperå±‚ï¼Œç›´æ¥ç”¨<strong>æ³¨è§£å¼SQL</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Delete(&quot;delete from `admin` where id = #&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Integer id)</span>;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å®ç°äº†å•è¡Œåˆ é™¤ã€‚</p><h1>3. æ‰¹é‡åˆ é™¤</h1><h2 id="3-1-ç»‘å®šäº‹ä»¶">3.1 ç»‘å®šäº‹ä»¶</h2><p>el-tableæœ‰ä¸€ä¸ªäº‹ä»¶<code>@selection-change</code>ï¼Œè¿™ä¸ªå°±æ˜¯å¤šé€‰äº‹ä»¶ã€‚</p><p>å› æ­¤ç»™el-tableæ·»åŠ <code>@selection-change=&quot;handlerSelectionChange(rows)&quot;</code>ï¼Œç„¶åå®šä¹‰handlerSelectionChangeæ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handlerSelectionChange</span> = (<span class="params">rows</span>) =&gt; &#123;</span><br><span class="line">    data.<span class="property">rows</span> = rows</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å®ç°äº†é€‰ä¸­å¤šè¡Œï¼Œç„¶åå°±æ˜¯ç‚¹å‡»<code>æ‰¹é‡åˆ é™¤</code>æŒ‰é’®åˆ é™¤ã€‚</p><p>å› æ­¤<code>æ‰¹é‡åˆ é™¤</code>æŒ‰é’®ä¹Ÿè¦ç»‘å®šäº‹ä»¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button type=<span class="string">&quot;danger&quot;</span> @click=<span class="string">&quot;deleteBatch&quot;</span>&gt;æ‰¹é‡åˆ é™¤&lt;/el-button&gt;</span><br></pre></td></tr></table></figure><p>ç„¶åå®šä¹‰deleteBatchæ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">deleteBatch</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (data.<span class="property">rows</span>.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="title class_">ElMessage</span>.<span class="title function_">warning</span>(<span class="string">&#x27;è¯·é€‰æ‹©åå†è¿›è¡Œæ­¤æ“ä½œ&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title class_">ElMessageBox</span>.<span class="title function_">confirm</span>(<span class="string">&quot;è¯¥æ“ä½œä¸å¯é€†ï¼Œæ‚¨ç¡®è®¤åˆ é™¤å—ï¼Ÿ&quot;</span>, <span class="string">&#x27;åˆ é™¤ç¡®è®¤&#x27;</span>, &#123;<span class="attr">type</span>: <span class="string">&#x27;warning&#x27;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    request.<span class="title function_">delete</span>(<span class="string">&#x27;/admin/deleteBatch/&#x27;</span>, &#123;<span class="attr">data</span>: data.<span class="property">rows</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="string">&#x27;200&#x27;</span>) &#123;</span><br><span class="line">        <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(<span class="string">&#x27;æ‰¹é‡åˆ é™¤æˆåŠŸ&#x27;</span>)</span><br><span class="line">        <span class="title function_">load</span>()</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–¹æ³•ä¸€å¼€å§‹å…ˆæ˜¯åˆ¤æ–­æœ‰æ²¡æœ‰è¿›è¡Œé€‰æ‹©ã€‚å¦åˆ™ï¼Œä¸é€‰æ‹©ä»»ä½•è¡Œæ•°æ®ä¹Ÿèƒ½è¿›è¡Œæ“ä½œï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸åˆé€‚çš„ã€‚</p><p>å‘é€è¯·æ±‚æ—¶å°±ä¸èƒ½åƒå•ä¸ªåˆ é™¤ä¸€æ ·å‘é€ä¸€ä¸ªidäº†ï¼Œå¾—å‘é€æˆæ‰¹çš„idã€‚è¿™é‡Œå…¶å®æ˜¯å°†è¦åˆ é™¤çš„æ•°æ®å¯¹è±¡çš„æ‰€æœ‰å±æ€§éƒ½å‘è¿‡å»äº†ã€‚</p><p>Axios çš„ delete æ–¹æ³•å…è®¸åœ¨é…ç½®å¯¹è±¡ä¸­é€šè¿‡ data å±æ€§ä¼ é€’è¯·æ±‚ä½“ï¼Œä»è€Œå®ç°å°†å¤šä¸ª id ä½œä¸º JSON æ•°æ®å‘é€åˆ°åç«¯ï¼Œä»è€Œå®Œæˆæ‰¹é‡åˆ é™¤æ“ä½œ</p><p>deleteBatch é€šè¿‡ Axios çš„ delete æ–¹æ³•ä¼ é€’äº†ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œå…¶ä¸­é…ç½®é¡¹ data åŒ…å«äº†æ‰€æœ‰é€‰ä¸­çš„æ•°æ®ã€‚Axios ä¼šå°† { data: data.rows } ä¸­çš„ data ä½œä¸ºè¯·æ±‚ä½“å‘é€å‡ºå»ï¼Œä¸”æŒ‰ç…§ JSON æ ¼å¼ä¼ è¾“ã€‚åç«¯å°±å¯ä»¥é€šè¿‡<code>@RequestBody List&lt;Admin&gt; admin</code>æ¥æ¥æ”¶è¿™ä¸€æ‰¹è¦åˆ é™¤çš„æ•°æ®å¯¹è±¡ã€‚</p><h2 id="3-2-å®šä¹‰åç«¯æ¥å£">3.2 å®šä¹‰åç«¯æ¥å£</h2><p>controllerå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DeleteMapping(&quot;/deleteBatch&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">deleteBatch</span><span class="params">(<span class="meta">@RequestBody</span> List&lt;Admin&gt; list)</span> &#123;</span><br><span class="line">    adminService.deleteBatch(list);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>serviceå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteBatch</span><span class="params">(List&lt;Admin&gt; list)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (Admin admin : list) &#123;</span><br><span class="line">        adminMapper.deleteById(admin.getId());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œç›´æ¥è°ƒç”¨mapperå±‚å®šä¹‰å¥½çš„å•ä¸ªåˆ é™¤çš„æ¥å£ã€‚</p><p>è¿™æ ·å°±å®ç°äº†æ‰¹é‡åˆ é™¤äº†ã€‚</p><p>å¦å¤–ï¼Œå¿…é¡»ç»™Admin.vueçš„dataå¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ª<code>rows: []</code>å±æ€§ï¼Œæ³¨æ„æ˜¯æ–¹æ‹¬å·ï¼Œä¸æ˜¯èŠ±æ‹¬å·ã€‚</p><p><code>data.rows</code> ç”¨äºå­˜å‚¨é€‰ä¸­çš„å¤šè¡Œæ•°æ®ï¼Œè¿™äº›æ•°æ®éœ€è¦ä½œä¸ºä¸€ä¸ªé›†åˆå¤„ç†ã€‚æ•°ç»„ (<code>[]</code>) æ˜¯ä¸€ç§é€‚åˆå­˜å‚¨å¤šä¸ªå…ƒç´ çš„æ•°æ®ç»“æ„ï¼Œå¹¶ä¸”å…·æœ‰ <code>length</code> å±æ€§å’Œå¸¸ç”¨çš„æ•°ç»„æ–¹æ³•ï¼ˆå¦‚ <code>push</code>, <code>splice</code> ç­‰ï¼‰ï¼Œä¾¿äºåˆ¤æ–­æ•°æ®æ•°é‡å’Œæ“ä½œæ•°æ®é›†åˆã€‚è€Œ <code>&#123;&#125;</code> è¡¨ç¤ºä¸€ä¸ªå¯¹è±¡ï¼Œä¸å…·å¤‡è¿™äº›ç‰¹æ€§ï¼Œæ‰€ä»¥ä¸èƒ½æ­£ç¡®åˆ¤æ–­é€‰ä¸­è¡Œçš„æ•°é‡ï¼Œä¹Ÿæ— æ³•ä½œä¸ºä¸€ä¸ªåˆ—è¡¨è¿›è¡Œè¿­ä»£å’Œåˆ é™¤æ“ä½œã€‚å› æ­¤ï¼Œå¿…é¡»ä½¿ç”¨æ•°ç»„ <code>[]</code> æ¥å­˜å‚¨å¤šä¸ªé€‰ä¸­è¡Œçš„æ•°æ®ã€‚</p><h1>å£°æ˜</h1><p>æœ¬æ–‡æ˜¯å¯¹Bç«™è§†é¢‘<a href="https://www.bilibili.com/video/BV1w3PuewEfk?spm_id_from=333.788.videopod.sections&amp;vd_source=a0f19e79b7da02f4fa318d91be5bc86a">ã€å¸¦å°ç™½åšæ¯•è®¾ã€‘06. Springboot3+vue3å®ç°å¢åˆ æ”¹æŸ¥ã€åˆ†é¡µæŸ¥è¯¢ã€æ‰¹é‡åˆ é™¤ï¼ˆä¸‹ï¼‰</a>çš„å­¦ä¹ è®°å½•ï¼Œä¾µæƒè”ç³»åˆ ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Springboot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot3 + Vue3 å®ç°è¡¨å•éªŒè¯</title>
      <link href="/2025/03/15/project-test6/"/>
      <url>/2025/03/15/project-test6/</url>
      
        <content type="html"><![CDATA[<h1>1. æ–°å¢æ•°æ®</h1><ul><li>åŸºæœ¬æ­¥éª¤ï¼š<ol><li>åœ¨æ–°å¢çš„æŒ‰é’®ä¸Šé¢åŠ ä¸Šç‚¹å‡»äº‹ä»¶</li><li>å®šä¹‰å¼¹çª—å’Œè¡¨å•</li><li>ç‚¹å‡»è§¦å‘å¼¹çª—æ‰“å¼€</li><li>è¡¨å•åšä¸€ä¸‹æ•°æ®ç»‘å®šä»¥åŠè¡¨å•éªŒè¯</li><li>åå°è¦æœ‰å¯¹åº”çš„æ–°å¢çš„æ¥å£æ¥æ¥å—æ•°æ®</li><li>æ–°å¢çš„æ¥å£è´Ÿè´£æŠŠæ•°æ®æ’å…¥åˆ°æ•°æ®åº“é‡Œé¢</li><li>è¡¨å•è¾“å…¥æ•°æ®åç‚¹å‡»ç¡®è®¤æŒ‰é’®ï¼ŒæŠŠè¡¨å•çš„æ•°æ®ä¼ ç»™åå°æ¥å£</li><li>åœ¨æ–°å¢æˆåŠŸåé‡æ–°åŠ è½½è¡¨æ ¼</li></ol></li></ul><hr><h1>2. æŒ‰é’®ç»‘å®šäº‹ä»¶</h1><p>ä¸€å…±æœ‰ä¸‰ä¸ªæŒ‰é’®éœ€è¦ç»‘å®šäº‹ä»¶ï¼š</p><ul><li>æ–°å¢æŒ‰é’®<ul><li>ç‚¹å‡»å¼¹å‡ºè¡¨å•</li></ul></li><li>ç‚¹å‡»æ–°å¢æŒ‰é’®åçš„å¼¹çª—ä¸­çš„ä¿å­˜å’Œå–æ¶ˆæŒ‰é’®<ul><li>ä¿å­˜æŒ‰é’®<ul><li>ç‚¹å‡»ä¿å­˜è°ƒç”¨åå°æ¥å£æ’å…¥æ•°æ®</li><li>æ¸…ç©ºå‰ç«¯ç”¨äºæ¥æ”¶æ•°æ®çš„å¯¹è±¡</li><li>åˆ·æ–°åŠ è½½</li></ul></li><li>å–æ¶ˆæŒ‰é’®<ul><li>ç‚¹å‡»å–æ¶ˆ</li><li>æ¸…ç©ºå‰ç«¯ç”¨äºæ¥æ”¶æ•°æ®çš„å¯¹è±¡</li></ul></li></ul></li></ul><p>åœ¨Admin.vueä¸­çš„â€œæ–°å¢â€æŒ‰é’®ä¸­æ·»åŠ <code>@click=&quot;handlerAdd&quot;</code>ï¼ŒhanleAddå‡½æ•°æ˜¯éœ€è¦æˆ‘ä»¬å®ç°çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºæ–°å¢ã€‚</p><hr><h1>3. å®šä¹‰å¼¹çª—å’Œè¡¨å•</h1><p>ä»Element-Pluså®˜ç½‘ç›´æ¥æ‰¾ä¸€ä¸ªæ”¹ä¸€æ”¹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-dialog title=<span class="string">&quot;æ–°å¢ç®¡ç†å‘˜ä¿¡æ¯&quot;</span> v-model=<span class="string">&quot;data.formVisible&quot;</span> width=<span class="string">&quot;500&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;data.form&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;è´¦å·&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.username&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;åç§°&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.name&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;ç”µè¯&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.phone&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;é‚®ç®±&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.email&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> #<span class="attr">footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;data.formVisible = false&quot;</span>&gt;</span>å– æ¶ˆ<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;data.formVisible = false&quot;</span>&gt;</span>ä¿ å­˜<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">&lt;/el-dialog&gt;</span><br></pre></td></tr></table></figure><p>ç›´æ¥ç²˜è´´åˆ°Admin.vueä¸­æœ€åä¸€ä¸ª<code>&lt;/div&gt;</code>çš„å‰é¢ï¼Œå¹¶å°†<code>v-model</code>è®¾ç½®ä¸º<code>data.formVisible</code>ï¼ˆåœ¨ Vue ä¸­ï¼Œv-model æ˜¯ä¸€ç§ç”¨äºå®ç°è¡¨å•å…ƒç´ å’Œç»„ä»¶æ•°æ®çš„åŒå‘ç»‘å®šçš„è¯­æ³•ç³–ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä½ åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ v-model æ—¶ï¼ŒVueä¼šè‡ªåŠ¨å°†ç»„ä»¶çš„å€¼ä¸ä½ çš„å“åº”å¼æ•°æ®è¿›è¡Œç»‘å®šï¼Œå¹¶åœ¨æ•°æ®æˆ–è§†å›¾å˜åŒ–æ—¶è‡ªåŠ¨åŒæ­¥æ›´æ–°ã€‚ä¾‹å¦‚ï¼Œåœ¨ Admin.vue ä¸­ï¼š</p><p>åœ¨<code>&lt;el-input v-model=&quot;data.username&quot;&gt;</code>ä¸­ï¼Œè¾“å…¥æ¡†çš„å†…å®¹ä¼šå’Œ data.username ç»‘å®šã€‚<br>åœ¨<code>&lt;el-pagination v-model:current-page=&quot;data.pageNum&quot;&gt;</code>ä¸­ï¼Œå½“å‰é¡µç ä¼šå’Œ data.pageNum åŒæ­¥ï¼Œå½“ç”¨æˆ·ç¿»é¡µæ—¶ï¼Œdata.pageNum è‡ªåŠ¨æ›´æ–°ã€‚<br>è¿™ç§åŒå‘ç»‘å®šå¯ä»¥å‡å°‘æ‰‹åŠ¨ç›‘å¬äº‹ä»¶å’Œæ›´æ–°æ•°æ®çš„ä»£ç é‡ï¼Œä½¿å¾—æ•°æ®ä¸è§†å›¾çš„åŒæ­¥æ›´åŠ ç®€æ´å’Œé«˜æ•ˆï¼‰ã€‚</p><p>ç„¶ååœ¨dataä¸­æ–°å¢ä¸€ä¸ª<code>formVisible</code>å±æ€§ï¼Œå¹¶è®¾ç½®é»˜è®¤å€¼ä¸ºfalseï¼Œä»¥åŠä¸€ä¸ªformç©ºå¯¹è±¡ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">pageNum</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">pageSize</span>: <span class="number">5</span>,</span><br><span class="line">  <span class="attr">total</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">tableData</span>: [],</span><br><span class="line">  <span class="attr">formVisible</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">form</span>: &#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>formVisibleè®¾ç½®ä¸ºfalseæ„ä¸ºå¼¹çª—é»˜è®¤ä¸å¯è§ã€‚å› æ­¤è¦æ˜¾ç¤ºå¼¹å‡ºåªéœ€åœ¨handlerAddå‡½æ•°é‡Œè®¾ç½®formVisibleä¸ºtrueå³å¯ã€‚</p><p>formå¯¹è±¡æ˜¯ç”¨æ¥ç»‘å®šæ•°æ®çš„ï¼Œå®ƒå¯ä»¥åœ¨å¼¹çª—æ‰“å¼€æ—¶æ¥æ”¶æ•°æ®ã€‚<code>el-form-item</code>ç»„ä»¶é‡Œçš„<code>v-model</code>å±æ€§å°±æ˜¯ç”¨æ¥ç»‘å®šå¯¹åº”çš„å±æ€§çš„ã€‚</p><p>åœ¨å¼¹çª—å…³é—­åè¦æ‰‹åŠ¨æ¸…ç©ºformå¯¹è±¡ï¼Œä¸ç„¶ä¸‹ä¸€æ¬¡åœ¨æ‰“å¼€å¼¹çª—æ—¶ä¼šæœ‰ä¸Šä¸€æ¬¡çš„ä¿¡æ¯çš„æ®‹ç•™ã€‚</p><p>å› æ­¤<code>handlerAdd</code>å‡½æ•°ä¸ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handlerAdd</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  data.<span class="property">formVisible</span> = <span class="literal">true</span></span><br><span class="line">  data.<span class="property">form</span> = &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨å†å»ç‚¹å‡»æ–°å¢æŒ‰é’®ä¼šå¼¹å‡ºï¼š<br><img src="image.png" alt="alt text"><br><img src="/images/project-test6_1.png" alt=""></p><hr><h1>4. æ–°å¢æ¥å£</h1><h2 id="4-1-controllerå±‚">4.1 controllerå±‚</h2><p>åœ¨controlleræ¥å£å±‚src/main/java/com/example/controller/AdminController.javaä¸­å®šä¹‰æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/add&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">add</span><span class="params">(<span class="meta">@RequestBody</span> Admin admin)</span> &#123;</span><br><span class="line">    adminService.add(admin);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>@PostMapping</code>æ³¨è§£å‘Šè¯‰springè¿™æ˜¯ä¸€ä¸ªPOSTè¯·æ±‚ã€‚POST è¯·æ±‚ä¸€èˆ¬ç”¨äºå‘æœåŠ¡å™¨æäº¤æ•°æ®ï¼Œåˆ›å»ºèµ„æºã€‚è€Œ GET è¯·æ±‚é€šå¸¸ç”¨äºæŸ¥è¯¢æ•°æ®ï¼Œä¸é€‚åˆç”¨äºæ•°æ®æ–°å¢ã€‚ä½¿ç”¨ POST æ›´ç¬¦åˆ HTTP åè®®è®¾è®¡åŸåˆ™ã€‚</p><p><code>@RequestBody</code>æ³¨è§£å‘Šè¯‰ Spring ä»è¯·æ±‚ä½“ä¸­è§£æ JSON æ•°æ®ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸º Admin å¯¹è±¡ã€‚ï¼ˆå› ä¸ºåœ¨ POST è¯·æ±‚ä¸­ï¼Œæ–°å¢çš„èµ„æºæ•°æ®é€šå¸¸è¾ƒå¤šä¸”ç»“æ„å¤æ‚ï¼Œå°†æ•°æ®æ”¾åœ¨è¯·æ±‚ä½“ä¸­ä»¥ JSON æ ¼å¼ä¼ é€’æ›´ä¸ºåˆç†ã€‚ä½¿ç”¨ @RequestBody æ³¨è§£ï¼ŒSpring ä¼šè‡ªåŠ¨å°†è¯·æ±‚ä½“ä¸­çš„ JSON æ•°æ®<strong>ååºåˆ—åŒ–</strong>ä¸º Admin å¯¹è±¡ï¼Œä»è€Œæ›´æ–¹ä¾¿åœ°å¤„ç†å¤æ‚å¯¹è±¡ï¼‰</p><h2 id="4-2-serviceå±‚">4.2 serviceå±‚</h2><p>æ¥ä¸‹æ¥åœ¨src/main/java/com/example/service/AdminService.javaä¸­æ·»åŠ serviceå±‚æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Admin admin)</span> &#123;</span><br><span class="line">    adminMapper.insert(admin);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-3-mapperå±‚">4.3 mapperå±‚</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/main/java/com/example/mapper/AdminMapper.java</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Admin admin)</span> &#123;</span><br><span class="line">        adminMapper.insert(admin);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>ç„¶åXMLæ˜ å°„ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// src/main/resources/mapper/AdminMapper.xml</span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span>&gt;</span></span><br><span class="line">    insert into `admin` (username,  password, name, phone, email)</span><br><span class="line">    values(#&#123;username&#125;, #&#123;password&#125;, #&#123;name&#125;, #&#123;phone&#125;, #&#123;email&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h1>5. ä¿å­˜æŒ‰é’®ç»‘å®šäº‹ä»¶</h1><p>å°†ä¿å­˜æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶<code>@click=&quot;add&quot;</code>ï¼Œç„¶åå»åˆ›å»ºaddæ–¹æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">add</span>= (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  request.<span class="title function_">post</span>(<span class="string">&quot;/admin/add&quot;</span>, data.<span class="property">form</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="string">&#x27;200&#x27;</span>) &#123;</span><br><span class="line">      data.<span class="property">formVisible</span> = <span class="literal">false</span></span><br><span class="line">      <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(<span class="string">&#x27;æ–°å¢æˆåŠŸ&#x27;</span>)</span><br><span class="line">      <span class="title function_">load</span>()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      data.<span class="property">formVisible</span> = <span class="literal">false</span></span><br><span class="line">      <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡½æ•°é‡Œé€šè¿‡requestå¯¹è±¡ä¸­çš„postè¯·æ±‚å°†æ•°æ®å‘ç»™åç«¯ï¼Œç„¶ååç«¯å°†è¯·æ±‚æˆåŠŸä¸å¦çš„ç»“æœä¼ å›æ¥ä½œè¿”å›å€¼ã€‚å‰ç«¯æ ¹æ®è¿™ä¸ªç»“æœæ¥åˆ¤æ–­è¯·æ±‚æ˜¯å¦æˆåŠŸï¼š</p><ul><li>è¿”å›çš„çŠ¶æ€ç ä¸º200ï¼Œè¯·æ±‚æˆåŠŸ<ul><li>å…³é—­å¼¹çª—</li><li>å¼¹å‡ºæ–°çª—å£æç¤ºæˆåŠŸ</li><li>é‡æ–°åŠ è½½è¡¨æ ¼</li></ul></li><li>ä¸ä¸º200ï¼Œè¯·æ±‚å¤±è´¥<ul><li>å…³é—­å¼¹çª—</li><li>å¼¹çª—æç¤ºå¤±è´¥</li></ul></li></ul><hr><h1>6. è¡¨å•éªŒè¯</h1><p>åšè¡¨å•éªŒè¯æ˜¯å› ä¸ºåœ¨å‰ç«¯æ’å…¥æ•°æ®æ—¶éœ€è¦å¡«å››æ¡ä¿¡æ¯ï¼Œä½†æ˜¯å‘ç°å¡«ä¸€æ¡ä¿¡æ¯ä¹Ÿèƒ½æ–°å¢æ•°æ®ã€‚</p><p>dialogå¼¹çª—ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-dialog title=<span class="string">&quot;æ–°å¢ç®¡ç†å‘˜ä¿¡æ¯&quot;</span> v-model=<span class="string">&quot;data.formVisible&quot;</span> width=<span class="string">&quot;500&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> #<span class="attr">footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;data.formVisible = false&quot;</span>&gt;</span>å– æ¶ˆ<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;add&quot;</span>&gt;</span>ä¿ å­˜<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">&lt;/el-dialog&gt;</span><br></pre></td></tr></table></figure><p>è¡¨å•é¡¹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-dialog title=<span class="string">&quot;æ–°å¢ç®¡ç†å‘˜ä¿¡æ¯&quot;</span> v-model=<span class="string">&quot;data.formVisible&quot;</span> width=<span class="string">&quot;500&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;data.form&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding: 20px 30px 10px 0&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;è´¦å·&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.username&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;åç§°&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.name&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;ç”µè¯&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.phone&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;é‚®ç®±&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.email&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> #<span class="attr">footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;data.formVisible = false&quot;</span>&gt;</span>å– æ¶ˆ<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;add&quot;</span>&gt;</span>ä¿ å­˜<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">&lt;/el-dialog&gt;</span><br></pre></td></tr></table></figure><p>è¡¨å•éªŒè¯æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>el-form ä¸Šå¿…é¡»æœ‰ä¸‰ä¸ªå±æ€§</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ref=&quot;formRef&quot; :model=&quot;data.form&quot; :rules=&quot;data.rules&quot;</span><br></pre></td></tr></table></figure><p>rulesæ˜¯dataä¸­çš„ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨æ¥æè¿°è¡¨å•è§„åˆ™</p><ol start="2"><li><p>åœ¨el-form-itemä¸Šå†™ä¸Šè¡¨å•é¡¹çš„propå±æ€§<br>propå±æ€§è¦ä¸æ•°æ®çš„å±æ€§åç§°ä¸€è‡´</p></li><li><p>åœ¨dataçš„rulesé‡Œå®šä¹‰éªŒè¯è§„åˆ™<br>æ¯”å¦‚ï¼š</p></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rules</span>: &#123;</span><br><span class="line">  <span class="attr">username</span>: [</span><br><span class="line">    &#123;<span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;è¯·å¡«å†™è´¦å·`, trigger: &#x27;</span>blur<span class="string">&#x27;&#125;</span></span><br><span class="line"><span class="string">  ]</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><p><code>required: true</code>è¡¨ç¤ºusernameé¡¹ä¸ºå¿…å¡«é¡¹ï¼Œ<code>message: 'è¯·å¡«å†™è´¦å·'</code>è¡¨ç¤ºæ²¡å¡«è¿™ä¸€é¡¹æ—¶çš„æç¤ºä¿¡æ¯ï¼Œ<code>trigger</code>æ˜¯éªŒè¯çš„æ—¶æœºï¼Œ<code>trigger: blur</code>è¡¨ç¤ºåœ¨è¡¨å•å¤±ç„¦æ—¶éªŒè¯ã€‚</p><p>å…¶ä»–å››ä¸ªå±æ€§ä¹Ÿå¦‚æ³•ç‚®åˆ¶å³å¯ã€‚</p><p>è¿›è¡ŒéªŒè¯å‘ç°ï¼Œè™½ç„¶åšäº†è¡¨å•éªŒè¯ä½†æ˜¯å³ä½¿ä¸å¡«å†™ä¾ç„¶å¯ä»¥æäº¤ã€‚</p><p>åˆšåˆšåªæ˜¯åšäº†<strong>è¡¨å•éªŒè¯</strong>ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰<strong>æ‹¦æˆª</strong>ã€‚</p><ol start="4"><li>å®šä¹‰formRefå¯¹è±¡</li></ol><p>è¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ°el-formä¸­ç»‘å®šçš„<code>ref=formRef</code>ã€‚</p><p>ç°åœ¨å®šä¹‰è¿™ä¸ªformRefå¯¹è±¡ï¼Œå…ˆå¯¼å…¥refã€‚refæ˜¯ä»vueä¸­å¼•ç”¨çš„ï¼ŒæŠŠåŸæ¥çš„ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br></pre></td></tr></table></figure><p>æ”¹æˆï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive, ref&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br></pre></td></tr></table></figure><p>ç„¶åå®šä¹‰formRefå¯¹è±¡ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> formRef = <span class="title function_">ref</span>()</span><br></pre></td></tr></table></figure><ol start="5"><li>é€šè¿‡formRefå¯¹è±¡éªŒè¯<br>ç„¶ååœ¨addæ–¹æ³•ä¸­ä½¿ç”¨formRefæ¥è¿›è¡ŒéªŒè¯ï¼š</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">add</span>= (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  formRef.<span class="property">value</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (valid) &#123; <span class="comment">// éªŒè¯é€šè¿‡æ—¶</span></span><br><span class="line">      request.<span class="title function_">post</span>(<span class="string">&quot;/admin/add&quot;</span>, data.<span class="property">form</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="string">&#x27;200&#x27;</span>) &#123;</span><br><span class="line">          data.<span class="property">formVisible</span> = <span class="literal">false</span></span><br><span class="line">          <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(<span class="string">&#x27;æ–°å¢æˆåŠŸ&#x27;</span>)</span><br><span class="line">          <span class="title function_">load</span>()</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          data.<span class="property">formVisible</span> = <span class="literal">false</span></span><br><span class="line">          <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å†å»éªŒè¯å‘ç°æˆåŠŸã€‚</p><ol start="6"><li>å…¶ä»–é—®é¢˜1</li></ol><p>å½“ç‚¹å‡»æ–°å¢æŒ‰é’®å‡ºå‘è¡¨å•éªŒè¯åæœ‰ä¿¡æ¯æç¤ºï¼Œä½†æ˜¯æŒ‰ä¸‹å–æ¶ˆæŒ‰é’®å†ç‚¹å‡»æ–°å¢æŒ‰é’®å‘ç°<strong>å‰ä¸€æ¬¡è¡¨å•éªŒè¯ä¿¡æ¯è¿˜åœ¨</strong>ã€‚</p><p>åªéœ€è¦ç»™el-dialogæ·»åŠ <strong>destroy-on-close</strong>å³å¯ï¼Œå®ƒå¯ä»¥é‡ç½®dialogã€‚</p><ol start="7"><li>å…¶ä»–é—®é¢˜2</li></ol><p>ç°åœ¨æ–°å¢ä¸€ä¸ªæ•°æ®ï¼Œå»æ•°æ®åº“æŸ¥çœ‹å‘ç°è¿™ä¸€é¡¹çš„passwordé¡¹æ˜¯nullã€‚å› æ­¤å¯ä»¥åœ¨åç«¯è¿›ä¸€æ­¥è¿›è¡ŒéªŒè¯ã€‚</p><p>åœ¨serviceå±‚ä¿®æ”¹addæ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Admin admin)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (admin.getPassword() == <span class="literal">null</span> || <span class="string">&quot;&quot;</span>.equals(admin.getPassword())) &#123;</span><br><span class="line">        admin.setPassword(<span class="string">&quot;admin&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    adminMapper.insert(admin);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹äºåˆ¤æ–­<code>if (admin.getPassword() == null || &quot;&quot;.equals(admin.getPassword()))</code>å¯ä»¥é€šè¿‡Javaçš„å·¥å…·ç±»Hutoolæ¥ç®€åŒ–ã€‚</p><p>åœ¨springbootä¸‹çš„pom.xmlä¸­æ·»åŠ ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Java å·¥å…·ç±» Hutool --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.hutool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hutool-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>5.8.25<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åaddæ–¹æ³•å¯ä»¥å†™æˆï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Admin admin)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (StrUtil.isBlank(admin.getPassword())) &#123;</span><br><span class="line">        admin.setPassword(<span class="string">&quot;admin&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    adminMapper.insert(admin);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å¯ä»¥è®¾ç½®é»˜è®¤å¯†ç ä¸º<code>admin</code>ã€‚</p><p>è¿˜å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œå°±æ˜¯åœ¨æ’å…¥ä¹‹å‰æŸ¥è¯¢ä¸€ä¸‹è´¦å·æ˜¯å¦é‡å¤ï¼Œå†è¿›è¡Œæ’å…¥ã€‚</p><p>åœ¨mapperå±‚å®šä¹‰æ–°çš„æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Admin <span class="title function_">selectByUsername</span><span class="params">(String username)</span>;</span><br></pre></td></tr></table></figure><p>ä¹‹å‰éƒ½æ˜¯åœ¨mapperå±‚å®šä¹‰æ¥å£åè¿›è¡Œ<strong>XMLæ˜ å°„</strong>ã€‚</p><p>è¿™ä¸€æ¬¡ä½¿ç”¨<strong>æ³¨è§£å¼SQL</strong>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;select * from `admin` where username = #&#123;username&#125;&quot;)</span></span><br><span class="line">Admin <span class="title function_">selectByUsername</span><span class="params">(String username)</span>;</span><br></pre></td></tr></table></figure><p>æ³¨è§£å¼SQLä¸XMLæ˜ å°„å®ç°çš„åŠŸèƒ½æ˜¯ä¸€æ ·çš„ï¼ŒäºŒè€…åªéœ€è¦å®ç°ä¸€ä¸ªå°±å¯ä»¥äº†ã€‚</p><p>ç°åœ¨mapperå±‚çš„addæ–¹æ³•å¯ä»¥ä¼˜åŒ–ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Admin admin)</span> &#123;</span><br><span class="line">    <span class="type">Admin</span> <span class="variable">dbAdmin</span> <span class="operator">=</span> adminMapper.selectByUsername(admin.getUsername());</span><br><span class="line">    <span class="keyword">if</span> (dbAdmin != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomerException</span>(<span class="string">&quot;è´¦å·é‡å¤&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (StrUtil.isBlank(admin.getPassword())) &#123;</span><br><span class="line">        admin.setPassword(<span class="string">&quot;admin&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    adminMapper.insert(admin);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>7. å£°æ˜</h1><p>æœ¬æ–‡æ˜¯å¯¹Bç«™è§†é¢‘<a href="https://www.bilibili.com/video/BV1w3PuewEfk?spm_id_from=333.788.videopod.sections&amp;vd_source=a0f19e79b7da02f4fa318d91be5bc86a">ã€å¸¦å°ç™½åšæ¯•è®¾ã€‘06. Springboot3+vue3å®ç°å¢åˆ æ”¹æŸ¥ã€åˆ†é¡µæŸ¥è¯¢ã€æ‰¹é‡åˆ é™¤ï¼ˆä¸‹ï¼‰</a>çš„å­¦ä¹ è®°å½•ï¼Œä¾µæƒè”ç³»åˆ ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Springboot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cè¯­è¨€è¿›ç¨‹ä¸çº¿ç¨‹çš„åˆ›å»º</title>
      <link href="/2025/03/14/embedded2/"/>
      <url>/2025/03/14/embedded2/</url>
      
        <content type="html"><![CDATA[<p><strong>è¿›ç¨‹</strong>æ˜¯æ“ä½œç³»ç»Ÿèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œæ¯ä¸ªè¿›ç¨‹æœ‰ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼Œè¿›ç¨‹é—´é€šä¿¡éœ€è¦é¢å¤–çš„æœºåˆ¶ã€‚</p><p><strong>çº¿ç¨‹</strong>æ˜¯CPUè°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œçº¿ç¨‹å…±äº«è¿›ç¨‹çš„å†…å­˜ç©ºé—´ï¼Œçº¿ç¨‹é—´é€šä¿¡æ›´é«˜æ•ˆï¼Œä½†éœ€è¦å¤„ç†åŒæ­¥é—®é¢˜ã€‚</p><hr><h1>1. åˆ›å»ºæ–°è¿›ç¨‹</h1><p>Linux ä½¿ç”¨ fork ç³»ç»Ÿè°ƒç”¨æ¥åˆ›å»ºä¸€ä¸ªè¿›ç¨‹ï¼Œå‡½æ•°åŸå‹ä¸ºï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="type">pid_t</span> <span class="title function_">fork</span><span class="params">(<span class="type">void</span>)</span>;</span><br></pre></td></tr></table></figure><p>fork é€šè¿‡å¤åˆ¶è°ƒç”¨è¿›ç¨‹ï¼ˆçˆ¶è¿›ç¨‹ï¼‰æ¥åˆ›å»ºä¸€ä¸ªæ–°è¿›ç¨‹ï¼ˆå­è¿›ç¨‹ï¼‰ã€‚æ–°è¿›ç¨‹ç§°ä¸º<strong>å­è¿›ç¨‹</strong>ï¼ŒåŸè°ƒç”¨è¿›ç¨‹ç§°ä¸º<strong>çˆ¶è¿›ç¨‹</strong>ã€‚</p><p>å­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹è¿è¡Œåœ¨ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ä¸­ã€‚åœ¨ fork() æ‰§è¡Œæ—¶ï¼Œä¸¤è€…çš„å†…å­˜ç©ºé—´å†…å®¹å®Œå…¨ä¸€è‡´ã€‚ä½†åç»­ä»»ä¸€è¿›ç¨‹å¯¹å†…å­˜çš„ä¿®æ”¹ï¼ˆå†™å…¥ï¼‰ã€æ–‡ä»¶æ˜ å°„ï¼ˆmmap(2)ï¼‰æˆ–è§£é™¤æ˜ å°„ï¼ˆmunmap(2)ï¼‰æ“ä½œï¼Œå‡ä¸ä¼šå½±å“å¦ä¸€ä¸ªè¿›ç¨‹ã€‚</p><p>fork() æ‰§è¡Œä¹‹åï¼Œæ•´ä¸ªç¨‹åºå°±åˆ†æˆäº†ä¸¤è·¯æ‰§è¡Œã€‚</p><p>å¯ä»¥é€šè¿‡æ£€æŸ¥ fork() çš„è¿”å›å€¼ï¼Œå¯ä»¥æ§åˆ¶çˆ¶å­è¿›ç¨‹çš„è¡Œä¸ºï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">pid_t</span> pid = fork();</span><br><span class="line"><span class="keyword">if</span> (pid == <span class="number">-1</span>) &#123;</span><br><span class="line">    <span class="comment">// é”™è¯¯å¤„ç†ï¼ˆå¦‚å†…å­˜ä¸è¶³æˆ–è¿›ç¨‹æ•°è¶…é™ï¼‰</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (pid == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// å­è¿›ç¨‹ä»£ç </span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// çˆ¶è¿›ç¨‹ä»£ç ï¼ˆpid ä¸ºå­è¿›ç¨‹çš„PIDï¼‰</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦å¤–ï¼Œçˆ¶è¿›ç¨‹éœ€é€šè¿‡ wait() æˆ– waitpid() å›æ”¶å­è¿›ç¨‹èµ„æºï¼Œé˜²æ­¢åƒµå°¸è¿›ç¨‹ã€‚</p><p>fork() å¸¸ä¸ exec() ç³»åˆ—å‡½æ•°é…åˆä½¿ç”¨ï¼Œå®ç°â€œåˆ›å»ºå­è¿›ç¨‹ â†’ æ›¿æ¢å­è¿›ç¨‹ç¨‹åºâ€çš„ç»å…¸æ¨¡å¼ï¼ˆå¦‚Shellæ‰§è¡Œå‘½ä»¤ï¼‰ã€‚</p><!-- # 2. åˆ›å»ºæ–°çº¿ç¨‹åˆ›å»ºæ–°çº¿ç¨‹ä½¿ç”¨pthread_createï¼Œå‡½æ•°åŸå‹ä¸ºï¼š<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;pthread.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">pthread_create</span><span class="params">(<span class="type">pthread_t</span> *thread, <span class="type">const</span> <span class="type">pthread_attr_t</span> *attr, <span class="type">void</span> *(*start_routine) (<span class="type">void</span> *), <span class="type">void</span> *arg)</span>;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è¯¥å‡½æ•°æ—¶éœ€è¦ --&gt;</p>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åµŒå…¥å¼ </tag>
            
            <tag> è¿›ç¨‹ä¸çº¿ç¨‹çš„åˆ›å»º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cè¯­è¨€æ–‡ä»¶IOå¸¸ç”¨å‡½æ•°</title>
      <link href="/2025/03/14/embedded1/"/>
      <url>/2025/03/14/embedded1/</url>
      
        <content type="html"><![CDATA[<p>ç³»ç»Ÿè°ƒç”¨IOå‡½æ•°éƒ½æ˜¯å›´ç»•ç€æ–‡ä»¶æè¿°ç¬¦fdè¿›è¡Œç›¸å…³æ“ä½œçš„</p><hr><h1>1. fopenæ‰“å¼€æµ</h1><p>FILE *streamï¼Œ æ–‡ä»¶æŒ‡é’ˆï¼ŒFILEç»“æ„ä½“åˆè¢«ç§°ä½œæµã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function">FILE *<span class="title">fopen</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *path, <span class="type">const</span> <span class="type">char</span> *mode)</span></span>;</span><br></pre></td></tr></table></figure><ul><li>å‚æ•°<ul><li>pathï¼šæŒ‡å®šæ–‡ä»¶è·¯å¾„,å¦‚ï¼šâ€œ./test.txtâ€</li><li>modeï¼šæŒ‡å®šæ–‡ä»¶çš„æ‰“å¼€æ–¹å¼</li></ul></li><li>è¿”å›å€¼<ul><li>æˆåŠŸï¼Œè¿”å›æŒ‡å‘è¯¥æ–‡ä»¶çš„æ–‡ä»¶æŒ‡é’ˆ</li><li>è‹¥å¤±è´¥ï¼Œè¿”å›NULL</li></ul></li></ul><p>modeå‚æ•°ï¼š</p><table><thead><tr><th>æ¨¡å¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>â€œrâ€</td><td>æ‰“å¼€æ–‡æœ¬æ–‡ä»¶ç”¨äºè¯»</td></tr><tr><td>â€œwâ€</td><td>åˆ›å»ºæ–‡æœ¬æ–‡ä»¶ç”¨äºå†™ï¼Œå¹¶åˆ é™¤å·²å­˜åœ¨çš„å†…å®¹(å¦‚æœæœ‰çš„è¯)</td></tr><tr><td>â€œaâ€</td><td>æ·»åŠ ï¼›æ‰“å¼€æˆ–åˆ›å»ºæ–‡æœ¬æ–‡ä»¶ç”¨äºåœ¨æ–‡ä»¶æœ«å°¾å†™</td></tr><tr><td>â€œrbâ€</td><td>æ‰“å¼€äºŒè¿›åˆ¶æ–‡ä»¶ç”¨äºè¯»</td></tr><tr><td>â€œwbâ€</td><td>åˆ›å»ºäºŒè¿›åˆ¶æ–‡ä»¶ç”¨äºå†™ï¼Œå¹¶åˆ é™¤å·²å­˜åœ¨çš„å†…å®¹(å¦‚æœæœ‰çš„è¯)</td></tr><tr><td>â€œabâ€</td><td>æ·»åŠ ï¼›æ‰“å¼€æˆ–åˆ›å»ºäºŒè¿›åˆ¶æ–‡ä»¶ç”¨äºåœ¨æ–‡ä»¶æœ«å°¾å†™</td></tr><tr><td>â€œr+â€</td><td>æ‰“å¼€æ–‡æœ¬æ–‡ä»¶ç”¨äºæ›´æ–°(å³è¯»å’Œå†™)</td></tr><tr><td>â€œw+â€</td><td>åˆ›å»ºæ–‡æœ¬æ–‡ä»¶ç”¨äºæ›´æ–°ï¼Œå¹¶åˆ é™¤å·²å­˜åœ¨çš„å†…å®¹(å¦‚æœæœ‰çš„è¯)</td></tr><tr><td>â€œa+â€</td><td>æ·»åŠ ï¼›æ‰“å¼€æˆ–åˆ›å»ºæ–‡æœ¬æ–‡ä»¶ç”¨äºæ›´æ–°å’Œåœ¨æ–‡ä»¶æœ«å°¾å†™</td></tr><tr><td>â€œrb+â€</td><td>æ‰“å¼€äºŒè¿›åˆ¶æ–‡ä»¶ç”¨äºæ›´æ–°(å³è¯»å’Œå†™)</td></tr><tr><td>â€œr+bâ€</td><td>æ‰“å¼€äºŒè¿›åˆ¶æ–‡ä»¶ç”¨äºæ›´æ–°(å³è¯»å’Œå†™)</td></tr><tr><td>â€œwb+â€</td><td>åˆ›å»ºäºŒè¿›åˆ¶æ–‡ä»¶ç”¨äºæ›´æ–°ï¼Œå¹¶åˆ é™¤å·²å­˜åœ¨çš„å†…å®¹(å¦‚æœæœ‰çš„è¯)</td></tr><tr><td>â€œw+bâ€</td><td>åˆ›å»ºäºŒè¿›åˆ¶æ–‡ä»¶ç”¨äºæ›´æ–°ï¼Œå¹¶åˆ é™¤å·²å­˜åœ¨çš„å†…å®¹(å¦‚æœæœ‰çš„è¯)</td></tr><tr><td>â€œab+â€</td><td>æ·»åŠ ï¼›æ‰“å¼€æˆ–åˆ›å»ºäºŒè¿›åˆ¶æ–‡ä»¶ç”¨äºæ›´æ–°å’Œåœ¨æ–‡ä»¶æœ«å°¾å†™</td></tr><tr><td>â€œa+bâ€</td><td>æ·»åŠ ï¼›æ‰“å¼€æˆ–åˆ›å»ºäºŒè¿›åˆ¶æ–‡ä»¶ç”¨äºæ›´æ–°å’Œåœ¨æ–‡ä»¶æœ«å°¾å†™</td></tr></tbody></table><hr><h1>2. fcloseå…³é—­æµ</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fclose</span><span class="params">(FILE *stream)</span></span>;</span><br></pre></td></tr></table></figure><ul><li>å‚æ•°<ul><li>streamï¼šæ–‡ä»¶æŒ‡é’ˆï¼ˆæµï¼‰</li></ul></li><li>è¿”å›å€¼<ul><li>æˆåŠŸï¼Œè¿”å›0</li><li>è‹¥å¤±è´¥ï¼Œè¿”å›EOF</li></ul></li></ul><p>åœ¨è¯¥æ–‡ä»¶è¢«å…³é—­ä¹‹å‰ï¼Œå†²æ´—ç¼“å†²ä¸­çš„è¾“å‡ºæ•°æ®ã€‚<br>ç¼“å†²åŒºä¸­çš„ä»»ä½•è¾“å…¥æ•°æ®è¢«ä¸¢å¼ƒã€‚å¦‚æœæ ‡å‡†I/Oåº“å·²ç»ä¸ºè¯¥æµè‡ªåŠ¨åˆ†é…äº†ä¸€ä¸ªç¼“å†²åŒºï¼Œåˆ™é‡Šæ”¾æ­¤ç¼“å†²åŒºã€‚<br>å½“ä¸€ä¸ªè¿›ç¨‹æ­£å¸¸ç»ˆæ­¢æ—¶ï¼ˆç›´æ¥è°ƒç”¨exitå‡½æ•°ï¼Œæˆ–ä»mainå‡½æ•°è¿”å›ï¼‰ï¼Œåˆ™æ‰€æœ‰å¸¦æœªå†™ç¼“å†²æ•°æ®çš„æ ‡å‡†IOæµéƒ½è¢«å†²æ´—ï¼Œæ‰€æœ‰æ‰“å¼€çš„æ ‡å‡†IOæµéƒ½è¢«å…³é—­</p><hr><h1>3. fwriteå¯¹æ‰“å¼€çš„æµå†™å…¥</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">fwrite</span><span class="params">(<span class="type">const</span> <span class="type">void</span> *ptr, <span class="type">size_t</span> size, <span class="type">size_t</span> nmemb, FILE *stream)</span></span>;</span><br></pre></td></tr></table></figure><ul><li>å‚æ•°<ul><li>ptrï¼šæŒ‡å‘è¦å†™å…¥æ•°æ®çš„æŒ‡é’ˆ</li><li>sizeï¼šæŒ‡å®šå†™å…¥çš„æ¯ä¸ªæ•°æ®é¡¹çš„å­—èŠ‚æ•°ï¼Œå¦‚è°ƒç”¨sizeof(char)</li><li>nmembï¼šæŒ‡å®šå†™å…¥çš„æ•°æ®é¡¹çš„ä¸ªæ•°</li><li>streamï¼šè¦å†™å…¥çš„æ–‡ä»¶æµ</li></ul></li><li>è¿”å›å€¼<ul><li>è¿”å›å®é™…å†™å…¥çš„æ•°æ®é¡¹çš„ä¸ªæ•°</li></ul></li></ul><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåŒ…å«å­¦ç”Ÿä¿¡æ¯çš„ç»“æ„ä½“æ•°ç»„ï¼Œæˆ‘ä»¬æƒ³å°†è¿™äº›ä¿¡æ¯å†™å…¥ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> &#123;</span><br><span class="line">    <span class="type">char</span> name[<span class="number">50</span>];</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="type">float</span> grade;</span><br><span class="line">&#125; Student;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    FILE *file;</span><br><span class="line">    Student students[<span class="number">3</span>] = &#123;</span><br><span class="line">        &#123;<span class="string">&quot;Alice&quot;</span>, <span class="number">20</span>, <span class="number">88.5</span>&#125;,</span><br><span class="line">        &#123;<span class="string">&quot;Bob&quot;</span>, <span class="number">21</span>, <span class="number">92.0</span>&#125;,</span><br><span class="line">        &#123;<span class="string">&quot;Charlie&quot;</span>, <span class="number">19</span>, <span class="number">85.5</span>&#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰“å¼€æ–‡ä»¶ä»¥å†™å…¥äºŒè¿›åˆ¶æ•°æ®</span></span><br><span class="line">    file = <span class="built_in">fopen</span>(<span class="string">&quot;students.dat&quot;</span>, <span class="string">&quot;wb&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (file == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;æ— æ³•æ‰“å¼€æ–‡ä»¶&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†å­¦ç”Ÿä¿¡æ¯å†™å…¥æ–‡ä»¶</span></span><br><span class="line">    <span class="type">size_t</span> num_written = <span class="built_in">fwrite</span>(students, <span class="built_in">sizeof</span>(Student), <span class="number">3</span>, file);</span><br><span class="line">    <span class="keyword">if</span> (num_written != <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;å†™å…¥æ–‡ä»¶æ—¶å‡ºé”™&quot;</span>);</span><br><span class="line">        <span class="built_in">fclose</span>(file);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…³é—­æ–‡ä»¶</span></span><br><span class="line">    <span class="built_in">fclose</span>(file);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æ•°æ®æˆåŠŸå†™å…¥æ–‡ä»¶ã€‚\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><p>æ‰“å¼€æ–‡ä»¶ï¼šä½¿ç”¨ <code>fopen</code> å‡½æ•°ä»¥äºŒè¿›åˆ¶å†™å…¥æ¨¡å¼ (<code>&quot;wb&quot;</code>) æ‰“å¼€æ–‡ä»¶ <code>students.dat</code>ã€‚å¦‚æœæ–‡ä»¶æ‰“å¼€å¤±è´¥ï¼Œç¨‹åºä¼šè¾“å‡ºé”™è¯¯ä¿¡æ¯å¹¶é€€å‡ºã€‚</p></li><li><p>å†™å…¥æ•°æ®ï¼šä½¿ç”¨ <code>fwrite</code> å‡½æ•°å°† <code>students</code> æ•°ç»„ä¸­çš„æ•°æ®å†™å…¥æ–‡ä»¶ã€‚<code>sizeof(Student)</code> è¡¨ç¤ºæ¯ä¸ªå­¦ç”Ÿä¿¡æ¯çš„å¤§å°ï¼Œ<code>3</code> è¡¨ç¤ºè¦å†™å…¥çš„å­¦ç”Ÿæ•°é‡ã€‚</p></li><li><p>æ£€æŸ¥å†™å…¥ç»“æœï¼š<code>fwrite</code> è¿”å›æˆåŠŸå†™å…¥çš„æ•°æ®é¡¹æ•°é‡ã€‚å¦‚æœè¿”å›å€¼ä¸ç­‰äºé¢„æœŸçš„æ•°é‡ï¼ˆè¿™é‡Œæ˜¯ 3ï¼‰ï¼Œåˆ™è¯´æ˜å†™å…¥è¿‡ç¨‹ä¸­å‡ºç°äº†é”™è¯¯ã€‚</p></li><li><p>è¾“å‡ºç»“æœï¼šå¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œç¨‹åºä¼šè¾“å‡ºâ€œæ•°æ®æˆåŠŸå†™å…¥æ–‡ä»¶â€ã€‚</p></li></ol><hr><h1>4. freadå¯¹æ‰“å¼€çš„æµè¿›è¡Œè¯»å–</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">fread</span><span class="params">(<span class="type">void</span> *ptr, <span class="type">size_t</span> size, <span class="type">size_t</span> nmemb, FILE *stream)</span></span>;</span><br></pre></td></tr></table></figure><ul><li>å‚æ•°<ul><li>ptrï¼šæŒ‡å‘è¦å­˜å‚¨æ•°æ®å†…å­˜çš„æŒ‡é’ˆ</li><li>sizeï¼šæŒ‡å®šè¯»å–çš„æ¯ä¸ªæ•°æ®é¡¹çš„å­—èŠ‚æ•°</li><li>nmembï¼šæŒ‡å®šè¦è¯»å–çš„æ•°æ®é¡¹çš„ä¸ªæ•°</li><li>streamï¼šè¦è¯»å–çš„æ–‡ä»¶æµ</li></ul></li><li>è¿”å›å€¼<ul><li>è¿”å›å®é™…è¯»å–æ•°æ®é¡¹çš„ä¸ªæ•°</li></ul></li></ul><p>ç°åœ¨ä½¿ç”¨ç°åœ¨ç”¨ fread è¯»å–ç”± fwrite ç”Ÿæˆçš„ student.dat äºŒè¿›åˆ¶æ–‡ä»¶çš„å­¦ç”Ÿä¿¡æ¯ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> &#123;</span><br><span class="line">    <span class="type">char</span> name[<span class="number">50</span>];</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="type">float</span> grade;</span><br><span class="line">&#125; Student;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    FILE *file;</span><br><span class="line">    Student students[<span class="number">3</span>]; <span class="comment">// ç”¨äºå­˜å‚¨è¯»å–çš„æ•°æ®</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»¥äºŒè¿›åˆ¶è¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">    file = <span class="built_in">fopen</span>(<span class="string">&quot;students.dat&quot;</span>, <span class="string">&quot;rb&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (file == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;æ— æ³•æ‰“å¼€æ–‡ä»¶&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®åˆ° students æ•°ç»„</span></span><br><span class="line">    <span class="type">size_t</span> num_read = <span class="built_in">fread</span>(students, <span class="built_in">sizeof</span>(Student), <span class="number">3</span>, file);</span><br><span class="line">    <span class="keyword">if</span> (num_read != <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;è¯»å–æ–‡ä»¶æ—¶å‡ºé”™&quot;</span>);</span><br><span class="line">        <span class="built_in">fclose</span>(file);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…³é—­æ–‡ä»¶</span></span><br><span class="line">    <span class="built_in">fclose</span>(file);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰“å°è¯»å–çš„æ•°æ®</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æˆåŠŸè¯»å–çš„å­¦ç”Ÿä¿¡æ¯ï¼š\n&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;å­¦ç”Ÿ %d:\n&quot;</span>, i + <span class="number">1</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;å§“å: %s\n&quot;</span>, students[i].name);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;å¹´é¾„: %d\n&quot;</span>, students[i].age);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;æˆç»©: %.1f\n\n&quot;</span>, students[i].grade);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>æ‰“å¼€æ–‡ä»¶ï¼š</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file = <span class="built_in">fopen</span>(<span class="string">&quot;students.dat&quot;</span>, <span class="string">&quot;rb&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>â€œrbâ€ è¡¨ç¤ºä»¥äºŒè¿›åˆ¶è¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶ã€‚</li><li>å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨æˆ–æƒé™ä¸è¶³ï¼Œfopen ä¼šè¿”å› NULLï¼Œæ­¤æ—¶éœ€è¦å¤„ç†é”™è¯¯ã€‚</li></ul><ol start="2"><li>è¯»å–æ•°æ®ï¼š</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">size_t</span> num_read = <span class="built_in">fread</span>(students, <span class="built_in">sizeof</span>(Student), <span class="number">3</span>, file);</span><br></pre></td></tr></table></figure><ul><li>students æ˜¯å­˜å‚¨æ•°æ®çš„æ•°ç»„ã€‚</li><li>sizeof(Student) æ˜¯æ¯ä¸ªå­¦ç”Ÿç»“æ„ä½“çš„å¤§å°ï¼ˆ58 å­—èŠ‚ï¼‰ã€‚</li><li>3 è¡¨ç¤ºè¦è¯»å– 3 ä¸ªå­¦ç”Ÿæ•°æ®ã€‚</li><li>num_read æ˜¯å®é™…æˆåŠŸè¯»å–çš„æ•°æ®é¡¹æ•°é‡ã€‚å¦‚æœ num_read &lt; 3ï¼Œè¯´æ˜æ–‡ä»¶å¯èƒ½å·²æŸåæˆ–è¯»å–å¤±è´¥ã€‚</li></ul><ol start="3"><li>æ‰“å°ä¿¡æ¯</li></ol><ul><li>è¯»å–å®Œæˆåï¼Œéå†æ•°ç»„å¹¶æ‰“å°æ¯ä¸ªå­¦ç”Ÿçš„ä¿¡æ¯ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">æˆåŠŸè¯»å–çš„å­¦ç”Ÿä¿¡æ¯ï¼š</span><br><span class="line">å­¦ç”Ÿ 1:</span><br><span class="line">å§“å: Alice</span><br><span class="line">å¹´é¾„: 20</span><br><span class="line">æˆç»©: 88.5</span><br><span class="line"></span><br><span class="line">å­¦ç”Ÿ 2:</span><br><span class="line">å§“å: Bob</span><br><span class="line">å¹´é¾„: 21</span><br><span class="line">æˆç»©: 92.0</span><br><span class="line"></span><br><span class="line">å­¦ç”Ÿ 3:</span><br><span class="line">å§“å: Charlie</span><br><span class="line">å¹´é¾„: 19</span><br><span class="line">æˆç»©: 85.5</span><br></pre></td></tr></table></figure><hr><h1>5. fseekå®šä½æµ</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fseek</span><span class="params">(FILE *stream, <span class="type">long</span> offset, <span class="type">int</span> whence)</span></span>;</span><br></pre></td></tr></table></figure><ul><li>å‚æ•°<ul><li>streamï¼šæŒ‡å®šé‡å®šä½æ–‡ä»¶æŒ‡é’ˆ</li><li>offsetï¼šæŒ‡å®šåç§»é‡ï¼Œæ•´æ•°è¡¨ç¤ºæ­£å‘åç§»ï¼Œè´Ÿæ•°è¡¨ç¤ºè´Ÿå‘åç§»</li><li>whenceï¼šæŒ‡å®šåç§»åŸºå‡†ä½ç½®<ul><li>å®SEEK_CURï¼ˆå½“å‰ä½ç½®ï¼‰</li><li>SEEK_ENDï¼ˆæ–‡ä»¶ç»“å°¾ï¼‰</li><li>SEEK_SETï¼ˆæ–‡ä»¶å¼€å¤´ï¼‰</li></ul></li></ul></li><li>è¿”å›å€¼<ul><li>æˆåŠŸï¼Œè¿”å›0</li><li>è‹¥å¤±è´¥ï¼Œè¿”å›-1ï¼Œä¸”ä¸æ”¹å˜æŒ‡é’ˆä½ç½®ã€‚</li></ul></li></ul><p>å‡å¦‚æˆ‘ä»¬æƒ³é€šè¿‡ fseek ç›´æ¥å®šä½åˆ° student.dat ä¸­æŸä¸ªå­¦ç”Ÿçš„è®°å½•å¹¶è¯»å–ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> &#123;</span><br><span class="line">    <span class="type">char</span> name[<span class="number">50</span>];</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="type">float</span> grade;</span><br><span class="line">&#125; Student;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    FILE *file;</span><br><span class="line">    Student student;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»¥äºŒè¿›åˆ¶è¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">    file = <span class="built_in">fopen</span>(<span class="string">&quot;students.dat&quot;</span>, <span class="string">&quot;rb&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (file == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;æ— æ³•æ‰“å¼€æ–‡ä»¶&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä½åˆ°ç¬¬ 2 ä¸ªå­¦ç”Ÿçš„è®°å½•ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰</span></span><br><span class="line">    <span class="type">int</span> student_index = <span class="number">1</span>; <span class="comment">// ç¬¬ 2 ä¸ªå­¦ç”Ÿ</span></span><br><span class="line">    <span class="type">long</span> offset = student_index * <span class="built_in">sizeof</span>(Student);</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">fseek</span>(file, offset, SEEK_SET) != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;fseek å¤±è´¥&quot;</span>);</span><br><span class="line">        <span class="built_in">fclose</span>(file);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¯»å–ç¬¬ 2 ä¸ªå­¦ç”Ÿçš„æ•°æ®</span></span><br><span class="line">    <span class="type">size_t</span> num_read = <span class="built_in">fread</span>(&amp;student, <span class="built_in">sizeof</span>(Student), <span class="number">1</span>, file);</span><br><span class="line">    <span class="keyword">if</span> (num_read != <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;è¯»å–æ–‡ä»¶æ—¶å‡ºé”™&quot;</span>);</span><br><span class="line">        <span class="built_in">fclose</span>(file);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…³é—­æ–‡ä»¶</span></span><br><span class="line">    <span class="built_in">fclose</span>(file);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰“å°è¯»å–çš„æ•°æ®</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;ç¬¬ %d ä¸ªå­¦ç”Ÿçš„ä¿¡æ¯ï¼š\n&quot;</span>, student_index + <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;å§“å: %s\n&quot;</span>, student.name);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;å¹´é¾„: %d\n&quot;</span>, student.age);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æˆç»©: %.1f\n&quot;</span>, student.grade);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><p>æ‰“å¼€æ–‡ä»¶<br>ä»¥äºŒè¿›åˆ¶è¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶ students.datã€‚</p></li><li><p>è®¡ç®—åç§»é‡</p></li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">long</span> offset = student_index * <span class="keyword">sizeof</span>(Student);</span><br></pre></td></tr></table></figure><ul><li>student_index æ˜¯è¦è®¿é—®çš„å­¦ç”Ÿçš„ç´¢å¼•ï¼ˆä» 0 å¼€å§‹ï¼‰ã€‚</li><li>sizeof(Student) æ˜¯æ¯ä¸ªå­¦ç”Ÿç»“æ„ä½“çš„å¤§å°ï¼ˆ58 å­—èŠ‚ï¼‰ã€‚</li><li>åç§»é‡ offset æ˜¯ä»æ–‡ä»¶å¼€å¤´åˆ°ç›®æ ‡å­¦ç”Ÿè®°å½•çš„å­—èŠ‚æ•°ã€‚</li></ul><ol start="3"><li>å®šä½æ–‡ä»¶æŒ‡é’ˆ</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (fseek(file, offset, SEEK_SET) != <span class="number">0</span>) &#123;</span><br><span class="line">    perror(<span class="string">&quot;fseek å¤±è´¥&quot;</span>);</span><br><span class="line">    fclose(file);</span><br><span class="line">    <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨ fseek å°†æ–‡ä»¶æŒ‡é’ˆç§»åŠ¨åˆ°ç›®æ ‡å­¦ç”Ÿçš„èµ·å§‹ä½ç½®ã€‚</li><li>SEEK_SET è¡¨ç¤ºä»æ–‡ä»¶å¼€å¤´è®¡ç®—åç§»é‡ã€‚</li></ul><ol start="4"><li>è¯»å–æ•°æ®</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">size_t</span> num_read = fread(&amp;student, <span class="keyword">sizeof</span>(Student), <span class="number">1</span>, file);</span><br></pre></td></tr></table></figure><ul><li>ä»å½“å‰ä½ç½®è¯»å–ä¸€ä¸ª Student ç»“æ„ä½“åˆ° student å˜é‡ä¸­ã€‚</li></ul><ol start="5"><li>æ‰“å°æ•°æ®ï¼š</li></ol><ul><li>æ‰“å°è¯»å–çš„å­¦ç”Ÿä¿¡æ¯ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ç¬¬ 2 ä¸ªå­¦ç”Ÿçš„ä¿¡æ¯ï¼š</span><br><span class="line">å§“å: Bob</span><br><span class="line">å¹´é¾„: 21</span><br><span class="line">æˆç»©: 92.0</span><br></pre></td></tr></table></figure><hr><h1>6. fputcå†™ä¸€ä¸ªå­—ç¬¦åˆ°æ–‡ä»¶</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fputc</span><span class="params">(<span class="type">int</span> ch, FILE *stream)</span></span>;</span><br></pre></td></tr></table></figure><ul><li><p>å‚æ•°</p><ul><li>chï¼šè¦å†™å…¥çš„å­—ç¬¦ï¼ˆä»¥ int å½¢å¼ä¼ é€’ï¼Œä½†å®é™…å†™å…¥çš„æ˜¯å…¶ä½ 8 ä½ï¼‰ã€‚</li><li>streamï¼šæŒ‡å‘æ–‡ä»¶æµçš„æŒ‡é’ˆï¼ˆç”± fopen æ‰“å¼€çš„æ–‡ä»¶ï¼‰ã€‚</li></ul></li><li><p>è¿”å›å€¼</p></li><li><p>æˆåŠŸæ—¶è¿”å›å†™å…¥çš„å­—ç¬¦ã€‚</p></li><li><p>å¤±è´¥æ—¶è¿”å› EOFã€‚</p></li></ul><p>ä½¿ç”¨ fputc å°†ä¸€ä¸ªå­—ç¬¦ä¸²é€å­—ç¬¦å†™å…¥æ–‡ä»¶ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    FILE *file;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *text = <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">    <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»¥å†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">    file = <span class="built_in">fopen</span>(<span class="string">&quot;output.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (file == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;æ— æ³•æ‰“å¼€æ–‡ä»¶&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†å­—ç¬¦ä¸²é€å­—ç¬¦å†™å…¥æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">while</span> (text[i] != <span class="string">&#x27;\0&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">fputc</span>(text[i], file) == EOF) &#123;</span><br><span class="line">            <span class="built_in">perror</span>(<span class="string">&quot;å†™å…¥æ–‡ä»¶æ—¶å‡ºé”™&quot;</span>);</span><br><span class="line">            <span class="built_in">fclose</span>(file);</span><br><span class="line">            <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">        &#125;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…³é—­æ–‡ä»¶</span></span><br><span class="line">    <span class="built_in">fclose</span>(file);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;å­—ç¬¦æˆåŠŸå†™å…¥æ–‡ä»¶ã€‚\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>æ‰“å¼€æ–‡ä»¶</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file = fopen(<span class="string">&quot;output.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>ä»¥å†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶ output.txtã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºå®ƒï¼›å¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œåˆ™æ¸…ç©ºå…¶å†…å®¹ã€‚</li></ul><ol start="2"><li>é€å­—ç¬¦å†™å…¥æ–‡ä»¶</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (text[i] != <span class="string">&#x27;\0&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (fputc(text[i], file) == EOF) &#123;</span><br><span class="line">        perror(<span class="string">&quot;å†™å…¥æ–‡ä»¶æ—¶å‡ºé”™&quot;</span>);</span><br><span class="line">        fclose(file);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line">    i++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨ fputc å°†å­—ç¬¦ä¸² text ä¸­çš„æ¯ä¸ªå­—ç¬¦å†™å…¥æ–‡ä»¶ã€‚</li><li>å¦‚æœ fputc è¿”å› EOFï¼Œè¯´æ˜å†™å…¥å¤±è´¥ï¼Œç¨‹åºä¼šè¾“å‡ºé”™è¯¯ä¿¡æ¯å¹¶é€€å‡ºã€‚</li></ul><ol start="3"><li>å…³é—­æ–‡ä»¶ï¼š</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fclose(file);</span><br></pre></td></tr></table></figure><ul><li>å…³é—­æ–‡ä»¶ã€‚</li></ul><ol start="4"><li>è¿è¡Œç»“æœ</li></ol><ul><li>å¦‚æœç¨‹åºè¿è¡ŒæˆåŠŸï¼Œæ–‡ä»¶ output.txt ä¸­å°†åŒ…å«å­—ç¬¦ä¸² â€œHello, World!â€ã€‚</li></ul><hr><h1>7. fputså†™ä¸€ä¸ªå­—ç¬¦ä¸²åˆ°æ–‡ä»¶ä¸­å»</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fputs</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *str,FILE *stream)</span></span>;</span><br></pre></td></tr></table></figure><ul><li>å‚æ•°<ul><li>strï¼šè¦å†™å…¥çš„å­—ç¬¦ä¸²ï¼ˆä»¥ \0 ç»“å°¾çš„ C å­—ç¬¦ä¸²ï¼‰ã€‚</li><li>streamï¼šæŒ‡å‘æ–‡ä»¶æµçš„æŒ‡é’ˆï¼ˆç”± fopen æ‰“å¼€çš„æ–‡ä»¶ï¼‰ã€‚</li></ul></li><li>è¿”å›å€¼<ul><li>æˆåŠŸæ—¶è¿”å›éè´Ÿå€¼ã€‚</li><li>å¤±è´¥æ—¶è¿”å› EOFã€‚</li></ul></li></ul><p>ä½¿ç”¨ fputs å°†ä¸€ä¸ªå­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    FILE *file;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *text = <span class="string">&quot;Hello, World!\nThis is a test file.\n&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»¥å†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">    file = <span class="built_in">fopen</span>(<span class="string">&quot;output.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (file == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;æ— æ³•æ‰“å¼€æ–‡ä»¶&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†å­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">fputs</span>(text, file) == EOF) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;å†™å…¥æ–‡ä»¶æ—¶å‡ºé”™&quot;</span>);</span><br><span class="line">        <span class="built_in">fclose</span>(file);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…³é—­æ–‡ä»¶</span></span><br><span class="line">    <span class="built_in">fclose</span>(file);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;å­—ç¬¦ä¸²æˆåŠŸå†™å…¥æ–‡ä»¶ã€‚\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>æ‰“å¼€æ–‡ä»¶</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file = fopen(<span class="string">&quot;output.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>ä»¥å†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶ output.txtã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºå®ƒï¼›å¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œåˆ™æ¸…ç©ºå…¶å†…å®¹ã€‚</li></ul><ol start="2"><li>å†™å…¥å­—ç¬¦ä¸²</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">fputs</span>(text, file) == EOF) &#123;</span><br><span class="line">    perror(<span class="string">&quot;å†™å…¥æ–‡ä»¶æ—¶å‡ºé”™&quot;</span>);</span><br><span class="line">    fclose(file);</span><br><span class="line">    <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨ fputs å°†å­—ç¬¦ä¸² text å†™å…¥æ–‡ä»¶ã€‚</li><li>å¦‚æœ fputs è¿”å› EOFï¼Œè¯´æ˜å†™å…¥å¤±è´¥ï¼Œç¨‹åºä¼šè¾“å‡ºé”™è¯¯ä¿¡æ¯å¹¶é€€å‡ºã€‚</li></ul><ol start="3"><li>å…³é—­æ–‡ä»¶ï¼š</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fclose(file);</span><br></pre></td></tr></table></figure><p>å…³é—­æ–‡ä»¶ï¼Œç¡®ä¿æ‰€æœ‰æ•°æ®å†™å…¥ç£ç›˜ã€‚</p><ol start="4"><li>è¿è¡Œç»“æœ</li></ol><ul><li>å¦‚æœç¨‹åºè¿è¡ŒæˆåŠŸï¼Œæ–‡ä»¶ output.txt ä¸­å°†åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hello, World!</span><br><span class="line">This is a test file.</span><br></pre></td></tr></table></figure><hr><h1>8. fprinfå¾€æ–‡ä»¶ä¸­å†™å…¥æ ¼å¼åŒ–æ•°æ®</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fprintf</span><span class="params">(FILE *stream, <span class="type">const</span> <span class="type">char</span> *format,...)</span></span>;</span><br></pre></td></tr></table></figure><ul><li><p>å‚æ•°</p><ul><li>streamï¼šæŒ‡å‘æ–‡ä»¶æµçš„æŒ‡é’ˆï¼ˆç”± fopen æ‰“å¼€çš„æ–‡ä»¶ï¼‰ã€‚</li><li>formatï¼šæ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼ŒæŒ‡å®šå¦‚ä½•æ ¼å¼åŒ–åç»­å‚æ•°ã€‚</li><li><strong>â€¦</strong>ï¼šå¯å˜å‚æ•°åˆ—è¡¨ï¼Œæ ¹æ® format å­—ç¬¦ä¸²ä¸­çš„æ ¼å¼è¯´æ˜ç¬¦è¿›è¡Œæ ¼å¼åŒ–ã€‚</li></ul></li><li><p>è¿”å›å€¼</p><ul><li>æˆåŠŸæ—¶è¿”å›å†™å…¥çš„å­—ç¬¦æ•°ã€‚</li><li>å¤±è´¥æ—¶è¿”å›è´Ÿå€¼ã€‚</li></ul></li></ul><p>ä½¿ç”¨ fprintf å°†æ ¼å¼åŒ–æ•°æ®å†™å…¥æ–‡ä»¶ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    FILE *file;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *name = <span class="string">&quot;Alice&quot;</span>;</span><br><span class="line">    <span class="type">int</span> age = <span class="number">20</span>;</span><br><span class="line">    <span class="type">float</span> grade = <span class="number">88.5</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»¥å†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">    file = <span class="built_in">fopen</span>(<span class="string">&quot;student.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (file == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;æ— æ³•æ‰“å¼€æ–‡ä»¶&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ fprintf å°†æ ¼å¼åŒ–æ•°æ®å†™å…¥æ–‡ä»¶</span></span><br><span class="line">    <span class="type">int</span> result = <span class="built_in">fprintf</span>(file, <span class="string">&quot;å§“å: %s\nå¹´é¾„: %d\næˆç»©: %.1f\n&quot;</span>, name, age, grade);</span><br><span class="line">    <span class="keyword">if</span> (result &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;å†™å…¥æ–‡ä»¶æ—¶å‡ºé”™&quot;</span>);</span><br><span class="line">        <span class="built_in">fclose</span>(file);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…³é—­æ–‡ä»¶</span></span><br><span class="line">    <span class="built_in">fclose</span>(file);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æ ¼å¼åŒ–æ•°æ®æˆåŠŸå†™å…¥æ–‡ä»¶ã€‚\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœç¨‹åºè¿è¡ŒæˆåŠŸï¼Œæ–‡ä»¶ student.txt ä¸­å°†åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å§“å: Alice</span><br><span class="line">å¹´é¾„: 20</span><br><span class="line">æˆç»©: 88.5</span><br></pre></td></tr></table></figure><hr><h1>9. fgetcå‡½æ•°</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">fgetc</span><span class="params">(FILE *stream)</span></span>;</span><br></pre></td></tr></table></figure><ul><li><p>å‚æ•°</p><ul><li>streamï¼šæŒ‡å‘æ–‡ä»¶æµçš„æŒ‡é’ˆï¼ˆç”± fopen æ‰“å¼€çš„æ–‡ä»¶ï¼‰ã€‚</li></ul></li><li><p>è¿”å›å€¼</p><ul><li>æˆåŠŸæ—¶è¿”å›è¯»å–çš„å­—ç¬¦ï¼ˆä»¥ int å½¢å¼è¿”å›ï¼‰ã€‚</li><li>å¦‚æœåˆ°è¾¾æ–‡ä»¶æœ«å°¾æˆ–å‘ç”Ÿé”™è¯¯ï¼Œè¿”å› EOFã€‚</li></ul></li></ul><p>ä½¿ç”¨ fgetc é€å­—ç¬¦è¯»å–æ–‡ä»¶å†…å®¹å¹¶æ‰“å°åˆ°æ§åˆ¶å°ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    FILE *file;</span><br><span class="line">    <span class="type">int</span> ch;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»¥è¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">    file = fopen(<span class="string">&quot;input.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (file == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        perror(<span class="string">&quot;æ— æ³•æ‰“å¼€æ–‡ä»¶&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€å­—ç¬¦è¯»å–æ–‡ä»¶å†…å®¹</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æ–‡ä»¶å†…å®¹ï¼š\n&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span> ((ch = fgetc(file)) != EOF) &#123;</span><br><span class="line">        <span class="built_in">putchar</span>(ch); <span class="comment">// å°†å­—ç¬¦è¾“å‡ºåˆ°æ§åˆ¶å°</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥æ˜¯å¦å› é”™è¯¯ç»“æŸ</span></span><br><span class="line">    <span class="keyword">if</span> (ferror(file)) &#123;</span><br><span class="line">        perror(<span class="string">&quot;è¯»å–æ–‡ä»¶æ—¶å‡ºé”™&quot;</span>);</span><br><span class="line">        fclose(file);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…³é—­æ–‡ä»¶</span></span><br><span class="line">    fclose(file);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\næ–‡ä»¶è¯»å–å®Œæˆã€‚\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæ–‡ä»¶ input.txt çš„å†…å®¹ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hello, World!</span><br><span class="line">This is a test file.</span><br></pre></td></tr></table></figure><p>ç¨‹åºè¿è¡Œåï¼Œæ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æ–‡ä»¶å†…å®¹ï¼š</span><br><span class="line">Hello, World!</span><br><span class="line">This is a test file.</span><br><span class="line">æ–‡ä»¶è¯»å–å®Œæˆã€‚</span><br></pre></td></tr></table></figure><hr><h1>10. fgetsä»æ ‡å‡†è¾“å…¥æˆ–æ–‡ä»¶ä¸­è¯»å–å­—ç¬¦ä¸²ã€‚</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">char</span> *<span class="title">fgets</span><span class="params">(<span class="type">char</span> *str, <span class="type">int</span> n, FILE *stream)</span></span>;</span><br></pre></td></tr></table></figure><ul><li>å‚æ•°<ul><li>strï¼šæŒ‡å‘å­˜å‚¨è¯»å–æ•°æ®çš„å­—ç¬¦æ•°ç»„ï¼ˆç¼“å†²åŒºï¼‰ã€‚</li><li>nï¼šè¦è¯»å–çš„æœ€å¤§å­—ç¬¦æ•°ï¼ˆåŒ…æ‹¬ç»“å°¾çš„ç©ºå­—ç¬¦ \0ï¼‰ã€‚</li><li>streamï¼šæŒ‡å‘æ–‡ä»¶æµçš„æŒ‡é’ˆï¼ˆç”± fopen æ‰“å¼€çš„æ–‡ä»¶ï¼‰ã€‚</li></ul></li><li>è¿”å›å€¼<ul><li>æˆåŠŸæ—¶è¿”å› strã€‚</li><li>å¦‚æœåˆ°è¾¾æ–‡ä»¶æœ«å°¾æˆ–å‘ç”Ÿé”™è¯¯ï¼Œè¿”å› NULLã€‚</li></ul></li></ul><p>ä½¿ç”¨ fgets é€è¡Œè¯»å–æ–‡ä»¶å†…å®¹å¹¶æ‰“å°åˆ°æ§åˆ¶å°ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    FILE *file;</span><br><span class="line">    <span class="type">char</span> buffer[<span class="number">100</span>]; <span class="comment">// ç”¨äºå­˜å‚¨æ¯è¡Œå†…å®¹çš„ç¼“å†²åŒº</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»¥è¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">    file = <span class="built_in">fopen</span>(<span class="string">&quot;input.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (file == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;æ— æ³•æ‰“å¼€æ–‡ä»¶&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€è¡Œè¯»å–æ–‡ä»¶å†…å®¹</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æ–‡ä»¶å†…å®¹ï¼š\n&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">fgets</span>(buffer, <span class="built_in">sizeof</span>(buffer), file) != <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s&quot;</span>, buffer); <span class="comment">// å°†æ¯è¡Œå†…å®¹è¾“å‡ºåˆ°æ§åˆ¶å°</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥æ˜¯å¦å› é”™è¯¯ç»“æŸ</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">ferror</span>(file)) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;è¯»å–æ–‡ä»¶æ—¶å‡ºé”™&quot;</span>);</span><br><span class="line">        <span class="built_in">fclose</span>(file);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…³é—­æ–‡ä»¶</span></span><br><span class="line">    <span class="built_in">fclose</span>(file);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æ–‡ä»¶è¯»å–å®Œæˆã€‚\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">while (fgets(buffer, sizeof(buffer), file) != NULL) &#123;</span><br><span class="line">    printf(&quot;%s&quot;, buffer);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸­ï¼š</p><ul><li>ä½¿ç”¨ fgets é€è¡Œè¯»å–æ–‡ä»¶å†…å®¹ã€‚</li><li>buffer æ˜¯ç”¨äºå­˜å‚¨æ¯è¡Œå†…å®¹çš„å­—ç¬¦æ•°ç»„ã€‚</li><li>sizeof(buffer) æŒ‡å®šæ¯æ¬¡è¯»å–çš„æœ€å¤§å­—ç¬¦æ•°ï¼ˆåŒ…æ‹¬ç»“å°¾çš„ \0ï¼‰ã€‚</li><li>å¦‚æœæˆåŠŸè¯»å–ä¸€è¡Œï¼Œfgets è¿”å› bufferï¼›å¦‚æœåˆ°è¾¾æ–‡ä»¶æœ«å°¾æˆ–å‘ç”Ÿé”™è¯¯ï¼Œè¿”å› NULLã€‚</li><li>ä½¿ç”¨ printf å°†æ¯è¡Œå†…å®¹è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚</li></ul><p>å¦‚æœæ–‡ä»¶ input.txt çš„å†…å®¹ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Hello, World!</span><br><span class="line">This is a test file.</span><br><span class="line">Welcome to C programming.</span><br></pre></td></tr></table></figure><p>ç¨‹åºè¿è¡Œåï¼Œæ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ–‡ä»¶å†…å®¹ï¼š</span><br><span class="line">Hello, World!</span><br><span class="line">This is a test file.</span><br><span class="line">Welcome to C programming.</span><br><span class="line">æ–‡ä»¶è¯»å–å®Œæˆã€‚</span><br></pre></td></tr></table></figure><hr><h1>11. fscanfä»æ–‡ä»¶æµä¸­è¯»å–æ•°æ®</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">fscanf</span><span class="params">(FILE * stream, <span class="type">const</span> <span class="type">char</span> * format, [argument...])</span></span>;</span><br></pre></td></tr></table></figure><ul><li>å‚æ•°<ul><li>streamï¼šæŒ‡å‘æ–‡ä»¶æµçš„æŒ‡é’ˆï¼ˆç”± fopen æ‰“å¼€çš„æ–‡ä»¶ï¼‰ã€‚</li><li>formatï¼šæ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼ŒæŒ‡å®šå¦‚ä½•è§£ææ–‡ä»¶ä¸­çš„æ•°æ®ã€‚</li><li><strong>â€¦</strong>ï¼šå¯å˜å‚æ•°åˆ—è¡¨ï¼Œç”¨äºå­˜å‚¨è§£æåçš„æ•°æ®ã€‚</li></ul></li><li>è¿”å›å€¼<ul><li>æˆåŠŸæ—¶è¿”å›æˆåŠŸåŒ¹é…å¹¶èµ‹å€¼çš„è¾“å…¥é¡¹æ•°ã€‚</li><li>å¦‚æœåˆ°è¾¾æ–‡ä»¶æœ«å°¾æˆ–å‘ç”Ÿé”™è¯¯ï¼Œè¿”å› EOF</li></ul></li></ul><p>ä½¿ç”¨ fscanf ä»æ–‡ä»¶ä¸­è¯»å–æ ¼å¼åŒ–æ•°æ®å¹¶æ‰“å°åˆ°æ§åˆ¶å°ï¼š<br>å‡è®¾æ–‡ä»¶ data.txt çš„å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Alice 20 88.5</span><br><span class="line">Bob 21 92.0</span><br><span class="line">Charlie 19 85.5</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¸Œæœ›è¯»å–æ¯è¡Œçš„å§“åã€å¹´é¾„å’Œæˆç»©ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    FILE *file;</span><br><span class="line">    <span class="type">char</span> name[<span class="number">50</span>];</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="type">float</span> grade;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»¥è¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">    file = <span class="built_in">fopen</span>(<span class="string">&quot;data.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (file == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;æ— æ³•æ‰“å¼€æ–‡ä»¶&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ fscanf è¯»å–æ ¼å¼åŒ–æ•°æ®</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æ–‡ä»¶å†…å®¹ï¼š\n&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">fscanf</span>(file, <span class="string">&quot;%s %d %f&quot;</span>, name, &amp;age, &amp;grade) == <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;å§“å: %s, å¹´é¾„: %d, æˆç»©: %.1f\n&quot;</span>, name, age, grade);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥æ˜¯å¦å› é”™è¯¯ç»“æŸ</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">ferror</span>(file)) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;è¯»å–æ–‡ä»¶æ—¶å‡ºé”™&quot;</span>);</span><br><span class="line">        <span class="built_in">fclose</span>(file);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…³é—­æ–‡ä»¶</span></span><br><span class="line">    <span class="built_in">fclose</span>(file);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æ–‡ä»¶è¯»å–å®Œæˆã€‚\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ fscanf ä»æ–‡ä»¶ä¸­è¯»å–æ ¼å¼åŒ–æ•°æ®ã€‚</p><ul><li>æ ¼å¼åŒ–å­—ç¬¦ä¸² â€œ%s %d %fâ€ æŒ‡å®šäº†æ•°æ®çš„æ ¼å¼ï¼š<ul><li>%sï¼šè¯»å–ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆå§“åï¼‰ã€‚</li><li>%dï¼šè¯»å–ä¸€ä¸ªæ•´æ•°ï¼ˆå¹´é¾„ï¼‰ã€‚</li><li>%fï¼šè¯»å–ä¸€ä¸ªæµ®ç‚¹æ•°ï¼ˆæˆç»©ï¼‰ã€‚</li></ul></li><li>fscanf è¿”å›æˆåŠŸåŒ¹é…å¹¶èµ‹å€¼çš„è¾“å…¥é¡¹æ•°ã€‚å¦‚æœè¿”å›å€¼ç­‰äº 3ï¼Œè¯´æ˜æˆåŠŸè¯»å–äº†ä¸€è¡Œæ•°æ®ã€‚</li></ul><p>ç¨‹åºè¿è¡Œåï¼Œæ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ–‡ä»¶å†…å®¹ï¼š</span><br><span class="line">å§“å: Alice, å¹´é¾„: 20, æˆç»©: 88.5</span><br><span class="line">å§“å: Bob, å¹´é¾„: 21, æˆç»©: 92.0</span><br><span class="line">å§“å: Charlie, å¹´é¾„: 19, æˆç»©: 85.5</span><br><span class="line">æ–‡ä»¶è¯»å–å®Œæˆã€‚</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åµŒå…¥å¼ </tag>
            
            <tag> æ–‡ä»¶IO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LeNet æ¨å¯¼</title>
      <link href="/2025/03/13/LeNet/"/>
      <url>/2025/03/13/LeNet/</url>
      
        <content type="html"><![CDATA[<p>LeNet-5æ˜¯LeNetç³»åˆ—çš„æœ€ç»ˆç¨³å®šç‰ˆï¼Œå®ƒè¢«ç¾å›½é“¶è¡Œç”¨äºæ‰‹å†™æ•°å­—è¯†åˆ«ï¼Œè¯¥ç½‘ç»œæœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>æ‰€æœ‰å·ç§¯æ ¸å‡ä¸º5x5ï¼Œæ­¥é•¿ä¸º1</li><li>æ‰€æœ‰æ± åŒ–æ–¹æ³•ä¸ºå¹³å‡æ± åŒ–</li><li>æ‰€æœ‰æ¿€æ´»å‡½æ•°é‡‡ç”¨Sigmoid</li></ul><hr><h1>1. LeNet æŸå¤±å‡½æ•°</h1><p>LeNet çš„æŸå¤±å‡½æ•°ä½¿ç”¨ <strong>äº¤å‰ç†µæŸå¤±ï¼ˆCross-Entropy Lossï¼‰</strong>ï¼Œè¿™æ˜¯åˆ†ç±»ä»»åŠ¡ä¸­æœ€å¸¸ç”¨çš„æŸå¤±å‡½æ•°ä¹‹ä¸€ã€‚äº¤å‰ç†µæŸå¤±ç”¨äºè¡¡é‡æ¨¡å‹è¾“å‡ºçš„æ¦‚ç‡åˆ†å¸ƒä¸çœŸå®æ ‡ç­¾ä¹‹é—´çš„å·®å¼‚ã€‚</p><hr><h2 id="1-1-äº¤å‰ç†µæŸå¤±çš„æ•°å­¦å…¬å¼">1.1 äº¤å‰ç†µæŸå¤±çš„æ•°å­¦å…¬å¼</h2><p>å¯¹äºå¤šåˆ†ç±»é—®é¢˜ï¼Œå‡è®¾ï¼š</p><ul><li>æ¨¡å‹çš„è¾“å‡ºæ˜¯ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒ ( \hat{y} = (\hat{y}_1, \hat{y}_2, \dots, \hat{y}_C) )ï¼Œå…¶ä¸­ ( C ) æ˜¯ç±»åˆ«æ•°ï¼ˆLeNet ä¸­ ( C = 10 )ï¼‰ã€‚</li><li>çœŸå®æ ‡ç­¾æ˜¯ä¸€ä¸ª one-hot ç¼–ç çš„å‘é‡ ( y = (y_1, y_2, \dots, y_C) )ï¼Œå…¶ä¸­åªæœ‰ä¸€ä¸ªå…ƒç´ ä¸º 1ï¼Œå…¶ä½™ä¸º 0ã€‚</li></ul><p>äº¤å‰ç†µæŸå¤±çš„å…¬å¼ä¸ºï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext><mi mathvariant="normal">L</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">s</mi><mi mathvariant="normal">s</mi></mtext><mo>=</mo><mo>âˆ’</mo><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow><mi>C</mi></mrow></msubsup><msub><mi>y</mi><mi>i</mi></msub><mi>log</mi><mo>(</mo><msub><mover accent="true"><mrow><mi>y</mi></mrow><mo>^</mo></mover><mi>i</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">\text{Loss} = -\sum_{i=1}^{C} y_i \log(\hat{y}_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.8283360000000002em;"></span><span class="strut bottom" style="height:3.106005em;vertical-align:-1.277669em;"></span><span class="base displaystyle textstyle uncramped"><span class="text mord displaystyle textstyle uncramped"><span class="mord mathrm">L</span><span class="mord mathrm">o</span><span class="mord mathrm">s</span><span class="mord mathrm">s</span></span><span class="mrel">=</span><span class="mord">âˆ’</span><span class="mop op-limits"><span class="vlist"><span style="top:1.1776689999999999em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.000005000000000143778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span><span class="op-symbol large-op mop">âˆ‘</span></span></span><span style="top:-1.2500050000000003em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.07153em;">C</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mopen">(</span><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle cramped"><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span><span style="top:0em;margin-left:0.11112em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p>å…¶ä¸­ï¼š</p><ul><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>y</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">y_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span> æ˜¯çœŸå®æ ‡ç­¾çš„ç¬¬ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span> ä¸ªå…ƒç´ ã€‚</li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mover accent="true"><mrow><mi>y</mi></mrow><mo>^</mo></mover><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\hat{y}_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord textstyle cramped"><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span><span style="top:0em;margin-left:0.11112em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span> æ˜¯æ¨¡å‹é¢„æµ‹çš„ç¬¬ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span> ä¸ªç±»åˆ«çš„æ¦‚ç‡ã€‚</li></ul><hr><h2 id="1-2-LeNet-çš„è¾“å‡ºå±‚å’ŒæŸå¤±å‡½æ•°">1.2 LeNet çš„è¾“å‡ºå±‚å’ŒæŸå¤±å‡½æ•°</h2><p>LeNet çš„è¾“å‡ºå±‚æ˜¯ä¸€ä¸ªå…¨è¿æ¥å±‚ï¼Œè¾“å‡º 10 ä¸ªå€¼ï¼ˆå¯¹åº” 0-9 çš„æ•°å­—ç±»åˆ«ï¼‰ã€‚ä¸ºäº†å°†è¿™äº›å€¼è½¬æ¢ä¸ºæ¦‚ç‡åˆ†å¸ƒï¼Œé€šå¸¸ä½¿ç”¨ <strong>softmax æ¿€æ´»å‡½æ•°</strong>ï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mover accent="true"><mrow><mi>y</mi></mrow><mo>^</mo></mover><mi>i</mi></msub><mo>=</mo><mfrac><mrow><msup><mi>e</mi><mrow><msub><mi>z</mi><mi>i</mi></msub></mrow></msup></mrow><mrow><msubsup><mo>âˆ‘</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mrow><mi>C</mi></mrow></msubsup><msup><mi>e</mi><mrow><msub><mi>z</mi><mi>j</mi></msub></mrow></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex">\hat{y}_i = \frac{e^{z_i}}{\sum_{j=1}^{C} e^{z_j}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.341392em;"></span><span class="strut bottom" style="height:2.5098409999999998em;vertical-align:-1.1684489999999998em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle cramped"><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span><span style="top:0em;margin-left:0.11112em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.7323309999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mop"><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">âˆ‘</span><span class="vlist"><span style="top:0.30001em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.364em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.07153em;">C</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:-0.30997em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:0.15000000000000002em;margin-right:0.07142857142857144em;margin-left:-0.04398em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:-0.04398em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span></p><p>å…¶ä¸­ï¼š</p><ul><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>z</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">z_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.04398em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span> æ˜¯è¾“å‡ºå±‚çš„ç¬¬ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span> ä¸ªå€¼ã€‚</li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mover accent="true"><mrow><mi>y</mi></mrow><mo>^</mo></mover><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\hat{y}_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord textstyle cramped"><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span><span style="top:0em;margin-left:0.11112em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span> æ˜¯ç¬¬ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span> ä¸ªç±»åˆ«çš„é¢„æµ‹æ¦‚ç‡ã€‚</li></ul><p>ç„¶åï¼Œä½¿ç”¨äº¤å‰ç†µæŸå¤±è®¡ç®—æ¨¡å‹è¾“å‡ºä¸çœŸå®æ ‡ç­¾ä¹‹é—´çš„å·®å¼‚ã€‚</p><hr><h1>1.3 äº¤å‰ç†µæŸå¤±çš„ç‰¹ç‚¹</h1><p>äº¤å‰ç†µæŸå¤±æ˜¯åˆ†ç±»ä»»åŠ¡ä¸­æœ€å¸¸ç”¨çš„æŸå¤±å‡½æ•°ä¹‹ä¸€ï¼Œå®ƒç›´æ¥è¡¡é‡æ¨¡å‹è¾“å‡ºçš„æ¦‚ç‡åˆ†å¸ƒä¸çœŸå®åˆ†å¸ƒä¹‹é—´çš„å·®å¼‚ã€‚æ­¤å¤–ï¼Œå®ƒä¸ softmax ç»“åˆæ—¶ï¼Œæ¢¯åº¦è®¡ç®—ç®€å•ä¸”ç¨³å®šï¼Œé€‚åˆåå‘ä¼ æ’­ã€‚</p><p>LeNet çš„æŸå¤±å‡½æ•°ä½¿ç”¨ <strong>äº¤å‰ç†µæŸå¤±</strong>ï¼Œç”¨äºè¡¡é‡æ¨¡å‹è¾“å‡ºä¸çœŸå®æ ‡ç­¾ä¹‹é—´çš„å·®å¼‚ã€‚é€šè¿‡æœ€å°åŒ–äº¤å‰ç†µæŸå¤±ï¼Œæ¨¡å‹å¯ä»¥å­¦ä¹ åˆ°æ›´å¥½çš„å‚æ•°ï¼Œä»è€Œæé«˜åˆ†ç±»å‡†ç¡®ç‡ã€‚äº¤å‰ç†µæŸå¤±ä¸ softmax æ¿€æ´»å‡½æ•°ç»“åˆï¼Œæ˜¯åˆ†ç±»ä»»åŠ¡ä¸­çš„ç»å…¸ç»„åˆã€‚</p><h1>2. ç½‘ç»œæ¶æ„</h1><p>ç½‘ç»œæ¶æ„å›¾ï¼š</p><p><img src="image.png" alt=""><br><img src="/images/LeNet_1.png" alt=""></p><h1>2.1 è¾“å…¥å±‚</h1><p>LeNet-5 çš„è¾“å…¥æ˜¯ <strong>32x32 çš„ç°åº¦å›¾åƒ</strong>ï¼Œé€šé“æ•°ä¸º 1ï¼ˆå› ä¸ºæ˜¯ç°åº¦å›¾ï¼‰ã€‚è¾“å…¥å¼ é‡çš„å½¢çŠ¶ä¸º <code>(1, 32, 32)</code>ã€‚</p><p><img src="image.png" alt=""><br><img src="/images/LeNet_1.png" alt=""></p><hr><h1>2.2 å·ç§¯å±‚ C1</h1><ul><li><strong>å·ç§¯æ ¸å¤§å°</strong>ï¼š5x5</li><li><strong>å·ç§¯æ ¸æ•°é‡</strong>ï¼š6</li><li><strong>æ­¥é•¿ï¼ˆstrideï¼‰</strong>ï¼š1</li><li><strong>å¡«å……ï¼ˆpaddingï¼‰</strong>ï¼š0</li></ul><p><img src="image.png" alt=""><br><img src="/images/LeNet_1.png" alt=""></p><p><strong>è®¡ç®—è¿‡ç¨‹</strong>ï¼š<br>å·ç§¯æ“ä½œçš„è¾“å‡ºå°ºå¯¸å…¬å¼ä¸ºï¼š</p>\text{è¾“å‡ºå°ºå¯¸} = \frac{\text{è¾“å…¥å°ºå¯¸} - \text{å·ç§¯æ ¸å¤§å°} + 2 \times \text{å¡«å……}}{\text{æ­¥å¹…}} + 1<p>å¯¹äº C1 å±‚ï¼š</p>\text{è¾“å‡ºå°ºå¯¸} = \frac{32 - 5 + 2 \times 0}{1} + 1 = 28<p>å› æ­¤ï¼ŒC1 å±‚çš„è¾“å‡ºæ˜¯ <strong>6 ä¸ª 28x28 çš„ç‰¹å¾å›¾</strong>ï¼Œå½¢çŠ¶ä¸º <code>(6, 28, 28)</code>ã€‚</p><hr><h1>2.3 æ± åŒ–å±‚ S2</h1><ul><li><strong>æ± åŒ–ç±»å‹</strong>ï¼šå¹³å‡æ± åŒ–</li><li><strong>æ± åŒ–æ ¸å¤§å°</strong>ï¼š2x2</li><li><strong>æ­¥å¹…ï¼ˆstrideï¼‰</strong>ï¼š2</li><li><strong>å¡«å……ï¼ˆpaddingï¼‰</strong>ï¼š0</li></ul><p><img src="image.png" alt=""><br><img src="/images/LeNet_1.png" alt=""></p><p><strong>è®¡ç®—è¿‡ç¨‹</strong>ï¼š<br>æ± åŒ–æ“ä½œçš„è¾“å‡ºå°ºå¯¸å…¬å¼ä¸ºï¼š</p>\text{è¾“å‡ºå°ºå¯¸} = \frac{\text{è¾“å…¥å°ºå¯¸} - \text{æ± åŒ–æ ¸å¤§å°}}{\text{æ­¥å¹…}} + 1<p>å¯¹äº S2 å±‚ï¼š</p>\text{è¾“å‡ºå°ºå¯¸} = \frac{28 - 2}{2} + 1 = 14<p>å› æ­¤ï¼ŒS2 å±‚çš„è¾“å‡ºæ˜¯ <strong>6 ä¸ª 14x14 çš„ç‰¹å¾å›¾</strong>ï¼Œå½¢çŠ¶ä¸º <code>(6, 14, 14)</code>ã€‚</p><hr><h1>2.4 å·ç§¯å±‚ C3</h1><ul><li><strong>å·ç§¯æ ¸å¤§å°</strong>ï¼š5x5</li><li><strong>å·ç§¯æ ¸æ•°é‡</strong>ï¼š16</li><li><strong>æ­¥å¹…ï¼ˆstrideï¼‰</strong>ï¼š1</li><li><strong>å¡«å……ï¼ˆpaddingï¼‰</strong>ï¼š0</li></ul><p><img src="image.png" alt=""><br><img src="/images/LeNet_1.png" alt=""></p><p><strong>è®¡ç®—è¿‡ç¨‹</strong>ï¼š<br>å¯¹äº C3 å±‚ï¼š</p>\text{è¾“å‡ºå°ºå¯¸} =\frac{\text{è¾“å…¥å°ºå¯¸} - \text{å·ç§¯æ ¸å¤§å°} + 2 \times \text{å¡«å……}}{\text{æ­¥å¹…}} + 1 = \frac{14 - 5 + 2 \times 0}{1} + 1 = 10<p>å› æ­¤ï¼ŒC3 å±‚çš„è¾“å‡ºæ˜¯ <strong>16 ä¸ª 10x10 çš„ç‰¹å¾å›¾</strong>ï¼Œå½¢çŠ¶ä¸º <code>(16, 10, 10)</code>ã€‚</p><hr><h1>2.5 æ± åŒ–å±‚ S4</h1><ul><li><strong>æ± åŒ–ç±»å‹</strong>ï¼šå¹³å‡æ± åŒ–</li><li><strong>æ± åŒ–æ ¸å¤§å°</strong>ï¼š2x2</li><li><strong>æ­¥å¹…ï¼ˆstrideï¼‰</strong>ï¼š2</li><li><strong>å¡«å……ï¼ˆpaddingï¼‰</strong>ï¼š0</li></ul><p><img src="image.png" alt=""><br><img src="/images/LeNet_1.png" alt=""></p><p><strong>è®¡ç®—è¿‡ç¨‹</strong>ï¼š<br>å¯¹äº S4 å±‚ï¼š</p>\text{è¾“å‡ºå°ºå¯¸} = \frac{\text{è¾“å…¥å°ºå¯¸} - \text{æ± åŒ–æ ¸å¤§å°}}{\text{æ­¥å¹…}} + 1 = \frac{10 - 2}{2} + 1 = 5<p>å› æ­¤ï¼ŒS4 å±‚çš„è¾“å‡ºæ˜¯ <strong>16 ä¸ª 5x5 çš„ç‰¹å¾å›¾</strong>ï¼Œå½¢çŠ¶ä¸º <code>(16, 5, 5)</code>ã€‚</p><hr><h1>2.6 å…¨è¿æ¥å±‚ C5</h1><ul><li><strong>è¾“å…¥</strong>ï¼šå°† S4 å±‚çš„è¾“å‡ºå±•å¹³ä¸ºä¸€ç»´å‘é‡ã€‚</li><li><strong>è¾“å…¥å¤§å°</strong>ï¼š<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mn>6</mn><mo>Ã—</mo><mn>5</mn><mo>Ã—</mo><mn>5</mn><mo>=</mo><mn>4</mn><mn>0</mn><mn>0</mn></mrow><annotation encoding="application/x-tex">16 \times 5 \times 5 = 400</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">1</span><span class="mord mathrm">6</span><span class="mbin">Ã—</span><span class="mord mathrm">5</span><span class="mbin">Ã—</span><span class="mord mathrm">5</span><span class="mrel">=</span><span class="mord mathrm">4</span><span class="mord mathrm">0</span><span class="mord mathrm">0</span></span></span></span></li><li><strong>è¾“å‡ºå¤§å°</strong>ï¼š120</li></ul><p><img src="image.png" alt=""><br><img src="/images/LeNet_1.png" alt=""></p><p><strong>è®¡ç®—è¿‡ç¨‹</strong>ï¼š<br>C5 å±‚æ˜¯ä¸€ä¸ªå…¨è¿æ¥å±‚ï¼Œå°† 400 ç»´çš„è¾“å…¥æ˜ å°„åˆ° 120 ç»´çš„è¾“å‡ºï¼š</p>\text{è¾“å‡º} = W \cdot \text{è¾“å…¥} + b<p>å…¶ä¸­ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">W</span></span></span></span> æ˜¯æƒé‡çŸ©é˜µï¼Œå½¢çŠ¶ä¸º <code>(120, 400)</code>ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">b</span></span></span></span> æ˜¯åç½®å‘é‡ï¼Œå½¢çŠ¶ä¸º <code>(120,)</code>ã€‚</p><hr><h1>2.7 å…¨è¿æ¥å±‚ F6</h1><ul><li><strong>è¾“å…¥å¤§å°</strong>ï¼š120</li><li><strong>è¾“å‡ºå¤§å°</strong>ï¼š84</li></ul><p><img src="image.png" alt=""><br><img src="/images/LeNet_1.png" alt=""></p><p><strong>è®¡ç®—è¿‡ç¨‹</strong>ï¼š<br>F6 å±‚å°† 120 ç»´çš„è¾“å…¥æ˜ å°„åˆ° 84 ç»´çš„è¾“å‡ºï¼š</p>\text{è¾“å‡º} = W \cdot \text{è¾“å…¥} + b<p>å…¶ä¸­ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">W</span></span></span></span> æ˜¯æƒé‡çŸ©é˜µï¼Œå½¢çŠ¶ä¸º <code>(84, 120)</code>ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">b</span></span></span></span> æ˜¯åç½®å‘é‡ï¼Œå½¢çŠ¶ä¸º <code>(84,)</code>ã€‚</p><hr><h1>2.8 è¾“å‡ºå±‚</h1><ul><li><strong>è¾“å…¥å¤§å°</strong>ï¼š84</li><li><strong>è¾“å‡ºå¤§å°</strong>ï¼š10ï¼ˆå¯¹åº” 0-9 çš„æ•°å­—ç±»åˆ«ï¼‰</li></ul><p><img src="image.png" alt=""><br><img src="/images/LeNet_1.png" alt=""></p><p><strong>è®¡ç®—è¿‡ç¨‹</strong>ï¼š<br>è¾“å‡ºå±‚å°† 84 ç»´çš„è¾“å…¥æ˜ å°„åˆ° 10 ç»´çš„è¾“å‡ºã€‚å…¶è®¡ç®—ä¸ºï¼š</p>\text{è¾“å‡º} = W \cdot \text{è¾“å…¥} + b<p>å…¶ä¸­ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">W</span></span></span></span> æ˜¯æƒé‡çŸ©é˜µï¼Œå½¢çŠ¶ä¸º <code>(10, 84)</code>ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">b</span></span></span></span> æ˜¯åç½®å‘é‡ï¼Œå½¢çŠ¶ä¸º <code>(10,)</code>ã€‚</p><p>æœ€åï¼Œä½¿ç”¨ <strong>softmax æ¿€æ´»å‡½æ•°</strong> å°†è¾“å‡ºè½¬æ¢ä¸ºæ¦‚ç‡åˆ†å¸ƒã€‚</p><hr><h1>æ€»ç»“</h1><p>LeNet é€šè¿‡å·ç§¯å±‚æå–å±€éƒ¨ç‰¹å¾ï¼Œé€šè¿‡å·ç§¯æ ¸å…±äº«æƒé‡å‡å°‘å‚æ•°ã€‚ä½¿ç”¨æ± åŒ–å±‚é™ä½ç‰¹å¾å›¾ç»´åº¦ï¼Œå¢å¼ºå¹³ç§»ä¸å˜æ€§ã€‚æœ€åé€šè¿‡å…¨è¿æ¥å±‚æ•´åˆç‰¹å¾ï¼Œè¾“å‡ºåˆ†ç±»ç»“æœã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> LeNet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot3 + vue3 å®ç°åˆ†é¡µæŸ¥è¯¢</title>
      <link href="/2025/03/12/project-test5/"/>
      <url>/2025/03/12/project-test5/</url>
      
        <content type="html"><![CDATA[<h1>1. æ’ä»¶å®‰è£…ä¸é—®é¢˜å¼•å‡º</h1><p>åœ¨vueå·¥ç¨‹ç›®å½•æ‰“å¼€cmdï¼Œè¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i axios -S</span><br></pre></td></tr></table></figure><p>å®‰è£…æ’ä»¶</p><p>åœ¨vue/src/views/Home.vueä¸­<code>&lt;script&gt;&lt;/script&gt;</code>ä¹‹é—´æ·»åŠ ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">axios.get(&#x27;http://localhost:9999/admin/selectAll&#x27;).then(res =&gt; &#123;</span><br><span class="line">  console.log(res)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>è¿è¡Œvueå·¥ç¨‹åè¿›å…¥manager/homeè·¯ç”±ï¼Œå³é”®æ£€æŸ¥ï¼Œåœ¨æ§åˆ¶å°é‡Œå°±å‘ç°äº†è¯·æ±‚é”™è¯¯ã€‚</p><p>è¿™ä¸ªé”™è¯¯ï¼Œå…¶å®æ˜¯å› ä¸ºvueé¡¹ç›®çš„ç«¯å£å’Œä¸Šé¢ä½¿ç”¨çš„ç«¯å£ä¸ä¸€æ ·ï¼Œè¿™ç§æƒ…å†µä¸‹æµè§ˆå™¨é»˜è®¤ä¼šæœ‰ä¸€ä¸ªè·¨åŸŸçš„é™åˆ¶ï¼Œä¸å…è®¸åœ¨ä¸ä¸€æ ·çš„ç«¯å£å·é‡Œè¯·æ±‚æ•°æ®ï¼š</p><pre><code>Failed to load resource: net::ERR_CONNECTION_REFUSED</code></pre><h2 id="1-2-å¤„ç†è·¨åŸŸé™åˆ¶">1.2 å¤„ç†è·¨åŸŸé™åˆ¶</h2><p>éœ€è¦åœ¨springbooté‡Œè®¾ç½®ç»Ÿä¸€çš„è·¨åŸŸå¤„ç†ã€‚</p><p>åœ¨springbootå·¥ç¨‹çš„com.example.commoné‡Œæ–°å»ºCorsConfigç±»ï¼Œå¹¶å¯¹è¿™ä¸ªç±»æ·»åŠ <code>@Configuration</code>æ³¨è§£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.common;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.CorsConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.UrlBasedCorsConfigurationSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.filter.CorsFilter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CorsConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> CorsFilter <span class="title function_">cosConfig</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">UrlBasedCorsConfigurationSource</span> <span class="variable">source</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UrlBasedCorsConfigurationSource</span>();</span><br><span class="line">        <span class="type">CorsConfiguration</span> <span class="variable">corsConfiguration</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CorsConfiguration</span>();</span><br><span class="line">        corsConfiguration.addAllowedOrigin(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        corsConfiguration.addAllowedHeader(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        corsConfiguration.addAllowedMethod(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        source.registerCorsConfiguration(<span class="string">&quot;/**&quot;</span>, corsConfiguration);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CorsFilter</span>(source);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶è¿è¡Œspringbootå·¥ç¨‹ã€vueå·¥ç¨‹ï¼Œè®¿é—®å‰ç«¯çš„manager/homeï¼Œå³é”®æ£€æŸ¥ï¼ŒæŸ¥çœ‹æ§åˆ¶å°ï¼Œå°±ä¼šå‘ç°æœ‰æ•°æ®ä¼ è¿‡æ¥äº†ã€‚</p><p>ä½†æ˜¯æœ‰æ—¶å»è¯·æ±‚å¹¶ä¸ä¸€å®šä¼šæˆåŠŸï¼Œæ‰€ä»¥å¯ä»¥åˆ¤æ–­ä¸€ä¸‹çŠ¶æ€ç ï¼š<br>æŠŠåœ¨vue/src/views/Home.vueä¸­<code>&lt;script&gt;&lt;/script&gt;</code>ä¹‹é—´æ·»åŠ çš„ä»£ç æ”¹æˆï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">axios.get(&#x27;http://localhost:9999/admin/selectAll&#x27;).then(res =&gt; &#123;</span><br><span class="line">  if (res.code != 200) &#123;</span><br><span class="line">    // é”™è¯¯æç¤º</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    console.log(res)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1>2. å°è£…ç»Ÿä¸€çš„è¯·æ±‚å·¥å…· request.js</h1><p>åœ¨vue/srcä¸­æ–°å»ºä¸€ä¸ªutilsç›®å½•ï¼Œåœ¨è¿™ä¸ªç›®å½•ä¸‹åœ¨åˆ›å»ºrequest.jsï¼Œå†…å®¹ç¼–è¾‘ä¸ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">ElMessage</span>&#125; <span class="keyword">from</span> <span class="string">&quot;element-plus&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> request = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">baseURL</span>: <span class="string">&#x27;http://localhost:9999&#x27;</span>,</span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">30000</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">request.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="function"><span class="params">config</span> =&gt;</span>&#123;</span><br><span class="line">    config.<span class="property">headers</span>[<span class="string">&#x27;Content-Type&#x27;</span>] = <span class="string">&#x27;application/json;charset=utf-8&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">&#125;, <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">request.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">    <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> res = response.<span class="property">data</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> res == <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">            res = res ? <span class="title class_">JSON</span>.<span class="title function_">parse</span>(res) : res</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> === <span class="number">404</span>) &#123;</span><br><span class="line">            <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(<span class="string">&#x27;æœªæ‰¾åˆ°è¯·æ±‚æ¥å£&#x27;</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> === <span class="number">500</span>) &#123;</span><br><span class="line">            <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(<span class="string">&#x27;ç³»ç»Ÿå¼‚å¸¸ï¼Œè¯·æŸ¥çœ‹åç«¯æ§åˆ¶å°æŠ¥é”™&#x27;</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(error.<span class="property">message</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> request</span><br></pre></td></tr></table></figure><ol><li>å¯¼å…¥axios</li><li>å¯¼å…¥äº†ElMessageï¼ˆelement-plusæä¾›çš„å¼¹çª—æç¤ºçš„ç»„ä»¶ï¼‰</li><li>åˆ›å»ºrequestå¯¹è±¡<ul><li>é€šè¿‡axiosçš„createæ–¹æ³•åˆ›å»ºäº†requestå¯¹è±¡</li><li>åœ¨requestå¯¹è±¡é‡Œè®¾ç½®äº†åç«¯åœ°å€ä»¥åŠåå°æ¥å£çš„è¶…æ—¶æ—¶é—´ï¼ˆ30sï¼‰</li></ul></li><li>è¯·æ±‚å¼€å§‹åšæ‹¦æˆªå™¨å¤„ç†<ul><li>æ‹¦æˆªå™¨å¼€å§‹æ—¶è®¾ç½®ç»Ÿä¸€çš„è¯·æ±‚å¤´ä¸º<strong>application/json</strong>ï¼Œå­—ç¬¦é›†ä¸ºutf-i</li></ul></li><li>è¯·æ±‚æ•°æ®åšæ‹¦æˆªå™¨å¤„ç†<ul><li>å…ˆæ‹¿å‡ºç»“æœï¼ˆlet res = response.dataï¼‰</li><li>åˆ¤æ–­ä¸€ä¸‹resçš„ç±»å‹ï¼Œå¦‚æœæ˜¯Stringå°±è½¬æ¢æˆjson</li><li>å½“æœ‰é”™è¯¯æ—¶ï¼Œ<ul><li>å¦‚æœçŠ¶æ€ç ä¸º404æç¤ºæœªæ‰¾åˆ°è¯·æ±‚æ¥å£</li><li>500ï¼Œç³»ç»Ÿå¼‚å¸¸</li><li>å…¶ä»–äº¤ç»™æ§åˆ¶å°æ‰“å°</li></ul></li></ul></li><li>è¿”å›requestå¯¹è±¡<ul><li>æœ€åä¸€è¡Œä»£ç <strong>export default request</strong>ç”¨äºè¿”å›requestå¯¹è±¡</li></ul></li></ol><p>ç„¶åå°±å¯ä»¥æŠŠåœ¨vue/src/views/Home.vueä¸­<code>&lt;script&gt;&lt;/script&gt;</code>ä¹‹é—´æ·»åŠ çš„ä»£ç æ”¹æˆï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">request.<span class="title function_">get</span>(<span class="string">&#x27;/admin/selectAll&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="string">&#x27;200&#x27;</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title class_">ElMessage</span>(res.<span class="property">msg</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1>3. åˆ†é¡µæŸ¥è¯¢</h1><p>ä¸åŒäºselectAllæ¥å£ï¼Œåˆ†é¡µæŸ¥è¯¢selectPageæ¥å£è¿”å›çš„æ˜¯åˆ†é¡µå¯¹è±¡ï¼Œå®ƒåŒ…å«ï¼š</p><ul><li>totalï¼šæ•°æ®åº“è¡¨æ‰€æœ‰æ•°æ®æ€»çš„ä¸ªæ•°</li><li>listï¼šè¿”å›çš„æ•°æ®æ•°ç»„</li><li>pageNumï¼šå½“å‰çš„é¡µç </li><li>pageSizeï¼šæ¯é¡µå±•ç¤ºçš„ä¸ªæ•°</li></ul><h2 id="3-1-æ·»åŠ ä¾èµ–">3.1 æ·»åŠ ä¾èµ–</h2><p>ä½¿ç”¨åˆ†é¡µæ’ä»¶pageHelperæ¥å®Œæˆè¿™ä¸ªåŠŸèƒ½ã€‚<br>åœ¨springbootå·¥ç¨‹çš„pom.xmlä¸‹æ·»åŠ ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--åˆ†é¡µæ’ä»¶pageHelper--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="image.png" alt="alt text"><br><img src="/images/project-test5_1.png" alt=""></p><p>åŠ è½½ä¾èµ–åå°±å¯ä»¥å»å®ç°selectPageæ¥å£äº†ã€‚</p><h2 id="3-2-æ¥å£å®ç°">3.2 æ¥å£å®ç°</h2><p>åœ¨springbootå·¥ç¨‹çš„com/example/controller/AdminController.javaä¸‹æ·»åŠ åˆ†é¡µæŸ¥è¯¢çš„æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/selectPage&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">selectPage</span><span class="params">(<span class="meta">@RequestParam(defaultValue = &quot;1&quot;)</span> Integer pageNum,</span></span><br><span class="line"><span class="params">                         <span class="meta">@RequestParam(defaultValue = &quot;10&quot;)</span> Integer pageSize)</span> &#123;</span><br><span class="line">    PageInfo&lt;Admin&gt; adminPageInfo = adminService.selectPage(pageNum, pageSize);</span><br><span class="line">    <span class="keyword">return</span> Result.success(adminPageInfo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>selectPageæœ€å°‘ä¸¤ä¸ªå‚æ•°ï¼š</p><ul><li>pageNumï¼šå½“å‰çš„é¡µç </li><li>pageSize</li></ul><p><strong>@RequestParam</strong>æ˜¯å‚æ•°çš„è·¯å¾„ï¼Œ**(defaultValue = â€œ1â€)**æ˜¯è®¾ç½®é»˜è®¤å€¼ä¸º1ã€‚</p><p>è¿™ä¸ªæ¥å£ä¸»è¦æ˜¯é€šè¿‡æ³¨å…¥çš„ç±»çš„å…·ä½“å¯¹è±¡adminServiceå¹¶è°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„selectPageæ–¹æ³•æ¥å®ç°çš„ï¼ŒadminServiceé‡Œæˆ‘ä»¬è¿˜æ²¡æœ‰å®ç°è¿™ä¸ªæ–¹æ³•ï¼Œå› æ­¤æˆ‘ä»¬å¾—å»adminServiceæ‰€å±çš„ç±»AdminServiceï¼Œä¹Ÿå°±æ˜¯serviceå±‚çš„ä¸€ä¸ªç±»ä¸­å»å®ç°è¿™ä¸ªæ–¹æ³•ã€‚</p><p>åœ¨springbootå·¥ç¨‹ä¸‹çš„com/example/service/AdminService.javaä¸­æ·»åŠ selectPageæ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> PageInfo&lt;Admin&gt; <span class="title function_">selectPage</span><span class="params">(Integer pageNum, Integer pageSize)</span> &#123;</span><br><span class="line">    <span class="comment">// å¼€å¯åˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line">    PageHelper.startPage(pageNum, pageSize);</span><br><span class="line">    List&lt;Admin&gt; adminList = adminMapper.selectAll();</span><br><span class="line">    <span class="keyword">return</span> PageInfo.of(adminList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä»¥åè®¿é—®å‰ç«¯çš„/manager/adminå°±å¯ä»¥è·å¾—æ•°æ®äº†ï¼Œä½†æ˜¯è¿˜éœ€è¦åœ¨å‰ç«¯æ¸²æŸ“è¿™ä¸ªæ•°æ®ã€‚</p><h2 id="3-3-æ•°æ®æ¸²æŸ“">3.3 æ•°æ®æ¸²æŸ“</h2><p>æŠŠvue/src/views/Home.vueæ›´åä¸ºAdmin.vueï¼Œç„¶ååœ¨<code>&lt;script&gt;&lt;/script&gt;</code>ä¹‹é—´æ·»åŠ çš„ä»£ç æ”¹æˆï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">load</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  request.<span class="title function_">get</span>(<span class="string">&#x27;/admin/selectPage&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    data.<span class="property">tableData</span> = res.<span class="property">data</span>.<span class="property">list</span></span><br><span class="line">    data.<span class="property">total</span> = res.<span class="property">data</span>.<span class="property">total</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">load</span>()</span><br></pre></td></tr></table></figure><p><code>const load = () =&gt; &#123;&#125;</code>éƒ¨åˆ†æ˜¯å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œ<code>load()</code>æ˜¯è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p><p>ç°åœ¨å»è®¿é—®å‰ç«¯çš„/manager/adminæ¥å£å°±å¯ä»¥å®ç°æ•°æ®æ¸²æŸ“ï¼Œä½†æ˜¯æ— æ³•å®ç°åˆ†é¡µã€‚</p><p>æˆ‘ä»¬åœ¨serviceå±‚å’Œcontrollerå±‚çš„æ¥å£éƒ½æ˜¯å¸¦ä¸¤ä¸ªé»˜è®¤å‚æ•°çš„ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨Admin.vueä¸­å¹¶æ²¡æœ‰ä¼ é€’ä»»ä½•å‚æ•°ï¼Œåªä½¿ç”¨äº†é»˜è®¤å‚æ•°ã€‚åº”ä¼ é€’å‚æ•°ã€‚</p><p>æ‰€ä»¥å°†<code>load</code>æ–¹æ³•æ”¹æˆï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">load</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  request.<span class="title function_">get</span>(<span class="string">&#x27;/admin/selectPage&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      <span class="attr">pageNum</span>: data.<span class="property">pageNum</span>,</span><br><span class="line">      <span class="attr">pageSize</span>: data.<span class="property">pageSize</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    data.<span class="property">tableData</span> = res.<span class="property">data</span>.<span class="property">list</span></span><br><span class="line">    data.<span class="property">total</span> = res.<span class="property">data</span>.<span class="property">total</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">load</span>()</span><br></pre></td></tr></table></figure><p>ç°åœ¨å»è®¿é—®å‰ç«¯çš„/manager/adminæ¥å£å‘ç°ä¹‹å‰æ˜¯ä¸€æ¬¡æ€§å±•ç¤ºäº†æ‰€æœ‰æ•°æ®ï¼Œè¿™æ¬¡æ˜¯å±•ç¤ºäº†5ä¸ªæ•°æ®ï¼ˆdata.pageSize=5ï¼‰ã€‚ä½†æ˜¯åˆ‡æ¢é¡µé¢æ²¡æœ‰ä»€ä¹ˆå˜åŒ–ã€‚</p><p>æŠŠel-tableç»„ä»¶ä¸‹æœ‰ä¸€è¡Œä»£ç æ˜¯ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@current-change=<span class="string">&quot;handleCurrentChange&quot;</span></span><br></pre></td></tr></table></figure><p>æŠŠå‚æ•°æ”¹æˆ&quot;load&quot;ï¼Œæ„ä¸ºåˆ‡æ¢é¡µç æ—¶è§¦å‘loadæ–¹æ³•è°ƒç”¨ï¼Œè¿™æ ·å°±å®ç°äº†åˆ†é¡µæŸ¥è¯¢ã€‚</p><p>å†æ·»åŠ è¯·æ±‚æˆåŠŸä¸å¦åˆ¤æ–­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">load</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  request.<span class="title function_">get</span>(<span class="string">&#x27;/admin/selectPage&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      <span class="attr">pageNum</span>: data.<span class="property">pageNum</span>,</span><br><span class="line">      <span class="attr">pageSize</span>: data.<span class="property">pageSize</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="string">&#x27;200&#x27;</span>) &#123;</span><br><span class="line">      data.<span class="property">tableData</span> = res.<span class="property">data</span>.<span class="property">list</span></span><br><span class="line">      data.<span class="property">total</span> = res.<span class="property">data</span>.<span class="property">total</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">load</span>()</span><br></pre></td></tr></table></figure><h2 id="3-4-æŸ¥è¯¢">3.4 æŸ¥è¯¢</h2><p>å‰é¢å®ç°äº†åˆ†é¡µï¼Œç°åœ¨å®ç°æŸ¥è¯¢ã€‚</p><p>é‚£ä¹ˆéœ€è¦åœ¨loadæ–¹æ³•é‡Œå†æ·»åŠ ä¸€ä¸ªå‚æ•°<code>name</code>ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">load</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  request.<span class="title function_">get</span>(<span class="string">&#x27;/admin/selectPage&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      <span class="attr">pageNum</span>: data.<span class="property">pageNum</span>,</span><br><span class="line">      <span class="attr">pageSize</span>: data.<span class="property">pageSize</span>,</span><br><span class="line">      <span class="attr">name</span>: data.<span class="property">name</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="string">&#x27;200&#x27;</span>) &#123;</span><br><span class="line">      data.<span class="property">tableData</span> = res.<span class="property">data</span>.<span class="property">list</span></span><br><span class="line">      data.<span class="property">total</span> = res.<span class="property">data</span>.<span class="property">total</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">load</span>()</span><br></pre></td></tr></table></figure><p>è¿™é‡Œloadè°ƒç”¨çš„æ˜¯åç«¯controllerå±‚çš„æ¥å£ï¼Œç„¶åcontrollerå±‚å†è°ƒç”¨serviceå±‚ï¼Œserviceå±‚åˆé€šè¿‡mapperå±‚ï¼Œæ‰€ä»¥controllerå±‚å’Œserviceå±‚çš„æ¥å£ä¹Ÿè¦æ·»åŠ ä¸€ä¸ªå‚æ•°ï¼Œmapperå±‚ä¹Ÿè¦è¿›è¡Œä¿®æ”¹ã€‚</p><p>å…ˆæ˜¯controllerå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/selectPage&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">selectPage</span><span class="params">(<span class="meta">@RequestParam(defaultValue = &quot;1&quot;)</span> Integer pageNum,</span></span><br><span class="line"><span class="params">                         <span class="meta">@RequestParam(defaultValue = &quot;10&quot;)</span> Integer pageSize,</span></span><br><span class="line"><span class="params">                         <span class="meta">@RequestParam(required = false)</span> String name)</span> &#123;</span><br><span class="line">    PageInfo&lt;Admin&gt; adminPageInfo = adminService.selectPage(pageNum, pageSize, name);</span><br><span class="line">    <span class="keyword">return</span> Result.success(adminPageInfo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åœ¨å‚æ•°ä¸­æ·»åŠ äº†<code>@RequestParam(required = false) String name</code>,required = falseå°±æ˜¯ä¸å¼ºåˆ¶æ¥æ”¶è¿™ä¸ªå‚æ•°ã€‚</li><li>åœ¨adminServiceçš„selectPageæ–¹æ³•è°ƒç”¨é‡Œæ·»åŠ nameå‚æ•°</li></ul><p>ç„¶åæ˜¯serviceå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Admin&gt; <span class="title function_">selectAll</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> adminMapper.selectAll(<span class="literal">null</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> PageInfo&lt;Admin&gt; <span class="title function_">selectPage</span><span class="params">(Integer pageNum, Integer pageSize, String name)</span> &#123;</span><br><span class="line">    <span class="comment">// å¼€å¯åˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line">    PageHelper.startPage(pageNum, pageSize);</span><br><span class="line">    List&lt;Admin&gt; adminList = adminMapper.selectAll(name);</span><br><span class="line">    <span class="keyword">return</span> PageInfo.of(adminList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>selectAllä¸­è°ƒç”¨AdminMapperç±»å¯¹è±¡adminMapperçš„æ–¹æ³•selectAllæ—¶æ·»åŠ nullå‚æ•°ï¼Œè¡¨ç¤ºä¸è¿›è¡ŒæŸ¥è¯¢</li><li>åœ¨selectPageä¸­è°ƒç”¨adminMapper.selectAllçš„è°ƒç”¨æ·»åŠ nameå‚æ•°</li></ul><p>æ¥ç€ä¿®æ”¹mapperå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AdminMapper</span> &#123;</span><br><span class="line">    List&lt;Admin&gt; <span class="title function_">selectAll</span><span class="params">(String name)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€è¿˜éœ€è¦ä¿®æ”¹mapperå¯¹åº”çš„src/main/resources/mapper/AdminMapper.xmlä¸­çš„SQLè¯­å¥ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.example.mapper.AdminMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.example.entity.Admin&quot;</span>&gt;</span></span><br><span class="line">        select * from `admin`</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null&quot;</span>&gt;</span>name = #&#123;name&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">        order by id desc</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­åŸæ¥çš„</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from `admin` order by id desc</span><br></pre></td></tr></table></figure><p>å˜æˆäº†ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select * from `admin`</span><br><span class="line"><span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null&quot;</span>&gt;</span>name = #&#123;name&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">order by id desc</span><br></pre></td></tr></table></figure><p><code>&lt;where&gt;...&lt;/where&gt;</code>éƒ¨åˆ†æ˜¯åšåˆ¤æ–­ï¼š</p><ul><li>å½“name != nullæ—¶ç›¸å½“äºè¯­å¥<code>select * from </code>admin<code> where name = #&#123;&#125; order by id desc</code></li><li>å½“name == nullæ—¶ç›¸å½“äºè¯­å¥<code>select * from </code>admin<code> order by id desc</code></li><li><code>name = #&#123;name&#125;</code>æ˜¯ç²¾ç¡®æŸ¥è¯¢</li><li><code>name like concat('%', #&#123;name&#125;, '%')</code>æ˜¯æ¨¡ç³ŠæŸ¥è¯¢</li><li>è¿™å…¶å®æ˜¯MyBaticçš„æ”¯æŒ</li></ul><p>å¦å¤–å‰ç«¯è¿˜éœ€è¦åœ¨æŸ¥è¯¢æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶<code>@click=&quot;load&quot;</code></p><h1>4. å£°æ˜</h1><p>æœ¬æ–‡æ˜¯å¯¹Bç«™è§†é¢‘<a href="https://www.bilibili.com/video/BV1wNPNeSEEQ?spm_id_from=333.788.videopod.sections&amp;vd_source=a0f19e79b7da02f4fa318d91be5bc86a">ã€å¸¦å°ç™½åšæ¯•è®¾ã€‘05. Springboot3+vue3å®ç°å¢åˆ æ”¹æŸ¥ã€åˆ†é¡µæŸ¥è¯¢ã€æ‰¹é‡åˆ é™¤ï¼ˆä¸Šï¼‰</a>çš„å­¦ä¹ è®°å½•ï¼Œä¾µæƒè”ç³»åˆ ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Springboot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>YOLO</title>
      <link href="/2025/03/11/yolo1/"/>
      <url>/2025/03/11/yolo1/</url>
      
        <content type="html"><![CDATA[<h1>1. ç›®æ ‡æ£€æµ‹ç»¼è¿°</h1><p>ç›®æ ‡æ£€æµ‹åˆ†ä¸ºï¼š</p><ul><li>one-stage detectorï¼ˆå•é˜¶æ®µæ¨¡å‹ï¼‰<ul><li>ä»£è¡¨æœ‰Yoloã€SSDã€Retina-net</li></ul></li><li>two-stage detectorï¼ˆä¸¤é˜¶æ®µæ¨¡å‹ï¼‰<ul><li>å…ˆä»å›¾åƒæå–è‹¥å¹²å€™é€‰æ¡†ï¼Œå†é€ä¸€å¯¹è¿™äº›å€™é€‰æ¡†åšåˆ†ç±»ã€ç”„åˆ«ä»¥åŠè°ƒæ•´å®ƒä»¬çš„åæ ‡ã€‚</li><li>ä»£è¡¨æœ‰RCNNã€SPPNetã€Fast RCNN</li></ul></li></ul><p>R-CNNâ€”â€”Regions with CNN features</p><ol><li>è¾“å…¥å›¾åƒ</li><li>æå–å€™é€‰åŒºåŸŸï¼ˆ~2kï¼‰</li><li>è®¡ç®—CNNç‰¹å¾</li><li>å°†åŒºåŸŸåˆ†ç±»</li></ol><p>YOLOè®ºæ–‡é“¾æ¥<a href="https://arxiv.org/pdf/1506.02640">You Only Look Once:Unifed, Real-Time Obiect Detection</a></p><h1>2. é¢„æµ‹é˜¶æ®µï¼ˆå‰å‘æ¨æ–­ï¼‰</h1><p>æ­¤æ—¶æ¨¡å‹æ˜¯å·²ç»è®­ç»ƒå¥½çš„ï¼Œè¾“å…¥æœªçŸ¥å›¾ç‰‡è¿›è¡Œé¢„æµ‹ï¼Œæ­¤æ—¶æ²¡æœ‰åå‘ä¼ æ’­ï¼Œåªæœ‰å‰å‘æ¨æ–­ã€‚</p><h2 id="2-1-Yolo-ç½‘ç»œæ¶æ„">2.1 Yolo ç½‘ç»œæ¶æ„</h2><p><img src="/images/yolo1_1.png" alt=""><br><img src="image.png" alt="alt text"></p><p>24å±‚å·ç§¯å±‚æå–å›¾åƒç‰¹å¾ï¼Œ2å±‚å…¨è¿æ¥å±‚å›å½’å¾—åˆ°7x7x30çš„å‘é‡ã€‚</p><p>è¾“å…¥æ˜¯448x448x3çš„å›¾åƒï¼Œä¹Ÿå°±æ˜¯å…ˆå°†ä¸€å¼ å½©è‰²å›¾ç‰‡ç¼©æ”¾æˆ448x448åƒç´ çš„å›¾ç‰‡ï¼Œ3æ˜¯3é€šé“RGBã€‚ç„¶åç»è¿‡è‹¥å¹²ä¸ªå·ç§¯å±‚ã€æ± åŒ–å±‚ï¼Œæœ€åå˜æˆä¸€ä¸ª7x7x1024ç»´çš„feature mapã€‚å†æŠŠå®ƒæ‹‰ç›´ï¼Œå–‚åˆ°ä¸€ä¸ª4096ä¸ªç¥ç»å…ƒçš„å…¨è¿æ¥å±‚ä¸­è¾“å‡º4096ç»´çš„å‘é‡ã€‚å†æŠŠè¿™ä¸ª4096ç»´å‘é‡å–‚åˆ°1470ï¼ˆ7x7x30ï¼‰ä¸ªç¥ç»å…ƒçš„å…¨è¿æ¥å±‚ä¸­ï¼Œè¾“å‡º1470ç»´çš„å‘é‡ï¼ˆå…¶å®æœ€åæ˜¯æŠŠè¿™ä¸ª1470ç»´çš„å‘é‡Reshapeæˆäº†7x7x30çš„å‘é‡ï¼‰ã€‚æœ€åè¾“å‡ºçš„7x7x30ç»´çš„å‘é‡åŒ…å«å°±åŒ…å«äº†æ‰€æœ‰é¢„æµ‹æ¡†çš„åæ ‡ã€ç½®ä¿¡åº¦å’Œç±»åˆ«ç»“æœã€‚æˆ‘ä»¬åªéœ€è¦è§£æè¿™ä¸ªå‘é‡å°±å¯ä»¥è·å¾—æœ€ç»ˆçš„ç»“æœã€‚è¿™ä¸ªå°±æ˜¯æ•´ä¸ªé»‘ç®±å­çš„æ¡†æ¶ã€‚</p><h2 id="2-2-ä¸ºä»€ä¹ˆæ˜¯7x7x30å‘¢ï¼Ÿ">2.2 ä¸ºä»€ä¹ˆæ˜¯7x7x30å‘¢ï¼Ÿ</h2><p>å› ä¸ºç½‘ç»œå…ˆæŠŠå›¾åƒåˆ’åˆ†ä¸ºSxSä¸ªgrid cellï¼ˆä¹Ÿå°±æ˜¯ç½‘æ ¼ï¼‰ï¼Œåœ¨YOLOV1ä¸­S=7ã€‚æ¯ä¸ªgrid cellé¢„æµ‹å‡ºBä¸ªbounding boxï¼ˆé¢„æµ‹æ¡†ï¼‰ï¼ŒYOLOV1ä¸­B=2ã€‚æ¯ä¸ªgrid cellé¢„æµ‹å‡ºçš„ä¸¤ä¸ªbounding boxå¯èƒ½å¾ˆå¤§ä¹Ÿå¯èƒ½å¾ˆå°ï¼Œä¹Ÿå¯èƒ½ä¸å…¶ä»–çš„bounding boxå­˜åœ¨é‡å ï¼Œä½†æ˜¯æ— æ‰€è°“ï¼Œåªè¦bounding boxçš„ä¸­å¿ƒç‚¹è½åœ¨è¿™ä¸ªgrid cellé‡Œï¼Œå°±è¯´æ˜è¿™ä¸ªbounding boxæ˜¯ç”±è¿™ä¸ªgrid cellç”Ÿæˆçš„ã€‚</p><p><img src="/images/yolo1_2.png" alt=""><br><img src="image-1.png" alt="alt text"></p><p>7x7=49ä¸ªgrid cellï¼Œæ¯ä¸ªgrid cellç”Ÿæˆä¸¤ä¸ªbounding boxï¼Œé‚£ä¹ˆå°±ç”Ÿæˆäº†98ä¸ªbounding boxã€‚bounding boxåŒ…å«xã€yã€hã€wè¿™å››ä¸ªåæ ‡ï¼Œç”±è¿™å››ä¸ªåæ ‡å¯ä»¥ç¡®å®šbounding boxçš„ä½ç½®ã€‚å¦å¤–bounding boxè¿˜åŒ…å«ä¸€ä¸ªå®ƒå«ä¸å«æœ‰ä¸€ä¸ªobjectçš„ç½®ä¿¡åº¦ï¼ˆæˆ‘ç†è§£ä¸ºè¿™ä¸ªbounding boxä¸­å«æœ‰ç‰©ä½“çš„æ¦‚ç‡P(object)ï¼‰ï¼Œåœ¨å›¾åƒä¸­ç½®ä¿¡åº¦ç”±bounding boxè¾¹æ¡†çº¿çš„ç²—ç»†æ¥è¡¨ç¤ºï¼Œè¶Šç²—ç½®ä¿¡åº¦è¶Šé«˜ã€‚è¿™æ ·ä¸€ä¸ªbounding boxå¯ä»¥ç”±å››ä¸ªä½ç½®å‚æ•°å’Œä¸€ä¸ªç½®ä¿¡åº¦å‚æ•°ç»„æˆçš„(x,y,h,w,c)æ¥è¡¨ç¤ºã€‚å¯è§†åŒ–å‡ºæ¥å°±æ˜¯ä¸Šé¢å›¾ä¸­ç”±å¯†å¯†éº»éº»é»‘çº¿çš„è¿™å¹…å›¾ã€‚</p><p>å¦å¤–ï¼Œæ¯ä¸ªgrid cellè¿˜èƒ½ç”Ÿæˆæ‰€æœ‰ç±»åˆ«çš„æ¡ä»¶æ¦‚ç‡ã€‚ä¹Ÿå°±æ˜¯ï¼Œå‡è®¾è¾“å…¥åœ¨åŒ…å«objectçš„æƒ…å†µä¸‹ï¼Œè¿™äº›objectæ˜¯æŸä¸ªç±»åˆ«çš„æ¦‚ç‡ã€‚ä¹Ÿå°±æ˜¯ä¸Šé¢å›¾ä¸­æœ‰å½©è‰²å—çš„å›¾ã€‚æŠŠæ¯ä¸ªbounding boxçš„ç½®ä¿¡åº¦ä¹˜ä»¥ç±»åˆ«æ¡ä»¶æ¦‚ç‡ï¼Œå°±èƒ½è·å¾—æ¯ä¸ªbounding boxå±äºå„ç±»åˆ«çš„æ¦‚ç‡ã€‚7x7x30ä¸­çš„30ä¸ºSxSx(5xB+C)ã€‚</p><p>å†è¯¦ç»†è§£é‡Šä¸€äº›è¿™ä¸ª30ã€‚</p><p>æ¯ä¸ªgrid cellåŒ…å«2ï¼ˆå³Bï¼‰ä¸ªé¢„æµ‹æ¡†ï¼Œæ¯ä¸ªé¢„æµ‹æ¡†æœ‰5ä¸ªå‚æ•°ï¼Œç„¶ååœ¨Pascal VOCä¸­åŒ…å«20ï¼ˆå³Cï¼‰ä¸ªç±»åˆ«ã€‚è¿™ä¸€ä¸ª30å°±æ˜¯ä¸€ä¸ªgrid cellçš„ä¿¡æ¯ï¼Œæ€»å…±7x7ä¸ªgrid cellï¼Œæ‰€ä»¥æ˜¯7x7x30ç»´çš„å‘é‡ã€‚</p><p><img src="/images/yolo1_3.png" alt=""><br><img src="image-2.png" alt="alt text"><br>æ³¨ï¼šå›¾ä¸­çš„boxå³bounding box</p><p>æ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼Œè¾“å…¥ä¸€å¼ å›¾åƒï¼ŒYOLOå°±èƒ½SxSä¸ªgrid cellçš„ä¿¡æ¯ï¼Œæ¯ä¸ªgrid cellåŒ…å«2ä¸ªbounding boxå’Œ20ä¸ªç±»åˆ«ï¼Œæ¯ä¸ªbounding boxåˆåŒ…å«4ä¸ªä½ç½®å‚æ•°å’Œä¸€ä¸ªç½®ä¿¡åº¦å‚æ•°ã€‚</p><h2 id="2-3-å¯è§†åŒ–è¿‡ç¨‹">2.3 å¯è§†åŒ–è¿‡ç¨‹</h2><ol><li><p>é¦–å…ˆæŠŠå›¾åƒåˆ†æˆSxSä¸ªgrid cellï¼Œè¿™é‡ŒS=7ï¼š<br><img src="/images/yolo1_4.png" alt=""><br><img src="image-3.png" alt="alt text"></p></li><li><p>æ¯ä¸ªgrid cellé¢„æµ‹å‡ºä¸¤ä¸ªbounding boxï¼ˆåŒ…å«å››ä¸ªä½ç½®å‚æ•°å’Œä¸€ä¸ªç½®ä¿¡åº¦å‚æ•°ï¼‰</p></li></ol><p>æ¯”å¦‚å¯¹äºä¸‹é¢å›¾ä¸­è¿™ä¸ªçº¢è‰²çš„grid cellï¼š<br><img src="/images/yolo1_5.png" alt=""><br><img src="image-4.png" alt="alt text"></p><p>å®ƒé¢„æµ‹å‡ºä¸¤ä¸ªbounding boxï¼Œè¿™ä¸¤ä¸ªbounding boxä¸€ä¸ªç½®ä¿¡åº¦æ¯”è¾ƒé«˜ï¼Œä¸€ä¸ªæ¯”è¾ƒä½ï¼ˆç”±çº¿çš„ç²—ç»†è¡¨ç¤ºï¼‰ï¼š</p><p><img src="/images/yolo1_6.png" alt=""><br><img src="image-5.png" alt="alt text"></p><p>ä¸ç®¡å¦‚ä½•ï¼Œè¾“å…¥å›¾åƒéƒ½èƒ½é¢„æµ‹å‡ºSxSx2=98ä¸ªbounding boxï¼Œåªä¸è¿‡æœ‰äº›bounding boxçš„ç½®ä¿¡åº¦é«˜ï¼Œæˆ‘ä»¬å°†å…¶ä¿ç•™ï¼›æœ‰äº›ä½æˆ‘ä»¬å°†å…¶å¿½ç•¥ã€‚</p><ol start="3"><li>æ¯ä¸ªgrid cellè¿˜èƒ½ç”Ÿæˆ20ä¸ªç±»åˆ«çš„æ¡ä»¶æ¦‚ç‡ï¼š</li></ol><p><img src="/images/yolo1_7.png" alt=""><br><img src="image-6.png" alt="alt text"></p><p>è¿™ä¸ªå›¾å°±å±•ç¤ºäº†æ¡ä»¶æ¦‚ç‡æœ€é«˜çš„å‡ ä¸ªç±»åˆ«æ‰€å æœ‰çš„æ¡†ã€‚æ¯”å¦‚ç´«è‰²çš„grid cellæ˜¯Bicycleè¿™ä¸ªç±»åˆ«çš„æ¡ä»¶æ¦‚ç‡é«˜çš„åŒºåŸŸã€‚æ¯ä¸€ä¸ªgrid cellåªèƒ½æœ‰ä¸€ä¸ªç±»åˆ«ï¼Œå®ƒæ˜¯20ä¸ªç±»åˆ«ä¸­æ¡ä»¶æ¦‚ç‡æœ€é«˜çš„é‚£ä¸€ä¸ªã€‚å› æ­¤ä¹Ÿè¯´æ˜äº†ä¸€ä¸ªgrid cellæœ€å¤šé¢„æµ‹å‡ºä¸€ä¸ªä¸€ç‰©ä½“ã€‚7x7çš„grid cellæœ€å¤šé¢„æµ‹å‡º49ä¸ªç‰©ä½“ã€‚è¿™ä¹Ÿæ˜¯YOLOV1å¯¹å°ç›®æ ‡å’Œå¯†é›†ç›®æ ‡è¯†åˆ«æ€§èƒ½å·®çš„åŸå› ã€‚</p><ol start="4"><li>åå¤„ç†<br>æ¯ä¸ªgrid cellåªæœ‰ä¸€ä¸ªæ¡ä»¶æ¦‚ç‡æœ€é«˜çš„ä»£è¡¨ç±»åˆ«ï¼ŒæŠŠè¿™ä¸ªgrid cellçš„ä¸¤ä¸ªbounding boxéƒ½èµ‹äºˆè¿™ä¸ªç±»åˆ«ï¼Œå†è¿›è¡Œä¸€ç³»åˆ—åå¤„ç†å°±å¾—åˆ°äº†æœ€ç»ˆçš„ç›®æ ‡æ£€æµ‹ç»“æœã€‚</li></ol><p><img src="/images/yolo1_8.png" alt=""><br><img src="image-7.png" alt="alt text"></p><p>æŠŠä¸Šé¢å›¾ä¸­ç”¨çº¢è‰²éƒ¨åˆ†æ ‡å‡ºæ¥çš„éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰çš„bounding boxå’Œæ‰€æœ‰grid cellçš„ä»£è¡¨ç±»åˆ«ã€‚æ¯ä¸ªç±»åˆ«èµ‹äºˆä¸åŒçš„é¢œè‰²ï¼ŒæŠŠæ‰€æœ‰çš„bounding boxçš„è¾¹æ¡†éƒ½ç”¨ä»£è¡¨ç±»åˆ«çš„é¢œè‰²æ¥è¡¨ç¤ºï¼Œå°±å¾—åˆ°äº†ä¸‹é¢è¿™å¹…å›¾ï¼š</p><p><img src="/images/yolo1_9.png" alt=""><br><img src="image-8.png" alt="alt text"></p><p>æ€»å…±98ä¸ªbounding boxï¼Œæ¯ä¸ªbounding boxéƒ½æœ‰æœ€é«˜æ¡ä»¶æ¦‚ç‡æ‰€å¯¹åº”çš„ç±»åˆ«ï¼Œå†è¿›è¡Œä¸€ç³»åˆ—åå¤„ç†ï¼Œæ¯”å¦‚è¿‡æ»¤æ‰ä½ç½®ä¿¡åº¦çš„bounding boxï¼Œç„¶åå†å»é™¤æ‰é‡å¤çš„é¢„æµ‹æ¡†ï¼Œå°±è·å¾—äº†æœ€ç»ˆçš„ç›®æ ‡æ£€æµ‹ç»“æœã€‚</p><h1>3. é¢„æµ‹é˜¶æ®µåå¤„ç†</h1><p>æ€»å…±98ä¸ªbounding boxï¼Œè¿‡æ»¤æ‰ä½ç½®ä¿¡åº¦çš„bounding boxï¼Œç„¶åå†å»é™¤æ‰é‡å¤çš„é¢„æµ‹æ¡†ï¼Œå°±è·å¾—äº†æœ€ç»ˆçš„ç›®æ ‡æ£€æµ‹ç»“æœï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸º<strong>NMSéæå¤§å€¼æŠ‘åˆ¶</strong>ã€‚</p><p>ç°åœ¨æƒ³è¦è®²è§£çš„å°±æ˜¯YOLOV1è¾“å‡ºçš„7x7x30çš„å‘é‡æ˜¯å¦‚ä½•å˜ä¸ºæœ€åçš„ç›®æ ‡æ£€æµ‹ç»“æœçš„ã€‚</p><p>7x7x30ä¸­çš„7x7å³7x7ä¸ªgrid cellï¼Œå–å‡ºå…¶ä¸­ä¸€ä¸ªgrid cellæ¥çœ‹ï¼Œä¹Ÿå°±æ˜¯30ä¸ªæ•°å­—ã€‚è¿™30ä¸ªæ•°å­—æ˜¯5+5+20ã€‚ç¬¬ä¸€ä¸ª5æ˜¯ç¬¬ä¸€ä¸ªbounding boxçš„4ä¸ªä½ç½®åæ ‡å’Œ1ä¸ªç½®ä¿¡åº¦åæ ‡ï¼Œç¬¬äºŒä¸ª5æ˜¯ç¬¬äºŒä¸ªbounding boxçš„4ä¸ªä½ç½®åæ ‡å’Œ1ä¸ªç½®ä¿¡åº¦åæ ‡ï¼Œ20æ˜¯è¿™ä¸ªgrid cellä¸­çš„ç‰©ä½“æ˜¯20ä¸ªç±»åˆ«çš„æ¡ä»¶æ¦‚ç‡å³P(ci|object)ï¼ˆP(object)æ˜¯è¿™ä¸ªgrid cellåŒ…å«ç‰©ä½“çš„æ¦‚ç‡ï¼Œè¿™å…¶å®å°±æ˜¯ç½®ä¿¡åº¦ï¼Œciæ˜¯ç¬¬iä¸ªç±»åˆ«ï¼‰ã€‚</p><p>ç¬¬ä¸€ä¸ªbounding boxçš„ç½®ä¿¡åº¦ä¹˜ä»¥è¯¥grid cellçš„20ä¸ªç±»æ¡ä»¶æ¦‚ç‡ï¼š<br><img src="/images/yolo1_10.png" alt=""><br><img src="image-9.png" alt="alt text"><br>å¾—åˆ°ç¬¬ä¸€ä¸ªbounding boxçš„åéªŒæ¦‚ç‡ã€‚</p><p>ç¬¬äºŒä¸ªbounding boxçš„ç½®ä¿¡åº¦ä¹˜ä»¥è¯¥grid cellçš„20ä¸ªç±»æ¡ä»¶æ¦‚ç‡ï¼š<br><img src="/images/yolo1_11.png" alt=""><br><img src="image-10.png" alt="alt text"><br>å¾—åˆ°ç¬¬äºŒä¸ªbounding boxçš„åéªŒæ¦‚ç‡ã€‚</p><p>æ¯ä¸ªgrid cellå°±èƒ½è·å¾—2ä¸ª<strong>20ä¸ªåéªŒæ¦‚ç‡</strong>ï¼š<br><img src="/images/yolo1_12.png" alt=""><br><img src="image-11.png" alt="alt text"></p><p>7x7=49ä¸ªgrid cellå°±èƒ½è·å¾—7x7x2=98ä¸ª<strong>20ä¸ªåéªŒæ¦‚ç‡</strong>ï¼š<br><img src="/images/yolo1_13.png" alt=""><br><img src="image-12.png" alt="alt text"></p><p>ä¹Ÿå°±æ˜¯æˆ‘ä»¬è·å¾—äº†è¿™ä¸ªå¯è§†åŒ–å›¾ï¼š<br><img src="/images/yolo1_9.png" alt=""><br><img src="image-8.png" alt="alt text"></p><p>æ¥ä¸‹æ¥å°±æ˜¯è¿›è¡Œåå¤„ç†å¾—åˆ°ç›®æ ‡æ£€æµ‹ç»“æœå›¾ã€‚</p><p>98ä¸ª<strong>20ä¸ªåéªŒæ¦‚ç‡</strong>ï¼Œç§°å…¶ä¸º98ä¸ªå‘é‡ï¼Œæ¯ä¸ªå‘é‡æ˜¯20x1çš„ã€‚å‡è®¾è¿™98ä¸ªå‘é‡æ¯ä¸ªçš„ç¬¬ä¸€ä¸ªå€¼ä¸ºæ˜¯ç‹—çš„åéªŒæ¦‚ç‡ï¼Œä¹Ÿå°±æ˜¯è¯´æ˜¯ç‹—çš„åéªŒæ¦‚ç‡çš„å€¼æœ‰98ä¸ªï¼Œåœ¨è¿™äº›åéªŒæ¦‚ç‡ä¸­æœ‰å¯èƒ½æœ‰å¾ˆå¤šæ¥è¿‘äº0çš„ï¼Œè®¾ç½®ä¸€ä¸ªé˜ˆå€¼ï¼Œå‡å¦‚è®¾ä¸º0.2ï¼Œé‚£ä¹ˆå°äº0.2çš„å€¼ç›´æ¥ç½®ä¸º0ã€‚ç„¶ååŸºäºä¸Šä¸€æ­¥å¤„ç†åçš„æ˜¯ç‹—çš„åéªŒæ¦‚ç‡å¯¹è¿™98ä¸ªåéªŒæ¦‚ç‡è¿›è¡Œé™åºæ’åºï¼Œç„¶åä½¿ç”¨<strong>NMSéæå¤§å€¼æŠ‘åˆ¶</strong>ç®—æ³•å†æ¬¡è¿›è¡Œå¤„ç†ã€‚</p><p><img src="/images/yolo1_14.png" alt=""><br><img src="image-13.png" alt="alt text"></p><p>å…ˆæŠŠç¬¬ä¸€ä¸ªåéªŒæ¦‚ç‡å€¼å–å‡ºæ¥ï¼Œä¹Ÿå°±æ˜¯æœ€å¤§çš„åéªŒæ¦‚ç‡ï¼ŒæŠŠå®ƒä¸å…¶ä»–97ä¸ªåéªŒæ¦‚ç‡å€¼è¿›è¡Œæ¯”è¾ƒï¼Œè®¡ç®—å®ƒä»¬çš„IoUï¼ˆäº¤å¹¶æ¯”ï¼Œä¹Ÿå°±æ˜¯åº¦é‡å®ƒä»¬çš„é‡å ç¨‹åº¦ï¼‰å¤§äºæŸä¸ªé˜ˆå€¼ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºå®ƒä»¬é‡å¤è¯†åˆ«äº†ä¸€ä¸ªç‰©ä½“ï¼Œå°±æŠŠä½åéªŒæ¦‚ç‡çš„å€¼è¿‡æ»¤æ‰ä¹Ÿå°±æ˜¯ç½®ä¸º0ã€‚</p><ul><li>å¦‚æœè¿™ä¸ªé˜ˆå€¼è®¾å¾—å¾ˆä½ï¼Œé‚£ä¹ˆNMSéæå¤§å€¼æŠ‘åˆ¶æ˜¯å¾ˆå¼ºçš„ï¼Œå®ƒæŠŠIoUå‹å¾—å¾ˆä½ï¼Œç¨å¾®æœ‰ä¸€ç‚¹é‡åˆå°±è¢«è¿‡æ»¤äº†</li><li>å¦‚æœè¿™ä¸ªé˜ˆå€¼è®¾å¾—å¾ˆé«˜ï¼Œé‚£ä¹ˆå®ƒä»¬çš„IoUåœ¨æ›´å¤§çš„æƒ…å†µä¸‹æ‰å¯èƒ½è¢«è¿‡æ»¤æ‰</li></ul><p>å› æ­¤å¦‚æœæƒ³å¢å¼ºNMSéæå¤§å€¼æŠ‘åˆ¶å°±å¯ä»¥è®¾ç½®ä½é˜ˆå€¼ã€‚</p><p>ç„¶åç»è¿‡ä¸€è½®åï¼Œç¬¬ä¸€ä¸ªåéªŒæ¦‚ç‡ä¸å…¶ä»–97ä¸ªåéªŒæ¦‚ç‡ç»è¿‡äº†ä¸€è½®æ¯”è¾ƒï¼Œæœ‰éƒ¨åˆ†å·²ç»è¢«ç½®ä¸º0äº†ã€‚ç„¶åå»æ‰¾ä¸‹ä¸€ä¸ªæœªè¢«ç½®ä¸º0çš„åéªŒæ¦‚ç‡ï¼Œæ¥ç€ä¸åé¢çš„åéªŒæ¦‚ç‡è¿›è¡Œæ¯”è¾ƒï¼Œä¸ä¸Šé¢ç›¸åŒã€‚</p><p>ä¸Šé¢åªæ˜¯å¯¹ç‹—è¿™ä¸ªç±»åˆ«è¿›è¡Œäº†NMSéæå¤§å€¼æŠ‘åˆ¶ï¼Œå¯¹äºå…¶ä»–ç±»åˆ«ä¹Ÿè¦è¿›è¡Œæ­¤æ“ä½œã€‚</p><p>ä¸Šé¢çš„åå¤„ç†<strong>åªåœ¨é¢„æµ‹é˜¶æ®µè¿›è¡Œ</strong>ï¼Œåœ¨<strong>è®­ç»ƒé˜¶æ®µä¸éœ€è¦è¿›è¡Œåå¤„ç†</strong>ï¼Œå› ä¸ºæ¯ä¸€ä¸ªbounding boxéƒ½éœ€è¦åœ¨æŸå¤±å‡½æ•°ä¸­å æ®ä¸€å¸­ä¹‹åœ°ï¼Œå®ƒä¼šå½±å“æŸå¤±å‡½æ•°ã€‚</p><h1>4. è®­ç»ƒé˜¶æ®µï¼ˆé‡ç‚¹ï¼‰</h1><p>ç›®æ ‡æ£€æµ‹æ˜¯ä¸€ä¸ªå…¸å‹çš„<strong>ç›‘ç£å­¦ä¹ </strong>çš„è¿‡ç¨‹ï¼Œè®­ç»ƒé›†å·²ç»è¿›è¡Œäº†äººå·¥æ ‡æ³¨ï¼Œå®ƒæœ‰ç‚¹ç±»ä¼¼äºbounding boxï¼Œä½†æ˜¯ç§°å®ƒä¸ºground truthï¼ˆä¹Ÿå°±æ˜¯æ­£ç¡®æ‰“æ ‡è®°çš„æ•°æ®ï¼‰ã€‚æˆ‘ä»¬çš„ç®—æ³•å°±æ˜¯è¦å»æ‹Ÿåˆè¿™äº›ground truthï¼Œä½¿å¾—æŸå¤±å‡½æ•°æœ€å°åŒ–ã€‚</p><p>ground truthæ˜¯æ ‡å‡†ç­”æ¡ˆï¼Œå®ƒçš„ä¸­å¿ƒç‚¹è½åœ¨å“ªä¸ªgrid cellï¼Œå°±æœ‰å“ªä¸ªgrid cellé¢„æµ‹å‡ºçš„ä¸¤ä¸ªbounding boxä¸­çš„ä¸€ä¸ªè´Ÿè´£å»æ‹Ÿåˆè¿™ä¸ªground truthï¼Œå¹¶ä¸”è¿™ä¸ªgrid cellè¾“å‡ºçš„ç±»åˆ«ä¹Ÿåº”è¯¥æ˜¯è¿™ä¸ªground truthçš„ç±»åˆ«ï¼ˆæ¯ä¸€ä¸ªgrid cellä¸­æœ‰20ä¸ªç±»åˆ«çš„ç±»æ¡ä»¶æ¦‚ç‡ï¼Œè¿™20ä¸ªç±»æ¡ä»¶æ¦‚ç‡ä¹˜ä»¥æ¯ä¸€ä¸ªbounding boxçš„ç½®ä¿¡åº¦è·å¾—åéªŒæ¦‚ç‡ï¼Œå…¶ä¸­æœ€å¤§çš„åéªŒæ¦‚ç‡å¯¹åº”çš„é‚£ä¸ªç±»åº”ä¸ground truthçš„ç±»åˆ«ç›¸åŒï¼‰ã€‚æ¯ä¸€ä¸ªgrid cellåªèƒ½é¢„æµ‹å‡ºä¸€ä¸ªç‰©ä½“ï¼Œ7x7ä¸ªgrid cellåªèƒ½é¢„æµ‹å‡º49ä¸ªç‰©ä½“ï¼ˆYOLOåœ¨é¢„æµ‹å°ç›®æ ‡å’Œå¯†é›†ç›®æ ‡æ€§èƒ½å·®çš„åŸå› ï¼Œå‰é¢æè¿‡äº†ï¼Œå†é‡å¤ä¸€éï¼‰ã€‚</p><p>ä¸€ä¸ªgrid cellé¢„æµ‹å‡ºä¸¤ä¸ªbounding boxï¼Œé‚£ç”±å“ªä¸ªå»è´Ÿè´£æ‹Ÿåˆground truthå‘¢ï¼Ÿç”±å’Œground truthäº¤å¹¶æ¯”IoUæ›´å¤§çš„é‚£ä¸ªbounding boxã€‚å› æ­¤æŸå¤±å‡½æ•°è®¾è®¡å°±è¦åšåˆ°è®©è´Ÿè´£æ‹Ÿåˆground truthçš„é‚£ä¸ªbounding boxä¸ground truthå°½å¯èƒ½å¾—ä¸€è‡´ã€‚</p><p>åˆšåˆšè¯´çš„grid cellæ˜¯æœ‰ground truthçš„ä¸­å¿ƒç‚¹è½åœ¨é‡Œé¢çš„grid cellã€‚æ²¡æœ‰ground truthä¸­å¿ƒç‚¹è½å…¥çš„grid cellï¼Œå…¶é¢„æµ‹å‡ºçš„ä¸¤ä¸ªbounding boxå°±éƒ½è¢«å¿½ç•¥äº†ã€‚</p><p>æ¥ä¸‹æ¥çš„å·¥ä½œå°±æ˜¯æ„å»ºYOLOV1çš„æŸå¤±å‡½æ•°ã€‚</p><h2 id="4-1-æŸå¤±å‡½æ•°">4.1 æŸå¤±å‡½æ•°</h2><p>æŸå¤±å‡½æ•°åŒ…å«5é¡¹ï¼š<br><img src="/images/yolo1_15.png" alt=""><br><img src="image-14.png" alt="alt text"></p><p>è¿™5é¡¹éƒ½æ˜¯æ®‹å·®å¹³æ–¹å’Œçš„å›å½’é—®é¢˜çš„æŸå¤±å‡½æ•°ã€‚å› æ­¤YOLOæ˜¯æŠŠç›®æ ‡æ£€æµ‹é—®é¢˜å½“ä½œäº†å›å½’é—®é¢˜è§£å†³ã€‚</p><p>ç¬¬ä¸€é¡¹æ˜¯è´Ÿè´£é¢„æµ‹ç‰©ä½“çš„bounding box<strong>ä¸­å¿ƒç‚¹å®šä½çš„è¯¯å·®</strong>ï¼Œä¹Ÿå°±æ˜¯è´Ÿè´£é¢„æµ‹ç‰©ä½“çš„bounding boxçš„æ¨ªçºµåæ ‡è¦å’Œground truthçš„æ¨ªçºµåæ ‡å°½å¯èƒ½çš„ä¸€è‡´ã€‚</p><p>ç¬¬äºŒé¡¹æ˜¯è´Ÿè´£é¢„æµ‹ç‰©ä½“çš„bounding box<strong>å®½é«˜å®šä½çš„è¯¯å·®</strong>ï¼Œä¹Ÿå°±æ˜¯è´Ÿè´£é¢„æµ‹ç‰©ä½“çš„bounding boxçš„å®½é«˜è¦å’Œground truthçš„å®½é«˜å°½å¯èƒ½çš„ä¸€è‡´ã€‚åŠ æ ¹å·æ˜¯ä¸ºäº†ä½¿å¾—å°æ¡†å¯¹è¯¯å·®æ›´æ•æ„Ÿï¼ˆä¹Ÿå°±æ˜¯åŒæ ·çš„åå·®å°æ¡†é€ æˆçš„æŸå¤±æ›´å¤§ï¼Œå¤§æ¡†é€ æˆçš„æŸå¤±æ›´å°ï¼‰ã€‚</p><p>ç¬¬ä¸‰é¡¹æ˜¯è´Ÿè´£æ£€æµ‹ç‰©ä½“çš„bounding boxçš„<strong>ç½®ä¿¡åº¦è¯¯å·®</strong>ã€‚æ ‡ç­¾å€¼æ˜¯bounding boxä¸ground truthçš„IoUï¼Œé¢„æµ‹å€¼å³ç½®ä¿¡åº¦ã€‚</p><p>ç¬¬å››é¡¹æ˜¯<strong>ä¸</strong>è´Ÿè´£æ£€æµ‹ç‰©ä½“çš„bounding boxçš„<strong>ç½®ä¿¡åº¦è¯¯å·®</strong>ã€‚ä¹Ÿå°±æ˜¯æ‰€æœ‰è¢«å¿½ç•¥çš„bounding boxå®ƒä»¬çš„ç½®ä¿¡åº¦æœ€å¥½éƒ½ä¸º0ï¼Œå³æ ‡ç­¾å€¼æœ€å¥½ä¸º0ã€‚ä¸è´Ÿè´£æ£€æµ‹ç‰©ä½“çš„bounding boxåŒ…å«ä¸¤ç±»ï¼š</p><ul><li>è´Ÿè´£æ£€æµ‹ç‰©ä½“çš„grid cellä¸­è¢«å¿½ç•¥çš„bounding box</li><li>æœ¬èº«å°±ä¸è´Ÿè´£æ£€æµ‹ç‰©ä½“çš„grid cellé¢„æµ‹å‡ºçš„bounding box</li></ul><p>ç¬¬äº”é¡¹æ˜¯è´Ÿè´£æ£€æµ‹ç‰©ä½“çš„grid cellçš„<strong>åˆ†ç±»è¯¯å·®</strong>ã€‚ä¹Ÿå°±æ˜¯ground truthçš„ä¸­å¿ƒç‚¹è½å…¥çš„é‚£ä¸ªgrid cellï¼Œå®ƒçš„20ä¸ªç±»æ¡ä»¶æ¦‚ç‡çš„æœ€å¤§å€¼æ‰€å¯¹åº”çš„ç±»åˆ«åº”ä¸ground truthç›¸åŒï¼Œå¹¶ä¸”è¿™ä¸ªæ¦‚ç‡è¶Šæ¥è¿‘1è¶Šå¥½ã€‚</p><p>å‰ä¸¤é¡¹æ˜¯<strong>åæ ‡å›å½’è¯¯å·®</strong>ï¼Œç¬¬ä¸‰ã€å››é¡¹æ˜¯<strong>ç½®ä¿¡åº¦Confidenceå›å½’è¯¯å·®</strong>ï¼Œæœ€åä¸€é¡¹æ˜¯<strong>ç±»åˆ«é¢„æµ‹è¯¯å·®</strong>ã€‚</p><h1>å£°æ˜</h1><p>æœ¬æ–‡æ˜¯å­¦ä¹ <a href="https://www.bilibili.com/video/BV15w411Z7LG/?spm_id_from=333.1245.0.0">ã€ç²¾è¯»AIè®ºæ–‡ã€‘YOLO V1ç›®æ ‡æ£€æµ‹ï¼Œçœ‹æˆ‘å°±å¤Ÿäº†</a>çš„è®°å½•ï¼Œç‚¹å‡»å³å¯è·³è½¬è§†é¢‘é“¾æ¥ã€‚</p><p>æ³¨ï¼šæœ¬æ–‡å›¾ç‰‡æ¥æºäºè§†é¢‘ä»¥åŠè®ºæ–‡ä¸­ï¼Œä¾µæƒè”ç³»åˆ ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Yolo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> Yolo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot3 é…ç½® MyBatis</title>
      <link href="/2025/03/10/project-test4/"/>
      <url>/2025/03/10/project-test4/</url>
      
        <content type="html"><![CDATA[<h1>å‰è¨€</h1><p>å­¦ä¹ Bç«™UPä¸»ç¨‹åºå‘˜é’æˆˆå‡ºå“çš„è§†é¢‘<a href="https://www.bilibili.com/video/BV1AQAZeNEUJ/?spm_id_from=333.1245.0.0&amp;vd_source=a0f19e79b7da02f4fa318d91be5bc86a">ã€å¸¦å°ç™½åšæ¯•è®¾ã€‘04. Springboot3æ•´åˆMyBatiså®ç°æ•°æ®åº“æ“ä½œ</a>ã€‚</p><p>MyBatis æ˜¯ä¸€ä¸ªæŒä¹…å±‚çš„æ¡†æ¶ï¼Œå®ƒå¯ä»¥è¿æ¥æ•°æ®åº“ï¼Œå®ç°æ•°æ®åº“çš„å¢åˆ æŸ¥æ”¹ã€‚</p><h1>1. åˆ›å»ºæ•°æ®åº“</h1><p><a href="https://malone-ai.github.io/2025/03/01/mysql1/">MySQLä¸€ï¼šMySQLç¯å¢ƒé…ç½®</a>ã€‚ä¹‹å‰å­¦ä¹ MySQLæ—¶çš„å­¦ä¹ è®°å½•ã€‚</p><p>UPç”¨çš„æ—¶Navicatï¼Œæˆ‘ç”¨çš„æ˜¯SQLyog</p><p>åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œåç§°ä¸ºcode2025ã€‚<br>å­—ç¬¦é›†é€‰<code>utf8mb4</code>ï¼Œæ’åºè§„åˆ™é€‰<code>utf8mb4_unicode_ci</code>ã€‚</p><p><img src="/images/project-test4_1.png" alt=""></p><p>æ–°å»ºä¸€ä¸ªè¡¨adminã€‚å¦å¤–æ³¨æ„ï¼Œæ‰€æœ‰è¡¨çš„ä¸»é”®åç§°å«idï¼Œéƒ½æ˜¯è‡ªåŠ¨é€’å¢çš„ï¼Œåˆ é™¤åæ— æ³•å†å¡«å……å›å»ã€‚æ¯”å¦‚åˆ é™¤id=2çš„æ•°æ®ï¼Œé‚£ä¹ˆid=2å°±æ°¸è¿œæ²¡æœ‰äº†ã€‚</p><p><img src="/images/project-test4_2.png" alt=""></p><p>è¿˜éœ€è¦æ·»åŠ å…¶ä»–é¡¹ï¼Œæœ€ç»ˆè¡¨å¦‚ä¸‹ï¼š<br><img src="/images/project-test4_3.png" alt=""></p><p>æ‰¾åˆ°è¡¨çš„DDLä¿¡æ¯ï¼Œå¤åˆ¶ä¸‹æ¥ï¼š</p><p><img src="/images/project-test4_4.png" alt=""></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span> `admin` (</span><br><span class="line">  `id` <span class="type">int</span> <span class="keyword">NOT NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ID&#x27;</span>,</span><br><span class="line">  `username` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è´¦å·&#x27;</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¯†ç &#x27;</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åç§°&#x27;</span>,</span><br><span class="line">  `phone` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ‰‹æœº&#x27;</span>,</span><br><span class="line">  `email` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;é‚®ç®±&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY KEY</span> (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8mb4_unicode_ci COMMENT<span class="operator">=</span><span class="string">&#x27;ç®¡ç†å‘˜ä¿¡æ¯&#x27;</span></span><br></pre></td></tr></table></figure><p>è¿™å°±æ˜¯adminè¡¨çš„ç»“æ„ã€‚</p><p>é€šè¿‡ä»¥ä¸‹æ“ä½œè®¾ç½®è´¦å·å”¯ä¸€ï¼š<br><img src="/images/project-test4_5.png" alt=""></p><p>å‘è¡¨ä¸­æ’å…¥ä¸¤æ¡æ•°æ®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+----+----------+----------+---------+-------------+-----------------+</span><br><span class="line">| id | username | password | name    | phone       | email           |</span><br><span class="line">+----+----------+----------+---------+-------------+-----------------+</span><br><span class="line">|  1 | admin    | admin    | ç®¡ç†å‘˜  | 13877886677 | admin@code.com  |</span><br><span class="line">|  2 | admin1   | admin1   | ç®¡ç†å‘˜1 | 13877886678 | admin1@code.com |</span><br><span class="line">+----+----------+----------+---------+-------------+-----------------+</span><br></pre></td></tr></table></figure><h1>2. æ·»åŠ å·¥ç¨‹ä¾èµ–</h1><p><a href="https://mybatis.net.cn/index.html">MyBatisä¸­æ–‡å®˜ç½‘</a>ã€‚</p><p>åœ¨springbootå·¥ç¨‹ä¸‹çš„pom.xmlæ·»åŠ ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;com.mysql&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;</span><br><span class="line">&lt;scope&gt;runtime&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;3.0.3&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p>ç„¶åç‚¹å‡»ï¼š<br><img src="/images/project-test4_4.png" alt=""></p><p>å³å¯åŠ è½½æ–°å¢çš„ä¾èµ–ã€‚</p><p>åœ¨springbootå·¥ç¨‹ä¸‹çš„src/main/resources/application.ymlæ·»åŠ æ•°æ®åº“é…ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># æ•°æ®åº“é…ç½®</span><br><span class="line">spring:</span><br><span class="line">  datasource:</span><br><span class="line">    driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">    username: root</span><br><span class="line">    password: &#x27;123456&#x27;</span><br><span class="line">    url: jdbc:mysql://localhost:3306/code2025?useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=GMT%2b8</span><br></pre></td></tr></table></figure><p>å…¶ä¸­usernameã€passwordæ˜¯è‡ªå·±è®¾å®šçš„ï¼Œurlä¸­3306/åçš„code2025æ˜¯æ•°æ®åº“çš„åç§°ã€‚</p><p>æ¥ç€æ·»åŠ MyBatisé…ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># é…ç½®mybatiså®ä½“å’Œxmlæ˜ å°„</span><br><span class="line">mybatis:</span><br><span class="line">  # æ˜ å°„xml</span><br><span class="line">  mapper-locations: classpath:mapper/*xml # classpathè¡¨ç¤ºresourcesç›®å½•</span><br><span class="line">  configuration:</span><br><span class="line">    # é…ç½®æ—¥å¿—</span><br><span class="line">    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl</span><br><span class="line">    map-underscore-to-camel-case: true</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨resourcesç›®å½•ä¸‹æ–°å»ºmapperç›®å½•ã€‚</p><h1>3. æ·»åŠ å®ä½“ç±»</h1><h2 id="3-1-æ–°å»ºAdminå®ä½“ç±»">3.1 æ–°å»ºAdminå®ä½“ç±»</h2><p>åœ¨springbootå·¥ç¨‹ä¸‹çš„com.exampleé‡Œæ–°å»ºentityåŒ…ï¼ˆentityå³å®ä½“ç±»ï¼Œå®ƒè·Ÿæˆ‘ä»¬æ•°æ®åº“çš„è¡¨æ‰€å¯¹åº”çš„ä¸€ä¸ªjavaç±»ï¼Œè¿™ä¸ªjavaç±»é‡Œé¢å®ƒçš„æ‰€æœ‰å±æ€§åå­—è·Ÿæˆ‘ä»¬æ•°æ®åº“è¡¨é‡Œé¢çš„å±æ€§åå­—æ˜¯ä¸€è‡´çš„ï¼‰ï¼Œåœ¨è¿™ä¸ªåŒ…ä¸‹å†æ–°å»ºAdminå®ä½“ç±»ã€‚</p><p>åœ¨è¿™ä¸ªAdminå®ä½“ç±»é‡Œæ·»åŠ privateå±æ€§ï¼Œè¿™äº›å±æ€§åŒå‰é¢æˆ‘ä»¬åˆ›å»ºçš„æ•°æ®åº“ä¸­çš„è¡¨çš„å±æ€§ä¸€è‡´ï¼Œç„¶åæŒ‰ä½ALT+Insertå¿«é€Ÿæ·»åŠ setterå’Œgetterï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Admin</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id; <span class="comment">// ç”¨Integeræ˜¯å› ä¸ºå¯ä»¥å…è®¸nullï¼Œä½†intä¸å…è®¸null</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPassword</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPassword</span><span class="params">(String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPhone</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> phone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPhone</span><span class="params">(String phone)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.phone = phone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getEmail</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEmail</span><span class="params">(String email)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.email = email;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-2-åˆ›å»ºAdminMapper-xmlæ–‡ä»¶">3.2 åˆ›å»ºAdminMapper.xmlæ–‡ä»¶</h2><p>åœ¨springbootå·¥ç¨‹ä¸‹çš„src/main/resources/mapperç›®å½•ä¸‹æ–°å»ºAdminMapper.xmlæ–‡ä»¶ï¼Œç¼–è¾‘å†…å®¹ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span><br><span class="line">        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span><br><span class="line">&lt;mapper namespace=&quot;com.example.mapper.AdminMapper&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;select id=&quot;selectAll&quot; resultType=&quot;com.example.entity.Admin&quot;&gt;</span><br><span class="line">        select * from `admin` order by id desc</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure><p><img src="/image/project-test4_7.png" alt=""></p><p>ä¸Šé¢å›¾ä¸­æ ‡æ³¨çš„éƒ¨åˆ†å¯¹äºmapperç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶éƒ½æ˜¯ä¸€æ ·çš„ã€‚ç„¶åæ¥ä¸‹æ¥çš„ä¸€è¡Œçš„namespaceä¸æ¥å£å±‚æ˜ å°„ã€‚</p><p>ä¸‹è½½MyBatisXæ’ä»¶ã€‚</p><h2 id="3-3-åˆ›å»ºAdminMapperæ¥å£">3.3 åˆ›å»ºAdminMapperæ¥å£</h2><p>åœ¨springbootä¸‹çš„com.exampleä¸‹æ–°å»ºmapperåŒ…ï¼Œå†åœ¨è¿™ä¸ªåŒ…ä¸‹åˆ›å»ºAdminMapperæ¥å£ã€‚è¿™ä¸ªAdminMapperä¸å‰é¢åˆ›å»ºçš„AdminMapper.xmlå¯¹åº”ã€‚</p><p>åœ¨è¿™ä¸ªç±»ä¸‹æ·»åŠ ä¸€ä¸ª<code>selectAll</code>æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AdminMapper</span> &#123;</span><br><span class="line">    List&lt;Admin&gt; <span class="title function_">selectAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ³•å…¶å®å¯¹åº”äºAdminMapper.xmlæ–‡ä»¶ä¸­çš„<code>selectAll</code>ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªå¯¹å¤–æŸ¥è¯¢çš„æ¥å£ã€‚</p><p>è¿™ä¸ªæ¥å£æ˜¯å®šä¹‰åœ¨mapperå±‚ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œå¾—é€šè¿‡controllerå±‚æ¥è¿›è¡Œè®¿é—®ã€‚</p><h2 id="3-4-åœ¨å¯åŠ¨ç±»ä¸­æ‰«æmapperæ¥å£å±‚">3.4 åœ¨å¯åŠ¨ç±»ä¸­æ‰«æmapperæ¥å£å±‚</h2><p>åœ¨springbootå·¥ç¨‹ç›®å½•ä¸‹çš„src/main/java/com/example/SpringbootApplication.javaä¸­æ·»åŠ <code>@MapperScan(&quot;com.example.mapper&quot;)</code>ï¼ˆè¿™æ„ä¸ºåœ¨ä¸»ç±»ä¸­æ‰«æmapperæ¥å£å±‚ï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.example.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringbootApplication</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">SpringApplication.run(SpringbootApplication.class, args);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-5-å°†æ¥å£ä»mapperä¼ é€’åˆ°controllerå±‚">3.5 å°†æ¥å£ä»mapperä¼ é€’åˆ°controllerå±‚</h2><p>åœ¨com.example.Serviceä¸­çš„AdminServiceä¸­æ·»åŠ æ–¹æ³•<code>public List&lt;Admin&gt; selectAll</code>ï¼ˆå…ˆé€šè¿‡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Resource</span></span><br><span class="line">AdminMapper adminMapper;</span><br></pre></td></tr></table></figure><p>æ³¨å…¥com/example/service/AdminService.javaä¸­çš„AdminServiceï¼Œä¾¿äºé€šè¿‡å®ƒæ¥è°ƒç”¨mapperé‡Œçš„selectAllï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdminService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    AdminMapper adminMapper;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">admin</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;admin&quot;</span>.equals(name)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;admin&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomerException</span>(<span class="string">&quot;è´¦å·é”™è¯¯&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;Admin&gt; <span class="title function_">selectAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> adminMapper.selectAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨serviceå±‚æœ‰äº†æ•°æ®æŸ¥è¯¢çš„æ–¹æ³•ã€‚</p><p>æ¥ä¸‹æ¥éœ€è¦äº¤ç»™controllerå±‚ä½¿ç”¨ã€‚</p><p>åœ¨com.example.controllerä¸‹æ–°å»ºAdminControllerç±»ï¼Œå¹¶å°†è¿™ä¸ªç±»æ³¨å†Œä¸ºcontrollerï¼ˆæ·»åŠ <code>@RestController</code>ï¼‰ï¼Œé€šè¿‡<code>@Resource</code>å°†com.example.serviceä¸‹çš„AdminServiceæ³¨å…¥ï¼Œç„¶åå®šä¹‰ä¸€ä¸ª<strong>selectAll</strong>æ¥å£ï¼Œå¹¶æ³¨å†ŒselectAllè·¯ç”±ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// com.example.controller.AdminController.java</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/admin&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdminController</span> &#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    AdminService adminService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectAll&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectAll</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;Admin&gt; admins = adminService.selectAll();</span><br><span class="line">        <span class="keyword">return</span> Result.success(admins);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢æ·»åŠ äº†<code>RequsetMapping(&quot;/admin&quot;)</code>æ˜¯ä¸ºäº†ä¾¿äºåŒºåˆ†ï¼Œä¸º å®ƒä½¿å¾— AdminController ä¸­çš„æ‰€æœ‰æ–¹æ³•æä¾›ä¸€ä¸ªå…¬å…±çš„ URL å‰ç¼€ /adminã€‚</p><p>è¿™æ ·selectAllå°±è¢«ä¼ é€’åˆ°äº†controlleræ¥å£å±‚ï¼Œè®¿é—®è·¯å¾„ä¸º<code>localhost:9999/admin/selectAll</code>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Springboot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰‹æ’•çº¿ç¨‹æ± </title>
      <link href="/2025/03/09/cpp-interview4/"/>
      <url>/2025/03/09/cpp-interview4/</url>
      
        <content type="html"><![CDATA[<h1>å‰è¨€</h1><p>å­¦ä¹ ä¸€ä¸‹çº¿ç¨‹æ± ï¼Œä¸»è¦å‚è€ƒGithubä»£ç ä»“åº“<a href="https://github.com/progschj/ThreadPool">https://github.com/progschj/ThreadPool</a></p><h1>1. ä¸ºä»€ä¹ˆéœ€è¦çº¿ç¨‹æ± </h1><p>åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ï¼Œé¢‘ç¹åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ä¼šå¯¼è‡´ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li>èµ„æºå¼€é”€å¤§ï¼šçº¿ç¨‹åˆ›å»ºéœ€è¦åˆ†é…æ ˆç©ºé—´ã€å¯„å­˜å™¨ç­‰èµ„æºã€‚</li><li>è°ƒåº¦å¼€é”€é«˜ï¼šæ“ä½œç³»ç»Ÿé¢‘ç¹åˆ‡æ¢çº¿ç¨‹ä¸Šä¸‹æ–‡ã€‚</li><li>ç®¡ç†å¤æ‚ï¼šçº¿ç¨‹æ•°é‡è¿‡å¤šæ—¶éš¾ä»¥æ§åˆ¶ã€‚</li></ul><p>å› æ­¤å¼•å…¥çº¿ç¨‹æ± æ¥è§£å†³è¿™äº›é—®é¢˜ã€‚çº¿ç¨‹æ± çš„æ ¸å¿ƒæ€æƒ³æ˜¯<code>é¢„å…ˆåˆ›å»ºä¸€ç»„çº¿ç¨‹ï¼Œé€šè¿‡ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†å¾…æ‰§è¡Œçš„ä»»åŠ¡ã€‚çº¿ç¨‹å¾ªç¯ä»é˜Ÿåˆ—ä¸­è·å–ä»»åŠ¡æ‰§è¡Œï¼Œé¿å…é¢‘ç¹åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹çš„å¼€é”€</code>ã€‚</p><h1>2. è®¾è®¡æ€æƒ³ä¸å…³é”®æœºåˆ¶</h1><ol><li>æ ¸å¿ƒç»„ä»¶</li></ol><ul><li>ä»»åŠ¡é˜Ÿåˆ—ï¼ˆTask Queueï¼‰ï¼šå­˜å‚¨å¾…æ‰§è¡Œçš„ä»»åŠ¡ï¼ˆå°è£…ä¸ºstd::function&lt;void()&gt;ï¼‰ã€‚</li><li>å·¥ä½œçº¿ç¨‹ï¼ˆWorkersï¼‰ï¼šå¤šä¸ªçº¿ç¨‹å¾ªç¯ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­è·å–ä»»åŠ¡ã€‚</li><li>åŒæ­¥æœºåˆ¶ï¼šäº’æ–¥é”ï¼ˆstd::mutexï¼‰ä¿æŠ¤é˜Ÿåˆ—ï¼Œæ¡ä»¶å˜é‡ï¼ˆstd::condition_variableï¼‰å®ç°çº¿ç¨‹ç­‰å¾…/å”¤é†’ã€‚</li></ul><ol start="2"><li>å·¥ä½œæµç¨‹</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">   [ä¸»çº¿ç¨‹]        |       [å·¥ä½œçº¿ç¨‹]</span><br><span class="line">      |            |            |</span><br><span class="line">æäº¤ä»»åŠ¡åˆ°é˜Ÿåˆ—      |      ç­‰å¾…ä»»åŠ¡åˆ°æ¥</span><br><span class="line">      |            |            |</span><br><span class="line">  ä»»åŠ¡å…¥é˜Ÿ         |      ä»é˜Ÿåˆ—å–ä»»åŠ¡</span><br><span class="line">      |            |            |</span><br><span class="line"> å”¤é†’å·¥ä½œçº¿ç¨‹       |      æ‰§è¡Œä»»åŠ¡</span><br><span class="line">      |            |            |</span><br></pre></td></tr></table></figure><h1>3. ä»»åŠ¡é˜Ÿåˆ—ä¸enqueueå‡½æ•°</h1><h1>3.1 ä»»åŠ¡é˜Ÿåˆ—</h1><p>åœ¨å®ç°çº¿ç¨‹æ± æ—¶ï¼Œä»»åŠ¡é˜Ÿåˆ—æ˜¯æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ã€‚å®ƒçš„ä½œç”¨æ˜¯å­˜æ”¾å¾…æ‰§è¡Œçš„ä»»åŠ¡ï¼Œçº¿ç¨‹æ± ä¸­çš„å·¥ä½œçº¿ç¨‹ä¼šä»é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡å¹¶æ‰§è¡Œã€‚é‚£ä¹ˆï¼Œä»€ä¹ˆæ˜¯ä»»åŠ¡å‘¢ï¼Ÿ</p><p>ä»ç¼–ç¨‹çš„è§’åº¦æ¥çœ‹ï¼Œä»»åŠ¡æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª<code>å‡½æ•°</code>ã€‚</p><p>å› æ­¤ä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¹¶ä¸”é˜Ÿåˆ—å­˜å‚¨çš„ç±»å‹æ˜¯å‡½æ•°ï¼Œæ¥ç»„æˆä»»åŠ¡é˜Ÿåˆ—ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">std::queue&lt; std::function&lt;<span class="type">void</span>()&gt; &gt; tasks;</span><br></pre></td></tr></table></figure><p>std::functionæ˜¯ä¸€ä¸ªé€šç”¨çš„å‡½æ•°å°è£…å™¨ï¼Œå…¶ä¸­çš„voidä»£è¡¨æ²¡æœ‰è¿”å›å€¼ï¼ˆæˆ–è€…è¿”å›å€¼ç±»å‹ä¸ºvoidï¼‰ï¼Œåœ†æ‹¬å·è¡¨ç¤ºæ²¡æœ‰å‚æ•°ã€‚å†æ¯”å¦‚<code>std::function&lt;int(int, int)&gt;</code>ä»£è¡¨æ¥æ”¶ä¸¤ä¸ªintç±»å‹å‚æ•°å¹¶ä¸”è¿”å›å€¼ä¸ºintã€‚</p><p>ä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜ï¼Ÿçº¿ç¨‹æ± éœ€è¦æ”¯æŒ<code>ä»»æ„ç±»å‹</code>çš„ä»»åŠ¡ï¼š</p><ul><li>å¯ä»¥æ˜¯æ™®é€šå‡½æ•°ã€ç±»æˆå‘˜å‡½æ•°ã€Lambdaè¡¨è¾¾å¼ç­‰</li><li>å¯ä»¥æºå¸¦ä»»æ„å‚æ•°å’Œè¿”å›å€¼</li></ul><p>ä½†ä¸ºä»€ä¹ˆè¿™é‡Œå´ä½¿ç”¨äº†æ— å‚æ— è¿”å›å€¼çš„<code>std::function&lt;void()&gt;</code>å½“ä½œä»»åŠ¡é˜Ÿåˆ—çš„æˆå‘˜çš„åŸºæœ¬ç±»å‹å‘¢ï¼Ÿ</p><p>è¿™çœ‹ä¼¼çŸ›ç›¾çš„è®¾è®¡èƒŒåï¼Œå®é™…ä¸Šä½“ç°äº†<code>ç±»å‹æ“¦é™¤</code>å’Œ<code>ä»»åŠ¡é€‚é…</code>çš„å·§å¦™ç»“åˆã€‚</p><p>ä¸ºäº†ç»Ÿä¸€ç®¡ç†ä»»åŠ¡ï¼Œå¿…é¡»å°†è¿™äº›ä»»åŠ¡<code>é€‚é…</code>ä¸ºä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ã€‚std::function&lt;void()&gt;å°±æ˜¯è¿™ä¸ªç»Ÿä¸€çš„æ¥å£ã€‚</p><ol><li>ä¸ºä»€ä¹ˆé€‰æ‹©void()ï¼Ÿ</li></ol><ul><li>æœ€å°æ¥å£ï¼švoid()æ˜¯æœ€ç®€å•çš„å‡½æ•°ç­¾åï¼Œä¸æ¶‰åŠå‚æ•°å’Œè¿”å›å€¼ã€‚</li><li>é€šç”¨æ€§ï¼šä»»ä½•ä»»åŠ¡éƒ½å¯ä»¥é€šè¿‡<code>é€‚é…å™¨</code>è½¬æ¢ä¸ºvoid()ç±»å‹ã€‚</li><li>æ‰§è¡Œä¸ç»“æœåˆ†ç¦»ï¼šçº¿ç¨‹æ± åªè´Ÿè´£<code>æ‰§è¡Œä»»åŠ¡</code>ï¼Œç»“æœé€šè¿‡å…¶ä»–æœºåˆ¶è¿”å›ã€‚</li></ul><ol start="2"><li>å¦‚ä½•é€‚é…ï¼Ÿ<br>é€šè¿‡<code>ä»»åŠ¡åŒ…è£…å™¨</code>å°†ä»»æ„ç±»å‹çš„ä»»åŠ¡è½¬æ¢ä¸ºvoid()ç±»å‹ã€‚å…·ä½“æ¥è¯´ï¼š</li></ol><ul><li>ä½¿ç”¨std::bindç»‘å®šä»»åŠ¡å’Œå‚æ•°ï¼Œç”Ÿæˆä¸€ä¸ªæ— å‚çš„å¯è°ƒç”¨å¯¹è±¡ã€‚</li><li>ä½¿ç”¨std::packaged_taskå°†ä»»åŠ¡åŒ…è£…ä¸ºvoid()ç±»å‹ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰è¿”å›å€¼ã€‚å¦‚ä½•è·å–è¿”å›å€¼å‘¢ï¼Ÿä½¿ç”¨è¯¥å¯¹è±¡çš„get_futureæˆå‘˜å‡½æ•°è·å–ä¸€ä¸ªstd::futureå¯¹è±¡ï¼Œåç»­åœ¨è°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„getæˆå‘˜å‡½æ•°å³å¯ã€‚</li></ul><p>æ€»çš„æ¥è¯´ï¼Œå°±æ˜¯ä¸ºäº†æ–¹ä¾¿ç®¡ç†æ‰ä½¿ç”¨<code>std::function&lt;void()&gt;</code>å½“ä½œä»»åŠ¡é˜Ÿåˆ—çš„æˆå‘˜çš„åŸºæœ¬ç±»å‹ï¼Œå¹¶ä¸”çº¿ç¨‹æ± åªæ˜¯æ‰§è¡Œè¿™äº›ä»»åŠ¡ï¼Œè€Œä»»åŠ¡çš„æ‰§è¡Œç»“æœçº¿ç¨‹æ± å¹¶ä¸åœ¨ä¹ï¼Œä½¿ç”¨å…¶ä»–åŠæ³•æ¥è¿”å›è¿™ä¸ªç»“æœã€‚</p><p>æ›´å…·ä½“çš„ï¼Œæˆ‘è§‰å¾—åº”è¯¥ç»“åˆæˆå‘˜å‡½æ•°enqueueæ¥è¯´æ˜ï¼Œ</p><h1>3.2 æˆå‘˜å‡½æ•°enqueue</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// add new work item to the pool</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> F, <span class="keyword">class</span>... Args&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">ThreadPool::enqueue</span><span class="params">(F&amp;&amp; f, Args&amp;&amp;... args)</span> </span></span><br><span class="line"><span class="function">    -&gt; std::future&lt;<span class="keyword">typename</span> std::result_of&lt;<span class="title">F</span><span class="params">(Args...)</span>&gt;::type&gt;</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">using</span> return_type = <span class="keyword">typename</span> std::result_of&lt;<span class="built_in">F</span>(Args...)&gt;::type;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> task = std::make_shared&lt; std::packaged_task&lt;<span class="built_in">return_type</span>()&gt; &gt;(</span><br><span class="line">            std::<span class="built_in">bind</span>(std::forward&lt;F&gt;(f), std::forward&lt;Args&gt;(args)...)</span><br><span class="line">        );</span><br><span class="line">        </span><br><span class="line">    std::future&lt;return_type&gt; res = task-&gt;<span class="built_in">get_future</span>();</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(queue_mutex)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// don&#x27;t allow enqueueing after stopping the pool</span></span><br><span class="line">        <span class="keyword">if</span>(stop)</span><br><span class="line">            <span class="keyword">throw</span> std::<span class="built_in">runtime_error</span>(<span class="string">&quot;enqueue on stopped ThreadPool&quot;</span>);</span><br><span class="line"></span><br><span class="line">        tasks.<span class="built_in">emplace</span>([task]()&#123; (*task)(); &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    condition.<span class="built_in">notify_one</span>();</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…ˆçœ‹ä¸€ä¸‹å‡½æ•°å£°æ˜ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> F, <span class="keyword">class</span>... Args&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">ThreadPool::enqueue</span><span class="params">(F&amp;&amp; f, Args&amp;&amp;... args)</span> -&gt; std::future&lt;<span class="keyword">typename</span> std::result_of&lt;<span class="title">F</span><span class="params">(Args...)</span>&gt;::type&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œä½¿ç”¨äº†C++11çš„æ¨¡æ¿ï¼ˆtemplate&lt;class F, classâ€¦ Args&gt;ï¼‰å’Œå°¾ç½®è¿”å›ç±»å‹ï¼ˆç”±<code>-&gt;</code>æŒ‡æ˜ï¼Œ<code>-&gt;</code>åå³ä¸ºè¿”å›å€¼ç±»å‹ï¼‰ã€‚<code>F</code>æ˜¯ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡çš„ç±»å‹ï¼Œ<code>Args</code>æ˜¯å‚æ•°åŒ…çš„ç±»å‹ï¼ˆ<code>...</code>æ˜¯ å‚æ•°åŒ…å±•å¼€çš„è¯­æ³•ï¼Œç”¨äºå¤„ç†å¯å˜æ¨¡æ¿å‚æ•°ï¼‰ã€‚<code>enqueue</code>å‡½æ•°çš„ä½œç”¨æ˜¯å°†ä»»åŠ¡<code>f</code>å’Œå‚æ•°<code>args</code>æ‰“åŒ…æˆä¸€ä¸ªä»»åŠ¡ï¼Œæ”¾å…¥çº¿ç¨‹æ± çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œå¹¶è¿”å›ä¸€ä¸ª<code>std::future</code>ä»¥ä¾¿è·å–ä»»åŠ¡æ‰§è¡Œçš„ç»“æœã€‚</p><p>æ¥ä¸‹æ¥ï¼Œå‡½æ•°å†…éƒ¨çš„ç¬¬ä¸€è¡Œæ˜¯ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> return_type = <span class="keyword">typename</span> std::result_of&lt;<span class="built_in">F</span>(Args...)&gt;::type;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæœ‰å‡ ä¸ªå…³é”®ç‚¹ï¼š</p><ol><li><p>std::result_of<br><code>std::result_of</code>æ˜¯ä¸€ä¸ªç±»å‹èƒå–å·¥å…·ï¼ˆType Traitï¼‰ï¼Œç”¨äºæ¨å¯¼å¯è°ƒç”¨å¯¹è±¡ï¼ˆå‡½æ•°ã€Lambdaã€å‡½æ•°å¯¹è±¡ç­‰ï¼‰åœ¨ç»™å®šå‚æ•°ç±»å‹ä¸‹çš„è¿”å›ç±»å‹ã€‚</p></li><li><p>typename<br><code>typename</code>åœ¨è¿™é‡Œçš„ä½œç”¨æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨<code>std::result_of&lt;F(Args...)&gt;::type</code>æ˜¯ä¸€ä¸ª ç±»å‹ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡æˆ–å…¶ä»–ä¸œè¥¿ã€‚è¿™æ˜¯C++æ¨¡æ¿ç¼–ç¨‹ä¸­çš„ä¸€ä¸ªå¸¸è§è¯­æ³•è§„åˆ™ï¼Œç§°ä¸º<code>ä¾èµ–åç§°è§£æ</code>ã€‚</p></li><li><p>using<br><code>using</code>åœ¨è¿™é‡Œç”¨äºå®šä¹‰ç±»å‹åˆ«åï¼Œç±»ä¼¼äºtypedefã€‚</p></li></ol><p>è¿™é‡Œä½¿ç”¨äº†<code>std::result_of</code>æ¥æ¨å¯¼è°ƒç”¨<code>F</code>ç±»å‹å¯¹è±¡ä½¿ç”¨<code>Args...</code>å‚æ•°åçš„è¿”å›ç±»å‹ã€‚è¿™è¡Œä»£ç å®šä¹‰äº†<code>return_type</code>ä½œä¸ºä»»åŠ¡æ‰§è¡Œåçš„è¿”å›ç±»å‹ï¼Œç”¨äºåç»­çš„<code>std::packaged_task</code>å’Œ<code>std::future</code>çš„æ¨¡æ¿å‚æ•°ã€‚</p><p>ç„¶åï¼Œåˆ›å»ºäº†ä¸€ä¸ª<code>std::packaged_task</code>å¯¹è±¡ï¼Œå¹¶å°†å…¶åŒ…è£…åœ¨<code>std::shared_ptr</code>ä¸­ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> task = std::make_shared&lt;std::packaged_task&lt;<span class="built_in">return_type</span>()&gt;&gt;(std::<span class="built_in">bind</span>(std::forward&lt;F&gt;(f), std::forward&lt;Args&gt;(args)...));</span><br></pre></td></tr></table></figure><p>å®ƒçš„æ ¸å¿ƒç›®çš„æ˜¯å°†ç”¨æˆ·æäº¤çš„ä»»åŠ¡ï¼ˆå¯èƒ½å¸¦æœ‰å‚æ•°å’Œè¿”å›å€¼ï¼‰é€‚é…ä¸ºçº¿ç¨‹æ± å¯ä»¥å¤„ç†çš„ç»Ÿä¸€å½¢å¼ï¼ˆvoid()ç±»å‹ï¼‰ï¼ŒåŒæ—¶ä¿ç•™ä»»åŠ¡çš„è¿”å›å€¼ä»¥ä¾¿å¼‚æ­¥è·å–ã€‚</p><p>è¿™é‡Œæœ‰å‡ ä¸ªå…³é”®ç‚¹ï¼š</p><ol><li>std::packaged_task</li></ol><p>std::packaged_task æ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ï¼Œç”¨äº åŒ…è£…ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼Œå¹¶å°†å…¶ä¸ä¸€ä¸ª std::future å…³è”èµ·æ¥ï¼Œä»è€Œæ”¯æŒ å¼‚æ­¥è·å–ä»»åŠ¡çš„è¿”å›å€¼ã€‚å®ƒçš„æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬ï¼š</p><ul><li>ä»»åŠ¡åŒ…è£…ï¼šå°†ä»»æ„å¯è°ƒç”¨å¯¹è±¡ï¼ˆå‡½æ•°ã€Lambdaã€å‡½æ•°å¯¹è±¡ç­‰ï¼‰åŒ…è£…ä¸ºä¸€ä¸ªå¯ä»¥å»¶è¿Ÿæ‰§è¡Œçš„ä»»åŠ¡ã€‚</li><li>ç»“æœå…³è”ï¼šé€šè¿‡ get_future() æ–¹æ³•ç”Ÿæˆä¸€ä¸ª std::future å¯¹è±¡ï¼Œç”¨äºå¼‚æ­¥è·å–ä»»åŠ¡çš„è¿”å›å€¼ã€‚</li></ul><p>æ¯”å¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::packaged_task&lt;<span class="title">int</span><span class="params">()</span>&gt; <span class="title">task</span><span class="params">([]() &#123; <span class="keyword">return</span> <span class="number">42</span>; &#125;)</span></span>;  <span class="comment">// åŒ…è£…ä¸€ä¸ªä»»åŠ¡</span></span><br><span class="line">std::future&lt;<span class="type">int</span>&gt; result = task.<span class="built_in">get_future</span>();         <span class="comment">// è·å– future</span></span><br><span class="line"><span class="built_in">task</span>();                                              <span class="comment">// æ‰§è¡Œä»»åŠ¡</span></span><br><span class="line">std::cout &lt;&lt; result.<span class="built_in">get</span>() &lt;&lt; std::endl;              <span class="comment">// è·å–ç»“æœ</span></span><br></pre></td></tr></table></figure><ol start="2"><li>std::bind</li></ol><p><code>std::bind</code>ç”¨äºå°†å‡½æ•°<code>f</code>å’Œå‚æ•°<code>args...</code>ç»‘å®šåœ¨ä¸€èµ·ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„å¯è°ƒç”¨å¯¹è±¡ï¼Œå®ƒä½äº<code>&lt;functional&gt;</code>å¤´æ–‡ä»¶ä¸­ã€‚<br>å‡è®¾æœ‰ä¸€ä¸ªå‡½æ•°ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> a + b; &#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨std::bindç»‘å®šå‚æ•°ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> bound_task = std::<span class="built_in">bind</span>(add, <span class="number">2</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œbound_taskæ˜¯ä¸€ä¸ªæ— å‚çš„å¯è°ƒç”¨å¯¹è±¡ï¼Œè°ƒç”¨bound_task()ä¼šè¿”å›5ã€‚</p><ol start="3"><li><p>å®Œç¾è½¬å‘<br><code>std::forward</code>ç”¨äºä¿æŒå‚æ•°çš„å·¦å€¼æˆ–å³å€¼å±æ€§ï¼Œé¿å…ä¸å¿…è¦çš„æ‹·è´ï¼Œå®ç°å®Œç¾è½¬å‘ã€‚</p></li><li><p>std::make_shared<br>ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆç®¡ç†<code>std::packaged_task</code>çš„ç”Ÿå‘½å‘¨æœŸï¼Œç¡®ä¿ä»»åŠ¡åœ¨éœ€è¦æ—¶ä¸ä¼šè¢«æå‰é”€æ¯ã€‚</p></li></ol><p>æ¥ä¸‹æ¥è·å–<code>std::future</code>å¯¹è±¡ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">std::future&lt;return_type&gt; res = task-&gt;<span class="built_in">get_future</span>();</span><br></pre></td></tr></table></figure><p><code>std::packaged_task::get_future</code>è¿”å›ä¸€ä¸ªä¸ä»»åŠ¡ç»“æœå…³è”çš„<code>std::future</code>å¯¹è±¡ï¼Œé€šè¿‡å®ƒå¯ä»¥åœ¨æœªæ¥æŸä¸ªæ—¶é—´ç‚¹è·å–ä»»åŠ¡çš„è¿”å›å€¼ã€‚</p><p>ç„¶åè¿›å…¥ä¸€ä¸ªä½œç”¨åŸŸå—ï¼Œé”å®šäº’æ–¥é‡ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(queue_mutex)</span></span>;</span><br><span class="line">    <span class="keyword">if</span>(stop)</span><br><span class="line">        <span class="keyword">throw</span> std::<span class="built_in">runtime_error</span>(<span class="string">&quot;enqueue on stopped ThreadPool&quot;</span>);</span><br><span class="line">    tasks.<span class="built_in">emplace</span>([task]()&#123; (*task)(); &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæœ‰å‡ ä¸ªå…³é”®ç‚¹ï¼š</p><ol><li><p>äº’æ–¥é”ï¼šä½¿ç”¨<code>std::unique_lock</code>é”å®šäº’æ–¥é‡ï¼Œç¡®ä¿å¯¹ä»»åŠ¡é˜Ÿåˆ—çš„è®¿é—®æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå½“ç¦»å¼€ä½œç”¨åŸŸæ—¶è‡ªåŠ¨è§£é”ã€‚</p></li><li><p>åœæ­¢æ£€æŸ¥ï¼šå¦‚æœçº¿ç¨‹æ± å·²ç»åœæ­¢ï¼ˆ<code>stop</code>ä¸º<code>true</code>ï¼‰ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œé˜²æ­¢æ–°ä»»åŠ¡è¢«åŠ å…¥å·²åœæ­¢çš„çº¿ç¨‹æ± ã€‚</p></li><li><p>ä»»åŠ¡å…¥é˜Ÿï¼šå°†ä»»åŠ¡åŒ…è£…æˆä¸€ä¸ªlambdaè¡¨è¾¾å¼ï¼Œå¹¶æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—<code>tasks</code>ä¸­ã€‚lambdaæ•è·äº†<code>task</code>çš„å…±äº«æŒ‡é’ˆï¼Œå½“lambdaè¢«æ‰§è¡Œæ—¶ï¼Œä¼šè°ƒç”¨<code>(*task)()</code>ï¼Œå³æ‰§è¡Œç»‘å®šçš„ä»»åŠ¡ã€‚</p></li></ol><p>ä¹‹åï¼Œé€šçŸ¥ä¸€ä¸ªç­‰å¾…çš„çº¿ç¨‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">condition.<span class="built_in">notify_one</span>();</span><br></pre></td></tr></table></figure><p>é€šè¿‡æ¡ä»¶å˜é‡<code>condition</code>çš„<code>notify_one</code>æ–¹æ³•ï¼Œå”¤é†’ä¸€ä¸ªæ­£åœ¨ç­‰å¾…çš„å·¥ä½œçº¿ç¨‹ï¼Œè®©å®ƒä»ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºå¹¶æ‰§è¡Œæ–°åŠ å…¥çš„ä»»åŠ¡ã€‚</p><p>æœ€åï¼Œè¿”å›ä¹‹å‰è·å–çš„<code>std::future</code>å¯¹è±¡ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> res;</span><br></pre></td></tr></table></figure><p>ç”¨æˆ·å¯ä»¥é€šè¿‡è¿™ä¸ª<code>std::future</code>å¯¹è±¡è·å–ä»»åŠ¡çš„æ‰§è¡Œç»“æœï¼Œæˆ–è€…ç­‰å¾…ä»»åŠ¡å®Œæˆã€‚</p><p>åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œéœ€è¦æ³¨æ„çš„å‡ ä¸ªå…³é”®ç‚¹ï¼š</p><ol><li><p><strong>å®Œç¾è½¬å‘</strong>ï¼šåœ¨<code>std::bind</code>ä¸­ä½¿ç”¨<code>std::forward</code>ä¿æŒå‚æ•°çš„å€¼ç±»åˆ«ï¼Œç¡®ä¿æ— è®ºæ˜¯å·¦å€¼è¿˜æ˜¯å³å€¼éƒ½èƒ½æ­£ç¡®ä¼ é€’ï¼Œé¿å…ä¸å¿…è¦çš„æ‹·è´ã€‚</p></li><li><p><strong>ç±»å‹æ“¦é™¤</strong>ï¼šä»»åŠ¡é˜Ÿåˆ—ä¸­çš„å…ƒç´ ç±»å‹æ˜¯<code>std::function&lt;void()&gt;</code>ï¼Œè€Œé€šè¿‡lambdaè¡¨è¾¾å¼å°†å…·ä½“çš„<code>std::packaged_task</code>åŒ…è£…æˆæ— å‚æ•°ã€æ— è¿”å›å€¼çš„å‡½æ•°ï¼Œå®ç°äº†ç±»å‹æ“¦é™¤ï¼Œä½¿å¾—ä¸åŒç±»å‹çš„ä»»åŠ¡å¯ä»¥ç»Ÿä¸€å­˜å‚¨åœ¨åŒä¸€ä¸ªé˜Ÿåˆ—ä¸­ã€‚</p></li><li><p><strong>å¼‚å¸¸å®‰å…¨</strong>ï¼šåœ¨äº’æ–¥é”çš„ä¿æŠ¤ä¸‹æ£€æŸ¥<code>stop</code>æ ‡å¿—ï¼Œç¡®ä¿çº¿ç¨‹æ± åœæ­¢åä¸å†æ¥å—æ–°ä»»åŠ¡ï¼Œå¹¶ä¸”é€šè¿‡æ™ºèƒ½æŒ‡é’ˆç®¡ç†ä»»åŠ¡å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œé¿å…èµ„æºæ³„æ¼ã€‚</p></li><li><p><strong>å¼‚æ­¥ç»“æœå¤„ç†</strong>ï¼šé€šè¿‡<code>std::packaged_task</code>å’Œ<code>std::future</code>çš„ç»“åˆï¼Œå®ç°äº†ä»»åŠ¡çš„å¼‚æ­¥æ‰§è¡Œå’Œç»“æœçš„è·å–ï¼Œç”¨æˆ·å¯ä»¥åœ¨é€‚å½“çš„æ—¶å€™è°ƒç”¨<code>future::get()</code>æ¥ç­‰å¾…ä»»åŠ¡å®Œæˆå¹¶è·å–ç»“æœï¼Œæˆ–è€…æ£€æŸ¥ä»»åŠ¡æ˜¯å¦å®Œæˆã€‚</p></li></ol><ul><li><strong><code>std::result_of</code>å’Œ<code>std::invoke_result</code>çš„åŒºåˆ«ï¼Ÿ</strong></li></ul><p>C++17ä¸­<code>std::result_of</code>è¢«åºŸå¼ƒï¼Œæ”¹ç”¨<code>std::invoke_result</code>ã€‚ä½†åœ¨C++11/14ä¸­ï¼Œ<code>std::result_of</code>æ˜¯æ¨å¯¼å¯è°ƒç”¨å¯¹è±¡è¿”å›ç±»å‹çš„æ–¹å¼ã€‚å…¶æ¨¡æ¿å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ç±»å‹ï¼Œè¡¨ç¤ºè°ƒç”¨<code>F</code>ç±»å‹å¯¹è±¡ä½¿ç”¨<code>Args...</code>å‚æ•°æ—¶çš„è¿”å›ç±»å‹ã€‚</p><h1>4. çº¿ç¨‹æ± çš„æ„é€ ä¸ææ„</h1><h1>4.1 æ„é€ å‡½æ•°ï¼šå·¥ä½œçº¿ç¨‹çš„å¯åŠ¨</h1><p>æ„é€ å‡½æ•°çš„æ ¸å¿ƒä»»åŠ¡æ˜¯åˆå§‹åŒ–çº¿ç¨‹æ± å¹¶å¯åŠ¨æŒ‡å®šæ•°é‡çš„å·¥ä½œçº¿ç¨‹ã€‚</p><p>å…¶å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="title">ThreadPool::ThreadPool</span><span class="params">(<span class="type">size_t</span> threads)</span></span></span><br><span class="line"><span class="function">    :   stop(false)</span></span><br><span class="line"><span class="function">&#123;</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">size_t</span> i = <span class="number">0</span>;i&lt;threads;++i)</span><br><span class="line">        workers.<span class="built_in">emplace_back</span>(</span><br><span class="line">            [<span class="keyword">this</span>]</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(;;)</span><br><span class="line">                &#123;</span><br><span class="line">                    std::function&lt;<span class="built_in">void</span>()&gt; task;</span><br><span class="line"></span><br><span class="line">                    &#123;</span><br><span class="line">                        std::unique_lock&lt;std::mutex&gt; <span class="built_in">lock</span>(<span class="keyword">this</span>-&gt;queue_mutex);</span><br><span class="line">                        <span class="keyword">this</span>-&gt;condition.<span class="built_in">wait</span>(lock,</span><br><span class="line">                            [<span class="keyword">this</span>]&#123; <span class="keyword">return</span> <span class="keyword">this</span>-&gt;stop || !<span class="keyword">this</span>-&gt;tasks.<span class="built_in">empty</span>(); &#125;);</span><br><span class="line">                        <span class="keyword">if</span>(<span class="keyword">this</span>-&gt;stop &amp;&amp; <span class="keyword">this</span>-&gt;tasks.<span class="built_in">empty</span>())</span><br><span class="line">                            <span class="keyword">return</span>;</span><br><span class="line">                        task = std::<span class="built_in">move</span>(<span class="keyword">this</span>-&gt;tasks.<span class="built_in">front</span>());</span><br><span class="line">                        <span class="keyword">this</span>-&gt;tasks.<span class="built_in">pop</span>();</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="built_in">task</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç çš„åŸºæœ¬æµç¨‹ï¼š</p><ol><li>çº¿ç¨‹å¯åŠ¨</li></ol><ul><li>å¾ªç¯åˆ›å»º threads ä¸ªå·¥ä½œçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹æ‰§è¡Œä¸€ä¸ª æ— é™å¾ªç¯ã€‚</li><li>çº¿ç¨‹å¯åŠ¨åç«‹å³è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼ˆé€šè¿‡æ¡ä»¶å˜é‡ conditionï¼‰ã€‚</li></ul><ol start="2"><li>åŒæ­¥æœºåˆ¶</li></ol><ul><li>æ¡ä»¶å˜é‡ç­‰å¾…ï¼š</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">condition.<span class="built_in">wait</span>(lock, [<span class="keyword">this</span>] &#123; <span class="keyword">return</span> stop || !tasks.<span class="built_in">empty</span>(); &#125;);</span><br></pre></td></tr></table></figure><ul><li>çº¿ç¨‹åœ¨ä»¥ä¸‹ä¸¤ç§æƒ…å†µä¸‹è¢«å”¤é†’ï¼š<ul><li>æœ‰æ–°ä»»åŠ¡åŠ å…¥é˜Ÿåˆ—ï¼ˆtasks éç©ºï¼‰ã€‚</li><li>çº¿ç¨‹æ± è¢«è¦æ±‚åœæ­¢ï¼ˆstop == trueï¼‰ã€‚</li></ul></li><li>å½“ä»»åŠ¡é˜Ÿåˆ—ä¸ºç©ºï¼ˆtasks.empty()ï¼‰ä¸”çº¿ç¨‹æ± æœªæ”¶åˆ°åœæ­¢ä¿¡å·ï¼ˆstop == falseï¼‰æ—¶ï¼Œå·¥ä½œçº¿ç¨‹ä¼šè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œé¿å…ç©ºè½¬æ¶ˆè€— CPU èµ„æºã€‚</li><li><code>[this]&#123; return stop || !tasks.empty(); &#125;</code> è¿™ä¸ª Lambda è¡¨è¾¾å¼æ˜¯å”¤é†’çº¿ç¨‹çš„æ¡ä»¶åˆ¤æ–­</li><li>åœ¨è°ƒç”¨ condition.wait() æ—¶ï¼Œé”ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾ï¼Œå…è®¸å…¶ä»–çº¿ç¨‹ä¿®æ”¹å…±äº«èµ„æºï¼ˆä¾‹å¦‚æ·»åŠ ä»»åŠ¡æˆ–è®¾ç½®åœæ­¢æ ‡å¿—ï¼‰ã€‚</li><li>å½“çº¿ç¨‹è¢«å”¤é†’æ—¶ï¼Œä¼šé‡æ–°å°è¯•è·å–é”ï¼Œè·å–é”åç»§ç»­æ“ä½œï¼Œä¿è¯åç»­æ“ä½œï¼ˆå¦‚å–ä»»åŠ¡ tasks.pop()ï¼‰çš„çº¿ç¨‹å®‰å…¨</li><li>é˜²æ­¢è™šå‡å”¤é†’<ul><li>æ¡ä»¶å˜é‡çš„ wait() æ–¹æ³•å¯èƒ½å› ç³»ç»ŸåŸå› è¢«è™šå‡å”¤é†’ï¼ˆå³ä½¿æ¡ä»¶æœªæ»¡è¶³ï¼‰ã€‚é€šè¿‡ä¼ å…¥çš„ Lambda è¡¨è¾¾å¼ï¼Œçº¿ç¨‹åœ¨å”¤é†’åå¿…é¡»é‡æ–°æ£€æŸ¥æ¡ä»¶ï¼Œç¡®ä¿åªæœ‰åœ¨æ¡ä»¶çœŸæ­£æ»¡è¶³æ—¶æ‰ä¼šç»§ç»­æ‰§è¡Œã€‚</li></ul></li></ul><ol start="3"><li>ä»»åŠ¡æ‰§è¡Œæµç¨‹ï¼š</li></ol><ul><li>ä»é˜Ÿåˆ—å¤´éƒ¨å–å‡ºä»»åŠ¡ï¼ˆtasks.front()ï¼‰ï¼Œå¹¶é€šè¿‡ std::move è½¬ç§»æ‰€æœ‰æƒã€‚</li><li>åœ¨é”å¤–æ‰§è¡Œä»»åŠ¡ï¼ˆtask()ï¼‰ï¼Œé¿å…é•¿æ—¶é—´å ç”¨é”ã€‚</li></ul><h1>4.2 ææ„å‡½æ•°ï¼šå®‰å…¨å…³é—­çº¿ç¨‹æ± </h1><p>ææ„å‡½æ•°è´Ÿè´£åœæ­¢çº¿ç¨‹æ± å¹¶ç­‰å¾…æ‰€æœ‰å·¥ä½œçº¿ç¨‹é€€å‡ºï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">inline</span> ThreadPool::~<span class="built_in">ThreadPool</span>() &#123;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(queue_mutex)</span></span>;</span><br><span class="line">        stop = <span class="literal">true</span>;  <span class="comment">// è®¾ç½®åœæ­¢æ ‡å¿—</span></span><br><span class="line">    &#125;</span><br><span class="line">    condition.<span class="built_in">notify_all</span>();  <span class="comment">// å”¤é†’æ‰€æœ‰çº¿ç¨‹</span></span><br><span class="line">    <span class="keyword">for</span> (std::thread&amp; worker : workers) &#123;</span><br><span class="line">        worker.<span class="built_in">join</span>();  <span class="comment">// ç­‰å¾…çº¿ç¨‹ç»“æŸ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ‰å¦‚ä¸‹å…³é”®ç‚¹ï¼š</p><ol><li>åœæ­¢ä¿¡å·</li></ol><ul><li>è®¾ç½® stop = trueï¼Œé€šçŸ¥æ‰€æœ‰å·¥ä½œçº¿ç¨‹é€€å‡ºå¾ªç¯ã€‚</li><li>é€šè¿‡ condition.notify_all() å”¤é†’æ‰€æœ‰ç­‰å¾…çš„çº¿ç¨‹ã€‚</li></ul><ol start="2"><li>çº¿ç¨‹å›æ”¶ï¼š</li></ol><ul><li>ä½¿ç”¨ join() ç­‰å¾…æ‰€æœ‰çº¿ç¨‹è‡ªç„¶é€€å‡ºï¼Œç¡®ä¿ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„å‰©ä½™ä»»åŠ¡è¢«æ‰§è¡Œå®Œæ¯•ã€‚</li><li>ææ„å‡½æ•°çš„ å¼‚å¸¸å®‰å…¨ï¼šå³ä½¿æŸä¸ªçº¿ç¨‹æŠ›å‡ºå¼‚å¸¸ï¼Œjoin() ä»èƒ½ä¿è¯æ‰€æœ‰çº¿ç¨‹è¢«æ­£ç¡®å›æ”¶ã€‚</li></ul><h1>5. çº¿ç¨‹æ± çš„å·¥ä½œæµç¨‹</h1><p>æˆ‘ä¸ªäººæ„Ÿè§‰ï¼Œçº¿ç¨‹æ± ç”±å¤šä¸ªçº¿ç¨‹ç»„æˆï¼Œè€Œå¤šçº¿ç¨‹æœ€é‡è¦çš„å°±æ˜¯çº¿ç¨‹åŒæ­¥ï¼Œå› æ­¤åŒæ­¥æœºåˆ¶å°±æ˜¯çº¿ç¨‹æ± ä¸­æ ¸å¿ƒä¸­çš„æ ¸å¿ƒã€‚</p><p>ä¸»è¦è§£å†³çš„é—®é¢˜å°±æ˜¯<code>å¤šä¸ªçº¿ç¨‹å¯¹å…±äº«èµ„æºçš„å®‰å…¨è®¿é—®</code>ã€‚è¿™é‡Œçš„å…±äº«èµ„æºæ˜¯ä»»åŠ¡é˜Ÿåˆ—ã€‚æˆ‘ä»¬é‡‡ç”¨ç»å…¸çš„<code>ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹</code>æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p><ul><li>ç”Ÿäº§è€…ï¼ˆä¸»çº¿ç¨‹ï¼‰ï¼šé€šè¿‡enqueueæ·»åŠ ä»»åŠ¡</li><li>æ¶ˆè´¹è€…ï¼ˆå·¥ä½œçº¿ç¨‹ï¼‰ï¼šä»é˜Ÿåˆ—è·å–ä»»åŠ¡æ‰§è¡Œ</li></ul><h1>5.1 ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹</h1><p>å…¶å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> [ç”Ÿäº§è€…çº¿ç¨‹]                            [æ¶ˆè´¹è€…çº¿ç¨‹]</span><br><span class="line">      |                                      |</span><br><span class="line">æäº¤ä»»åŠ¡åˆ°é˜Ÿåˆ—                                |</span><br><span class="line">      |                                      |</span><br><span class="line">      |-- ä»»åŠ¡å…¥é˜Ÿ --&gt; [ä»»åŠ¡é˜Ÿåˆ—] --&gt; ä»»åŠ¡å‡ºé˜Ÿ --|</span><br><span class="line">      |                                      |</span><br><span class="line">      |-- å”¤é†’æ¶ˆè´¹è€…çº¿ç¨‹ ----------------------&gt;|</span><br><span class="line">      |                                      |</span><br><span class="line">      |                                æ‰§è¡Œä»»åŠ¡</span><br></pre></td></tr></table></figure><h1>5.2 å…³é”®æœºåˆ¶</h1><table><thead><tr><th>æœºåˆ¶</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>äº’æ–¥é”</td><td>ä¿æŠ¤ä»»åŠ¡é˜Ÿåˆ—çš„çº¿ç¨‹å®‰å…¨è®¿é—®</td></tr><tr><td>æ¡ä»¶å˜é‡</td><td>åè°ƒçº¿ç¨‹çš„ç­‰å¾…ä¸å”¤é†’ï¼Œé¿å…å¿™ç­‰å¾…</td></tr><tr><td>ä»»åŠ¡é€‚é…</td><td>å°†ä»»æ„ä»»åŠ¡è½¬æ¢ä¸ºç»Ÿä¸€æ¥å£ï¼ˆstd::function&lt;void()&gt;ï¼‰</td></tr><tr><td>å¼‚æ­¥ç»“æœåé¦ˆ</td><td>é€šè¿‡ std::future å®ç°ä»»åŠ¡ç»“æœçš„å¼‚æ­¥è·å–</td></tr></tbody></table><h1>6. å®Œæ•´ä»£ç </h1><p>å®Œæ•´ä»£ç å¯è§ä»£ç ä»“åº“ï¼Œè¿™é‡Œä¹Ÿé™„ä¸Šï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ThreadPool.h</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> THREAD_POOL_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> THREAD_POOL_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;condition_variable&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;future&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdexcept&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ThreadPool</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">ThreadPool</span>(<span class="type">size_t</span>);</span><br><span class="line">    <span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> F, <span class="keyword">class</span>... Args&gt;</span></span><br><span class="line"><span class="function">    <span class="keyword">auto</span> <span class="title">enqueue</span><span class="params">(F&amp;&amp; f, Args&amp;&amp;... args)</span> </span></span><br><span class="line"><span class="function">        -&gt; std::future&lt;<span class="keyword">typename</span> std::result_of&lt;<span class="title">F</span><span class="params">(Args...)</span>&gt;::type&gt;</span>;</span><br><span class="line">    ~<span class="built_in">ThreadPool</span>();</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">// need to keep track of threads so we can join them</span></span><br><span class="line">    std::vector&lt; std::thread &gt; workers;</span><br><span class="line">    <span class="comment">// the task queue</span></span><br><span class="line">    std::queue&lt; std::function&lt;<span class="type">void</span>()&gt; &gt; tasks;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// synchronization</span></span><br><span class="line">    std::mutex queue_mutex;</span><br><span class="line">    std::condition_variable condition;</span><br><span class="line">    <span class="type">bool</span> stop;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// the constructor just launches some amount of workers</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="title">ThreadPool::ThreadPool</span><span class="params">(<span class="type">size_t</span> threads)</span></span></span><br><span class="line"><span class="function">    :   stop(false)</span></span><br><span class="line"><span class="function">&#123;</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">size_t</span> i = <span class="number">0</span>;i&lt;threads;++i)</span><br><span class="line">        workers.<span class="built_in">emplace_back</span>(</span><br><span class="line">            [<span class="keyword">this</span>]</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(;;)</span><br><span class="line">                &#123;</span><br><span class="line">                    std::function&lt;<span class="built_in">void</span>()&gt; task;</span><br><span class="line"></span><br><span class="line">                    &#123;</span><br><span class="line">                        std::unique_lock&lt;std::mutex&gt; <span class="built_in">lock</span>(<span class="keyword">this</span>-&gt;queue_mutex);</span><br><span class="line">                        <span class="keyword">this</span>-&gt;condition.<span class="built_in">wait</span>(lock,</span><br><span class="line">                            [<span class="keyword">this</span>]&#123; <span class="keyword">return</span> <span class="keyword">this</span>-&gt;stop || !<span class="keyword">this</span>-&gt;tasks.<span class="built_in">empty</span>(); &#125;);</span><br><span class="line">                        <span class="keyword">if</span>(<span class="keyword">this</span>-&gt;stop &amp;&amp; <span class="keyword">this</span>-&gt;tasks.<span class="built_in">empty</span>())</span><br><span class="line">                            <span class="keyword">return</span>;</span><br><span class="line">                        task = std::<span class="built_in">move</span>(<span class="keyword">this</span>-&gt;tasks.<span class="built_in">front</span>());</span><br><span class="line">                        <span class="keyword">this</span>-&gt;tasks.<span class="built_in">pop</span>();</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="built_in">task</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// add new work item to the pool</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> F, <span class="keyword">class</span>... Args&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">ThreadPool::enqueue</span><span class="params">(F&amp;&amp; f, Args&amp;&amp;... args)</span> </span></span><br><span class="line"><span class="function">    -&gt; std::future&lt;<span class="keyword">typename</span> std::result_of&lt;<span class="title">F</span><span class="params">(Args...)</span>&gt;::type&gt;</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">using</span> return_type = <span class="keyword">typename</span> std::result_of&lt;<span class="built_in">F</span>(Args...)&gt;::type;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> task = std::make_shared&lt; std::packaged_task&lt;<span class="built_in">return_type</span>()&gt; &gt;(</span><br><span class="line">            std::<span class="built_in">bind</span>(std::forward&lt;F&gt;(f), std::forward&lt;Args&gt;(args)...)</span><br><span class="line">        );</span><br><span class="line">        </span><br><span class="line">    std::future&lt;return_type&gt; res = task-&gt;<span class="built_in">get_future</span>();</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(queue_mutex)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// don&#x27;t allow enqueueing after stopping the pool</span></span><br><span class="line">        <span class="keyword">if</span>(stop)</span><br><span class="line">            <span class="keyword">throw</span> std::<span class="built_in">runtime_error</span>(<span class="string">&quot;enqueue on stopped ThreadPool&quot;</span>);</span><br><span class="line"></span><br><span class="line">        tasks.<span class="built_in">emplace</span>([task]()&#123; (*task)(); &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    condition.<span class="built_in">notify_one</span>();</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// the destructor joins all threads</span></span><br><span class="line"><span class="keyword">inline</span> ThreadPool::~<span class="built_in">ThreadPool</span>()</span><br><span class="line">&#123;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(queue_mutex)</span></span>;</span><br><span class="line">        stop = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    condition.<span class="built_in">notify_all</span>();</span><br><span class="line">    <span class="keyword">for</span>(std::thread &amp;worker: workers)</span><br><span class="line">        worker.<span class="built_in">join</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> C/C++ é¢è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C/C++ </tag>
            
            <tag> çº¿ç¨‹æ±  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¥¹çš„ç®—æ³•ï¼Œæˆ‘è§£ä¸å¼€</title>
      <link href="/2025/03/09/my-feelings3/"/>
      <url>/2025/03/09/my-feelings3/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> æ‚è°ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ‚è°ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€è§„åˆ’å…«ï¼šåŒºé—´DP</title>
      <link href="/2025/03/08/dp8/"/>
      <url>/2025/03/08/dp8/</url>
      
        <content type="html"><![CDATA[<h1>å‰è¨€</h1><p>ä»Šæ—¥å­¦ä¹ çµèŒ¶å±±è‰¾åºœçš„<a href="https://www.bilibili.com/video/BV1Gs4y1E7EU/?spm_id_from=333.1245.0.0&amp;vd_source=a0f19e79b7da02f4fa318d91be5bc86a">åŒºé—´ DPï¼šæœ€é•¿å›æ–‡å­åºåˆ—ã€åŸºç¡€ç®—æ³•ç²¾è®² 22ã€‘</a>ã€‚</p><p>å‰é¢çš„å‡ ä¸ªè¯¾ç¨‹éƒ½æ˜¯åœ¨æ•°ç»„çš„å‰ç¼€æˆ–è€…åç¼€ä¸Šè½¬ç§»çš„ï¼Œè¿™ç±»DPå«åšçº¿æ€§DPã€‚</p><p>å¯¹äºåŒºé—´DPï¼Œä¼šæŠŠé—®é¢˜è§„æ¨¡ç¼©å°åˆ°æ•°ç»„ä¸­é—´çš„åŒºé—´ä¸Šï¼Œè€Œä¸ä»…ä»…æ˜¯å‰ç¼€æˆ–è€…åç½®äº†ã€‚è¿™æ˜¯åŒºé—´DPå’Œçº¿æ€§DPçš„æœ€å¤§åŒºåˆ«ã€‚</p><p>çµèŒ¶å±±è‰¾åºœä¸»è¦é€šè¿‡ä¸¤é“Leetcodeé¢˜ç›®<a href="https://leetcode.cn/problems/longest-palindromic-subsequence/description/">516. æœ€é•¿å›æ–‡å­åºåˆ—</a>å’Œ<a href="https://leetcode.cn/problems/minimum-score-triangulation-of-polygon/description/">1039. å¤šè¾¹å½¢ä¸‰è§’å‰–åˆ†çš„æœ€ä½å¾—åˆ†</a>æ¥è¿›è¡Œè®²è§£ã€‚</p><h1>1. æœ€é•¿å›æ–‡å­åºåˆ—</h1><h1>1.1 é¢˜ç›®æè¿°</h1><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œæ‰¾å‡ºå…¶ä¸­æœ€é•¿çš„å›æ–‡å­åºåˆ—ï¼Œå¹¶è¿”å›è¯¥åºåˆ—çš„é•¿åº¦ã€‚</p><p>å­åºåˆ—å®šä¹‰ä¸ºï¼šä¸æ”¹å˜å‰©ä½™å­—ç¬¦é¡ºåºçš„æƒ…å†µä¸‹ï¼Œåˆ é™¤æŸäº›å­—ç¬¦æˆ–è€…ä¸åˆ é™¤ä»»ä½•å­—ç¬¦å½¢æˆçš„ä¸€ä¸ªåºåˆ—ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><pre><code>è¾“å…¥ï¼šs = &quot;bbbab&quot;è¾“å‡ºï¼š4è§£é‡Šï¼šä¸€ä¸ªå¯èƒ½çš„æœ€é•¿å›æ–‡å­åºåˆ—ä¸º &quot;bbbb&quot; ã€‚</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code>è¾“å…¥ï¼šs = &quot;cbbd&quot;è¾“å‡ºï¼š2è§£é‡Šï¼šä¸€ä¸ªå¯èƒ½çš„æœ€é•¿å›æ–‡å­åºåˆ—ä¸º &quot;bb&quot; ã€‚</code></pre><h1>1.2 åŸºæœ¬æ€è·¯</h1><h1>1.2.1 æ€è·¯ä¸€</h1><p>ç”±äºå›æ–‡å­åºåˆ—ä»å·¦å¾€å³è¯»å’Œä»å³å¾€å·¦è¯»éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥å¯ä»¥æ±‚så’Œåè½¬åçš„sçš„æœ€é•¿å…¬å…±å­åºåˆ—ï¼Œä»è€Œå¯ä»¥å¾—åˆ°æœ€é•¿å›æ–‡å­åºåˆ—çš„é•¿åº¦ã€‚</p><h1>1.2.2 æ€è·¯äºŒ</h1><p>é€‰æˆ–ä¸é€‰çš„æ€è·¯æ¥è§£å†³è¿™é“é¢˜ã€‚</p><p>åªéœ€è¦çœ‹ç¬¬ä¸€ä¸ªå­—æ¯é€‰æˆ–ä¸é€‰ä»¥åŠæœ€åä¸€ä¸ªå­—æ¯é€‰æˆ–ä¸é€‰ã€‚</p><p><img src="/images/dp8_1.png" alt=""></p><p>å®šä¹‰dfs(i, j)è¡¨ç¤ºä»s[i]åˆ°s[j]çš„æœ€é•¿å›æ–‡å­åºåˆ—çš„é•¿åº¦ã€‚</p><ul><li>å¦‚æœs[i] == s[j]ï¼Œé‚£ä¹ˆå°±å¯ä»¥éƒ½é€‰ï¼Œié€’å½’åˆ°i+1ï¼Œjé€’å½’åˆ°j - 1ã€‚</li><li>å¦‚æœs[i] != s[j]ï¼Œé‚£ä¹ˆè¦ä¹ˆä¸é€‰s[i]ï¼Œè¦ä¹ˆä¸é€‰s[j]ã€‚</li></ul><p>é‚£ä¹ˆçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š</p><pre><code>dfs(i, j) = dfs(i+1, j-1) + 2, s[i] == s[j]dfs(i, j) = max(dfs(i+1, j), dfs(i, j-1)), s[i] != s[j]</code></pre><p>å¦‚æœé€’å½’åˆ°ä¸€ä¸ªå­—æ¯çš„æ—¶å€™ï¼Œå®ƒä¸€ä¸ªå­—æ¯ä¹Ÿæ˜¯ä¸€ä¸ªå›æ–‡å­åºåˆ—ï¼Œæ‰€ä»¥è¿”å›1ã€‚å¦‚æœæ²¡æœ‰å­—æ¯å°±è¿”å›0</p><ul><li>é€’å½’è¾¹ç•Œ<ul><li>dfs(i, i) = 1</li><li>dfs(i + 1, i) = 0</li></ul></li><li>é€’å½’å…¥å£<ul><li>dfs(0, n-1)</li></ul></li></ul><h1>1.3 å…·ä½“å®ç°</h1><h1>1.3.1 é€’å½’</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestPalindromeSubseq</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">memo</span>(n, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n, <span class="number">-1</span>));</span><br><span class="line">        <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">this</span> <span class="keyword">auto</span>&amp;&amp; dfs, <span class="type">int</span> i, <span class="type">int</span> j)-&gt;<span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (i == j)</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (i &gt; j)</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            <span class="type">int</span>&amp; res = memo[i][j];</span><br><span class="line">            <span class="keyword">if</span> (res != <span class="number">-1</span>)</span><br><span class="line">                <span class="keyword">return</span> res;</span><br><span class="line">            <span class="keyword">return</span> res = s[i] == s[j] ? <span class="built_in">dfs</span>(i<span class="number">+1</span>, j<span class="number">-1</span>) + <span class="number">2</span> : <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">+1</span>, j), <span class="built_in">dfs</span>(i, j<span class="number">-1</span>));</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(<span class="number">0</span>, n<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>1.3.2 é€’æ¨</h1><p>é€’å½’ç¿»è¯‘æˆé€’æ¨ï¼Œéœ€è¦æ³¨æ„ä¸€ä¸‹å¾ªç¯é¡ºåºã€‚</p><ul><li>ç”±äºf[i]ä»f[i+1]è½¬ç§»è¿‡æ¥ï¼Œæ‰€ä»¥iè¦<code>å€’åº</code>æšä¸¾ã€‚</li><li>ç”±äºf[i][j]ä»f[i][j-1]è½¬ç§»è¿‡æ¥ï¼Œæ‰€ä»¥iè¦<code>å€’åº</code>æšä¸¾ã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’æ¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestPalindromeSubseq</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">f</span>(n, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n, <span class="number">0</span>));          </span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">            f[i][i] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = i + <span class="number">1</span>; j &lt; n; ++j) &#123;</span><br><span class="line">                <span class="keyword">if</span> (s[i] == s[j])</span><br><span class="line">                    f[i][j] = f[i<span class="number">+1</span>][j<span class="number">-1</span>] + <span class="number">2</span>;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    f[i][j] = <span class="built_in">max</span>(f[i<span class="number">+1</span>][j], f[i][j<span class="number">-1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;    </span><br><span class="line">        <span class="keyword">return</span> f[<span class="number">0</span>][n<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’æ¨ ç©ºé—´å¤æ‚åº¦O(n)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestPalindromeSubseq</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">f</span>(<span class="number">2</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n, <span class="number">0</span>));          </span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">            f[i%<span class="number">2</span>][i] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = i + <span class="number">1</span>; j &lt; n; ++j) &#123;</span><br><span class="line">                <span class="keyword">if</span> (s[i] == s[j])</span><br><span class="line">                    f[i%<span class="number">2</span>][j] = f[(i<span class="number">+1</span>)%<span class="number">2</span>][j<span class="number">-1</span>] + <span class="number">2</span>;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    f[i%<span class="number">2</span>][j] = <span class="built_in">max</span>(f[(i<span class="number">+1</span>)%<span class="number">2</span>][j], f[i%<span class="number">2</span>][j<span class="number">-1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;    </span><br><span class="line">        <span class="keyword">return</span> f[<span class="number">0</span>][n<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>2. å¤šè¾¹å½¢ä¸‰è§’å‰–åˆ†çš„æœ€ä½å¾—åˆ†</h1><h1>2.1 é¢˜ç›®æè¿°</h1><p>ä½ æœ‰ä¸€ä¸ªå‡¸çš„ n è¾¹å½¢ï¼Œå…¶æ¯ä¸ªé¡¶ç‚¹éƒ½æœ‰ä¸€ä¸ªæ•´æ•°å€¼ã€‚ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ values ï¼Œå…¶ä¸­ values[i] æ˜¯ç¬¬ i ä¸ªé¡¶ç‚¹çš„å€¼ï¼ˆå³ é¡ºæ—¶é’ˆé¡ºåº ï¼‰ã€‚</p><p>å‡è®¾å°†å¤šè¾¹å½¢ å‰–åˆ† ä¸º n - 2 ä¸ªä¸‰è§’å½¢ã€‚å¯¹äºæ¯ä¸ªä¸‰è§’å½¢ï¼Œè¯¥ä¸‰è§’å½¢çš„å€¼æ˜¯é¡¶ç‚¹æ ‡è®°çš„ä¹˜ç§¯ï¼Œä¸‰è§’å‰–åˆ†çš„åˆ†æ•°æ˜¯è¿›è¡Œä¸‰è§’å‰–åˆ†åæ‰€æœ‰ n - 2 ä¸ªä¸‰è§’å½¢çš„å€¼ä¹‹å’Œã€‚</p><p>è¿”å› å¤šè¾¹å½¢è¿›è¡Œä¸‰è§’å‰–åˆ†åå¯ä»¥å¾—åˆ°çš„æœ€ä½åˆ† ã€‚</p><h1>2.2 åŸºæœ¬æ€è·¯</h1><p>æ•°ç»„valuesè®°ä¸ºvã€‚</p><p>å®šä¹‰<code>ä»iåˆ°j</code>è¡¨ç¤ºæ²¿ç€è¾¹ä»é¡¶ç‚¹ié¡ºæ—¶é’ˆåˆ°é¡¶ç‚¹jçš„æ‰€æœ‰é¡¶ç‚¹ï¼ˆé¡¶ç‚¹iå’Œé¡¶ç‚¹jé™¤å¤–ï¼‰ï¼Œå†åŠ ä¸Šç›´æ¥ä»jåˆ°içš„è¿™æ¡è¾¹æ‰€ç»„æˆçš„å¤šè¾¹å½¢ï¼ˆä¸‰ä¸ªé¡¶ç‚¹ç»„æˆä¸€ä¸ªä¸‰è§’å½¢ï¼‰ã€‚</p><p><img src="/images/dp8_2.png" alt=""></p><p>å­é—®é¢˜ï¼š</p><ul><li>è®¡ç®—ä»iåˆ°jçš„æœ€ä½å¾—åˆ† =&gt; æšä¸¾é¡¶ç‚¹k</li></ul><p>ä¸‹ä¸€ä¸ªå­é—®é¢˜ï¼š</p><ul><li>è®¡ç®—ä»iåˆ°kçš„æœ€ä½å¾—åˆ†</li><li>è®¡ç®—ä»kåˆ°jçš„æœ€ä½å¾—åˆ†</li></ul><p>å®šä¹‰dfs(i, j)è¡¨ç¤ºä»iåˆ°jçš„å¤šè¾¹å½¢çš„æœ€ä½å¾—åˆ†</p><ul><li><p>dfs(i, j) = min{dfs(i, k) + dfs(k, j) + v[i] * v[j] * v[k]}, k = i + 1 ~ j - 1</p></li><li><p>é€’å½’è¾¹ç•Œ</p><ul><li>dfs(i, i+1) = 0</li></ul></li><li><p>é€’å½’å…¥å£</p><ul><li>dfs(0, n-1)</li></ul></li></ul><h1>2.3 å…·ä½“å®ç°</h1><h1>2.3.1 é€’å½’</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’å½’</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minScoreTriangulation</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; values)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = values.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">memo</span>(n, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n, <span class="number">-1</span>));</span><br><span class="line">        <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">this</span> <span class="keyword">auto</span>&amp;&amp; dfs, <span class="type">int</span> i, <span class="type">int</span> j)-&gt;<span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (i + <span class="number">1</span> == j)</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            <span class="type">int</span>&amp; res = memo[i][j];</span><br><span class="line">            <span class="keyword">if</span> (res != <span class="number">-1</span>)</span><br><span class="line">                <span class="keyword">return</span> res;</span><br><span class="line">            res = INT_MAX / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> k = i + <span class="number">1</span>; k &lt; j; ++k)</span><br><span class="line">                res = <span class="built_in">min</span>(res, <span class="built_in">dfs</span>(i, k) + <span class="built_in">dfs</span>(k, j) + values[i] * values[j] * values[k]);</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(<span class="number">0</span>, n<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>2.3.2 é€’æ¨</h1><p>çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸ºï¼š</p><pre><code>f[i][j] = max&#123;f[i][k] + f[k][j] + v[i] * v[j] * v[k]&#125;, k = i + 1 ~ j - 1</code></pre><p>è¿™é‡Œä¹Ÿéœ€è¦æ³¨æ„å¾ªç¯é¡ºåºï¼š</p><pre><code>i &lt; kï¼Œf[i]ä»f[k]è½¬ç§»è¿‡æ¥ï¼Œiéœ€è¦å€’åºæšä¸¾j &gt; k, f[i][j]ä»f[i][k]è½¬ç§»è¿‡æ¥ï¼Œjéœ€è¦æ­£åºæšä¸¾</code></pre><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minScoreTriangulation</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; values)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = values.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">f</span>(n, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n, <span class="number">0</span>));</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = n - <span class="number">3</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = i + <span class="number">2</span>; j &lt; n; ++j) &#123;</span><br><span class="line">                <span class="type">int</span>&amp; res = f[i][j];</span><br><span class="line">                res = INT_MAX / <span class="number">2</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> k = i + <span class="number">1</span>; k &lt; j; ++k) &#123;</span><br><span class="line">                    res = <span class="built_in">min</span>(res, f[i][k] + f[k][j] + values[i] * values[j] * values[k]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[<span class="number">0</span>][n<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>ä¸ºä»€ä¹ˆ i ä» n-3 å¼€å§‹ï¼Ÿ</li></ul><ol><li><p>ä¸‰è§’å½¢çš„é¡¶ç‚¹è¦æ±‚</p><ul><li>è¦å½¢æˆä¸€ä¸ªä¸‰è§’å½¢ï¼Œè‡³å°‘éœ€è¦ 3 ä¸ªé¡¶ç‚¹ã€‚å› æ­¤ï¼Œi å’Œ j ä¹‹é—´è‡³å°‘è¦æœ‰ 2 ä¸ªé¡¶ç‚¹ï¼ˆå³ j &gt;= i + 2ï¼‰ã€‚</li><li>å¦‚æœ i ä» n-1 æˆ– n-2 å¼€å§‹ï¼Œj çš„èŒƒå›´ä¼šè¶…å‡ºæ•°ç»„çš„è¾¹ç•Œï¼Œæ— æ³•å½¢æˆæœ‰æ•ˆçš„ä¸‰è§’å½¢ã€‚</li></ul></li><li><p>è¾¹ç•Œæ¡ä»¶</p><ul><li>å½“ i = n-3 æ—¶ï¼Œj å¯ä»¥ä» i+2 = n-1 å¼€å§‹ï¼Œè¿™æ · iã€j å’Œä¸­é—´çš„ k å¯ä»¥å½¢æˆä¸€ä¸ªæœ‰æ•ˆçš„ä¸‰è§’å½¢ã€‚</li><li>å¦‚æœ i ä» n-2 å¼€å§‹ï¼Œj åªèƒ½ä» n å¼€å§‹ï¼Œè¿™å·²ç»è¶…å‡ºäº†æ•°ç»„çš„è¾¹ç•Œã€‚</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> åŠ¨æ€è§„åˆ’ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot3 é¡¹ç›®æ¡†æ¶æ­å»º</title>
      <link href="/2025/03/07/project-test3/"/>
      <url>/2025/03/07/project-test3/</url>
      
        <content type="html"><![CDATA[<h1>å‰è¨€</h1><p>å­¦ä¹ Bç«™UPä¸»ç¨‹åºå‘˜é’æˆˆå‡ºå“çš„è§†é¢‘<a href="https://www.bilibili.com/video/BV1uZAoeGEqM/?spm_id_from=333.1245.0.0">ã€å¸¦å°ç™½åšæ¯•è®¾ã€‘03. Springboot3æ¡†æ¶çš„å¿«é€Ÿæ­å»ºä»¥åŠé¡¹ç›®å·¥ç¨‹çš„è®²è§£</a>å¹¶è¿›è¡Œä¸€ä¸ªå­¦ä¹ è®°å½•ã€‚</p><h1>1. æ–°å»ºå·¥ç¨‹</h1><p>åœ¨ideaæ–°å»ºä¸€ä¸ªå·¥ç¨‹ï¼ˆæ³¨æ„æ–°å»ºå·¥ç¨‹é¡µé¢åœ¨å·¦è¾¹ç”Ÿæˆå™¨ä¸­é€‰æ‹©springbootï¼‰ï¼Œå·¥ç¨‹åä¸ºspringbootï¼Œå­˜æ”¾å·¥ç¨‹çš„æ–‡ä»¶å¤¹ä¸ºå­˜æ”¾vueå·¥ç¨‹çš„æ–‡ä»¶å¤¹ã€‚è¯­è¨€é€‰Javaï¼Œç±»å‹é€‰Mavenï¼Œç»„å¡«com.exampleï¼Œå·¥ä»¶å¡«springbootï¼Œè½¯ä»¶åŒ…åç§°å¡«com.exampleï¼Œjdké€‰jdk21ï¼Œjavaé€‰21ï¼Œæ‰“åŒ…é€‰jarã€‚ç„¶åé€‰æ‹©ä¸‹ä¸€æ­¥ã€‚</p><p><img src="/images/project-test3_1.png" alt=""></p><p>æ³¨ï¼šä¹‹åæœ‰ä¸€æ¬¡å¼€å‘ä½¿ç”¨jdk1.8ï¼Œä½†æ˜¯jdkç‰ˆæœ¬å¯ä»¥é€‰æ‹©1.8ï¼Œä½†æ˜¯javaä¸­æ²¡æœ‰java8ï¼Œäºæ˜¯ç™¾åº¦ï¼Œè®²<strong>æœåŠ¡å™¨URL</strong>è®¾ç½®æˆ<code>https://start.aliyun.com</code>å°±å‡ºç°java8äº†ã€‚</p><p>ç„¶åspringbooté€‰3.4.3ï¼Œä¾èµ–é¡¹ä¸­ä»Webä¸­é€‰æ‹©Spring Webï¼Œç„¶åç‚¹å‡»åˆ›å»ºå³å¯ã€‚springbootå·¥ç¨‹å°±åˆ›å»ºå®Œæ¯•äº†ã€‚</p><p><img src="/images/project-test3_2.png" alt=""></p><h1>2. å·¥ç¨‹ç²¾ç®€</h1><h1>2.1 åˆ é™¤æ— ç”¨æ–‡ä»¶</h1><p><img src="/images/project-test3_3.png" alt=""></p><p>åˆ é™¤å›¾ä¸­ç”»çº¢çº¿çš„æ–‡ä»¶ã€‚æŠŠsrc/testæ–‡ä»¶å¤¹ã€src/main/resourcesä¸‹çš„staticå’Œtemplatesæ–‡ä»¶å¤¹ä¹Ÿåˆ é™¤äº†ã€‚</p><h1>2.2 é…ç½®Maven</h1><p>æ‰“å¼€è®¾ç½®ï¼Œç›´æ¥æœç´¢Mavenï¼Œé…ç½®Mavenä¸»è·¯å¾„ï¼ˆä¹Ÿå°±æ˜¯Mavençš„è§£å‹è·¯å¾„ï¼Œæˆ‘çš„è§£å‹è·¯å¾„ä¸ºD:\ProgramFiles\apache-maven-3.9.9ï¼‰ã€‚å‹¾é€‰ä¸¤ä¸ªé‡å†™ï¼Œç„¶åæŒ‡å®šç”¨æˆ·è®¾ç½®æ–‡ä»¶ä¸ºMavenè§£å‹è·¯å¾„ä¸‹çš„confæ–‡ä»¶å¤¹ä¸‹çš„settings.xmlã€‚åœ¨Mavenè§£å‹è·¯å¾„ä¸‹åˆ›å»ºrepoæ–‡ä»¶å¤¹ï¼Œç„¶åé€‰æ‹©æœ¬åœ°ä»“åº“ä¸ºè¿™ä¸ªrepoæ–‡ä»¶å¤¹ã€‚ç„¶åç‚¹å‡»ç¡®å®šå³å¯ã€‚</p><p><img src="/images/project-test3_4.png" alt=""></p><h1>2.3 pom.xml æ–‡ä»¶ç²¾ç®€</h1><p>pom.xmlæ–‡ä»¶å®šä¹‰äº†ä¸€äº›ä¾èµ–ã€‚</p><p><img src="/images/project-test3_5.png" alt=""></p><p><img src="/images/project-test3_6.png" alt=""></p><p>æŠŠpom.xmlä¸­çš„ä¸Šè¿°å†…å®¹ï¼ˆå¦‚ä¸Šä¸¤å¹…å›¾ç‰‡æ‰€ç¤ºï¼‰åˆ é™¤ã€‚</p><h1>2.3 å·¥ç¨‹ç›®å½•åˆ†æ</h1><pre><code>.idea â€”â€” ideaè½¯ä»¶çš„é…ç½®æ–‡ä»¶src â€”â€” æºç ç›®å½•src/main/java/com/example/SpringbootApplication â€”â€” å·¥ç¨‹çš„å¯åŠ¨ç±»ï¼ˆæ–‡ä»¶åç¼€ä¸º.javaï¼‰ï¼Œmainå‡½æ•°å°±å®šä¹‰åœ¨è¿™é‡Œã€‚src/main/resources/application.properties â€”â€” æ•´ä¸ªspringbootçš„é…ç½®æ–‡ä»¶ï¼Œå°†å…¶é‡å‘½åä¸ºapplication.ymlï¼Œæ–¹ä¾¿ç¼–è¾‘    å°†å…¶ç¼–è¾‘ä¸ºï¼š        server:          port: 9999    ä»¥é‡æ–°è®¾ç½®è½¬å‘ç«¯å£å·targetæ–‡ä»¶å¤¹ â€”â€” æºç ç¼–è¯‘åçš„æ–‡ä»¶pom.xml â€”â€” å®šä¹‰äº†springbootå·¥ç¨‹æ‰€æœ‰çš„ä¾èµ–é¡¹ï¼ŒspringbootåŠ è½½çš„æ—¶å€™ä¼šæ‰«æè¿™ä¸ªæ–‡ä»¶é‡Œé¢æ‰€æœ‰çš„ä¾èµ–é¡¹ï¼Œç„¶åä¸‹è½½</code></pre><h1>2.4 è¿è¡Œå·¥ç¨‹å‡ºç°çš„é—®é¢˜</h1><h1>2.4.1 Errorï¼šjava é”™è¯¯ ä¸æ”¯æŒå‘è¡Œç‰ˆæœ¬ 5</h1><p>å‚è€ƒé“¾æ¥<a href="https://blog.csdn.net/weixin_43553694/article/details/104118190">Springé¡¹ç›® Errorï¼šjava é”™è¯¯ ä¸æ”¯æŒå‘è¡Œç‰ˆæœ¬ 5 IDEAè§£å†³åŠæ³•</a></p><p><img src="/images/project-test3_7.png" alt=""></p><p><img src="/images/project-test3_8.png" alt=""></p><h1>2.4.2 org.springframework.bootä¸å­˜åœ¨</h1><p>å‚è€ƒé“¾æ¥<a href="https://blog.csdn.net/Asa_Prince/article/details/127986463">è§£å†³java: ç¨‹åºåŒ…org.springframework.bootä¸å­˜åœ¨çš„è§£å†³æ–¹æ³•</a>ã€‚</p><p>ä»¥åŠ</p><p>File -&gt; Settings -&gt; Build,Execution,Deployment -&gt; Build Tools -&gt; Maven -&gt; Runner -&gt; Delegate IDE build/run actions to Maven</p><h1>3. é‡å¯å·¥ç¨‹</h1><p>å…³é—­è¿™ä¸ªspringbootå·¥ç¨‹ï¼Œæ‰“å¼€springbootå·¥ç¨‹å’Œvueå·¥ç¨‹å…±å­˜çš„å·¥ç¨‹ç›®å½•ã€‚å°†springbootå·¥ç¨‹ç›®å½•ä¸‹çš„.ideaåˆ é™¤ã€‚</p><h1>3.1 é‡æ–°åŠ è½½springbootä¾èµ–</h1><p>å³é”®springbootå·¥ç¨‹ç›®å½•ä¸‹çš„pom.xmlï¼Œé€‰æ‹©æœ€ä¸‹é¢çš„æ·»åŠ ä¸ºMavené¡¹ç›®ã€‚</p><p><img src="/images/project-test3_9.png" alt=""></p><h1>3.2 è®¾ç½®ç¼–ç </h1><p>è®¾ç½®ç¼–ç ä¸ºUTF-8ã€‚</p><p><img src="/images/project-test3_10.png" alt=""></p><p>ç„¶åè¿è¡Œspringbootå·¥ç¨‹ï¼Œè¿è¡ŒæˆåŠŸåˆ™é…ç½®æˆåŠŸã€‚</p><h1>4. å†™ä¸€ä¸ªæµ‹è¯•æ¥å£</h1><h1>4.1 æ¥å£å±‚</h1><p>å³é”®springbootå·¥ç¨‹ä¸‹çš„src/main/java/com/exampleï¼Œé€‰æ‹©æ–°å»º -&gt; è½¯ä»¶åŒ…<br><img src="/images/project-test3_11.png" alt=""></p><p>åŒ…åè®¾ä¸ºcontrollerï¼ˆcontrolleræ˜¯å¯¹å¤–æä¾›æ¥å£çš„åŒ…ï¼Œåœ¨è¿™ä¸ªåŒ…é‡Œå®šä¹‰çš„æ‰€æœ‰æ–‡ä»¶ï¼Œéƒ½æ˜¯å¯¹å¤–æä¾›æ¥å£æ•°æ®çš„ï¼Œå«æ¥å£å±‚controllerï¼‰ã€‚</p><p>springbootä¸€èˆ¬ä¼šåˆ†ä¸ºä¸‰å±‚ï¼š</p><ul><li>controller<ul><li>æä¾›æ•°æ®æ¥å£</li></ul></li><li>service<ul><li>å¤„ç†ä¸šåŠ¡é€»è¾‘</li></ul></li><li>mapper<ul><li>å¯¹æ¥æ•°æ®åº“</li></ul></li></ul><p>åœ¨controlleråŒ…é‡Œå†åˆ›å»ºä¸€ä¸ªWebControllerï¼Œæ­¤æ—¶å®ƒé»˜è®¤ä¼šæœ‰ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebController</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨public class WebControllerä¸Šæ–°å¢ä¸€è¡Œï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br></pre></td></tr></table></figure><p>å›è½¦è‡ªåŠ¨è¡¥å…¨ï¼Œä¼šå¸®åŠ©æŠŠéœ€è¦çš„åŒ…ä¹Ÿå¯¼è¿›æ¥ã€‚</p><p>è¿™ä¸ªè¡Œä¸ºå°±æ˜¯å°†è¿™ä¸ªç±»å®šä¹‰ä¸ºä¸€ä¸ªcontrollerã€‚</p><p>åœ¨WebControllerç±»ä¸‹å†™ä¸€ä¸ªgetæ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello World&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é”®å…¥<code>@GetMapping</code>æ—¶æŒ‰å›è½¦è‡ªåŠ¨è¡¥å…¨ï¼Œä¼šè‡ªåŠ¨å¯¼åŒ…ã€‚</p><p>åœ¨<code>@GetMapping</code>åé”®å…¥<code>(&quot;/hello&quot;)</code>å®šä¹‰è·¯ç”±ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello World&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥å£å®šä¹‰çš„åŸºæœ¬æ ¼å¼ï¼š</p><ul><li>@GetMapping è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªgetè¯·æ±‚æ¥å£</li><li>æ‹¬å·é‡Œçš„è·¯å¾„æ˜¯è·¯ç”±ï¼ˆè·¯ç”±å…¨å±€å”¯ä¸€ï¼‰</li></ul><p>æ­¤æ—¶è¿è¡Œspringbootå·¥ç¨‹åœ¨ç½‘å€<code>localhost:9999/hello</code>ä¸‹å°±å¯ä»¥çœ‹åˆ°&quot;Hello World&quot;ã€‚</p><h1>4.2 æŸ¥çœ‹ç½‘ç»œè¯·æ±‚</h1><p>åœ¨ç½‘å€<code>localhost:9999/hello</code>ä¸‹æŒ‰F12ï¼Œç„¶åï¼š<br><img src="/images/project-test3_12.png" alt=""></p><p>ä¸€å¼€å§‹å¯èƒ½ä¸æ˜¾ç¤ºï¼ŒæŒ‰F5åˆ·æ–°ä¸€ä¸‹å³å¯~</p><h1>4.3 å®šä¹‰æ¥å£ç»Ÿä¸€è¿”å›çš„å¯¹è±¡</h1><p>å‰é¢æˆ‘ä»¬å®šä¹‰çš„æ¥å£è¿”å›å€¼ç±»å‹ä¸ºStringï¼Œä½†ä¹Ÿå¯èƒ½æ˜¯å…¶ä»–æ•°æ®ç±»å‹ï¼Œæ¯ä¸ªæ¥å£è¿”å›çš„æ•°æ®ç±»å‹ä¸ä¸€æ ·å°±ä¼šé€ æˆæ··ä¹±ã€‚ä¸ºäº†é˜²æ­¢æ··ä¹±ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼ŒæŠŠæˆ‘ä»¬å®é™…éœ€è¦è¿”å›çš„æ•°æ®ï¼ŒåŒ…è£¹åœ¨è¿™ä¸ªå¯¹è±¡é‡Œé¢ï¼Œä½œä¸ºè¿™ä¸ªå¯¹è±¡çš„ä¸€ä¸ªå±æ€§ã€‚</p><p>åœ¨com.exampleä¸‹æ–°å»ºä¸€ä¸ªcommonåŒ…ï¼ˆå³é€šç”¨åŒ…ï¼‰ã€‚åœ¨commonä¸‹å†æ–°å»ºä¸€ä¸ªResultç±»ã€‚åœ¨å…¶ä¸­å®šä¹‰ä¸‰ä¸ªå±æ€§ï¼š</p><ul><li>private String code<ul><li>çŠ¶æ€ç ï¼ˆä½¿ç”¨Stringæ›´é€šç”¨ï¼Œæ—¢å¯ä»¥è¿”å›æ•°å­—ï¼Œä¹Ÿå¯ä»¥è¿”å›å…¶ä»–ç­‰ç­‰ï¼‰</li></ul></li><li>private Object data<ul><li>æˆ‘ä»¬å®é™…è¿”å›çš„æ•°æ®ç±»å‹</li></ul></li><li>private String msg<ul><li>å½“è¯·æ±‚é”™è¯¯æ—¶è¿”å›é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚è¿”å›è´¦å·æˆ–è€…å¯†ç é”™è¯¯ï¼‰</li></ul></li></ul><p>ç„¶åæŒ‰ALT+Insertï¼Œä¼šå‡ºç°ï¼š<br><img src="/images/project-test3_13.png" alt=""></p><p>é€‰æ‹©Getterå’ŒSetterï¼Œæ¥ç€å‡ºç°ï¼š<br><img src="/images/project-test3_14.png" alt=""></p><p>å…¨é€‰åç¡®å®šï¼Œè¿™æ ·å°±è®¾ç½®äº†ä¸Šè¿°ä¸‰ä¸ªprivateå±æ€§çš„setterå’Œgetteræ–¹æ³•ã€‚</p><p>ä»¥ä¸Šå°±æ˜¯ResultåŒ…è£…ç±»ã€‚</p><h1>4.4 å¦‚ä½•ä½¿ç”¨ResultåŒ…è£…ç±»</h1><p>å¦‚æœæˆ‘ä»¬æƒ³åœ¨Webç±»ä¸­ç»Ÿä¸€è¿”å›è¿™ä¸ªResultåŒ…è£…ç±»è¯¥å¦‚ä½•åšï¼Ÿ</p><p>åŸæ¥çš„æ¥å£è¿”å›çš„æ˜¯Stringï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello World&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆç°åœ¨åº”è¯¥è¿”å›ä¸€ä¸ªResultç±»ï¼Œå¹¶ä¸”åº”è¯¥åœ¨å‡½æ•°ä¸­newä¸€ä¸ªResultçš„å¯¹è±¡ï¼Œå¹¶è°ƒç”¨3.5ä¸­å®šä¹‰çš„setteræ–¹æ³•è®¾ç½®è¿™ä¸ªç±»çš„ä¸‰ä¸ªå±æ€§åè¿”å›ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Result</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Result</span>();</span><br><span class="line">    result.setCode(<span class="string">&quot;200&quot;</span>);</span><br><span class="line">    result.setData(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„åœ¨ä¿®æ”¹è¿”å›å€¼ç±»å‹ä¸ºResultçš„æ—¶å€™ä¸€å®šè¦é€‰æ‹©com.example.commoné‡Œçš„Resultç±»ï¼Œé€‰å®ƒä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨å¯¼åŒ…ï¼š<br><img src="/images/project-test3_15.png" alt=""></p><p>æ­¤æ—¶å†è®¿é—®ç½‘å€<code>localhost:9999/hello</code>ï¼š<br><img src="/images/project-test3_16.png" alt=""></p><p>è¿™é‡Œçš„msgä¸ºnullï¼Œä¹Ÿå°±æ˜¯ä¸ºç©ºï¼Œå› ä¸ºæ²¡æœ‰é”™è¯¯æ¶ˆæ¯ã€‚</p><p>åœ¨å‰ç«¯ä¸åç«¯æ•°æ®äº¤äº’çš„æ—¶å€™ï¼Œå¦‚æœæ‹¿åˆ°æ¶ˆæ¯ååˆ¤æ–­çŠ¶æ€ç æ˜¯å¦ä¸º200ï¼Œä¸º200åˆ™è¯´æ˜è¯·æ±‚æˆåŠŸï¼Œé”™è¯¯æ¶ˆæ¯å°±åº”è¯¥ä¸ºnullã€‚å¦‚æœçŠ¶æ€ç ä¸ä¸º200ï¼Œè¯´æ˜è¯·æ±‚å¤±è´¥ï¼Œå¹¶è·å–msgæ¥æ‰“å°é”™è¯¯æ¶ˆæ¯ã€‚</p><p>æ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼Œå¯¹äºResultåŒ…è£…ç±»ï¼š</p><ul><li>code ä½œä¸ºå‰ç«¯åˆ¤æ–­è¯·æ±‚æ˜¯å¦æˆåŠŸçš„ä¾æ®</li><li>msg æ˜¯é”™è¯¯ä¿¡æ¯</li><li>data æ˜¯è¿”å›ç»™å‰ç«¯çš„æ•°æ®</li></ul><h1>4.5 ä¼˜åŒ–ResultåŒ…è£…ç±»</h1><p>å¦‚æœæˆ‘ä»¬æ¯æ¬¡å†™ä¸€ä¸ªæ¥å£ï¼Œéƒ½newä¸€ä¸ªResultç±»ï¼Œç„¶åå†è°ƒç”¨setteræ–¹æ³•å»è®¾ç½®æˆå‘˜å±æ€§ï¼Œæœ‰ç‚¹ç¹çã€‚</p><p>æœ‰æ²¡æœ‰æ›´ç®€å•çš„æ–¹æ³•ï¼Ÿé‚£å°±æ˜¯åœ¨Resulté‡Œå†™ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œæ¥æ”¶ä¸€ä¸ªå‚æ•°ä¸ºObject dataï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">success</span><span class="params">(Object data)</span> &#123;</span><br><span class="line">    <span class="type">Result</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Result</span>();</span><br><span class="line">    result.setCode(<span class="string">&quot;200&quot;</span>);</span><br><span class="line">    result.setData(data);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‚£ä½¿ç”¨è¿™æ ·ä¸€ä¸ªé™æ€æ–¹æ³•æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿå°±æ˜¯ç®€åŒ–äº†æ¥å£ä¸­çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> Result.success(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°æ˜¯æˆåŠŸçš„æƒ…å†µï¼Œå¦‚æœæ˜¯å¤±è´¥çš„æƒ…å†µå‘¢ï¼Ÿé‚£å°±å®šä¹‰ä¸€ä¸ªerroré™æ€æ–¹æ³•ï¼Œæ­¤æ—¶å› ä¸ºè¯·æ±‚å¤±è´¥æ‰€æœ‰å°±æ²¡æœ‰æ•°æ®äº†ï¼Œæ¥æ”¶çš„å‚æ•°å°±ä»Object dataå˜æˆäº†String msgï¼ˆé”™è¯¯æ¶ˆæ¯ï¼‰ï¼Œå¹¶ä¸”åœ¨æ–¹æ³•ä¸­å°†çŠ¶æ€ç codeè®¾ç½®ä¸º500ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">error</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">    <span class="type">Result</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Result</span>();</span><br><span class="line">    result.setCode(<span class="string">&quot;500&quot;</span>);</span><br><span class="line">    result.setMsg(msg);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæƒ³è‡ªå®šä¹‰codeå‘¢ï¼Ÿé‚£å°±é‡è½½erroré™æ€æ–¹æ³•ï¼Œå†é¢å¤–æ¥æ”¶ä¸€ä¸ªString codeå‚æ•°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">error</span><span class="params">(String code, String msg)</span> &#123;</span><br><span class="line">    <span class="type">Result</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Result</span>();</span><br><span class="line">    result.setCode(code);</span><br><span class="line">    result.setMsg(msg);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>5. å¼‚å¸¸å¤„ç†</h1><h1>5.1 500é”™è¯¯</h1><p>å¦‚æœåœ¨å®šä¹‰æ¥å£å‡½æ•°helloçš„æ—¶å€™ï¼š<br><img src="/images/project-test3_17.png" alt=""></p><p>ä¹Ÿå°±æ˜¯ä¸»åŠ¨å»å¼•å‡ºä¸€ä¸ªé™¤0å¼‚å¸¸ï¼Œä½†æ˜¯è¿™é‡Œå¹¶æ²¡æœ‰æŠ¥é”™ï¼Œå¹¶ä¸”ç¼–è¯‘ä¹Ÿèƒ½é€šè¿‡ï¼Œè¿™ä¸ªå°±å«<code>è¿è¡Œæ—¶å¼‚å¸¸</code>ï¼Œåªæœ‰åœ¨è¿è¡Œæ—¶æ‰ä¼šå‘ç°å¼‚å¸¸ã€‚æ­¤æ—¶è¿è¡Œspringbootå·¥ç¨‹ï¼Œè®¿é—®è¿™ä¸ªæ¥å£ä¼šå‘ç°ï¼š<br><img src="/images/project-test3_18.png" alt=""></p><p>ä¹Ÿå°±æ˜¯æŠ›å‡ºäº†500é”™è¯¯ã€‚</p><p>æŠ›å‡ºè¿™äº›é”™è¯¯éå¸¸çš„ç”¨æˆ·ä¸å‹å¥½ï¼Œæˆ‘ä»¬åº”è¯¥ç”¨ç»Ÿä¸€çš„å¤„ç†æ–¹å¼ï¼ˆç”¨ResultåŒ…è£…ç±»å¤„ç†ï¼‰ã€‚</p><p>Resultæ€ä¹ˆå»å¤„ç†å®ƒå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªå…¨å±€å¼‚å¸¸å¤„ç†GlobalExceptionHandlerã€‚åœ¨com.exampleé‡Œæ–°å»ºä¸€ä¸ªåŒ…exceptionï¼Œå†åœ¨è¿™ä¸ªåŒ…é‡Œåˆ›å»ºGlobalExceptionHandlerç±»ã€‚è¿™ä¸ªç±»å°±æ˜¯å…¨å±€å¼‚å¸¸æ•è·å™¨ï¼Œå®ƒè´Ÿè´£æŠŠä»£ç é‡Œçš„é”™è¯¯è¿›è¡Œæ•è·ï¼Œå¹¶ç»Ÿä¸€é€šè¿‡Resultç±»è¿”å›ã€‚</p><p>åœ¨public class GlobalExceptionHandlerä¸Šé¢ä¸€è¡Œæ·»åŠ <code>@ControllerAdvice</code>ï¼Œä¾ç„¶æ˜¯å›è½¦è‡ªåŠ¨è¡¥å…¨ï¼ˆè¿™æ ·è‡ªåŠ¨å¯¼åŒ…ï¼‰ã€‚ç„¶åè¿˜è¦æä¾›Controllerç±»çš„è·¯å¾„ï¼Œ<code>@ControllerAdvice(&quot;com.example.controller&quot;)</code>ã€‚</p><p>åœ¨GlobalExceptionHandlerç±»å†…éƒ¨é”®å…¥<code>@ExceptionHandler</code>ï¼ˆå›è½¦è‡ªåŠ¨è¡¥å…¨è‡ªåŠ¨å¯¼åŒ…ï¼‰ï¼Œç„¶ååœ†æ‹¬å·é”®å…¥Exception.classï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExceptionHandler(Exception.class)</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„Exceptionå°±æ˜¯Javaä¸­æ‰€æœ‰å¼‚å¸¸çš„åŸºç±»ã€‚</p><p>ç„¶åæ¢è¡Œé”®å…¥<code>@ResponseBody</code>ï¼Œ@ResponseBodyçš„ä½œç”¨å…¶å®æ˜¯å°†javaå¯¹è±¡è½¬ä¸ºjsonæ ¼å¼çš„æ•°æ®ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br></pre></td></tr></table></figure><p>ç„¶åæ¥ç€æ¢è¡Œå†™erroræ–¹æ³•ï¼Œè¿”å›å€¼ä¸ºResultå¯¹è±¡ï¼Œæ¥æ”¶ä¸€ä¸ªå‚æ•°Exception eã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice(&quot;com.example.controller&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">error</span><span class="params">(Exception e)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="string">&quot;ç³»ç»Ÿå¼‚å¸¸&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å†è¿è¡Œspringbooté¡¹ç›®ï¼Œè®¿é—®æ¥å£ï¼š<br><img src="/images/project-test3_19.png" alt=""></p><p>å°±ä¸ä¼šåœ¨è¿”å›500é”™è¯¯äº†ã€‚</p><p>å‡ºç°å¼‚å¸¸äº†çœ‹æ§åˆ¶å°ï¼Œè·³è½¬åˆ°å‡ºé”™çš„ä»£ç è¿›è¡Œdebugã€‚</p><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸ªlogåœ¨æ§åˆ¶å°æ‰“å°é”™è¯¯ä¿¡æ¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice(&quot;com.example.controller&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(GlobalExceptionHandler.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">error</span><span class="params">(Exception e)</span> &#123;</span><br><span class="line">        log.error(<span class="string">&quot;ç³»ç»Ÿå¼‚å¸¸&quot;</span>, e);</span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="string">&quot;ç³»ç»Ÿå¼‚å¸¸&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¯”åŸæ¥æ–°å¢ä¸¤è¡Œä»£ç ï¼Œä¸€ä¸ªæ˜¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(GlobalExceptionHandler.class);</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ä¸€è¡Œæ˜¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">log.error(<span class="string">&quot;ç³»ç»Ÿå¼‚å¸¸&quot;</span>, e);</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶è¿è¡Œå·¥ç¨‹å¹¶è®¿é—®æ¥å£ï¼Œåœ¨æ§åˆ¶å°ï¼š<br><img src="/images/project-test3_20.png" alt=""></p><p>å¦å¤–è¿˜æœ‰ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼ä½¿ç”¨lombokä¸­çš„Slf4jï¼Œåªéœ€è¦åœ¨pom.xmlå¼•å…¥ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ç±»ä¸Šæ·»åŠ <code>@Slf4j</code>æ³¨è§£ï¼Œç›´æ¥ä½¿ç”¨log.error(â€œç³»ç»Ÿå¼‚å¸¸â€, e)å³å¯ã€‚</p><h1>5.2 è‡ªå®šä¹‰å¼‚å¸¸</h1><p>ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰å¼‚å¸¸å‘¢ï¼Ÿæ¯”å¦‚å‰ç«¯ä¼ äº†ä¸€ä¸ªè´¦å·å¯†ç è¿‡æ¥ï¼Œä½†æ˜¯è´¦å·æˆ–è€…å¯†ç é”™äº†ï¼Œæ€ä¹ˆå‘Šè¯‰å‰ç«¯è´¦å·æˆ–è€…å¯†ç é”™äº†å‘¢ï¼Ÿå‡è®¾å®ƒåœ¨serviceå±‚ï¼Œè€Œä¸æ˜¯åœ¨controllerå±‚ã€‚</p><p>ä¹Ÿå°±æ˜¯åœ¨serviceå¾€å¤–æŠ›å‡ºé”™è¯¯ã€‚ä¸èƒ½ç›´æ¥returnä¸€ä¸ªResultå¯¹è±¡ï¼Œå› ä¸ºResultå¯¹è±¡æ˜¯åœ¨controllerå±‚è¿›è¡Œå°è£…çš„ã€‚</p><p>å…¶å®å°±æ˜¯ä¸åœ¨controllerå±‚æ—¶ï¼Œå¦‚ä½•æŠ›å‡ºé”™è¯¯ï¼Ÿ</p><p>è¿™é‡Œå°±å±•ç¤ºå¦‚ä½•éªŒè¯ç®¡ç†å‘˜é¡µé¢ä¹Ÿå°±æ˜¯adminè·¯ç”±ä¸‹ç™»é™†çš„è´¦æˆ·åæ˜¯å¦ä¸º&quot;admin&quot;ã€‚</p><p>åœ¨com.exampleæ–°å»ºä¸€ä¸ªserviceåŒ…ï¼Œå†åœ¨è¿™ä¸ªåŒ…ä¸‹åˆ›å»ºAdminServiceç±»ã€‚ç„¶åç»™AdminServieåŠ Servieæ³¨è§£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdminService</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±æŠŠè¿™ä¸ªAdminServiceç±»æ³¨å†Œä¸ºäº†Springbootçš„ä¸€ä¸ªbeanã€‚</p><p>ç„¶ååœ¨è¿™ä¸ªç±»ä¸­æ·»åŠ adminæ–¹æ³•ï¼Œæ¥æ”¶ä¸€ä¸ªString nameå‚æ•°çš„æ–¹æ³•ï¼Œå¦‚æœnameä¸&quot;admin&quot;ç›¸ç­‰å°±è¿”å›&quot;admin&quot;ï¼ˆä¹Ÿå°±æ˜¯adminæ¥å£åªæ¥å—&quot;admin&quot;è´¦å·ï¼‰ï¼Œå…¶ä»–è¿”å›é”™è¯¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">admin</span><span class="params">(String name)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">&quot;admin&quot;</span>.equals(name)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;admin&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// è¿™é‡Œå…ˆç•™ç€</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åˆ°com/example/controller/WebController.javaä¸­å†™ä¸€ä¸ªadminæ¥å£ï¼Œå¹¶ç»™è¿™ä¸ªæ¥å£ä¼ ä¸€ä¸ªå‚æ•°String nameã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦å»è®¿é—®serviceä¸­çš„æ–¹æ³•ã€‚å…ˆé€šè¿‡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Resource</span></span><br><span class="line">AdminService adminService;</span><br></pre></td></tr></table></figure><p>æ³¨å…¥è¿™ä¸ªserviceï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    AdminService adminService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">1</span> / <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> Result.success(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨adminæ¥å£ä¸­é€šè¿‡è¿™ä¸ªadminServiceè°ƒç”¨å®ƒçš„adminæ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    AdminService adminService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">1</span> / <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> Result.success(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/admin&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">admin</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">admin</span> <span class="operator">=</span> adminService.admin(name);</span><br><span class="line">        <span class="keyword">return</span> Result.success(admin);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“å‰ç«¯è°ƒç”¨adminæ¥å£ä¼ æ¥ä¸€ä¸ªnameï¼Œå½“nameç­‰äº&quot;admin&quot;æ—¶ï¼Œè¿”å›&quot;admin&quot;ï¼›å½“ä¸ç­‰äº&quot;admin&quot;çš„æ—¶å€™è¿”å›é”™è¯¯ã€‚</p><p>ä¸èƒ½åœ¨AdminServiceä¸­çš„adminæ–¹æ³•ä¸­ç›´æ¥è¿”å›&quot;è´¦å·é”™è¯¯&quot;ï¼Œå› ä¸ºè¿™ä¸ªadminæ–¹æ³•æ˜¯é€šè¿‡adminæ¥å£è°ƒç”¨çš„ï¼Œè¿™ä¸ª&quot;è´¦å·é”™è¯¯&quot;è¿”å›åè¢«adminæ¥æ”¶ï¼Œç„¶ååˆé€šè¿‡<code>Result.success(admin)</code>è¿”å›ï¼Œä½†æ­¤æ—¶çŠ¶æ€ç codeè¿˜æ˜¯200ï¼ˆè¯·æ±‚æˆåŠŸï¼‰ã€‚</p><p>é‚£ä¹ˆè¯¥å¦‚ä½•è¿”å›é”™è¯¯å‘¢ï¼Ÿè€ƒè™‘è‡ªå®šä¹‰å¼‚å¸¸ã€‚</p><p>åœ¨com/example/exceptionç±»ä¸­æ–°å»ºä¸€ä¸ªCustomerExceptionç±»ï¼Œç„¶åè®©è¿™ä¸ªç±»ç»§æ‰¿RuntimeExceptionç±»ï¼ˆJavaé€šè¿‡extendsç»§æ‰¿ï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomerException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»™è¿™ä¸ªç±»æ·»åŠ ä¸¤ä¸ªprivateå±æ€§ï¼ŒString code å’Œ String msgï¼Œä¹Ÿå°±æ˜¯é”™è¯¯çŠ¶æ€ç å’Œé”™è¯¯ä¿¡æ¯ã€‚ç»§ç»­åˆ©ç”¨ALT+Insertæ¥å¿«é€Ÿå®ç°ä»–ä»¬çš„getterå’Œsetteræ–¹æ³•ä»¥åŠæ„é€ å‡½æ•°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomerException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CustomerException</span><span class="params">(String code, String msg)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CustomerException</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CustomerException</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCode</span><span class="params">(String code)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMsg</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMsg</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å°±å¯ä»¥å®Œå–„AdminServiceç±»é‡Œçš„adminæ–¹æ³•äº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdminService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">admin</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;admin&quot;</span>.equals(name)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;admin&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomerException</span>(<span class="string">&quot;è´¦å·é”™è¯¯&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿˜éœ€è¦åœ¨å…¨å±€æ•è·å™¨ä¸­æ•è·æˆ‘ä»¬çš„è‡ªå®šä¹‰å¼‚å¸¸ï¼ˆåŸæ¥åªæ•è·ExceptionåŸºç±»å¼‚å¸¸ï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// com/example/exception/GlobalExceptionHandler.java</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@ControllerAdvice(&quot;com.example.controller&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(GlobalExceptionHandler.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">error</span><span class="params">(Exception e)</span> &#123;</span><br><span class="line">        log.error(<span class="string">&quot;ç³»ç»Ÿå¼‚å¸¸&quot;</span>, e);</span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="string">&quot;ç³»ç»Ÿå¼‚å¸¸&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(CustomerException.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">customerError</span><span class="params">(CustomerException e)</span> &#123;</span><br><span class="line">        log.error(<span class="string">&quot;è‡ªå®šä¹‰é”™è¯¯&quot;</span>, e);</span><br><span class="line">        <span class="keyword">return</span> Result.error(e.getCode(), e.getMsg());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­customerErrorä¸­ä¸€å®šè¦æŠŠCustomerExceptionå¯¹è±¡eä¸­åŒ…å«çš„msgé€šè¿‡getMsgæ‹¿å‡ºæ¥ã€‚</p><p>ç°åœ¨è®¿é—®<code>localhost:9999/admin?name=1111</code>ï¼Œå…¶ä¸­<code>?name=1111</code>å°±æ˜¯ä¼ é€’å‚æ•°ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Springboot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€è§„åˆ’ä¸ƒï¼šçŠ¶æ€æœºDP</title>
      <link href="/2025/03/06/dp7/"/>
      <url>/2025/03/06/dp7/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥å­¦ä¹ çµèŒ¶å±±è‰¾åºœçš„<a href="https://www.bilibili.com/video/BV1ho4y1W7QK/?spm_id_from=333.1245.0.0&amp;vd_source=a0f19e79b7da02f4fa318d91be5bc86a">ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºã€åŸºç¡€ç®—æ³•ç²¾è®² 21ã€‘</a>ã€‚</p><h1>1. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II</h1><p>Leetcode å®˜æ–¹é¢˜ç›®<a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-ii/description/">122. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II</a>ã€‚</p><h1>1.1 é¢˜ç›®æè¿°</h1><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ prices ï¼Œå…¶ä¸­ prices[i] è¡¨ç¤ºæŸæ”¯è‚¡ç¥¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚</p><p>åœ¨æ¯ä¸€å¤©ï¼Œä½ å¯ä»¥å†³å®šæ˜¯å¦è´­ä¹°å’Œ/æˆ–å‡ºå”®è‚¡ç¥¨ã€‚ä½ åœ¨ä»»ä½•æ—¶å€™ æœ€å¤š åªèƒ½æŒæœ‰ ä¸€è‚¡ è‚¡ç¥¨ã€‚ä½ ä¹Ÿå¯ä»¥å…ˆè´­ä¹°ï¼Œç„¶ååœ¨ åŒä¸€å¤© å‡ºå”®ã€‚</p><p>è¿”å› ä½ èƒ½è·å¾—çš„ æœ€å¤§ åˆ©æ¶¦ ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><pre><code>è¾“å…¥ï¼šprices = [7,1,5,3,6,4]è¾“å‡ºï¼š7è§£é‡Šï¼šåœ¨ç¬¬ 2 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 1ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 3 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 5ï¼‰çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 5 - 1 = 4ã€‚éšåï¼Œåœ¨ç¬¬ 4 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 3ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 5 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 6ï¼‰çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 6 - 3 = 3ã€‚æœ€å¤§æ€»åˆ©æ¶¦ä¸º 4 + 3 = 7 ã€‚</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code>è¾“å…¥ï¼šprices = [1,2,3,4,5]è¾“å‡ºï¼š4è§£é‡Šï¼šåœ¨ç¬¬ 1 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 1ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 5 å¤© ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 5ï¼‰çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 5 - 1 = 4ã€‚æœ€å¤§æ€»åˆ©æ¶¦ä¸º 4 ã€‚</code></pre><p>ç¤ºä¾‹ 3ï¼š</p><pre><code>è¾“å…¥ï¼šprices = [7,6,4,3,1]è¾“å‡ºï¼š0è§£é‡Šï¼šåœ¨è¿™ç§æƒ…å†µä¸‹, äº¤æ˜“æ— æ³•è·å¾—æ­£åˆ©æ¶¦ï¼Œæ‰€ä»¥ä¸å‚ä¸äº¤æ˜“å¯ä»¥è·å¾—æœ€å¤§åˆ©æ¶¦ï¼Œæœ€å¤§åˆ©æ¶¦ä¸º 0ã€‚</code></pre><h1>1.2 æ€è·¯</h1><p><code>å¯å‘æ€è·¯</code>ï¼šæœ€åä¸€å¤©å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p><p>å¯¹äº prices = [7,1,5,3,6,4]</p><pre><code>ä»ç¬¬0å¤©å¼€å§‹åˆ°ç¬¬5å¤©ç»“æŸæ—¶çš„åˆ©æ¶¦= ä»ç¬¬0å¤©å¼€å§‹åˆ°ç¬¬4å¤©ç»“æŸæ—¶çš„åˆ©æ¶¦ + ç¬¬5å¤©çš„åˆ©æ¶¦= ã€‚ã€‚ã€‚</code></pre><p>å¦‚æœç¬¬5å¤©ä»€ä¹ˆä¹Ÿæ²¡åšï¼Œé‚£ä¹ˆåˆ©æ¶¦æ˜¯0ã€‚å¦‚æœä¹°å…¥4å—é’±çš„è‚¡ç¥¨ï¼Œé‚£ä¹ˆåˆ©æ¶¦æ˜¯-4ã€‚å¦‚æœ4å—é’±å–æ‰è‚¡ç¥¨ï¼Œé‚£ä¹ˆåˆ©æ¶¦æ˜¯4ï¼ˆå³èµšäº†4å—é’±ï¼Œä½†æ˜¯è¿™é‡Œè¯´çš„èµšäº†4å—é’±æ²¡æœ‰è€ƒè™‘ä¹°å…¥è‚¡ç¥¨èŠ±çš„é’±ï¼‰ã€‚å‡å¦‚ç¬¬5å¤©å–æ‰çš„è‚¡ç¥¨æ˜¯èŠ±6å—é’±ä¹°å…¥çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªåˆ©æ¶¦-6éœ€è¦ç®—åœ¨ç¬¬0å¤©å¼€å§‹åˆ°ç¬¬4å¤©ç»“æŸæ—¶çš„åˆ©æ¶¦é‡Œé¢ã€‚</p><p>é‚£ä¹ˆç¬¬iå¤©æˆ‘ä»¬å¯ä»¥åšå“ªäº›äº‹å„¿å‘¢ï¼Ÿçœ‹è¿™å¼ å›¾ï¼š<br><img src="/images/dp7_1.png" alt=""></p><ul><li>ä»€ä¹ˆä¹Ÿä¸åš<ul><li>çŠ¶æ€ä¸å˜</li></ul></li><li>ä¹°å…¥è‚¡ç¥¨<ul><li>é‚£ä¹ˆå°±ä»ç¬¬i-1å¤©æœªæŒæœ‰è‚¡ç¥¨çš„çŠ¶æ€ï¼Œå˜æˆç¬¬iå¤©ç»“æŸæ—¶æŒæœ‰è‚¡ç¥¨çš„çŠ¶æ€</li></ul></li><li>å–å‡ºè‚¡ç¥¨<ul><li>é‚£ä¹ˆå°±ä»ç¬¬i-1å¤©æŒæœ‰è‚¡ç¥¨çš„çŠ¶æ€ï¼Œå˜æˆç¬¬iå¤©ç»“æŸæ—¶æœªæŒæœ‰è‚¡ç¥¨çš„çŠ¶æ€</li></ul></li></ul><p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºçŠ¶æ€è½¬ç§»ä¸€å…±æœ‰å››ç§çŠ¶æ€ï¼Œå…¶ä¸­æŒæœ‰è‚¡ç¥¨æˆ–è€…æœªæŒæœ‰è‚¡ç¥¨æ—¶ï¼Œæ—¢ä¸ä¹°å…¥ä¹Ÿä¸å–å‡ºæ˜¯ä¸¤ç§çŠ¶æ€ã€‚</p><ul><li>å®šä¹‰ dfs(i,0)è¡¨ç¤ºåˆ°ç¬¬iå¤©ç»“æŸæ—¶ï¼ŒæœªæŒæœ‰è‚¡ç¥¨ï¼Œæœ€å¤§åˆ©æ¶¦</li><li>å®šä¹‰ dfs(i,1)è¡¨ç¤ºåˆ°ç¬¬iå¤©ç»“æŸæ—¶ï¼ŒæŒæœ‰è‚¡ç¥¨ï¼Œæœ€å¤§åˆ©æ¶¦</li></ul><p>ï¼ˆè¿™é‡Œçš„å‚æ•°0/1æ˜¯ä¸€ä¸ªboolç±»å‹çš„å€¼ã€‚ï¼‰</p><p>ç”±äºç¬¬i-1å¤©çš„ç»“æŸå°±æ˜¯ç¬¬iå¤©çš„å¼€å§‹dfs(i-1,Â·)ä¹Ÿè¡¨ç¤ºåˆ°ç¬¬iå¤©å¼€å§‹æ—¶çš„æœ€å¤§åˆ©æ¶¦ã€‚</p><p>ç»§è€Œå¯ä»¥å¾—åˆ°ä»¥ä¸‹å›¾ï¼š<br><img src="/images/dp7_2.png" alt=""></p><p>ä»æ¯ä¸ªçŠ¶æ€å¯ä»¥è½¬ç§»åˆ°å…¶ä»–çŠ¶æ€ï¼Œå°†è¿™äº›å…¶ä»–çŠ¶æ€å–æœ€å¤§å€¼å°±å¯ä»¥å¾—åˆ°ï¼š</p><pre><code>dfs(i, 0) = max(dfs(i-1, 0) + dfs(i-1, 1) - prices[i])dfs(i, 1) = max(dfs(i-1, 1) + dfs(i-1, 0) + prices[i])</code></pre><p>é€’å½’è¾¹ç•Œï¼š</p><pre><code>dfs(-1, 0) = 0  ç¬¬0å¤©`å¼€å§‹æ—¶`æœªæŒæœ‰è‚¡ç¥¨ï¼Œåˆ©æ¶¦ä¸º0dfs(-1, 1) = 0  ç¬¬0å¤©`å¼€å§‹æ—¶`ä¸å¯èƒ½æŒæœ‰è‚¡ç¥¨</code></pre><p>é€’å½’å…¥å£ï¼š</p><pre><code>max(dfs(n-1, 0), dfs(n-1, 1))= dfs(n-1, 0)</code></pre><p>çœ‹ä¸Šå»æšä¸¾æœ€åä¸€å¤©æ˜¯å¦æŒæœ‰è‚¡ç¥¨å°±å¯ä»¥äº†ï¼Œä½†æ˜¯å¦‚æœæœ€åä¸€å¤©ç»“æŸæ—¶è¿˜æŒæœ‰è‚¡ç¥¨ï¼Œè¿™ä¸ªè‚¡ç¥¨åœ¨åé¢å°±å–ä¸å‡ºå»äº†ï¼ˆæˆ–è€…è¯´ä¸åœ¨é¢˜ç›®è€ƒè™‘çš„èŒƒå›´å†…ï¼‰ã€‚æ‰€ä»¥dfs(n-1, 1)æ˜¯ä¸ä¼šæ¯”dfs(n-1, 0)å¤§çš„ï¼Œæ•…ä»dfs(n-1, 0)å¼€å§‹é€’å½’å³å¯ã€‚</p><h1>1.3 å…·ä½“å®ç°</h1><h1>1.3.1 é€’å½’</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’å½’</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">memo</span>(n, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">2</span>, <span class="number">-1</span>));</span><br><span class="line">        <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">this</span> <span class="keyword">auto</span>&amp;&amp; dfs, <span class="type">int</span> i, <span class="type">int</span> j)-&gt;<span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> j == <span class="number">0</span> ? <span class="number">0</span> : INT_MIN / <span class="number">2</span>;</span><br><span class="line">            <span class="type">int</span>&amp; res = memo[i][j];</span><br><span class="line">            <span class="keyword">if</span> (res != <span class="number">-1</span>)</span><br><span class="line">                <span class="keyword">return</span> res;</span><br><span class="line">            <span class="keyword">return</span> res = j == <span class="number">0</span> ? <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>, <span class="number">0</span>), <span class="built_in">dfs</span>(i<span class="number">-1</span>, <span class="number">1</span>) + prices[i]) : <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>, <span class="number">1</span>), <span class="built_in">dfs</span>(i<span class="number">-1</span>, <span class="number">0</span>) - prices[i]);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(n<span class="number">-1</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>1.3.2 é€’æ¨ ç©ºé—´å¤æ‚åº¦O(n)</h1><p>é€’å½’å¾ˆå®¹æ˜“ç¿»è¯‘æˆé€’æ¨ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’æ¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">f</span>(n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">2</span>, <span class="number">0</span>));</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">1</span>] = INT_MIN / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            f[i + <span class="number">1</span>][<span class="number">0</span>] = <span class="built_in">max</span>(f[i][<span class="number">0</span>], f[i][<span class="number">1</span>] + prices[i]);</span><br><span class="line">            f[i + <span class="number">1</span>][<span class="number">1</span>] = <span class="built_in">max</span>(f[i][<span class="number">1</span>], f[i][<span class="number">0</span>] - prices[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n][<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>1.3.3 é€’æ¨ ç©ºé—´å¤æ‚åº¦O(1) ä¸¤ä¸ªæ•°ç»„</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’æ¨ ç©ºé—´å¤æ‚åº¦O(1) ä¸¤ä¸ªæ•°ç»„</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">f</span>(<span class="number">2</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">2</span>, <span class="number">0</span>));</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">1</span>] = INT_MIN / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            f[(i + <span class="number">1</span>) % <span class="number">2</span>][<span class="number">0</span>] = <span class="built_in">max</span>(f[i % <span class="number">2</span>][<span class="number">0</span>], f[i % <span class="number">2</span>][<span class="number">1</span>] + prices[i]);</span><br><span class="line">            f[(i + <span class="number">1</span>) % <span class="number">2</span>][<span class="number">1</span>] = <span class="built_in">max</span>(f[i % <span class="number">2</span>][<span class="number">1</span>], f[i % <span class="number">2</span>][<span class="number">0</span>] - prices[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n % <span class="number">2</span>][<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>1.3.4 é€’æ¨ ç©ºé—´å¤æ‚åº¦O(1) ä¸ç”¨æ•°ç»„</h1><p>è¿™ç§è²Œä¼¼éš¾æƒ³ï¼Œä½†å…¶å®ç”»ä¸ªå›¾å†å¯¹ç…§ä¸€ä¸‹ä¸¤ä¸ªæ•°ç»„çš„ä»£ç å°±å¾ˆå®¹æ˜“æƒ³åˆ°äº†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’æ¨ ç©ºé—´å¤æ‚åº¦O(1) ä¸ç”¨æ•°ç»„</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> f0 = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> f1 = INT_MIN / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="type">int</span> f0_tmp = f0;</span><br><span class="line">            f0 = <span class="built_in">max</span>(f0, f1 + prices[i]);</span><br><span class="line">            f1 = <span class="built_in">max</span>(f1, f0_tmp - prices[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>1.4 å˜å½¢é¢˜ç›®ï¼š309. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«å†·å†»æœŸ</h1><p><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-cooldown/description/">309. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«å†·å†»æœŸ</a>ã€‚</p><h1>1.4.1 é¢˜ç›®æè¿°</h1><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„pricesï¼Œå…¶ä¸­ prices[i] è¡¨ç¤ºç¬¬ i å¤©çš„è‚¡ç¥¨ä»·æ ¼ ã€‚â€‹</p><p>è®¾è®¡ä¸€ä¸ªç®—æ³•è®¡ç®—å‡ºæœ€å¤§åˆ©æ¶¦ã€‚åœ¨æ»¡è¶³ä»¥ä¸‹çº¦æŸæ¡ä»¶ä¸‹ï¼Œä½ å¯ä»¥å°½å¯èƒ½åœ°å®Œæˆæ›´å¤šçš„äº¤æ˜“ï¼ˆå¤šæ¬¡ä¹°å–ä¸€æ”¯è‚¡ç¥¨ï¼‰:</p><p>å–å‡ºè‚¡ç¥¨åï¼Œä½ æ— æ³•åœ¨ç¬¬äºŒå¤©ä¹°å…¥è‚¡ç¥¨ (å³å†·å†»æœŸä¸º 1 å¤©)ã€‚<br>æ³¨æ„ï¼šä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚</p><p>ç¤ºä¾‹ 1:</p><pre><code>è¾“å…¥: prices = [1,2,3,0,2]è¾“å‡º: 3 è§£é‡Š: å¯¹åº”çš„äº¤æ˜“çŠ¶æ€ä¸º: [ä¹°å…¥, å–å‡º, å†·å†»æœŸ, ä¹°å…¥, å–å‡º]</code></pre><p>ç¤ºä¾‹ 2:</p><pre><code>è¾“å…¥: prices = [1]è¾“å‡º: 0</code></pre><h1>1.4.2 æ€è·¯</h1><p>è¿™é“é¢˜æœ‰å†·å†»æœŸï¼Œå°±æ˜¯åœ¨å–å‡ºåä¸èƒ½ç«‹åˆ»ä¹°å…¥è‚¡ç¥¨ã€‚æ¢å¥è¯å°±æ˜¯ä¹°å…¥è‚¡ç¥¨çš„æ—¶å€™ï¼Œå‰ä¸€å¤©ä¸èƒ½æœ‰å–å‡ºæ“ä½œã€‚è¿™å…¶å®å’Œå’Œ<a href="https://leetcode.cn/problems/house-robber/description/">198. æ‰“å®¶åŠ«èˆ</a>å¾ˆåƒã€‚åœ¨æ‰“å®¶åŠ«èˆä¸­ï¼Œä»å³å¾€å·¦æ€è€ƒï¼Œå¦‚æœé€‰ç¬¬iä¸ªæˆ¿å­ï¼Œé‚£ä¹ˆç¬¬i-1ä¸ªæˆ¿å­ä¸èƒ½é€‰ï¼Œæ‰€ä»¥ç›´æ¥é€’å½’åˆ°ç¬¬i-2ä¸ªæˆ¿å­ã€‚</p><p>è¿™é“é¢˜ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚<br>çŠ¶æ€è½¬ç§»ï¼š</p><ul><li>å¦‚æœä»Šå¤©ä¸æŒæœ‰è‚¡ç¥¨ï¼Œé‚£ä¹ˆæœ‰ä¸¤ç§å¯èƒ½ï¼š<ul><li>å‰ä¸€å¤©ä¹Ÿä¸æŒæœ‰è‚¡ç¥¨ï¼Œä»Šå¤©ä»€ä¹ˆéƒ½ä¸åšã€‚</li><li>å‰ä¸€å¤©æŒæœ‰è‚¡ç¥¨ï¼Œä»Šå¤©å–å‡ºè‚¡ç¥¨ã€‚</li><li>å› æ­¤ï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸ºï¼šdfs(i, 0) = max(dfs(i-1, 0), dfs(i-1, 1) + prices[i])</li></ul></li><li>å¦‚æœä»Šå¤©æŒæœ‰è‚¡ç¥¨ï¼Œé‚£ä¹ˆæœ‰ä¸¤ç§å¯èƒ½ï¼š<ul><li>å‰ä¸€å¤©ä¹ŸæŒæœ‰è‚¡ç¥¨ï¼Œä»Šå¤©ä»€ä¹ˆéƒ½ä¸åšã€‚</li><li>å‰ä¸¤å¤©ä¸æŒæœ‰è‚¡ç¥¨ï¼Œä»Šå¤©ä¹°å…¥è‚¡ç¥¨ï¼ˆå› ä¸ºæœ‰å†·å†»æœŸï¼Œæ‰€ä»¥ä¸èƒ½åœ¨å‰ä¸€å¤©å–å‡ºåç«‹å³ä¹°å…¥ï¼‰ã€‚</li><li>å› æ­¤ï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸ºï¼šdfs(i, 1) = max(dfs(i-1, 1), dfs(i-2, 0) - prices[i])</li></ul></li></ul><p>å½“holdä¸º1çš„æ—¶å€™ï¼Œå½“å‰çŠ¶æ€æ˜¯æŒæœ‰è‚¡ç¥¨ã€‚é‚£è¿™ä¸ªçŠ¶æ€å¯ä»¥æ¥è‡ªä¸¤ç§æƒ…å†µï¼šè¦ä¹ˆåœ¨i-1å¤©å·²ç»æŒæœ‰ï¼Œç»§ç»­æŒæœ‰ï¼›è¦ä¹ˆåœ¨ç¬¬iå¤©ä¹°å…¥ã€‚ä½†ä¹°å…¥çš„è¯ï¼Œå¿…é¡»æ»¡è¶³ä¹‹å‰å¤„äºæœªæŒæœ‰çŠ¶æ€ï¼Œå¹¶ä¸”æ²¡æœ‰åœ¨i-1å¤©å–å‡ºã€‚å› ä¸ºå¦‚æœæœ‰å–å‡ºçš„è¯ï¼Œiå¤©ä¸èƒ½ä¹°å…¥ã€‚</p><p>æ‰€ä»¥ï¼Œå½“åœ¨ç¬¬iå¤©ä¹°å…¥çš„è¯ï¼Œé‚£ä¹ˆå¿…é¡»ä¿è¯i-1å¤©å¤„äºå†·å´æœŸï¼Œä¹Ÿå°±æ˜¯i-1å¤©æ²¡æœ‰æ“ä½œã€‚é‚£ä¹ˆi-1å¤©ä¸æ“ä½œçš„æƒ…å†µä¸‹ï¼Œè¯´æ˜i-2å¤©çš„æ—¶å€™å¯èƒ½å·²ç»å–å‡ºäº†ï¼Œè¿™æ ·i-1å¤©æ˜¯å†·å´æœŸï¼Œiå¤©å°±å¯ä»¥ä¹°å…¥ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆé€’å½’åˆ°i-2å¤©çš„åŸå› ã€‚</p><h1>1.4.3 é€’å½’</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’å½’</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">memo</span>(n, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">2</span>, <span class="number">-1</span>));</span><br><span class="line">        <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">this</span> <span class="keyword">auto</span>&amp;&amp; dfs, <span class="type">int</span> i, <span class="type">int</span> j)-&gt;<span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> j == <span class="number">0</span> ? <span class="number">0</span> : INT_MIN / <span class="number">2</span>;</span><br><span class="line">            <span class="type">int</span>&amp; res = memo[i][j];</span><br><span class="line">            <span class="keyword">if</span> (res != <span class="number">-1</span>)</span><br><span class="line">                <span class="keyword">return</span> res;</span><br><span class="line">            <span class="keyword">return</span> res = j == <span class="number">0</span> ? <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>, <span class="number">0</span>), <span class="built_in">dfs</span>(i<span class="number">-1</span>, <span class="number">1</span>) + prices[i]) : <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>, <span class="number">1</span>), <span class="built_in">dfs</span>(i<span class="number">-2</span>, <span class="number">0</span>) - prices[i]);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(n<span class="number">-1</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>1.4.4 é€’æ¨ ç©ºé—´å¤æ‚åº¦ O(n)</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’æ¨ ç©ºé—´å¤æ‚åº¦ O(n)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">f</span>(n + <span class="number">2</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">2</span>, <span class="number">-1</span>));</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">1</span>] = INT_MIN / <span class="number">2</span>;</span><br><span class="line">        f[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        f[<span class="number">1</span>][<span class="number">1</span>] = -prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            f[i<span class="number">+2</span>][<span class="number">0</span>] = <span class="built_in">max</span>(f[i<span class="number">+1</span>][<span class="number">0</span>], f[i<span class="number">+1</span>][<span class="number">1</span>] + prices[i]);</span><br><span class="line">            f[i<span class="number">+2</span>][<span class="number">1</span>] = <span class="built_in">max</span>(f[i<span class="number">+1</span>][<span class="number">1</span>], f[i][<span class="number">0</span>] - prices[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n + <span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>1.4.5 é€’æ¨ ç©ºé—´å¤æ‚åº¦ O(1)</h1><p>è¿™ä¸ªç©ºé—´å¤æ‚åº¦ä¸ºO(1)çš„æ˜¯çœŸæƒ³ä¸æ˜ç™½ğŸ˜‚ã€‚</p><p>ç°åœ¨æ˜¯3.10ï¼Œä»Šå¤©å¤ä¹ æŠŠè¿™ä¸ªæƒ³å‡ºæ¥äº†ï¼Œè¿˜å¾—æ˜¯ç”»å›¾ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> f0 = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> f1 = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> f2 = INT_MIN / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="type">int</span> f1_tmp = f1;</span><br><span class="line">            f1 = <span class="built_in">max</span>(f1, f2 + prices[i]);</span><br><span class="line">            f2 = <span class="built_in">max</span>(f2, f0 - prices[i]);</span><br><span class="line">            f0 = f1_tmp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>2. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV</h1><p>Leetcode å®˜æ–¹é¢˜ç›®<a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/description/">188. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV</a>ã€‚</p><h1>2.1 é¢˜ç›®æè¿°</h1><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ prices å’Œä¸€ä¸ªæ•´æ•° k ï¼Œå…¶ä¸­ prices[i] æ˜¯æŸæ”¯ç»™å®šçš„è‚¡ç¥¨åœ¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚</p><p>è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚ä½ æœ€å¤šå¯ä»¥å®Œæˆ k ç¬”äº¤æ˜“ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ æœ€å¤šå¯ä»¥ä¹° k æ¬¡ï¼Œå– k æ¬¡ã€‚</p><p>æ³¨æ„ï¼šä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><pre><code>è¾“å…¥ï¼šk = 2, prices = [2,4,1]è¾“å‡ºï¼š2è§£é‡Šï¼šåœ¨ç¬¬ 1 å¤© (è‚¡ç¥¨ä»·æ ¼ = 2) çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 2 å¤© (è‚¡ç¥¨ä»·æ ¼ = 4) çš„æ—¶å€™å–å‡ºï¼Œè¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 4-2 = 2 ã€‚</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code>è¾“å…¥ï¼šk = 2, prices = [3,2,6,5,0,3]è¾“å‡ºï¼š7è§£é‡Šï¼šåœ¨ç¬¬ 2 å¤© (è‚¡ç¥¨ä»·æ ¼ = 2) çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 3 å¤© (è‚¡ç¥¨ä»·æ ¼ = 6) çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 6-2 = 4 ã€‚éšåï¼Œåœ¨ç¬¬ 5 å¤© (è‚¡ç¥¨ä»·æ ¼ = 0) çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 6 å¤© (è‚¡ç¥¨ä»·æ ¼ = 3) çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 3-0 = 3 ã€‚</code></pre><h1>2.2 åŸºæœ¬æ€è·¯</h1><p>å®šä¹‰ dfs(i,j,0) è¡¨ç¤ºåˆ°ç¬¬ i å¤©<code>ç»“æŸ</code>æ—¶å®Œæˆ<code>è‡³å¤š</code> j ç¬”äº¤æ˜“ï¼ŒæœªæŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦ã€‚<br>å®šä¹‰ dfs(i,j,1) è¡¨ç¤ºåˆ°ç¬¬ i å¤©<code>ç»“æŸ</code>æ—¶å®Œæˆ<code>è‡³å¤š</code> j ç¬”äº¤æ˜“ï¼ŒæŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦ã€‚</p><p>çŠ¶æ€è½¬ç§»å›¾å¦‚ä¸‹å›¾ï¼š</p><p><img src="/images/dp7_3.jpg" alt=""></p><p>æ—¢ç„¶æœ‰æ¬¡æ•°é™åˆ¶ï¼Œå°±åº”å½“åœ¨é€’å½’è¿‡ç¨‹ä¸­è®°å½•æ¬¡æ•°ã€‚æ‰€ä»¥åœ¨æ— é™æ¬¡äº¤æ˜“çš„åŸºç¡€ä¸Šå¢åŠ ä¸€ä¸ªå‚æ•°jï¼Œè¡¨ç¤º<code>è‡³å¤š</code>å®Œæˆjç¬”äº¤æ˜“ã€‚è½¬ç§»æ–¹ç¨‹éœ€è¦ä¿®æ”¹çš„åœ°æ–¹å°±æ˜¯åœ¨ä¹°å…¥æˆ–è€…å–å‡ºçš„åœ°æ–¹æŠŠäº¤æ˜“æ¬¡æ•°å‡1ï¼Œå¦‚æœä¹°å…¥å‡1ï¼Œåé¢å–å‡ºçš„æ—¶å€™å°±ä¸ç”¨å‡1ã€‚</p><pre><code>dfs(i,j,0) = max(dfs(i-1,j,0), dfs(i-1,j,1) + prices[i])dfs(i,j,1) = max(dfs(i-1,j,1), dfs(i-1,j-1,0) - prices[i])</code></pre><p>é€’å½’è¾¹ç•Œï¼š</p><pre><code>dfs(Â·, -1, Â·) = -âˆ, ä»»ä½•æƒ…å†µä¸‹ï¼Œjéƒ½ä¸èƒ½ä¸ºè´Ÿdfs(-1, j, 0) = 0, ç¬¬ 0 å¤©å¼€å§‹æœªæŒæœ‰è‚¡ç¥¨ï¼Œåˆ©æ¶¦ä¸º 0dfs(-1, j, 1) = -âˆï¼Œç¬¬ 0 å¤©å¼€å§‹ä¸å¯èƒ½æŒæœ‰è‚¡ç¥¨</code></pre><h1>2.3 å…·ä½“å®ç°</h1><h1>2.3.1 é€’å½’</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’å½’</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(<span class="type">int</span> k, vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&gt; <span class="built_in">memo</span>(n, vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;(k + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">2</span>, <span class="number">-1</span>)));</span><br><span class="line">        <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">this</span> <span class="keyword">auto</span>&amp;&amp; dfs, <span class="type">int</span> i, <span class="type">int</span> j, <span class="type">int</span> l)-&gt;<span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (j &lt; <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> INT_MIN / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> l == <span class="number">0</span> ? <span class="number">0</span> : INT_MIN / <span class="number">2</span>;</span><br><span class="line">            <span class="type">int</span>&amp; res = memo[i][j][l];</span><br><span class="line">            <span class="keyword">if</span> (res != <span class="number">-1</span>)</span><br><span class="line">                <span class="keyword">return</span> res;</span><br><span class="line">            <span class="keyword">return</span> res = l == <span class="number">0</span> ? <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>, j, <span class="number">0</span>), <span class="built_in">dfs</span>(i<span class="number">-1</span>, j, <span class="number">1</span>) + prices[i]) : <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>, j, <span class="number">1</span>), <span class="built_in">dfs</span>(i<span class="number">-1</span>, j<span class="number">-1</span>, <span class="number">0</span>) - prices[i]);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(n - <span class="number">1</span>, k, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>2.3.2 é€’æ¨ ç©ºé—´å¤æ‚åº¦O(n*k)</h1><ul><li><p>ä¸ºä»€ä¹ˆç¬¬äºŒç»´åº¦çš„å¤§å°æ˜¯ k+2ï¼Ÿ</p><ul><li>åœ¨è®°å¿†åŒ–æœç´¢ä¸­ï¼Œj çš„èŒƒå›´æ˜¯ [âˆ’1,k]ï¼Œè¿™ä¸€å…±æœ‰ k+2 ä¸ªæ•°ã€‚1:1 ç¿»è¯‘æˆé€’æ¨å°±éœ€è¦ k+2 çš„æ•°ç»„å¤§å°ã€‚</li></ul></li><li><p>f æ•°ç»„ä¸­çš„ j=0 è¡¨ç¤ºä»€ä¹ˆæ„æ€ï¼Ÿ</p><ul><li>è¿™å¯¹åº”ç€è®°å¿†åŒ–æœç´¢ä¸­çš„ j=âˆ’1 çš„çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯äº¤æ˜“ âˆ’1 æ¬¡çš„çŠ¶æ€ã€‚æ³¨æ„è¿™æ˜¯ä¸åˆæ³•çš„ï¼Œæ‰€ä»¥åˆå§‹å€¼ä¸€å®šæ˜¯ âˆ’âˆã€‚</li></ul></li><li><p>f çš„åˆå§‹å€¼æ€ä¹ˆç¡®å®šï¼Ÿ</p><ul><li>f çš„åˆå§‹å€¼æ¥è‡ªè®°å¿†åŒ–æœç´¢çš„é€’å½’è¾¹ç•Œï¼Œé€’å½’è¾¹ç•Œæ€ä¹ˆå†™ï¼Œåˆå§‹å€¼å°±æ€ä¹ˆå†™ã€‚</li></ul></li></ul><p>ä½œè€…ï¼šçµèŒ¶å±±è‰¾åºœ<br>é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/solutions/2201488/shi-pin-jiao-ni-yi-bu-bu-si-kao-dong-tai-kksg/">https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/solutions/2201488/shi-pin-jiao-ni-yi-bu-bu-si-kao-dong-tai-kksg/</a><br>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’æ¨ ç©ºé—´å¤æ‚åº¦O(n*k)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(<span class="type">int</span> k, vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&gt; <span class="built_in">f</span>(n + <span class="number">1</span>, vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;(k + <span class="number">2</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">2</span>, INT_MIN / <span class="number">2</span>)));</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt; k + <span class="number">2</span>; ++j)</span><br><span class="line">            f[<span class="number">0</span>][j][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt; k + <span class="number">2</span>; ++j) &#123;</span><br><span class="line">                f[i<span class="number">+1</span>][j][<span class="number">0</span>] = <span class="built_in">max</span>(f[i][j][<span class="number">0</span>], f[i][j][<span class="number">1</span>] + prices[i]);</span><br><span class="line">                f[i<span class="number">+1</span>][j][<span class="number">1</span>] = <span class="built_in">max</span>(f[i][j][<span class="number">1</span>], f[i][j<span class="number">-1</span>][<span class="number">0</span>] - prices[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n][k<span class="number">+1</span>][<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>2.3.3 é€’æ¨ ç©ºé—´å¤æ‚åº¦O(k)</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’æ¨ ç©ºé—´å¤æ‚åº¦O(k)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(<span class="type">int</span> k, vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&gt; <span class="built_in">f</span>(<span class="number">2</span>, vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;(k + <span class="number">2</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">2</span>, INT_MIN / <span class="number">2</span>)));</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt; k + <span class="number">2</span>; ++j)</span><br><span class="line">            f[<span class="number">0</span>][j][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt; k + <span class="number">2</span>; ++j) &#123;</span><br><span class="line">                f[(i<span class="number">+1</span>)%<span class="number">2</span>][j][<span class="number">0</span>] = <span class="built_in">max</span>(f[i%<span class="number">2</span>][j][<span class="number">0</span>], f[i%<span class="number">2</span>][j][<span class="number">1</span>] + prices[i]);</span><br><span class="line">                f[(i<span class="number">+1</span>)%<span class="number">2</span>][j][<span class="number">1</span>] = <span class="built_in">max</span>(f[i%<span class="number">2</span>][j][<span class="number">1</span>], f[i%<span class="number">2</span>][j<span class="number">-1</span>][<span class="number">0</span>] - prices[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n%<span class="number">2</span>][k<span class="number">+1</span>][<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åŠ¨æ€è§„åˆ’ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ€»ç»“ä¸€ä¸‹æœ€è¿‘ï¼ˆ3æœˆ6æ—¥ï¼‰</title>
      <link href="/2025/03/06/my-feelings2/"/>
      <url>/2025/03/06/my-feelings2/</url>
      
        <content type="html"><![CDATA[<p>å›é¡¾ä¸€ä¸‹æœ€è¿‘çš„ä¸€ä¸ªæœˆã€‚2.6å·è¿˜åœ¨å®¶ï¼Œå¤©å¤©åˆ·ç€leetcodeï¼Œçœ‹çœ‹githubä¸Šçš„ä¸€äº›æºç ï¼Œå¶å°”è‡ªå·±å†™å†™ï¼Œå†æœ‰ç©ºå†™å†™åšå®¢ã€‚</p><p>2.13å‡†å¤‡è¿”æ ¡ï¼Œä½†æ˜¯çªå‘äº†ä¸€äº›æ„å¤–ï¼Œè¯·å‡äº†ï¼Œæœ€åæ”¾äº†åŒå­¦é¸½å­ï¼ˆæœ¬æ¥è¯´å¥½ä¸€èµ·è¿”æ ¡çš„ï¼‰ï¼Œä¸è¿‡å¥½åœ¨è¿”æ ¡åè¯·äººå®¶åƒäº†ä¸€é¡¿ï¼Œåº”è¯¥ä¹Ÿæ¶ˆæ°”äº†ã€‚</p><p>2.24å¼€å§‹è¿”æ ¡ï¼Œè¿”æ ¡åä¸€ç›´åœ¨ä¿®æ”¹ç®€å†ï¼Œæƒ³è¦æŠ•é€’ä¸ªå®ä¹ ã€‚åŸºæœ¬ä¸Šæ¯å¤©éƒ½åœ¨å­¦C++çš„ä¸€äº›æ–°ç‰¹æ€§ä»¥åŠä¸€äº›å…«è‚¡æ–‡ç›¸å…³ï¼Œç„¶ååˆ·åˆ·leetcodeï¼Œå†™å†™åšå®¢ã€‚</p><p>ä¸­é—´ç”šè‡³åœ¨å­¦javaå’Œå‰ç«¯ğŸ¤£ã€‚javaä¸éš¾ï¼Œå› ä¸ºä¸¤å¹´å‰å­¦è¿‡ï¼Œå¹¶ä¸”javaçš„å¾ˆå¤šè¯­æ³•ä¸C++ç±»ä¼¼ï¼Œåªä¸è¿‡javaä¹Ÿæœ‰å¾ˆå¤šé«˜çº§çš„ç‰¹æ€§ï¼Œæ¯”å¦‚åƒåœ¾å›æ”¶æœºåˆ¶ç­‰ç­‰ï¼Œå½“æ—¶ä¸€åº¦æ„Ÿè§‰å°±æ˜¯å› ä¸ºjavaçš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼ŒC++æ‰ä¼šæœ‰æ™ºèƒ½æŒ‡é’ˆã€‚å‰ç«¯ä¸»è¦æ˜¯vue3ï¼Œæ„Ÿè§‰å®ƒæ¯”htmlè¦å¼ºå¤§å¤ªå¤šäº†ã€‚</p><p>è¿˜æœ‰å°±æ˜¯ï¼Œç›®å‰å†™çš„ä¸å°‘åšå®¢ï¼Œå†…å®¹åŸºæœ¬ä¸Šæ˜¯Bç«™ä¸Šè§†é¢‘çš„å­¦ä¹ çš„è®°å½•æˆ–è€…å­¦ä¹ å…¶ä»–çš„åšå®¢ï¼Œç„¶åè¿›è¡Œä¸€ä¸ªæ•´ç†ã€‚æ•´ç†å’Œè®°å½•è§†é¢‘æ˜¯å› ä¸ºçœ‹è§†é¢‘æ¥è¿›è¡Œå¤ä¹ å›é¡¾ç¡®å®è´¹æ—¶è´¹åŠ›ä¸è®¨å¥½ã€‚æ•´ç†å…¶ä»–äººçš„åšå®¢ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆè´¹æ—¶çš„äº‹ï¼Œè¯´ä»–æ˜¯é€ è½®å­æ„Ÿè§‰å¤ªé«˜å¤§ä¸Šäº†ï¼Œè¯´æ˜¯æ¬è¿å·¥æ„Ÿè§‰æ›´åˆé€‚ã€‚ä¸è¿‡ä¸å¯å¦è®¤è‡ªå·±å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ã€‚</p><p>ç›®å‰çš„æƒ³æ³•æ˜¯ï¼Œå¯¹äºå…¶ä»–äººåšå®¢çš„å­¦ä¹ ï¼Œåªæå‡ºè½¬è½½å£°æ˜ç„¶åæä¾›è·³è½¬é“¾æ¥ï¼Œä¸åšè¿‡å¤šçš„æ•´ç†ã€‚ä½†æ˜¯è²Œä¼¼ä¹Ÿä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹å„¿ï¼Œæœ€æ€•çš„è¿˜æ˜¯ç‰ˆæƒé—®é¢˜ã€‚è‡ªå·±æ¶ˆåŒ–ç†è§£åå†æ’°å†™åšå®¢å’Œé‚£å®Œå…¨æ˜¯ä¸¤ç äº‹å„¿ã€‚ç›®å‰æ²¡æœ‰æ›´å¥½çš„è§£å†³æ–¹æ¡ˆäº†ğŸ˜µã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ‚è°ˆ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>CMake ä¿å§†çº§æ•™ç¨‹[è½¬è½½]</title>
      <link href="/2025/03/06/chores3/"/>
      <url>/2025/03/06/chores3/</url>
      
        <content type="html"><![CDATA[<p>æä¾›ä¸€ä¸‹ä¸€ä¸ªä¼˜ç§€çš„ä¸ªäººåšå®¢ç½‘ç«™ä¸­å†™çš„CMakeæ•™ç¨‹çš„è·³è½¬é“¾æ¥ï¼ˆä¾µæƒåˆ ï¼‰ï¼š</p><ul><li><a href="https://subingwen.cn/cmake/CMake-primer/">CMake ä¿å§†çº§æ•™ç¨‹ï¼ˆä¸Šï¼‰</a></li><li><a href="https://subingwen.cn/cmake/CMake-advanced/">CMake ä¿å§†çº§æ•™ç¨‹ï¼ˆä¸‹ï¼‰</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> C/C++ é‚£äº›äº‹å„¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C/C++ </tag>
            
            <tag> CMake </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GDB è°ƒè¯•</title>
      <link href="/2025/03/06/chores2/"/>
      <url>/2025/03/06/chores2/</url>
      
        <content type="html"><![CDATA[<p>GDBæ˜¯Linuxä¸‹éå¸¸å¥½ç”¨ä¸”å¼ºå¤§çš„è°ƒè¯•å·¥å…·ã€‚GDBå¯ä»¥è°ƒè¯•Cã€C++ç­‰å¤šç§è¯­è¨€ã€‚</p><h1>1. åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å¸¦æœ‰è°ƒè¯•ä¿¡æ¯</h1><p>C/C++çš„ç¼–è¯‘æ–‡ä»¶æœ‰ä¸¤ç§ç‰ˆæœ¬ï¼š</p><ul><li>releaseç‰ˆæœ¬</li><li>debugç‰ˆæœ¬</li></ul><p>gccå’Œg++é»˜è®¤ç¼–è¯‘ç”Ÿæˆçš„æ˜¯releaseç‰ˆæœ¬ï¼Œreleaseç‰ˆæœ¬ä¸å¸¦æœ‰è°ƒè¯•ä¿¡æ¯ï¼Œé€šå¸¸ä½“ç§¯æ›´å°ã€‚</p><p>è€Œå¦‚æœåœ¨ç¼–è¯‘æ—¶å¸¦ä¸Š&quot;-g&quot;å‚æ•°ï¼Œé‚£ä¹ˆç¼–è¯‘ç”Ÿæˆçš„å°±æ˜¯debugç‰ˆæœ¬ã€‚debugç‰ˆæœ¬å¸¦æœ‰è°ƒè¯•ä¿¡æ¯ï¼Œä½“ç§¯é€šå¸¸ä¼šæ›´å¤§ã€‚</p><p>å¦‚æœä½ æƒ³å¯¹ä¸€ä¸ªC/C++çš„ç¼–è¯‘æ–‡ä»¶è¿›è¡Œè°ƒè¯•ï¼Œé‚£ä¹ˆå®ƒå¿…é¡»æ˜¯debugç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯ç¼–è¯‘æ—¶å¸¦äº†&quot;-g&quot;å‚æ•°ï¼Œå¸¦æœ‰è°ƒè¯•ä¿¡æ¯çš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p><p>æœ‰ä¸€ä¸ªç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä½ ä¸ç¡®å®šæ˜¯ä¸æ˜¯debugç‰ˆæœ¬ï¼Œæ˜¯å¦å¸¦æœ‰è°ƒè¯•ä¿¡æ¯ï¼Œæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥ç¡®å®šã€‚</p><ol><li>ä½¿ç”¨ gdb å‘½ä»¤</li></ol><ul><li>ä¸å¸¦æœ‰è°ƒè¯•ä¿¡æ¯ï¼ˆreleaseï¼‰</li></ul><p>å¯¹äºä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶testï¼Œæ‰§è¡Œgdb testå‘½ä»¤åï¼Œå¦‚æœå…¶ä¸æ˜¯debugç‰ˆæœ¬ï¼Œä¸å¸¦æœ‰è°ƒè¯•ä¿¡æ¯ï¼Œé‚£ä¹ˆå°±ä¼šæ˜¾ç¤ºï¼š</p><pre><code>Reading symbols from test...(No debugging symbols found in test)</code></pre><p>ï¼ˆå½“ç„¶è¿˜æœ‰å…¶ä»–çš„ä¸€äº›ä¿¡æ¯ä¼šæ˜¾ç¤ºï¼Œå¦‚gdbç‰ˆæœ¬ç­‰ç­‰ã€‚ï¼‰</p><ul><li>å¸¦æœ‰è°ƒè¯•ä¿¡æ¯ï¼ˆdebugï¼‰</li></ul><p>å¦‚æœå¸¦æœ‰è°ƒè¯•ä¿¡æ¯ï¼Œæ˜¯debugç‰ˆæœ¬ï¼Œé‚£ä¹ˆä¼šæ˜¾ç¤ºï¼š</p><pre><code>Reading symbols from test...</code></pre><p>ä¹Ÿå°±æ˜¯æ¯”ä¸å¸¦æœ‰è°ƒè¯•ä¿¡æ¯çš„å°‘ä¸€è¡Œ<code>(No debugging symbols found in test)</code>æç¤ºã€‚</p><ol start="2"><li>ä½¿ç”¨ readelf å‘½ä»¤</li></ol><p>è¿˜å¯ä»¥ä½¿ç”¨å‘½ä»¤readlefæŸ¥çœ‹å¯æ‰§è¡Œæ–‡ä»¶æ˜¯å¦å¸¦æœ‰è°ƒè¯•åŠŸèƒ½ã€‚</p><ul><li>ä¸å¸¦æœ‰è°ƒè¯•ä¿¡æ¯ï¼ˆreleaseï¼‰</li></ul><p>å¯¹äºä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶testï¼Œæ‰§è¡Œ<code>readelf -S test | grep debug</code>å‘½ä»¤åï¼Œå¦‚æœå…¶ä¸æ˜¯debugç‰ˆæœ¬ï¼Œä¸å¸¦æœ‰è°ƒè¯•ä¿¡æ¯ï¼Œé‚£ä¹ˆä¸ä¼šæ˜¾ç¤ºä»»ä½•å†…å®¹ã€‚</p><ul><li>å¸¦æœ‰è°ƒè¯•ä¿¡æ¯ï¼ˆdebugï¼‰</li></ul><p>å¯¹äºä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶testï¼Œæ‰§è¡Œ<code>readelf -S test | grep debug</code>å‘½ä»¤åï¼Œå¦‚æœæ˜¯debugç‰ˆæœ¬ï¼Œå¸¦æœ‰è°ƒè¯•ä¿¡æ¯ï¼Œé‚£ä¹ˆç±»ä¼¼äºä»¥ä¸‹çš„å†…å®¹ï¼š</p><pre><code>[28] .debug_aranges    PROGBITS         0000000000000000  0000303b[29] .debug_info       PROGBITS         0000000000000000  0000306b[30] .debug_abbrev     PROGBITS         0000000000000000  00005429[31] .debug_line       PROGBITS         0000000000000000  000059df[32] .debug_str        PROGBITS         0000000000000000  00005b41[33] .debug_line_str   PROGBITS         0000000000000000  00006cfb</code></pre><p>æ€»ä¹‹å¸¦è°ƒè¯•ä¿¡æ¯çš„ä¼šæ˜¾ç¤ºå†…å®¹ï¼Œä¸å¸¦è°ƒè¯•ä¿¡æ¯çš„ä¸æ˜¾ç¤ºä»»ä½•å†…å®¹ã€‚</p><h1>2. GDB å‘½ä»¤æ±‡æ€»</h1><table><thead><tr><th>æŒ‡ä»¤</th><th>å…¨ç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>l</code></td><td><code>list</code></td><td>æ˜¾ç¤ºå¯¹åº”çš„ä»£ç ï¼Œæ¯æ¬¡10è¡Œã€‚å¯ä»¥æŒ‡å®šè¡Œå·æˆ–å‡½æ•°åã€‚</td></tr><tr><td><code>r</code></td><td><code>run</code></td><td>æ— æ–­ç‚¹ç›´æ¥è¿è¡Œåˆ°åº•ï¼Œæœ‰æ–­ç‚¹å°±è¿è¡Œåˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹ç„¶ååœæ­¢ã€‚</td></tr><tr><td><code>b</code></td><td><code>breakpoint</code></td><td>åœ¨æŒ‡å®šè¡Œå·æˆ–å‡½æ•°çš„ç¬¬ä¸€è¡Œæ‰“ä¸Šæ–­ç‚¹ã€‚</td></tr><tr><td><code>b æºæ–‡ä»¶:å‡½æ•°å</code></td><td><code>breakpoint</code></td><td>åœ¨è¯¥å‡½æ•°çš„ç¬¬ä¸€è¡Œæ‰“ä¸Šæ–­ç‚¹ã€‚</td></tr><tr><td><code>b æºæ–‡ä»¶:è¡Œå·</code></td><td><code>breakpoint</code></td><td>åœ¨è¯¥æºæ–‡ä»¶ä¸­çš„æŒ‡å®šè¡Œå·æ‰“ä¸Šæ–­ç‚¹ã€‚</td></tr><tr><td><code>info b</code></td><td><code>info breakpoints</code></td><td>æŸ¥çœ‹æ–­ç‚¹çš„ä¿¡æ¯ã€‚</td></tr><tr><td><code>d</code></td><td><code>delete</code></td><td>åˆ é™¤æŒ‡å®šç¼–å·çš„æ–­ç‚¹ã€‚</td></tr><tr><td><code>d breakpoints</code></td><td><code>delete breakpoints</code></td><td>åˆ é™¤æ‰€æœ‰çš„æ–­ç‚¹ã€‚</td></tr><tr><td><code>disable b</code></td><td><code>disable breakpoints</code></td><td>ä½¿æ‰€æœ‰æ–­ç‚¹æ— æ•ˆã€‚</td></tr><tr><td><code>disable b ç¼–å·</code></td><td><code>disable breakpoint</code></td><td>ä½¿æŒ‡å®šç¼–å·çš„æ–­ç‚¹æ— æ•ˆã€‚</td></tr><tr><td><code>enable b</code></td><td><code>enable breakpoints</code></td><td>ä½¿æ‰€æœ‰æ–­ç‚¹æœ‰æ•ˆã€‚</td></tr><tr><td><code>enable b ç¼–å·</code></td><td><code>enable breakpoint</code></td><td>ä½¿æŒ‡å®šç¼–å·çš„æ–­ç‚¹æœ‰æ•ˆã€‚</td></tr><tr><td><code>n</code></td><td><code>next</code></td><td>é€è¿‡ç¨‹ã€‚</td></tr><tr><td><code>s</code></td><td><code>step</code></td><td>å•æ­¥è°ƒè¯•ã€‚</td></tr><tr><td><code>bt</code></td><td><code>backtrace</code></td><td>æŸ¥çœ‹å‡½æ•°è°ƒç”¨ã€‚</td></tr><tr><td><code>set var</code></td><td><code>set variable</code></td><td>ä¿®æ”¹å˜é‡çš„å€¼ã€‚</td></tr><tr><td><code>p</code></td><td><code>print</code></td><td>æ‰“å°å˜é‡çš„å€¼ã€‚</td></tr><tr><td><code>display</code></td><td><code>display</code></td><td>è¿½è¸ªå˜é‡ï¼Œæ¯æ¬¡åœä¸‹æ¥éƒ½æ˜¾ç¤ºå®ƒçš„å€¼ã€‚</td></tr><tr><td><code>undisplay</code></td><td><code>undisplay</code></td><td>å–æ¶ˆè¿½è¸ªã€‚</td></tr><tr><td><code>until</code></td><td><code>until</code></td><td>ç»§ç»­æ‰§è¡Œï¼Œç›´è‡³ä¸‹ä¸€ä¸ªæ–­ç‚¹å¤„åœæ­¢ã€‚</td></tr><tr><td><code>finish</code></td><td><code>finish</code></td><td>å•æ­¥è·³å‡ºï¼Œæ‰§è¡Œå®Œå½“å‰æ‰€åœ¨å‡½æ•°ååœæ­¢ã€‚</td></tr><tr><td><code>c</code></td><td><code>continue</code></td><td>ä»ä¸€ä¸ªæ–­ç‚¹å¤„ï¼Œç›´æ¥è¿è¡Œè‡³ä¸‹ä¸€ä¸ªæ–­ç‚¹å¤„ã€‚</td></tr></tbody></table><h1>3. GDBè°ƒè¯•å®è·µ</h1><h2 id="3-1-ç¼–è¯‘å‡ºdebugç‰ˆæœ¬çš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶">3.1 ç¼–è¯‘å‡ºdebugç‰ˆæœ¬çš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶</h2><p>ä»¥ä¸‹æ˜¯å°†è¦ç”¨äºè°ƒè¯•çš„C++ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// test.cpp</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Œç”¨äºè®¡ç®—é˜¶ä¹˜</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">factorial</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> n * <span class="built_in">factorial</span>(n - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºæ¼”ç¤ºæŒ‡é’ˆæ“ä½œ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pointerDemo</span><span class="params">(<span class="type">int</span>* ptr)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (ptr != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        *ptr = <span class="number">100</span>; <span class="comment">// ä¿®æ”¹æŒ‡é’ˆæŒ‡å‘çš„å€¼</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> num = <span class="number">5</span>;</span><br><span class="line">    <span class="type">int</span> result = <span class="built_in">factorial</span>(num); <span class="comment">// è®¡ç®—é˜¶ä¹˜</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Factorial of &quot;</span> &lt;&lt; num &lt;&lt; <span class="string">&quot; is: &quot;</span> &lt;&lt; result &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> value = <span class="number">10</span>;</span><br><span class="line">    <span class="type">int</span>* ptr = &amp;value;</span><br><span class="line">    <span class="built_in">pointerDemo</span>(ptr); <span class="comment">// æ¼”ç¤ºæŒ‡é’ˆæ“ä½œ</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Value after pointerDemo: &quot;</span> &lt;&lt; value &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸€ä¸ªç®€å•çš„å¾ªç¯</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Loop iteration: &quot;</span> &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŠ¨æ€å†…å­˜åˆ†é…</span></span><br><span class="line">    <span class="type">int</span>* arr = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">3</span>];</span><br><span class="line">    arr[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">1</span>] = <span class="number">2</span>;</span><br><span class="line">    arr[<span class="number">2</span>] = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Array values: &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">        cout &lt;&lt; arr[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">delete</span>[] arr; <span class="comment">// é‡Šæ”¾åŠ¨æ€å†…å­˜</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g++ -o <span class="built_in">test</span> test.cpp -g</span><br></pre></td></tr></table></figure><p>è¿›è¡Œç¼–è¯‘å¯å¾—å¸¦è°ƒè¯•ä¿¡æ¯çš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶testã€‚</p><h2 id="3-2-å¯åŠ¨GDB">3.2 å¯åŠ¨GDB</h2><p>å¯ä»¥ä½¿ç”¨gdb [è¦è°ƒè¯•çš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶åç§°]å¦‚gdb testæ¥å¯åŠ¨gdbè°ƒè¯•ï¼Œæ­¤æ—¶ä¼šè¿›å…¥gdbçš„å‘½ä»¤è¡Œã€‚ä¹Ÿå¯ä»¥ç›´æ¥è¾“å…¥gdbå›è½¦è¿›å…¥gdbå‘½ä»¤è¡Œåè¾“å…¥file teståå›è½¦æ¥è°ƒè¯•testã€‚</p><h2 id="3-3-éƒ¨åˆ†å‘½ä»¤è¯¦è§£">3.3 éƒ¨åˆ†å‘½ä»¤è¯¦è§£</h2><h3 id="3-3-1-list">3.3.1 list</h3><p>ç®€å†™ä¸ºlï¼ˆå°å†™Lï¼‰ï¼Œè¾“å…¥åä¾¿ä¼šå±•ç¤º10è¡Œä»£ç ï¼Œç¬¬ä¸€æ¬¡ä½¿ç”¨ä¼šéšæœºå±•ç¤ºè¿ç»­çš„10è¡Œä»£ç ã€‚</p><p>å¦‚æœè¾“å…¥<code>l [å‡½æ•°å]</code>ï¼Œé‚£ä¹ˆå°±ä¼šå±•ç¤ºå‡½æ•°åæ‰€åœ¨çš„ä¸Šé¢5è¡Œå’ŒåŒ…æ‹¬å‡½æ•°åæ‰€åœ¨è¡Œåœ¨å†…çš„ä¸‹é¢5è¡Œï¼Œè‡³å°‘10è¡Œã€‚</p><p>å¦‚æœè¾“å…¥<code>l [è¡Œå·]</code>ï¼Œé‚£ä¹ˆå°±ä¼šå±•ç¤ºé‚£è¡Œä»£ç æ‰€åœ¨çš„ä¸Šé¢5è¡Œå’ŒåŒ…æ‹¬é‚£è¡Œè¡Œåœ¨å†…çš„ä¸‹é¢5è¡Œï¼Œè‡³å°‘10è¡Œã€‚</p><p>å¦‚æœç»§ç»­æŒ‰ä½<code>Enter</code>ï¼Œé‚£ä¹ˆä¼šå±•ç¤ºæ¥ä¸‹æ¥çš„å‡ è¡Œä»£ç ã€‚å› ä¸ºgdbä¼šè‡ªåŠ¨è®°å¿†ä½ ä¸Šæ¬¡æ•²å…¥çš„æŒ‡ä»¤ã€‚</p><h3 id="3-3-2-breakpointï¼ˆæ’å…¥æ–­ç‚¹ï¼‰">3.3.2 breakpointï¼ˆæ’å…¥æ–­ç‚¹ï¼‰</h3><p>ç®€å†™ä¸ºbã€‚</p><pre><code>b è¡Œå· â€”â€” åœ¨é‚£ä¸€è¡Œæ‰“æ–­ç‚¹</code></pre><p>å¦‚<code>b 20</code>å°±æ˜¯åœ¨ç¬¬20è¡Œæ‰“ä¸Šæ–­ç‚¹ã€‚</p><pre><code>b æºæ–‡ä»¶ï¼šå‡½æ•°å â€”â€” åœ¨è¯¥å‡½æ•°çš„ç¬¬ä¸€è¡Œæ‰“ä¸Šæ–­ç‚¹</code></pre><p>å¦‚<code>b test.cpp: main</code>å°±æ˜¯åœ¨æºæ–‡ä»¶çš„è¯¥å‡½æ•°çš„ç¬¬ä¸€è¡Œæ‰“ä¸Šæ–­ç‚¹ã€‚</p><pre><code>b æºæ–‡ä»¶ï¼šè¡Œå· â€”â€” åœ¨è¯¥æºæ–‡ä»¶ä¸­çš„è¿™è¡ŒåŠ ä¸Šä¸€ä¸ªæ–­ç‚¹</code></pre><p>å¦‚<code>b test.cpp: 20</code>å°±æ˜¯åœ¨æºæ–‡ä»¶çš„ç¬¬20è¡Œæ‰“ä¸Šæ–­ç‚¹ã€‚</p><h3 id="3-3-3-info">3.3.3 info</h3><p>ç›´æ¥æ‰§è¡Œinfoå‘½ä»¤ï¼Œå°±ä¼šæ˜¾ç¤ºæ‰€æœ‰çš„è°ƒè¯•ä¿¡æ¯ã€‚</p><pre><code>info b â€”â€” æŸ¥çœ‹æ–­ç‚¹çš„ä¿¡æ¯</code></pre><p>info bä¼šå±•ç¤ºä»¥ä¸‹ä¿¡æ¯ï¼š</p><pre><code>Num â€”â€” ç¼–å·Type â€”â€” ç±»å‹Disp â€”â€” çŠ¶æ€Enb â€”â€” æ˜¯å¦å¯ç”¨Address â€”â€” åœ°å€What â€”â€” åœ¨æ­¤æ–‡ä»¶çš„å“ªä¸ªå‡½æ•°ä»¥åŠæ­¤æ–‡ä»¶çš„ç¬¬å‡ è¡Œ</code></pre><h3 id="3-3-4-åˆ é™¤æ–­ç‚¹">3.3.4 åˆ é™¤æ–­ç‚¹</h3><pre><code>d ç¼–å· â€”â€” åˆ é™¤æ­¤ç¼–å·çš„æ–­ç‚¹d â€”â€” åˆ é™¤æ‰€æœ‰æ–­ç‚¹</code></pre><h3 id="3-3-5-å¼€å¯-ç¦ç”¨æ–­ç‚¹">3.3.5 å¼€å¯/ç¦ç”¨æ–­ç‚¹</h3><pre><code>disable b â€”â€” ä½¿æ‰€æœ‰æ–­ç‚¹æ— æ•ˆdisable b ç¼–å· â€”â€” ä½¿æ­¤ç¼–å·çš„æ–­ç‚¹æ— æ•ˆenable b â€”â€” ä½¿æ‰€æœ‰æ–­ç‚¹æœ‰æ•ˆenable b ç¼–å· â€”â€” ä½¿æ­¤ç¼–å·çš„æ–­ç‚¹æœ‰æ•ˆ</code></pre><h3 id="3-3-6-run">3.3.6 run</h3><p>ç®€å†™ä¸ºrï¼Œæ— æ–­ç‚¹ç›´æ¥è¿è¡Œåˆ°åº•ï¼Œæœ‰æ–­ç‚¹å°±è¿è¡Œåˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹ç„¶ååœæ­¢ã€‚</p><h3 id="3-3-7-é€è¿‡ç¨‹-å’Œ-å•æ­¥è°ƒè¯•">3.3.7 é€è¿‡ç¨‹ å’Œ å•æ­¥è°ƒè¯•</h3><p>nextç®€å†™ä¸ºnï¼Œä¸ºé€è¿‡ç¨‹ï¼Œä¼šä¸€è¡Œä¸€è¡Œåœ°æ‰§è¡Œæºæ–‡ä»¶ä¸­çš„ä»£ç ã€‚</p><p>stepç®€å†™ä¸ºsï¼Œä¸ºå•æ­¥è°ƒè¯•ï¼Œä¹Ÿæ˜¯ä¸€è¡Œä¸€è¡Œåœ°æ‰§è¡Œæºæ–‡ä»¶ä¸­çš„ä»£ç ï¼Œä¸åŒçš„æ˜¯ï¼Œå®ƒè¿˜ä¼šè·³è½¬åº“å‡½æ•°çš„ä»£ç ã€‚</p><h3 id="3-3-8-æ‰“å°-å’Œ-è¿½è¸ª">3.3.8 æ‰“å° å’Œ è¿½è¸ª</h3><p>printç®€å†™ä¸ºpï¼Œä¸ºæ‰“å°</p><pre><code>p å˜é‡å â€”â€” æ‰“å°å˜é‡å€¼</code></pre><p>displayï¼Œä¸ºè¿½è¸ª</p><pre><code>display å˜é‡å â€”â€” è¿½è¸ªæŸ¥çœ‹ä¸€ä¸ªå˜é‡ï¼Œæ¯æ¬¡åœä¸‹æ¥éƒ½æ˜¾ç¤ºå®ƒçš„å€¼</code></pre><p>undisplayä¸ºå–æ¶ˆè¿½è¸ª</p><pre><code>undisplay + å˜é‡åç¼–å· â€”â€” å–æ¶ˆå¯¹è¯¥ç¼–å·å˜é‡çš„è·Ÿè¸ª</code></pre><h3 id="3-3-9-bt">3.3.9 bt</h3><p>btå‘½ä»¤ç”¨äºæŸ¥çœ‹å½“å‰è°ƒç”¨äº†å“ªäº›å‡½æ•°ã€‚</p><h3 id="3-3-10-ä¿®æ”¹å˜é‡çš„å€¼">3.3.10 ä¿®æ”¹å˜é‡çš„å€¼</h3><pre><code>set var â€”â€” ä¿®æ”¹å˜é‡çš„å€¼</code></pre><p>å¦‚<code>set var i = 0</code>å°±æ˜¯å°†å˜é‡içš„å€¼è®¾ä¸º0ã€‚</p><h3 id="3-3-11-until">3.3.11 until</h3><pre><code>until è¡Œå· â€”â€” ç»§ç»­æ‰§è¡Œå½“å‰ä»£ç ï¼Œç›´åˆ°æ‰§è¡Œåˆ°è¯¥è¡Œå·ä¸ºæ­¢ã€‚</code></pre><h3 id="3-3-12-finish">3.3.12 finish</h3><pre><code>finish â€”â€” æ‰§è¡Œå®Œå½“å‰æ‰€åœ¨å‡½æ•°ååœæ­¢ã€‚</code></pre><p>finishåº”è¯¥å°±æ˜¯å•æ­¥è·³å‡ºäº†ã€‚</p><h3 id="3-3-13-continue">3.3.13 continue</h3><p>ç®€å†™ä¸ºcã€‚</p><pre><code>c â€”â€” ç»§ç»­æ‰§è¡Œï¼Œç›´è‡³ä¸‹ä¸€ä¸ªæ–­ç‚¹å¤„åœæ­¢ã€‚</code></pre>]]></content>
      
      
      <categories>
          
          <category> C/C++ é‚£äº›äº‹å„¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C/C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å·¦å€¼å¼•ç”¨ ä¸ å³å€¼å¼•ç”¨</title>
      <link href="/2025/03/05/cpp-interview3/"/>
      <url>/2025/03/05/cpp-interview3/</url>
      
        <content type="html"><![CDATA[<p>æ¥å¤ä¹ æ€»ç»“ä¸€ä¸‹å·¦å€¼å¼•ç”¨ä¸å³å€¼å¼•ç”¨ã€‚</p><p>å·¦å€¼å¼•ç”¨å’Œå³å€¼å¼•ç”¨æ˜¯ C++ ä¸­ç”¨äºç®¡ç†å¯¹è±¡ç”Ÿå‘½å‘¨æœŸçš„ä¸¤ç§å¼•ç”¨ç±»å‹ï¼Œä¸»è¦åŒºåˆ«åœ¨äºå®ƒä»¬ç»‘å®šçš„å¯¹è±¡ç±»å‹å’Œä½¿ç”¨åœºæ™¯</p><h1>å·¦å€¼å¼•ç”¨ï¼ˆLvalue Referenceï¼‰</h1><ol><li>å®šä¹‰</li></ol><p>ç”¨ &amp; å£°æ˜çš„å¼•ç”¨ï¼Œåªèƒ½ç»‘å®šåˆ° å·¦å€¼ï¼ˆæœ‰åå­—ã€æœ‰å†…å­˜åœ°å€çš„å¯¹è±¡ï¼‰ã€‚</p><ol start="2"><li>ç‰¹ç‚¹</li></ol><ul><li>å·¦å€¼å¯¹è±¡é€šå¸¸å¯ä»¥è¢«ä¿®æ”¹ï¼ˆé™¤éè¢« const ä¿®é¥°ï¼‰ã€‚</li><li>å¸¸ç”¨äºå‡½æ•°å‚æ•°ä¼ é€’ï¼ˆé¿å…æ‹·è´ï¼‰æˆ–ä¸ºç°æœ‰å¯¹è±¡èµ·åˆ«åã€‚</li></ul><p>ä¸¾ä¸ªæ —å­ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span>&amp; ref_a = a;  <span class="comment">// æ­£ç¡®ï¼šå·¦å€¼å¼•ç”¨ç»‘å®šå·¦å€¼</span></span><br><span class="line"><span class="comment">// int&amp; ref_b = 10;  // é”™è¯¯ï¼šä¸èƒ½ç»‘å®šåˆ°å³å€¼ï¼ˆå­—é¢é‡ï¼‰</span></span><br></pre></td></tr></table></figure><h1>å³å€¼å¼•ç”¨ï¼ˆRvalue Referenceï¼‰</h1><ol><li>å®šä¹‰</li></ol><p>ç”¨ &amp;&amp; å£°æ˜çš„å¼•ç”¨ï¼Œåªèƒ½ç»‘å®šåˆ° å³å€¼ï¼ˆä¸´æ—¶å¯¹è±¡ã€å­—é¢é‡ã€å³å°†é”€æ¯çš„å¯¹è±¡ï¼‰ã€‚<br>2. ç‰¹ç‚¹</p><ul><li>C++11 å¼•å…¥ï¼Œç”¨äºå®ç°<code>ç§»åŠ¨è¯­ä¹‰</code>å’Œ<code>å®Œç¾è½¬å‘</code>ã€‚</li><li>å…è®¸â€œçªƒå–â€å³å€¼çš„èµ„æºï¼ˆå¦‚åŠ¨æ€å†…å­˜ï¼‰ï¼Œé¿å…ä¸å¿…è¦çš„æ‹·è´ã€‚</li></ul><p>ä¸¾ä¸ªæ —å­ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>&amp;&amp; rref = <span class="number">10</span>;  <span class="comment">// æ­£ç¡®ï¼šå³å€¼å¼•ç”¨ç»‘å®šå³å€¼</span></span><br><span class="line"><span class="comment">// int&amp;&amp; rref2 = a;  // é”™è¯¯ï¼šä¸èƒ½ç›´æ¥ç»‘å®šå·¦å€¼</span></span><br></pre></td></tr></table></figure><h1>å·¦å€¼å¼•ç”¨ä¸å³å€¼å¼•ç”¨çš„åŒºåˆ«</h1><table><thead><tr><th>ç‰¹æ€§</th><th>å·¦å€¼å¼•ç”¨ (&amp;)</th><th>å³å€¼å¼•ç”¨ (&amp;&amp;)</th></tr></thead><tbody><tr><td>ç»‘å®šå¯¹è±¡ç±»å‹</td><td>å·¦å€¼ï¼ˆæŒä¹…å¯¹è±¡ï¼‰</td><td>å³å€¼ï¼ˆä¸´æ—¶å¯¹è±¡ï¼‰</td></tr><tr><td>å¯ä¿®æ”¹æ€§</td><td>å…è®¸ä¿®æ”¹ï¼ˆé™¤é constï¼‰</td><td>å…è®¸ä¿®æ”¹</td></tr><tr><td>ä¸»è¦ç”¨é€”</td><td>é¿å…æ‹·è´ã€åˆ«å</td><td>ç§»åŠ¨è¯­ä¹‰ã€å®Œç¾è½¬å‘</td></tr></tbody></table><h1>åº”ç”¨åœºæ™¯</h1><ol><li>ç§»åŠ¨è¯­ä¹‰ï¼ˆMove Semanticsï¼‰</li></ol><p>å³å€¼å¼•ç”¨å…è®¸å°†èµ„æºï¼ˆå¦‚å †å†…å­˜ï¼‰ä»ä¸´æ—¶å¯¹è±¡â€œç§»åŠ¨â€åˆ°æ–°å¯¹è±¡ï¼Œé¿å…æ·±æ‹·è´ã€‚</p><p>å‡è®¾æœ‰ä¸€ä¸ªç®¡ç†åŠ¨æ€æ•°ç»„çš„ç±» MyArrayï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyArray</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MyArray</span>(<span class="type">size_t</span> size) : <span class="built_in">size_</span>(size), <span class="built_in">data_</span>(<span class="keyword">new</span> <span class="type">int</span>[size]) &#123;&#125;</span><br><span class="line">    ~<span class="built_in">MyArray</span>() &#123; <span class="keyword">delete</span>[] data_; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">size_t</span> size_;</span><br><span class="line">    <span class="type">int</span>* data_;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å½“å‘ç”Ÿæ‹·è´æ—¶ï¼ˆå¦‚ MyArray b = aï¼‰ï¼Œé»˜è®¤çš„æ‹·è´æ„é€ å‡½æ•°ä¼šæ‰§è¡Œæµ…æ‹·è´ï¼Œå¯¼è‡´ä¸¤ä¸ªå¯¹è±¡å…±äº«åŒä¸€å—å†…å­˜ï¼Œå¼•å‘åŒé‡é‡Šæ”¾ç­‰é—®é¢˜ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦ï¼š</p><ul><li>æ·±æ‹·è´ï¼šæ˜¾å¼å®ç°æ‹·è´æ„é€ å‡½æ•°ï¼Œå¤åˆ¶æ•°æ®ï¼ˆå®‰å…¨ä½†æ€§èƒ½å·®ï¼‰ã€‚</li><li>ç§»åŠ¨è¯­ä¹‰ï¼šç›´æ¥â€œçªƒå–â€ä¸´æ—¶å¯¹è±¡çš„èµ„æºï¼ˆé«˜æ•ˆä¸”å®‰å…¨ï¼‰ã€‚</li></ul><p>ç§»åŠ¨è¯­ä¹‰çš„<code>æ ¸å¿ƒæœºåˆ¶</code><br>ï¼ˆ1ï¼‰å³å€¼å¼•ç”¨ï¼ˆ&amp;&amp;ï¼‰<br>å³å€¼å¼•ç”¨åªèƒ½ç»‘å®šåˆ°å³å€¼ï¼ˆä¸´æ—¶å¯¹è±¡ã€å­—é¢é‡ã€std::move è½¬æ¢åçš„å¯¹è±¡ï¼‰ã€‚<br>æ¯”å¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MyArray&amp;&amp; rref = <span class="built_in">MyArray</span>(<span class="number">100</span>);  <span class="comment">// ç»‘å®šåˆ°ä¸´æ—¶å¯¹è±¡ï¼ˆå³å€¼ï¼‰</span></span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦</p><ul><li>ç§»åŠ¨æ„é€ å‡½æ•°ï¼šæ¥å—å³å€¼å¼•ç”¨å‚æ•°ï¼Œç›´æ¥è½¬ç§»èµ„æºã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">MyArray</span>(MyArray&amp;&amp; other) <span class="keyword">noexcept</span> </span><br><span class="line">    : <span class="built_in">size_</span>(other.size_), <span class="built_in">data_</span>(other.data_) &#123;</span><br><span class="line">    other.size_ = <span class="number">0</span>;        <span class="comment">// åŸå¯¹è±¡ç½®ç©º</span></span><br><span class="line">    other.data_ = <span class="literal">nullptr</span>;   <span class="comment">// é˜²æ­¢åŸå¯¹è±¡ææ„æ—¶é‡Šæ”¾èµ„æº</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ï¼š</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">MyArray&amp; <span class="keyword">operator</span>=(MyArray&amp;&amp; other) <span class="keyword">noexcept</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span> != &amp;other) &#123;</span><br><span class="line">        <span class="keyword">delete</span>[] data_;      <span class="comment">// é‡Šæ”¾å½“å‰èµ„æº</span></span><br><span class="line">        data_ = other.data_; <span class="comment">// çªƒå–èµ„æº</span></span><br><span class="line">        size_ = other.size_;</span><br><span class="line">        other.data_ = <span class="literal">nullptr</span>;</span><br><span class="line">        other.size_ = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆä½•æ—¶ä¼šè§¦å‘ç§»åŠ¨è¯­ä¹‰ï¼Ÿ</p><p>åœºæ™¯ 1ï¼šä¼ é€’ä¸´æ—¶å¯¹è±¡</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">MyArray <span class="title">createArray</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">MyArray <span class="title">arr</span><span class="params">(<span class="number">1000</span>)</span></span>;</span><br><span class="line">    <span class="keyword">return</span> arr;  <span class="comment">// è¿”å›æ—¶ï¼Œarr æ˜¯å³å€¼ï¼Œè§¦å‘ç§»åŠ¨æ„é€ å‡½æ•°ï¼ˆè€Œéæ‹·è´ï¼‰</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyArray a = <span class="built_in">createArray</span>();  <span class="comment">// ç§»åŠ¨æ„é€ </span></span><br></pre></td></tr></table></figure><p>åœºæ™¯ 2ï¼šæ˜¾å¼ä½¿ç”¨ std::move</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">MyArray <span class="title">a</span><span class="params">(<span class="number">1000</span>)</span></span>;</span><br><span class="line">MyArray b = std::<span class="built_in">move</span>(a);  <span class="comment">// å°†å·¦å€¼ a è½¬ä¸ºå³å€¼ï¼Œè§¦å‘ç§»åŠ¨æ„é€ </span></span><br><span class="line"><span class="comment">// æ­¤æ—¶ a.data_ = nullptrï¼Œa ä¸å¯å†ä½¿ç”¨ï¼</span></span><br></pre></td></tr></table></figure><p>åœºæ™¯ 3ï¼šæ ‡å‡†åº“ä¼˜åŒ–ï¼ˆå¦‚ vector::push_backï¼‰</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">std::vector&lt;MyArray&gt; vec;</span><br><span class="line">vec.<span class="built_in">push_back</span>(<span class="built_in">MyArray</span>(<span class="number">1000</span>));  <span class="comment">// ä¼ é€’å³å€¼ï¼Œè§¦å‘ç§»åŠ¨æ„é€ </span></span><br></pre></td></tr></table></figure><ol start="2"><li>å®Œç¾è½¬å‘ï¼ˆPerfect Forwardingï¼‰</li></ol><p>ç»“åˆ std::forward ä¿æŒå‚æ•°çš„å€¼ç±»åˆ«ï¼ˆå·¦å€¼/å³å€¼ï¼‰ï¼Œæ˜¯ C++ ä¸­å®ç°å®Œç¾è½¬å‘çš„æ ¸å¿ƒæœºåˆ¶ï¼Œç”¨äºæ³›å‹ç¼–ç¨‹ã€‚</p><p>å‡è®¾ä½ å†™äº†ä¸€ä¸ªæ³›å‹åŒ…è£…å‡½æ•° wrapperï¼Œå®ƒéœ€è¦å°†å‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•° processï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">wrapper</span><span class="params">(T&amp;&amp; arg)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">process</span>(arg);   <span class="comment">// ç›´æ¥ä¼ é€’arg</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼šæ— è®º arg åŸå§‹æ˜¯å·¦å€¼è¿˜æ˜¯å³å€¼ï¼Œåœ¨ wrapper å†…éƒ¨ï¼Œarg å§‹ç»ˆæ˜¯å·¦å€¼ï¼ˆå› ä¸ºå®ƒæœ‰åå­—ï¼Œå¯ä»¥å–åœ°å€ï¼‰ã€‚å› æ­¤ï¼Œprocess æ°¸è¿œåªèƒ½æ”¶åˆ°å·¦å€¼ï¼Œæ— æ³•è§¦å‘å³å€¼é‡è½½çš„ä¼˜åŒ–ï¼ˆå¦‚ç§»åŠ¨è¯­ä¹‰ï¼‰ã€‚</p><p>ä½¿ç”¨std::forwardå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚std::forwardçš„ä½œç”¨æ˜¯æ ¹æ®æ¨¡æ¿å‚æ•° T çš„ç±»å‹ï¼Œæœ‰æ¡ä»¶åœ°å°†å‚æ•°è½¬æ¢ä¸ºå·¦å€¼æˆ–å³å€¼ã€‚ä¿®æ”¹åçš„ wrapperï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">wrapper</span><span class="params">(T&amp;&amp; arg)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">process</span>(std::forward&lt;T&gt;(arg));  <span class="comment">// ä¿æŒ arg çš„åŸå§‹å€¼ç±»åˆ«</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼š</p><ul><li>å¦‚æœ arg åŸå§‹æ˜¯å·¦å€¼ï¼Œstd::forward<T> è¿”å›å·¦å€¼å¼•ç”¨ã€‚</li><li>å¦‚æœ arg åŸå§‹æ˜¯å³å€¼ï¼Œstd::forward<T> è¿”å›å³å€¼å¼•ç”¨ï¼Œä»è€Œå…è®¸ç§»åŠ¨è¯­ä¹‰ã€‚</li></ul><p>ä¸¾ä¸ªæ —å­ï¼š</p><p>å®šä¹‰ä¸¤ä¸ª process é‡è½½å‡½æ•°ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">process</span><span class="params">(<span class="type">int</span>&amp; x)</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;å¤„ç†å·¦å€¼: &quot;</span> &lt;&lt; x &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">process</span><span class="params">(<span class="type">int</span>&amp;&amp; x)</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;å¤„ç†å³å€¼: &quot;</span> &lt;&lt; x &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æƒ…å†µ 1ï¼šä¸ä½¿ç”¨ std::forward</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">bad_wrapper</span><span class="params">(T&amp;&amp; arg)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">process</span>(arg);  <span class="comment">// arg å§‹ç»ˆæ˜¯å·¦å€¼</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="built_in">bad_wrapper</span>(a);        <span class="comment">// è¾“å‡ºï¼šå¤„ç†å·¦å€¼: 10</span></span><br><span class="line">    <span class="built_in">bad_wrapper</span>(<span class="number">20</span>);       <span class="comment">// è¾“å‡ºï¼šå¤„ç†å·¦å€¼: 20 ï¼ˆä½† 20 æ˜¯å³å€¼ï¼ï¼‰</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ— è®ºä¼ å…¥å·¦å€¼è¿˜æ˜¯å³å€¼ï¼Œarg åœ¨ bad_wrapper å†…éƒ¨éƒ½æ˜¯å·¦å€¼ï¼Œå¯¼è‡´å³å€¼æ— æ³•è§¦å‘ç§»åŠ¨ä¼˜åŒ–ã€‚</p><p>æƒ…å†µ 2ï¼šä½¿ç”¨ std::forward</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">good_wrapper</span><span class="params">(T&amp;&amp; arg)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">process</span>(std::forward&lt;T&gt;(arg));  <span class="comment">// ä¿æŒåŸå§‹å€¼ç±»åˆ«</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="built_in">good_wrapper</span>(a);        <span class="comment">// è¾“å‡ºï¼šå¤„ç†å·¦å€¼: 10</span></span><br><span class="line">    <span class="built_in">good_wrapper</span>(<span class="number">20</span>);       <span class="comment">// è¾“å‡ºï¼šå¤„ç†å³å€¼: 20 ï¼ˆæ­£ç¡®è§¦å‘å³å€¼é‡è½½ï¼ï¼‰</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ std::forward æ ¹æ®ä¼ å…¥å‚æ•°çš„å€¼ç±»åˆ«ï¼Œæ­£ç¡®é€‰æ‹© process çš„å·¦å€¼æˆ–å³å€¼ç‰ˆæœ¬ã€‚</p><p>é‚£ä¹ˆ std::forward æ˜¯å¦‚ä½•åšåˆ°çš„å‘¢ï¼Ÿæ˜¯é å¼•ç”¨æŠ˜å è§„åˆ™ã€‚</p><p>å¼•ç”¨æŠ˜å è§„åˆ™<br>å½“æ¨¡æ¿å‚æ•° T æ¨å¯¼ä¸ºå·¦å€¼æˆ–å³å€¼æ—¶ï¼ŒT&amp;&amp; ä¼šè§¦å‘å¼•ç”¨æŠ˜å ï¼š</p><ul><li>å¦‚æœ T æ˜¯ X&amp;ï¼ˆå·¦å€¼å¼•ç”¨ï¼‰ï¼ŒT&amp;&amp; æŠ˜å ä¸º X&amp;ï¼ˆä»æ˜¯å·¦å€¼å¼•ç”¨ï¼‰ã€‚</li><li>å¦‚æœ T æ˜¯ X æˆ– X&amp;&amp;ï¼ŒT&amp;&amp; å˜ä¸º X&amp;&amp;ï¼ˆå³å€¼å¼•ç”¨ï¼‰ã€‚</li></ul><p>ç®€åŒ–ç‰ˆçš„ std::forward å®ç°ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function">T&amp;&amp; <span class="title">forward</span><span class="params">(<span class="keyword">typename</span> std::remove_reference&lt;T&gt;::type&amp; arg)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">static_cast</span>&lt;T&amp;&amp;&gt;(arg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœ T æ˜¯å·¦å€¼å¼•ç”¨ï¼ˆå¦‚ int&amp;ï¼‰ï¼ŒT&amp;&amp; æŠ˜å ä¸º int&amp;ï¼Œè¿”å›å·¦å€¼å¼•ç”¨ã€‚</li><li>å¦‚æœ T æ˜¯æ™®é€šç±»å‹ï¼ˆå¦‚ intï¼‰ï¼ŒT&amp;&amp; æ˜¯ int&amp;&amp;ï¼Œè¿”å›å³å€¼å¼•ç”¨ã€‚</li></ul><ol start="3"><li>ä¼˜åŒ–ä¸´æ—¶å¯¹è±¡</li></ol><p>é€šè¿‡ std::move å°†å·¦å€¼æ˜¾å¼è½¬æ¢ä¸ºå³å€¼å¼•ç”¨ï¼Œè§¦å‘ç§»åŠ¨æ“ä½œï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">std::vector&lt;std::string&gt; v1;</span><br><span class="line">std::string s = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">v<span class="number">1.</span><span class="built_in">push_back</span>(std::<span class="built_in">move</span>(s));  <span class="comment">// ç§»åŠ¨ s çš„èµ„æºåˆ° vectorï¼Œs å˜ä¸ºç©º</span></span><br></pre></td></tr></table></figure><h1>æ³¨æ„äº‹é¡¹</h1><ol><li>å³å€¼å¼•ç”¨æœ¬èº«æ˜¯å·¦å€¼<br>å³å€¼å¼•ç”¨å˜é‡æœ‰åå­—ï¼Œå› æ­¤æ˜¯å·¦å€¼ã€‚è‹¥éœ€ç»§ç»­ä¼ é€’å³å€¼ï¼Œéœ€ç”¨ std::move</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">process</span><span class="params">(<span class="type">int</span>&amp;&amp; x)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// x æ˜¯å·¦å€¼ï¼ˆæœ‰åå­—ï¼‰ï¼Œè‹¥éœ€ä¼ é€’ç»™å…¶ä»–å‡½æ•°ï¼Œéœ€è½¬ä¸ºå³å€¼</span></span><br><span class="line">    <span class="built_in">another_process</span>(std::<span class="built_in">move</span>(x));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>é¿å…æ»¥ç”¨ std::move<br>å¯¹å±€éƒ¨å˜é‡ä½¿ç”¨ std::move å¯èƒ½å¯¼è‡´æ„å¤–æ‚¬ç©ºå¼•ç”¨ã€‚</li></ol><p>ç§»åŠ¨åçš„å¯¹è±¡å¤„äºæœ‰æ•ˆä½†æœªå®šä¹‰çŠ¶æ€ï¼ˆé€šå¸¸è¢«ç½®ç©ºï¼‰ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">MyArray <span class="title">a</span><span class="params">(<span class="number">1000</span>)</span></span>;</span><br><span class="line">MyArray b = std::<span class="built_in">move</span>(a);</span><br><span class="line"><span class="comment">// a.data_ å˜ä¸º nullptrï¼Œä¸å¯å†è®¿é—® a çš„æ•°æ®ï¼</span></span><br></pre></td></tr></table></figure><ol start="3"><li><p>std::move çš„æœ¬è´¨<br>std::move åªæ˜¯å°†å¯¹è±¡å¼ºåˆ¶è½¬æ¢ä¸ºå³å€¼å¼•ç”¨ï¼Œæœ¬èº«ä¸æ‰§è¡Œä»»ä½•ç§»åŠ¨æ“ä½œã€‚çœŸæ­£çš„èµ„æºè½¬ç§»åœ¨ç§»åŠ¨æ„é€ å‡½æ•°æˆ–ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ä¸­å®Œæˆã€‚</p></li><li><p>å¼‚å¸¸å®‰å…¨<br>ç§»åŠ¨æ“ä½œåº”æ ‡è®°ä¸º noexceptï¼Œå¦åˆ™æŸäº›æ ‡å‡†åº“æ“ä½œï¼ˆå¦‚ vector æ‰©å®¹ï¼‰å¯èƒ½å›é€€åˆ°æ‹·è´è¯­ä¹‰ã€‚</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> C/C++ é¢è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ é‡Œçš„ lower_bound å’Œ upper_bound</title>
      <link href="/2025/03/04/chores1/"/>
      <url>/2025/03/04/chores1/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ C++ ä¸­ï¼Œlower_bound å’Œ upper_bound æ˜¯æ ‡å‡†åº“ <algorithm> ä¸­æä¾›çš„ä¸¤ä¸ªéå¸¸å®ç”¨çš„å‡½æ•°ï¼Œç”¨äºåœ¨å·²æ’åºçš„åºåˆ—ä¸­è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ã€‚å®ƒä»¬çš„åŠŸèƒ½å’Œç”¨æ³•éå¸¸ç›¸ä¼¼ï¼Œä½†åœ¨ç»†èŠ‚ä¸Šæœ‰ä¸€äº›åŒºåˆ«ã€‚</p><h1>ä½¿ç”¨æ¡ä»¶</h1><p>ç”±äº lower_bound å’Œ upper_bound åº•å±‚æ˜¯åŸºäºäºŒåˆ†æŸ¥æ‰¾çš„ï¼Œæ•…lower_bound å’Œ upper_bound éƒ½è¦æ±‚è¾“å…¥çš„åºåˆ—æ˜¯å·²æ’åºçš„ï¼ˆé»˜è®¤æ˜¯å‡åºï¼‰ã€‚</p><h1>lower_bound çš„åŠŸèƒ½</h1><p>lower_bound ç”¨äºåœ¨å·²æ’åºçš„åºåˆ—ä¸­æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå¤§äºæˆ–ç­‰äºç›®æ ‡å€¼çš„å…ƒç´ çš„ä½ç½®ã€‚é€šä¿—åœ°è®²ï¼Œå°±æ˜¯åœ¨è¿™ä¸ªåºåˆ—ä¸­ä¸ºç›®æ ‡å€¼æ‰¾ä¸€ä¸ªä½ç½®ã€‚</p><p>å‡½æ•°åŸå‹1ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> ForwardIterator, <span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function">ForwardIterator <span class="title">lower_bound</span><span class="params">(ForwardIterator first, ForwardIterator last, <span class="type">const</span> T&amp; value)</span></span>;</span><br></pre></td></tr></table></figure><p>å‡½æ•°åŸå‹2ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">ForwardIterator</span>, <span class="keyword">class</span> <span class="title class_">T</span>, <span class="keyword">class</span> <span class="title class_">Compare</span>&gt;</span><br><span class="line"><span class="function">ForwardIterator <span class="title">lower_bound</span> <span class="params">(ForwardIterator first, ForwardIterator last, <span class="type">const</span> T&amp; val, Compare comp)</span></span>;</span><br></pre></td></tr></table></figure><ul><li>first å’Œ lastï¼šå®šä¹‰æŸ¥æ‰¾èŒƒå›´çš„è¿­ä»£å™¨ï¼ŒèŒƒå›´æ˜¯ [first, last)ã€‚</li><li>valueï¼šè¦æŸ¥æ‰¾çš„ç›®æ ‡å€¼ã€‚</li><li>compï¼šcomp å°±æ˜¯ä¸€ä¸ªæ¯”è¾ƒå™¨ï¼Œå¯ä»¥ä¼ ä»¿å‡½æ•°å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ä¼ å‡½æ•°æŒ‡é’ˆï¼Œç±»ä¼¼äºqsorté‡Œçš„cmpã€‚</li><li>è¿”å›å€¼ï¼šæŒ‡å‘ç¬¬ä¸€ä¸ªå¤§äºæˆ–ç­‰äº value çš„å…ƒç´ çš„è¿­ä»£å™¨ã€‚å¦‚æœæ‰€æœ‰å…ƒç´ éƒ½å°äº valueï¼Œåˆ™è¿”å› lastã€‚</li></ul><p>æµ‹è¯•ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt; nums = &#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>&#125;;</span><br><span class="line">    <span class="type">int</span> target = <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> it = std::<span class="built_in">lower_bound</span>(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), target);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (it != nums.<span class="built_in">end</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;First element &gt;= &quot;</span> &lt;&lt; target &lt;&lt; <span class="string">&quot; is &quot;</span> &lt;&lt; *it &lt;&lt; <span class="string">&quot; at index &quot;</span> &lt;&lt; (it - nums.<span class="built_in">begin</span>()) &lt;&lt; std::endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;No element &gt;= &quot;</span> &lt;&lt; target &lt;&lt; <span class="string">&quot; found.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¨‹åºçš„è¾“å‡ºç»“æœä¸ºï¼š</p><pre><code>First element &gt;= 6 is 7 at index 3</code></pre><h1>upper_bound çš„åŠŸèƒ½</h1><p>upper_bound ç”¨äºåœ¨å·²æ’åºçš„åºåˆ—ä¸­æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå¤§äºç›®æ ‡å€¼çš„å…ƒç´ çš„ä½ç½®ã€‚</p><p>å‡½æ•°åŸå‹1ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> ForwardIterator, <span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function">ForwardIterator <span class="title">upper_bound</span><span class="params">(ForwardIterator first, ForwardIterator last, <span class="type">const</span> T&amp; value)</span></span>;</span><br></pre></td></tr></table></figure><p>å‡½æ•°åŸå‹2ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> ForwardIterator, <span class="keyword">class</span> T&gt;</span></span><br><span class="line"><span class="function">ForwardIterator <span class="title">upper_bound</span><span class="params">(ForwardIterator first, ForwardIterator last, <span class="type">const</span> T&amp; value, Compare comp)</span></span>;</span><br></pre></td></tr></table></figure><ul><li>first å’Œ lastï¼šå®šä¹‰æŸ¥æ‰¾èŒƒå›´çš„è¿­ä»£å™¨ï¼ŒèŒƒå›´æ˜¯ [first, last)ã€‚</li><li>valueï¼šè¦æŸ¥æ‰¾çš„ç›®æ ‡å€¼ã€‚</li><li>compï¼šcomp å°±æ˜¯ä¸€ä¸ªæ¯”è¾ƒå™¨ï¼Œå¯ä»¥ä¼ ä»¿å‡½æ•°å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ä¼ å‡½æ•°æŒ‡é’ˆï¼Œç±»ä¼¼äºqsorté‡Œçš„cmpã€‚</li><li>è¿”å›å€¼ï¼šæŒ‡å‘ç¬¬ä¸€ä¸ªå¤§äº value çš„å…ƒç´ çš„è¿­ä»£å™¨ã€‚å¦‚æœæ‰€æœ‰å…ƒç´ éƒ½å°äºæˆ–ç­‰äº valueï¼Œåˆ™è¿”å› lastã€‚</li></ul><p>å‚æ•°ä¸lower_boundç›¸åŒï¼Œè¿”å›å€¼å°±ä¸åŒäº†ã€‚</p><p>æµ‹è¯•ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt; nums = &#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>&#125;;</span><br><span class="line">    <span class="type">int</span> target = <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> it = std::<span class="built_in">upper_bound</span>(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), target);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (it != nums.<span class="built_in">end</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;First element &gt; &quot;</span> &lt;&lt; target &lt;&lt; <span class="string">&quot; is &quot;</span> &lt;&lt; *it &lt;&lt; <span class="string">&quot; at index &quot;</span> &lt;&lt; (it - nums.<span class="built_in">begin</span>()) &lt;&lt; std::endl;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;No element &gt; &quot;</span> &lt;&lt; target &lt;&lt; <span class="string">&quot; found.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¨‹åºçš„è¾“å‡ºç»“æœä¸ºï¼š</p><pre><code>First element &gt; 6 is 7 at index 3</code></pre><h1>lower_bound å’Œ upper_bound çš„åŒºåˆ«</h1><table><thead><tr><th>ç‰¹æ€§</th><th><code>lower_bound</code></th><th><code>upper_bound</code></th></tr></thead><tbody><tr><td><strong>æŸ¥æ‰¾æ¡ä»¶</strong></td><td>ç¬¬ä¸€ä¸ª <strong>å¤§äºæˆ–ç­‰äº</strong> ç›®æ ‡å€¼çš„å…ƒç´ </td><td>ç¬¬ä¸€ä¸ª <strong>å¤§äº</strong> ç›®æ ‡å€¼çš„å…ƒç´ </td></tr><tr><td><strong>è¿”å›å€¼</strong></td><td>æŒ‡å‘ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´ çš„è¿­ä»£å™¨</td><td>æŒ‡å‘ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´ çš„è¿­ä»£å™¨</td></tr><tr><td><strong>ç›®æ ‡å€¼å­˜åœ¨æ—¶</strong></td><td>è¿”å›ç›®æ ‡å€¼çš„ç¬¬ä¸€ä¸ªä½ç½®</td><td>è¿”å›ç›®æ ‡å€¼çš„ä¸‹ä¸€ä¸ªä½ç½®</td></tr><tr><td><strong>ç›®æ ‡å€¼ä¸å­˜åœ¨æ—¶</strong></td><td>è¿”å›ç¬¬ä¸€ä¸ªå¤§äºç›®æ ‡å€¼çš„ä½ç½®</td><td>è¿”å›ç¬¬ä¸€ä¸ªå¤§äºç›®æ ‡å€¼çš„ä½ç½®</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> C/C++ é‚£äº›äº‹å„¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C/C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€è§„åˆ’å…­ï¼šæœ€é•¿é€’å¢å­åºåˆ—</title>
      <link href="/2025/03/04/dp6/"/>
      <url>/2025/03/04/dp6/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥å­¦ä¹ çµèŒ¶å±±è‰¾åºœå‡ºå“çš„<a href="https://www.bilibili.com/video/BV1ub411Q7sB/?spm_id_from=333.1387.collection.video_card.click&amp;vd_source=a0f19e79b7da02f4fa318d91be5bc86a">æœ€é•¿é€’å¢å­åºåˆ—ã€åŸºç¡€ç®—æ³•ç²¾è®² 20ã€‘</a>ã€‚</p><p>UPé€šè¿‡Leetcodeå®˜æ–¹é¢˜<a href="https://leetcode.cn/problems/longest-increasing-subsequence/description/">300. æœ€é•¿é€’å¢å­åºåˆ—</a>è¿›è¡Œè®²è§£ã€‚</p><h1>300. æœ€é•¿é€’å¢å­åºåˆ—</h1><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œæ‰¾åˆ°å…¶ä¸­æœ€é•¿ä¸¥æ ¼é€’å¢å­åºåˆ—çš„é•¿åº¦ã€‚</p><p><code>å­åºåˆ—</code>æ˜¯ç”±æ•°ç»„æ´¾ç”Ÿè€Œæ¥çš„åºåˆ—ï¼Œåˆ é™¤ï¼ˆæˆ–ä¸åˆ é™¤ï¼‰æ•°ç»„ä¸­çš„å…ƒç´ è€Œä¸æ”¹å˜å…¶ä½™å…ƒç´ çš„é¡ºåºã€‚ä¾‹å¦‚ï¼Œ[3,6,2,7] æ˜¯æ•°ç»„ [0,3,1,6,2,2,7] çš„å­åºåˆ—ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><pre><code>è¾“å…¥ï¼šnums = [10,9,2,5,3,7,101,18]è¾“å‡ºï¼š4è§£é‡Šï¼šæœ€é•¿é€’å¢å­åºåˆ—æ˜¯ [2,3,7,101]ï¼Œå› æ­¤é•¿åº¦ä¸º 4 ã€‚</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code>è¾“å…¥ï¼šnums = [0,1,0,3,2,3]è¾“å‡ºï¼š4</code></pre><p>ç¤ºä¾‹ 3ï¼š</p><pre><code>è¾“å…¥ï¼šnums = [7,7,7,7,7,7,7]è¾“å‡ºï¼š1</code></pre><h1>åŸºæœ¬æ€è·¯</h1><p>ç”±äºå­åºåˆ—æ˜¯æ•°ç»„çš„ä¸€ä¸ªå­é›†ï¼Œå› æ­¤ç”¨å­é›†å‹å›æº¯æ¥æ€è€ƒï¼Œä¹Ÿå°±æ˜¯[é€‰æˆ–ä¸é€‰]æˆ–è€…[æšä¸¾é€‰å“ªä¸ª]ã€‚</p><p>å¯¹äºnums = [1, 6, 7, 2, 4, 5, 3]ï¼š</p><ul><li>å¦‚æœæˆ‘ä»¬å€’ç€æ€è€ƒï¼Œå‡è®¾3æ˜¯ä¸¥æ ¼é€’å¢å­åºåˆ—ä¸­çš„æœ€åä¸€ä¸ªæ•°ï¼Œè€ƒè™‘é€‰æˆ–ä¸é€‰ï¼Œéœ€è¦ä¸å‰é¢çš„æ•°å­—è¿›è¡Œæ¯”è¾ƒï¼Œéœ€è¦çŸ¥é“å½“å‰æ•°çš„ä¸‹æ ‡ä»¥åŠä¸Šä¸€ä¸ªæ•°çš„ä¸‹æ ‡ã€‚</li><li>å¦‚æœè€ƒè™‘æšä¸¾é€‰å“ªä¸ªï¼Œå¯ä»¥ç›´æ¥æšä¸¾3å‰é¢æ¯”3å°çš„æ•°å­—ï¼Œå½“ä½œä¸¥æ ¼é€’å¢å­åºåˆ—çš„å€’æ•°ç¬¬äºŒä¸ªæ•°ï¼Œåªéœ€è¦çŸ¥é“å½“å‰æ•°å­—çš„ä¸‹æ ‡å³å¯ã€‚</li></ul><p>ç»è¿‡å¯¹æ¯”ï¼Œæšä¸¾é€‰å“ªä¸ªçš„æ€è·¯åªéœ€è¦ä¸€ä¸ªå‚æ•°ï¼Œæ›´æ–¹ä¾¿ã€‚</p><p>å› æ­¤æœ€ç»ˆçš„æ€è·¯ä¸ºï¼š<br>- æšä¸¾ä»¥nums[i]ç»“å°¾çš„ä¸¥æ ¼é€’å¢å­åºåˆ—çš„é•¿åº¦<br>- æ¥ç€éœ€è¦æšä¸¾ä»¥nums[j]ä¸ºå€’æ•°ç¬¬äºŒä¸ªå…ƒç´ çš„ä¸¥æ ¼é€’å¢å­åºåˆ—çš„é•¿åº¦<br>- å…¶ä¸­j &lt; iï¼Œnums[j] &lt; nums[i]</p><p>ä»¥ä¸‹æ˜¯çµèŒ¶å±±è‰¾åºœæ€»ç»“çš„å›æº¯ä¸‰é—®ï¼š</p><ul><li>å­é—®é¢˜ï¼Ÿä»¥nums[i]ç»“å°¾çš„ä¸¥æ ¼é€’å¢å­åºåˆ—çš„é•¿åº¦</li><li>å½“å‰æ“ä½œï¼Ÿæšä¸¾nums[j]</li><li>ä¸‹ä¸€ä¸ªå­é—®é¢˜ï¼Ÿä»¥nums[j]ç»“å°¾çš„ä¸¥æ ¼é€’å¢å­åºåˆ—çš„é•¿åº¦</li></ul><p>å®šä¹‰dfs(i)ä¸ºä»¥nums[i]ç»“å°¾çš„ä¸¥æ ¼é€’å¢å­åºåˆ—çš„é•¿åº¦ï¼Œæšä¸¾æ»¡è¶³è¦æ±‚çš„nums[j]ï¼Œå­é—®é¢˜å°±å˜æˆäº†ä»¥nums[j]ç»“å°¾çš„ä¸¥æ ¼é€’å¢å­åºåˆ—çš„é•¿åº¦ï¼Œè¿™äº›å­é—®é¢˜æ±‚ä¸ªæœ€å¤§å€¼å†+1ï¼Œå°±å¾—åˆ°äº†ä»¥nums[i]ç»“å°¾çš„ä¸¥æ ¼é€’å¢å­åºåˆ—çš„é•¿åº¦ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dfs(i) = max&#123;dfs(j)&#125; + 1ï¼Œ j &lt; i &amp;&amp; nums[j] &lt; nums[i]</span><br></pre></td></tr></table></figure><h1>é€’å½’</h1><p>é€’å½’å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’å½’</span></span><br><span class="line"><span class="comment">// dfs(i)è¡¨ç¤ºä»¥nums[i]ç»“å°¾çš„ä¸¥æ ¼é€’å¢å­åºåˆ—çš„é•¿åº¦</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">lengthOfLIS</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">memo</span><span class="params">(n, <span class="number">-1</span>)</span></span>;</span><br><span class="line">        <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">this</span> <span class="keyword">auto</span>&amp;&amp; dfs, <span class="type">int</span> i)-&gt;<span class="type">int</span> &#123;</span><br><span class="line">            <span class="type">int</span>&amp; res = memo[i];</span><br><span class="line">            <span class="keyword">if</span> (res != <span class="number">-1</span>)</span><br><span class="line">                <span class="keyword">return</span> res;</span><br><span class="line">            res = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; i; ++j) &#123;</span><br><span class="line">                <span class="keyword">if</span> (nums[j] &lt; nums[i])</span><br><span class="line">                    res = <span class="built_in">max</span>(<span class="built_in">dfs</span>(j), res);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ++res;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">            ans = <span class="built_in">max</span>(ans, <span class="built_in">dfs</span>(i));</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œä¸€å®šè¦å°†i = 0 ~ n - 1å½“å‚æ•°ä¼ ç»™dfsï¼Œä¹Ÿå°±æ˜¯æœ€åçš„å¾ªç¯é‡ŒæŒ¨ä¸ªè°ƒç”¨ã€‚å¦‚æœç›´æ¥dfs(n-1)çš„è¯ï¼Œåªæœ‰å½“j &lt; i &amp;&amp; nums[j] &lt; nums[i]çš„æ—¶å€™æ‰èƒ½é€’å½’åˆ°å…¶ä»–çŠ¶æ€ï¼Œå¯èƒ½ä¼šå¯¼è‡´0~n-2ä¸­çš„æŸäº›é€’å½’ä¸åˆ°ã€‚å¹¶ä¸”dfs(n-1)çš„æ„ä¹‰æ˜¯ä»¥nums[n-1]ç»“å°¾çš„ä¸¥æ ¼é€’å¢å­åºåˆ—çš„é•¿åº¦ï¼Œä½†æ˜¯æœ€é•¿çš„ä¸¥æ ¼é€’å¢å­åºåˆ—å¹¶ä¸ä¸€å®šä»¥nums[n-1]ç»“å°¾ï¼Œä¹Ÿå¯èƒ½æ˜¯ä»¥å‰é¢çš„æŸä¸ªæ•°å­—ç»“å°¾ã€‚</p><h1>é€’æ¨</h1><p>é€’å½’å¾ˆå®¹æ˜“ç¿»è¯‘æˆé€’æ¨</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’æ¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">lengthOfLIS</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">f</span><span class="params">(n, <span class="number">0</span>)</span></span>;</span><br><span class="line">        <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; i; ++j) &#123;</span><br><span class="line">                <span class="keyword">if</span> (nums[j] &lt; nums[i])</span><br><span class="line">                    f[i] = <span class="built_in">max</span>(f[i], f[j]);</span><br><span class="line">            &#125;</span><br><span class="line">            ++f[i];</span><br><span class="line">            ans = <span class="built_in">max</span>(ans, f[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>è´ªå¿ƒ + äºŒåˆ†</h1><p>è¿™ä¸€å—å¼€å§‹å¬ä¸æ‡‚äº†ï¼Œä¸»è¦æ„Ÿè§‰çµèŒ¶å±±è‰¾åºœçš„è¯æ˜ä¸æ˜¯å¾ˆæ¸…æ™°ã€‚</p><p>é€šè¿‡è´ªå¿ƒ + äºŒåˆ†æŸ¥æ‰¾æ±‚è§£<code>æœ€é•¿ä¸¥æ ¼é€’å¢å­åºåˆ—ï¼ˆLISï¼‰</code>é—®é¢˜çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<code>å°½å¯èƒ½åœ°è®©é€’å¢å­åºåˆ—çš„æœ«å°¾å…ƒç´ æ›´å°ï¼Œä»è€Œä¸ºåç»­çš„å…ƒç´ æä¾›æ›´å¤šçš„æ‰©å±•æœºä¼š</code>ã€‚</p><h2 id="è´ªå¿ƒæ€æƒ³">è´ªå¿ƒæ€æƒ³</h2><p>è´ªå¿ƒç®—æ³•çš„æ ¸å¿ƒæ˜¯ï¼šåœ¨æ¯ä¸€æ­¥é€‰æ‹©ä¸­ï¼Œéƒ½é‡‡å–å½“å‰æœ€ä¼˜çš„ç­–ç•¥ï¼Œä»è€Œå¸Œæœ›æœ€ç»ˆå¾—åˆ°å…¨å±€æœ€ä¼˜è§£ã€‚</p><p>åœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›æ‰¾åˆ°ä¸€ä¸ªå°½å¯èƒ½é•¿çš„é€’å¢å­åºåˆ—ã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®æ ‡ï¼Œæˆ‘ä»¬éœ€è¦è®©å­åºåˆ—çš„æœ«å°¾å…ƒç´ å°½å¯èƒ½å°ï¼Œå› ä¸ºè¾ƒå°çš„æœ«å°¾å…ƒç´ æ›´å®¹æ˜“è¢«åç»­çš„å…ƒç´ æ‰©å±•ã€‚</p><p>å› æ­¤ï¼Œè´ªå¿ƒç­–ç•¥æ˜¯<code>å¯¹äºç›¸åŒé•¿åº¦çš„é€’å¢å­åºåˆ—ï¼Œæˆ‘ä»¬åªä¿ç•™æœ«å°¾å…ƒç´ æœ€å°çš„é‚£ä¸ª</code>ã€‚</p><p>g[i] è¡¨ç¤ºé•¿åº¦ä¸º i+1 çš„é€’å¢å­åºåˆ—çš„æœ€å°æœ«å°¾å…ƒç´ </p><h2 id="äºŒåˆ†æŸ¥æ‰¾çš„ä½œç”¨">äºŒåˆ†æŸ¥æ‰¾çš„ä½œç”¨</h2><p>å¯¹äºæ¯ä¸ªæ–°å…ƒç´  numï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°å®ƒåœ¨ g ä¸­çš„ä½ç½®ï¼š</p><ul><li>å¦‚æœ num æ¯” g ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½å¤§ï¼Œè¯´æ˜å®ƒå¯ä»¥æ‰©å±•å½“å‰çš„æœ€é•¿é€’å¢å­åºåˆ—ï¼Œå› æ­¤å°†å…¶æ·»åŠ åˆ° g çš„æœ«å°¾ã€‚</li><li>å¦åˆ™ï¼Œæ‰¾åˆ° g ä¸­ç¬¬ä¸€ä¸ªå¤§äºç­‰äº num çš„ä½ç½® posï¼Œå¹¶ç”¨ num æ›¿æ¢ g[pos]ã€‚è¿™æ˜¯å› ä¸º num å¯ä»¥ä½œä¸ºä¸€ä¸ªæ›´å°çš„æœ«å°¾å…ƒç´ æ¥æ„æˆé•¿åº¦ä¸º pos+1 çš„é€’å¢å­åºåˆ—ã€‚</li></ul><p>é€šè¿‡äºŒåˆ†æŸ¥æ‰¾ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ O(log n) çš„æ—¶é—´å†…æ‰¾åˆ° num åº”è¯¥æ’å…¥æˆ–æ›¿æ¢çš„ä½ç½®ï¼Œä»è€Œä¿è¯ç®—æ³•çš„é«˜æ•ˆæ€§ã€‚</p><h2 id="ä¸ºä»€ä¹ˆè´ªå¿ƒ-äºŒåˆ†æŸ¥æ‰¾æ˜¯æ­£ç¡®çš„ï¼Ÿ">ä¸ºä»€ä¹ˆè´ªå¿ƒ + äºŒåˆ†æŸ¥æ‰¾æ˜¯æ­£ç¡®çš„ï¼Ÿ</h2><p>æˆ‘ä»¬éœ€è¦è¯æ˜ï¼šé€šè¿‡è´ªå¿ƒç­–ç•¥ç»´æŠ¤çš„æ•°ç»„ gï¼Œæœ€ç»ˆçš„é•¿åº¦å°±æ˜¯æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦ã€‚</p><p>å…³é”®ç‚¹ï¼š</p><ol><li><p>g çš„é•¿åº¦å°±æ˜¯ LIS çš„é•¿åº¦ï¼š</p><ul><li>æ¯æ¬¡å‘ g ä¸­æ·»åŠ ä¸€ä¸ªæ–°å…ƒç´ æ—¶ï¼Œéƒ½æ„å‘³ç€æˆ‘ä»¬å‘ç°äº†ä¸€ä¸ªæ›´é•¿çš„é€’å¢å­åºåˆ—ã€‚</li><li>æ¯æ¬¡æ›¿æ¢ g ä¸­çš„å…ƒç´ æ—¶ï¼Œåªæ˜¯ä¼˜åŒ–äº†ç›¸åŒé•¿åº¦çš„é€’å¢å­åºåˆ—çš„æœ«å°¾å…ƒç´ ï¼Œè€Œä¸ä¼šæ”¹å˜ g çš„é•¿åº¦ã€‚</li></ul></li><li><p>g çš„ä¸¥æ ¼é€’å¢æ€§ï¼š</p><ul><li>ç”±äºæˆ‘ä»¬æ€»æ˜¯ç”¨æ›´å°çš„å…ƒç´ æ›¿æ¢ g ä¸­çš„å…ƒç´ ï¼Œg å§‹ç»ˆä¿æŒä¸¥æ ¼é€’å¢ã€‚</li><li>è¿™ç§æ€§è´¨ä¿è¯äº†æˆ‘ä»¬å¯ä»¥é€šè¿‡äºŒåˆ†æŸ¥æ‰¾å¿«é€Ÿå®šä½ num åº”è¯¥æ’å…¥æˆ–æ›¿æ¢çš„ä½ç½®ã€‚</li></ul></li><li><p>æ›¿æ¢æ“ä½œä¸ä¼šå½±å“æœ€ç»ˆç»“æœï¼š</p><ul><li>å½“æˆ‘ä»¬ç”¨ num æ›¿æ¢ g[pos] æ—¶ï¼Œè™½ç„¶æˆ‘ä»¬æ”¹å˜äº†é•¿åº¦ä¸º pos+1 çš„é€’å¢å­åºåˆ—çš„æœ«å°¾å…ƒç´ ï¼Œä½†è¿™å¹¶ä¸å½±å“æ›´é•¿é€’å¢å­åºåˆ—çš„æ„å»ºã€‚</li><li>å› ä¸º num æ¯”åŸæ¥çš„ g[pos] æ›´å°ï¼Œå®ƒä¸ºåç»­çš„å…ƒç´ æä¾›äº†æ›´å¤šçš„æ‰©å±•æœºä¼šã€‚</li></ul></li></ol><h2 id="ä¸€ä¸ªä¾‹å­">ä¸€ä¸ªä¾‹å­</h2><p>å‡è®¾ nums = [10, 9, 2, 5, 3, 7, 101, 18]ï¼Œæˆ‘ä»¬é€šè¿‡è´ªå¿ƒ + äºŒåˆ†æŸ¥æ‰¾æ¥æ±‚è§£ï¼š</p><ul><li>åˆå§‹åŒ– g = []ã€‚</li><li>éå† numsï¼š<ol><li>num = 10ï¼š<ul><li>g ä¸ºç©ºï¼Œç›´æ¥æ·»åŠ ï¼šg = [10]ã€‚</li></ul></li><li>num = 9ï¼š<ul><li>æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºç­‰äº 9 çš„ä½ç½®æ˜¯ 0ï¼Œæ›¿æ¢ï¼šg = [9]ã€‚</li></ul></li><li>num = 2ï¼š<ul><li>æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºç­‰äº 2 çš„ä½ç½®æ˜¯ 0ï¼Œæ›¿æ¢ï¼šg = [2]ã€‚</li></ul></li><li>num = 5ï¼š<ul><li>5 æ¯” g ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½å¤§ï¼Œæ·»åŠ åˆ°æœ«å°¾ï¼šg = [2, 5]ã€‚</li></ul></li><li>num = 3ï¼š<ul><li>æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºç­‰äº 3 çš„ä½ç½®æ˜¯ 1ï¼Œæ›¿æ¢ï¼šg = [2, 3]ã€‚</li></ul></li><li>num = 7ï¼š<ul><li>7 æ¯” g ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½å¤§ï¼Œæ·»åŠ åˆ°æœ«å°¾ï¼šg = [2, 3, 7]ã€‚</li></ul></li><li>num = 101ï¼š<ul><li>101 æ¯” g ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½å¤§ï¼Œæ·»åŠ åˆ°æœ«å°¾ï¼šg = [2, 3, 7, 101]ã€‚</li></ul></li><li>num = 18ï¼š<ul><li>æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºç­‰äº 18 çš„ä½ç½®æ˜¯ 3ï¼Œæ›¿æ¢ï¼šg = [2, 3, 7, 18]ã€‚</li></ul></li></ol></li></ul><p>æœ€ç»ˆï¼Œg çš„é•¿åº¦æ˜¯ 4ï¼Œå› æ­¤æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦æ˜¯ 4ã€‚</p><p>è¿™ç§æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n log n)ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯ O(n)ï¼Œæ˜¯ä¸€ç§éå¸¸é«˜æ•ˆ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è´ªå¿ƒ + äºŒåˆ†</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">lengthOfLIS</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; g;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> &amp;num: nums) &#123;</span><br><span class="line">            <span class="keyword">auto</span> it = <span class="built_in">lower_bound</span>(g.<span class="built_in">begin</span>(), g.<span class="built_in">end</span>(), num);</span><br><span class="line">            <span class="keyword">if</span> (it == g.<span class="built_in">end</span>())</span><br><span class="line">                g.<span class="built_in">emplace_back</span>(num);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                *it = num;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> g.<span class="built_in">size</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>å˜å½¢</h1><p>å¦‚æœå…è®¸æœ€é•¿é€’å¢å­åºåˆ—ä¸­æœ‰é‡å¤å…ƒç´ ï¼Œé‚£ä¹ˆæŒ‰ç…§<code>è´ªå¿ƒ+äºŒåˆ†</code>çš„æ€è·¯ï¼Œåœ¨gä¸­éœ€è¦å¯»æ‰¾çš„å°±æ˜¯ç¬¬ä¸€ä¸ªå¤§äºï¼ˆåŸæ¥æ˜¯å¤§äºç­‰äºï¼‰numçš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯æŠŠåŸæ¥ä½¿ç”¨çš„lower_boundæ”¹æˆupper_boundå³å¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åŠ¨æ€è§„åˆ’ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue3 é›†æˆElement-Plus</title>
      <link href="/2025/03/04/project-test2/"/>
      <url>/2025/03/04/project-test2/</url>
      
        <content type="html"><![CDATA[<p>å­¦ä¹ Bç«™UPä¸»ç¨‹åºå‘˜é’æˆˆå‡ºå“çš„è§†é¢‘<a href="https://www.bilibili.com/video/BV1GLKweAEHj/?spm_id_from=333.1245.0.0">ã€å¸¦å°ç™½åšæ¯•è®¾ã€‘02. ä½¿ç”¨Vue3é›†æˆElement-Pluså¿«é€Ÿæ­å»ºä¸€ä¸ªç®¡ç†ç³»ç»Ÿçš„é¡µé¢</a>å¹¶è¿›è¡Œä¸€ä¸ªå­¦ä¹ è®°å½•ã€‚</p><h1>Element-Plus</h1><p>Element-Plus æ˜¯ä¸€å¥—å‰ç«¯ UI æ¡†æ¶ï¼Œæä¾›äº†è®¸å¤šç²¾ç¾çš„æ ·å¼ï¼ŒCtrl-C + Ctrl-Vå³å¯ä½¿ç”¨ã€‚<a href="https://element-plus.org/zh-CN/">å®˜ç½‘è·³è½¬</a>ã€‚</p><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ä¾èµ–ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i element-plus -S</span><br></pre></td></tr></table></figure><p>åœ¨main.jsä¸­å¼•å…¥ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./assets/css/global.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ElementPlus</span> <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span> <span class="comment">// è¿™ä¸€è¡Œ</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-plus/dist/index.css&#x27;</span> <span class="comment">// è¿™ä¸€è¡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title class_">ElementPlus</span>) <span class="comment">// è¿™ä¸€è¡Œ</span></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><p>ç„¶åç›´æ¥ä»å®˜ç½‘æ‰¾åˆ°ä»¥ä¸‹ä»£ç ç²˜è´´åˆ°Home.vueä½“éªŒï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    ä¸»é¡µ</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-button</span>&gt;</span>Default<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>Primary<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;success&quot;</span>&gt;</span>Success<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;info&quot;</span>&gt;</span>Info<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;warning&quot;</span>&gt;</span>Warning<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span>&gt;</span>Danger<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h1>ä½¿ç”¨ icon</h1><p>é¦–å…ˆå®‰è£…ä¾èµ–</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @element-plus/icons-vue</span><br></pre></td></tr></table></figure><p>ç„¶åéœ€è¦ä» @element-plus/icons-vue ä¸­å¯¼å…¥æ‰€æœ‰å›¾æ ‡å¹¶è¿›è¡Œå…¨å±€æ³¨å†Œï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨CDNå¼•å…¥ï¼Œè¯·åˆ é™¤ä¸‹é¢ä¸€è¡Œã€‚</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">ElementPlusIconsVue</span> <span class="keyword">from</span> <span class="string">&#x27;@element-plus/icons-vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> [key, component] <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">entries</span>(<span class="title class_">ElementPlusIconsVue</span>)) &#123;</span><br><span class="line">  app.<span class="title function_">component</span>(key, component)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>for å¾ªç¯éƒ¨åˆ†æ”¾åœ¨main.jsçš„æœ«å°¾å³å¯ã€‚</p><p>ç„¶åå°±å¯ä»¥ä»å®˜ç½‘å¤åˆ¶ä¸€ä¸ªiconæ”¾åˆ°Home.vueä¸­å³å¯ä½¿ç”¨iconäº†ã€‚</p><p>ä½¿ç”¨å›¾æ ‡:</p><ul><li>el-inputï¼šå½“ä½ åœ¨è¾“å…¥æ¡†ç»„ä»¶é‡Œé¢ä½¿ç”¨å›¾æ ‡ï¼Œä½ éœ€è¦å•ç‹¬å¯¼å…¥å›¾æ ‡</li><li>el-iconã€el-buttonï¼šæŒ‰é’®æˆ–è€…å›¾æ ‡ç»„ä»¶é‡Œé¢ï¼Œä¸éœ€è¦å•ç‹¬å¯¼å…¥å›¾æ ‡</li></ul><h1>Element-Plus ä¸»é¢˜è‰²è®¾ç½®</h1><p>å®‰è£…ä¾èµ– sassã€unplugin-vue-componentsã€unplugin-auto-import</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -D sass unplugin-vue-components unplugin-auto-import</span><br></pre></td></tr></table></figure><p>é…ç½®index.scssæ”¾åœ¨ src/assets/css ç›®å½•ä¸‹:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@forward <span class="string">&quot;element-plus/theme-chalk/src/common/var.scss&quot;</span> <span class="title function_">with</span>(</span><br><span class="line">    <span class="attr">$colors</span>:(</span><br><span class="line">            <span class="string">&quot;primary&quot;</span>:  (<span class="string">&quot;base&quot;</span>:  #2c82ff),</span><br><span class="line">            <span class="string">&quot;success&quot;</span>:  (<span class="string">&quot;base&quot;</span>:  #31bf00),</span><br><span class="line">            <span class="string">&quot;warning&quot;</span>:  (<span class="string">&quot;base&quot;</span>:  #ffade0),</span><br><span class="line">            <span class="string">&quot;danger&quot;</span>:   (<span class="string">&quot;base&quot;</span>:  #e52f2f), </span><br><span class="line">            <span class="string">&quot;info&quot;</span>:     (<span class="string">&quot;base&quot;</span>: #8855ff),</span><br><span class="line">    )</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>é…ç½®vite.config.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">AutoImport</span> <span class="keyword">from</span><span class="string">&#x27;unplugin-auto-import/vite&#x27;</span><span class="comment">//è‡ªåŠ¨å¯¼å…¥vueä¸­çš„ç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Components</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/vite&#x27;</span><span class="comment">//è‡ªåŠ¨å¯¼å…¥ui-ç»„ä»¶ æ¯”å¦‚ element-plusç­‰</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElementPlusResolver</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/resolvers&#x27;</span><span class="comment">//å¯¹åº”ç»„ä»¶å¼•å…¥</span></span><br><span class="line"><span class="attr">plugins</span>: [</span><br><span class="line">    <span class="title function_">vue</span>(),</span><br><span class="line"><span class="comment">//element-plusæŒ‰ç®€å¯¼å…¥</span></span><br><span class="line">    <span class="title class_">AutoImport</span>(&#123;</span><br><span class="line">        <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="title class_">Components</span>(&#123;</span><br><span class="line">        <span class="attr">resolvers</span>: [</span><br><span class="line">            <span class="comment">//é…ç½®elementPlusé‡‡ç”¨sassæ ·å¼é…ç½®ç³»ç»Ÿ</span></span><br><span class="line">            <span class="title class_">ElementPlusResolver</span>(&#123;<span class="attr">importStyle</span>:<span class="string">&quot;sass&quot;</span>&#125;)</span><br><span class="line">        ],</span><br><span class="line">    &#125;),</span><br><span class="line">],</span><br><span class="line"></span><br><span class="line"><span class="attr">css</span>:&#123;</span><br><span class="line">  <span class="attr">preprocessorOptions</span>:&#123;</span><br><span class="line">    <span class="attr">scss</span>: &#123;</span><br><span class="line">      <span class="attr">additionalData</span>: <span class="string">`@use&quot;@/assets/css/index.scss&quot; as *;`</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h1>åˆ›å»ºåå°åŸºæœ¬æ¡†æ¶</h1><p>åˆ›å»ºvue/src/views/Manager.vueæ–‡ä»¶</p>]]></content>
      
      
      <categories>
          
          <category> Java é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> Vue </tag>
            
            <tag> Element-Plus </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯ Vue3 æ¡†æ¶æ­å»º</title>
      <link href="/2025/03/04/project-test1/"/>
      <url>/2025/03/04/project-test1/</url>
      
        <content type="html"><![CDATA[<p>å­¦ä¹ Bç«™UPä¸»ç¨‹åºå‘˜é’æˆˆå‡ºå“çš„è§†é¢‘<a href="https://www.bilibili.com/video/BV16dKHeiE92?spm_id_from=333.788.videopod.sections&amp;vd_source=a0f19e79b7da02f4fa318d91be5bc86a">ã€å¸¦å°ç™½åšæ¯•è®¾ã€‘01. å‰ç«¯Vue3 æ¡†æ¶çš„å¿«é€Ÿæ­å»ºä»¥åŠé¡¹ç›®å·¥ç¨‹çš„è®²è§£</a>å¹¶è¿›è¡Œä¸€ä¸ªå­¦ä¹ è®°å½•ã€‚</p><h1>å®‰è£…NodeJS</h1><p>vue3 å»ºè®® nodejs v22.14.0ï¼Œnpm ç‰ˆæœ¬ 10.9.2<br>ä½¿ç”¨å®‰è£…åŒ…å®‰è£…nodejsæ—¶ï¼Œä¼šè‡ªåŠ¨é…ç½®Nodeå’Œnpmçš„ç¯å¢ƒå˜é‡ã€‚<br>npmè¦é…ç½®æ·˜å®é•œåƒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npmmirror.com</span><br></pre></td></tr></table></figure><h1>æ­å»ºVueå·¥ç¨‹</h1><p>åˆ›å»ºä¸€ä¸ªå·¥ç¨‹ç›®å½•ï¼ˆæˆ‘å°±å«å®ƒProjectå§ï¼‰ï¼Œåœ¨å·¥ç¨‹ç›®å½•ä¸‹æ‰“å¼€CMDï¼Œè¿è¡Œå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm create vue@latest</span><br></pre></td></tr></table></figure><p>ç„¶åä¼šè®©ä½ è¾“å…¥é¡¹ç›®åç§°ï¼Œæˆ‘èµ·åä¸ºvueã€‚</p><p>ç´§æ¥ç€ä¼šè®©ä½ é€‰æ‹©<br>âˆš æ˜¯å¦ä½¿ç”¨ TypeScript è¯­æ³•ï¼Ÿ é€‰å¦<br>âˆš æ˜¯å¦å¯ç”¨ JSX æ”¯æŒï¼Ÿ é€‰å¦<br>âˆš æ˜¯å¦å¼•å…¥ Vue Router è¿›è¡Œå•é¡µé¢åº”ç”¨å¼€å‘ï¼Ÿ é€‰æ˜¯<br>âˆš æ˜¯å¦å¼•å…¥ Pinia ç”¨äºçŠ¶æ€ç®¡ç†ï¼Ÿ é€‰å¦<br>âˆš æ˜¯å¦å¼•å…¥ Vitest ç”¨äºå•å…ƒæµ‹è¯•ï¼Ÿ é€‰å¦<br>âˆš æ˜¯å¦è¦å¼•å…¥ä¸€æ¬¾ç«¯åˆ°ç«¯ï¼ˆEnd to Endï¼‰æµ‹è¯•å·¥å…·ï¼Ÿ Â» é€‰ä¸éœ€è¦<br>âˆš æ˜¯å¦å¼•å…¥ ESLint ç”¨äºä»£ç è´¨é‡æ£€æµ‹ï¼Ÿ Â» é€‰å¦</p><p>ä¹Ÿå°±æ˜¯é™¤äº†â€œæ˜¯å¦å¼•å…¥ Vue Router è¿›è¡Œå•é¡µé¢åº”ç”¨å¼€å‘ï¼Ÿâ€é€‰æ˜¯ä»¥å¤–ï¼Œå…¶ä½™å‡é€‰æ‹©å¦æˆ–è€…ä¸éœ€è¦ã€‚</p><p>ç„¶åä¼šæç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">é¡¹ç›®åˆå§‹åŒ–å®Œæˆï¼Œå¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</span><br><span class="line"></span><br><span class="line">  cd vue</span><br><span class="line">  npm install</span><br><span class="line">  npm run dev</span><br></pre></td></tr></table></figure><p>è¾“å…¥<code>cd vue</code>ï¼Œè¿›å…¥vueçš„å·¥ç¨‹ç›®å½•ã€‚</p><p>ç„¶åè¾“å…¥<code>npm install</code>å®‰è£…ä¾èµ–ï¼Œå¹¶ä¸”ä¼šæœ‰ç±»ä¼¼æç¤ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">added 147 packages <span class="keyword">in</span> 20s</span><br><span class="line"></span><br><span class="line">43 packages are looking <span class="keyword">for</span> funding</span><br><span class="line">  run `npm fund` <span class="keyword">for</span> details</span><br></pre></td></tr></table></figure><p>å†è¾“å…¥<code>npm run dev</code>å³å¯è¿è¡Œè¿™ä¸ªvueé¡¹ç›®ï¼Œä¼šæœ‰æç¤ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">VITE v6.2.0  ready <span class="keyword">in</span> 585 ms</span><br><span class="line"></span><br><span class="line">âœ  Local:   http://localhost:5173/</span><br><span class="line">âœ  Network: use --host to expose</span><br><span class="line">âœ  Vue DevTools: Open http://localhost:5173/__devtools__/ as a separate window</span><br><span class="line">âœ  Vue DevTools: Press Alt(âŒ¥)+Shift(â‡§)+D <span class="keyword">in</span> App to toggle the Vue DevTools</span><br><span class="line">âœ  press h + enter to show <span class="built_in">help</span></span><br></pre></td></tr></table></figure><p>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ç½‘å€ï¼š<a href="http://localhost:5173/%EF%BC%8C%E5%8D%B3%E5%8F%AF%E6%9F%A5%E7%9C%8B%E8%BF%99%E4%B8%AAvue%E9%A1%B9%E7%9B%AE%E3%80%82">http://localhost:5173/ï¼Œå³å¯æŸ¥çœ‹è¿™ä¸ªvueé¡¹ç›®ã€‚</a></p><h1>Vue å·¥ç¨‹ç²¾ç®€</h1><p>ä½¿ç”¨ideaæ‰“å¼€Projectç›®å½•ï¼ˆä¹Ÿå°±æ˜¯ä¸Šé¢vueå·¥ç¨‹ç›®å½•çš„ä¸Šä¸€çº§ç›®å½•ï¼‰ã€‚</p><p>ç›®å‰å·¥ç¨‹ç›®å½•å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€.idea</span><br><span class="line">â””â”€vue</span><br><span class="line">    â”œâ”€.vscode</span><br><span class="line">    â”œâ”€node_modules</span><br><span class="line">    â”œâ”€public</span><br><span class="line">    â”œâ”€src</span><br><span class="line">    â”‚   â”œâ”€assets</span><br><span class="line">    â”‚   â”œâ”€components</span><br><span class="line">    â”‚   â”‚  â””â”€icons</span><br><span class="line">    â”‚   â”œâ”€router</span><br><span class="line">    â”‚   â””â”€views</span><br><span class="line">    â”œâ”€.gitignore</span><br><span class="line">    â”œâ”€index.html</span><br><span class="line">    â”œâ”€jsconfig.json</span><br><span class="line">    â”œâ”€package.json</span><br><span class="line">    â”œâ”€package-lock.json</span><br><span class="line">    â”œâ”€README.md</span><br><span class="line">    â””â”€vite.config.js</span><br></pre></td></tr></table></figure><p>.vscodeã€.gitignoreã€README.mdä¸‰ä¸ªæ–‡ä»¶ä¸éœ€è¦ï¼Œç›´æ¥åˆ é™¤ã€‚</p><p>æ‰¾åˆ°è®¾ç½®ï¼Œè¾“å…¥encï¼Œç‚¹å‡»<code>File Encodings</code>ï¼ŒæŠŠglobal Encodingsã€Project Encodingsã€Default encoding for properties fileså…¨éƒ¨è®¾ä¸º<code>UTF-8</code>ï¼Œå¹¶å‹¾é€‰Transparent native-to-ascii conversionã€‚</p><p>è¿˜æœ‰ä¸€äº›æ–‡ä»¶ä¹Ÿæ˜¯ä¸éœ€è¦çš„ï¼Œç»§ç»­åˆ é™¤ä»¥ä¸‹æ–‡ä»¶ï¼š</p><ul><li>vue/src/assetsç›®å½•ä¸‹çš„base.cssã€main.css</li><li>vue/src/componentsä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹</li><li>vue/src/views ç›®å½•ä¸‹çš„AboutView.vue</li></ul><p>å°†vue/src/views/HomeView.vueçš„å†…å®¹ç¼–è¾‘ä¸ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ä¸»é¡µ</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>å¹¶å°†HomeView.vueé‡å‘½åä¸ºHome.vue</p><p>å°†vue/src/App.vueçš„å†…å®¹ç¼–è¾‘ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;RouterView /&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>vue/src/router/index.jsçš„å†…å®¹ç¼–è¾‘ä¸ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">BASE_URL</span>),</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;home&#x27;</span>, <span class="attr">component</span>: <span class="keyword">import</span>(<span class="string">&#x27;../views/Home.vue&#x27;</span>),&#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>vue/src/main.jsçš„ç¬¬ä¸€è¡Œæœ‰å¯¹vue/src/assets/main.cssçš„å¯¼å…¥ï¼Œä½†æ˜¯å…¶å·²è¢«æˆ‘ä»¬åˆ é™¤ï¼Œæ•…å°†è¿™ä¸€è¡Œåˆ é™¤ã€‚</p><h1>Vue å·¥ç¨‹ç›®å½•è§£è¯»</h1><ul><li>node_modulesï¼šä¾èµ–åŒ…å­˜æ”¾æ–‡ä»¶</li><li>publicï¼šå­˜æ”¾å…¨å±€é™æ€æ–‡ä»¶</li><li>srcï¼š<ul><li>assetsï¼šå­˜æ”¾ä»£ç å¼•ç”¨çš„é™æ€æ–‡ä»¶ï¼Œcssã€jsç­‰</li><li>componentsï¼šå­˜æ”¾vueçš„ç»„ä»¶ï¼ˆå¯å¤ç”¨ä»£ç å—ï¼‰</li><li>routerï¼šå­˜æ”¾è·¯ç”±æ–‡ä»¶çš„ç›®å½•</li><li>viewsï¼šå­˜æ”¾vueç½‘é¡µçš„ç›®å½•</li><li>App.vueï¼švueé¡µé¢å…¨å±€å…¥å£</li><li>main.jsï¼šå…¨å±€çš„é…ç½®æ–‡ä»¶ï¼Œå¼•å…¥ç¬¬ä¸‰æ–¹çš„ç»„ä»¶æˆ–è€…è‡ªå®šä¹‰çš„ç»„ä»¶</li></ul></li><li>index.htmlï¼švueç¼–è¯‘æˆçš„ç½‘é¡µ</li><li>package.jsonï¼šå®šä¹‰ä¾èµ–åº“çš„æ–‡ä»¶</li><li>package-lock.jsonï¼šå®‰è£…ä¾èµ–æ—¶ç”¨äºé”å®šç‰ˆæœ¬çš„æ–‡ä»¶</li><li>vite.config.jsï¼šå…¨å±€çš„é…ç½®æ–‡ä»¶</li></ul><h1>å…¨å±€css</h1><p>åœ¨vue/src/assetsç›®å½•ä¸‹æ–°å»ºcssç›®å½•ï¼Œå†åœ¨cssç›®å½•ä¸‹æ–°å»ºglobal.cssæ–‡ä»¶ï¼ˆå…¨å±€æ ·å¼è¡¨ï¼‰ï¼Œå†…å®¹ç¼–è¾‘ä¸ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">    box-<span class="attr">sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">body &#123;</span><br><span class="line">    <span class="attr">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attr">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attr">color</span>: #<span class="number">333</span>;</span><br><span class="line">    font-<span class="attr">size</span>: 14px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a &#123;</span><br><span class="line">    text-<span class="attr">decoration</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨main.jsæ–‡ä»¶ä¸­å¼•ç”¨ï¼Œæ·»åŠ è¿™è¡Œä»£ç å³å¯ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./assets/css/global.css&#x27;</span></span><br></pre></td></tr></table></figure><h1>å®šä¹‰404é¡µé¢</h1><p>å°†ä¸€å¼ 404çš„å›¾ç‰‡æ”¾åœ¨vue/src/assets/imgsç›®å½•ä¸‹ï¼Œåœ¨vue/src/viewsç›®å½•ä¸‹æ–°å»º404.vueï¼Œç¼–è¾‘å†…å®¹ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div style=&quot;height: 100vh; display: flex; align-items: center; justify-content: center&quot;&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;img style=&quot;width: 100%&quot; src=&quot;@/assets/imgs/404.png&quot; alt=&quot;&quot;&gt;</span><br><span class="line">        &lt;div style=&quot;text-align: center; padding: 20px 0; font-size: 20px; color: #3741fb&quot;&gt;&lt;a href=&quot;/&quot;&gt;è¿”å›ä¸»é¡µ&lt;/a&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>ç„¶åå®šä¹‰è·¯ç”±ï¼Œåœ¨vue/src/router/index.jsæ–‡ä»¶ä¸­ä¸€è¡Œä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">BASE_URL</span>),</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">component</span>: <span class="keyword">import</span>(<span class="string">&#x27;../views/Home.vue&#x27;</span>),&#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/notFount&#x27;</span>, <span class="attr">component</span>: <span class="keyword">import</span>(<span class="string">&#x27;../views/404.vue&#x27;</span>),&#125;, <span class="comment">// æ·»åŠ çš„é‚£è¡Œä»£ç </span></span><br><span class="line">  ],</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶è®¿é—® <a href="http://localhost:5174/notFount">http://localhost:5174/notFount</a> å°±ä¼šè·³è½¬åˆ°404é¡µé¢ã€‚ä½†å…¶å®æˆ‘ä»¬æƒ³å®ç°çš„æ˜¯åªè¦è®¿é—®ä¸€ä¸ªæœªå®šä¹‰çš„è·¯ç”±å°±è·³è½¬404é¡µé¢ã€‚</p><p>åªéœ€è¦å†åœ¨index.jsä¸­æ·»åŠ ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">path</span>: <span class="string">&#x27;/:pathMatch(.*)&#x27;</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/notFound&#x27;</span>&#125;</span><br></pre></td></tr></table></figure><p>å³å¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java é¡¹ç›® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ™ºèƒ½æŒ‡é’ˆæ¨¡æ¿ç±»ï¼šauto_ptrï¼Œshared_ptrï¼Œunique_ptr</title>
      <link href="/2025/03/03/cpp-interview2/"/>
      <url>/2025/03/03/cpp-interview2/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥é€šè¿‡é˜…è¯»ã€Šc++ Primer Plusã€‹æ¥å­¦ä¹ ä¸€ä¸‹æ™ºèƒ½æŒ‡é’ˆã€‚éƒ¨åˆ†å†…å®¹å‚è€ƒ<a href="https://blog.csdn.net/weixin_45031801/article/details/140594215">ã€C++11ã€‘æ™ºèƒ½æŒ‡é’ˆæ·±åº¦è¯¦è§£ï¼ˆä»€ä¹ˆæ˜¯æ™ºèƒ½æŒ‡é’ˆï¼Ÿä¸ºä»€ä¹ˆéœ€è¦æ™ºèƒ½æŒ‡é’ˆï¼Ÿå¦‚ä½•ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼Ÿï¼‰</a>ï¼ˆCSDNåšå®¢é“¾æ¥ï¼Œç‚¹å‡»å³å¯è·³è½¬ï¼‰ã€‚</p><h1>What is it ?</h1><p><code>æ™ºèƒ½æŒ‡é’ˆ</code>è¿™ä¸ªåè¯å¬ç€æŒºå”¬äººï¼Œå…¶å®ä¹Ÿæ²¡å•¥ï¼Œæ— éå°±æ˜¯ä¼šè‡ªåŠ¨é”€æ¯ new å‡ºæ¥çš„å¯¹è±¡ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚æ¯•ç«Ÿ C/C++ æ²¡æœ‰ç±»ä¼¼<code>Java</code>çš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œéœ€è¦æ‰‹åŠ¨é‡Šæ”¾ new å‡ºæ¥çš„å¯¹è±¡ï¼Œ<code>æ™ºèƒ½æŒ‡é’ˆ</code>å¯ä»¥è‡ªåŠ¨åœ°å®Œæˆè¿™ä¸ªå·¥ä½œã€‚</p><h1>Why ? ä¸ºä»€ä¹ˆéœ€è¦æ™ºèƒ½æŒ‡é’ˆï¼Ÿ</h1><p>å…ˆçœ‹è¿™ä¸ªå‡½æ•°:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">remodel</span><span class="params">(std::string&amp; str)</span> </span>&#123;</span><br><span class="line">    std::string* ps = <span class="keyword">new</span> std::<span class="built_in">string</span>(str);</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    str = ps;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‡½æ•°çš„ç¼ºé™·å°±æ˜¯å¿˜äº†é‡Šæ”¾newå‡ºæ¥çš„å†…å­˜ï¼Œä½†æ˜¯åªè¦åˆ«å¿˜äº†returnå‰åŠ ä¸Š<code>delete ps</code>é‡Šæ”¾å†…å­˜ã€‚</p><p>ä½†æ˜¯ä½†å‡¡æ˜¯æ¶‰åŠ<code>åˆ«å¿˜äº†</code>çš„è§£å†³æ–¹æ³•ï¼Œå¾€å¾€ä¸ä½³ã€‚å³ä½¿æ²¡æœ‰å¿˜è®°ï¼Œä¾ç„¶å¯èƒ½å‡ºç°é—®é¢˜ï¼Œå¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">remodel</span><span class="params">(std::string&amp; str)</span> </span>&#123;</span><br><span class="line">    std::string* ps = <span class="keyword">new</span> std::<span class="built_in">string</span>(str);</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">weird_thing</span>())</span><br><span class="line">        <span class="keyword">throw</span> <span class="built_in">exception</span>();</span><br><span class="line">    str = ps;</span><br><span class="line">    <span class="keyword">delete</span> ps;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“å‡ºç°å¼‚å¸¸æ—¶ï¼Œå°†ä¸ä¼šæ‰§è¡Œdelete psï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</p><p>å½“remodel()è¿™æ ·çš„å‡½æ•°ç»ˆæ­¢(ä¸ç®¡æ˜¯æ­£å¸¸ç»ˆæ­¢ï¼Œè¿˜æ˜¯ç”±äºå‡ºç°äº†å¼‚å¸¸è€Œç»ˆæ­¢)ï¼Œæœ¬åœ°å˜é‡éƒ½å°†ä»æ ˆå†…å­˜ä¸­åˆ é™¤ï¼Œå› æ­¤æŒ‡é’ˆpså æ®çš„å†…å­˜å°†è¢«é‡Šæ”¾ã€‚</p><p>å¦‚æœpsæŒ‡å‘çš„å†…å­˜ä¹Ÿè¢«é‡Šæ”¾ï¼Œå°±niceäº†ã€‚</p><p>å¦‚æœpsæœ‰ä¸€ä¸ª<code>ææ„å‡½æ•°</code>ï¼Œè¯¥ææ„å‡½æ•°å°†åœ¨psè¿‡æœŸæ—¶é‡Šæ”¾å®ƒæŒ‡å‘çš„å†…å­˜ã€‚å¦‚æœpsæ˜¯å¯¹è±¡ï¼Œåˆ™å¯ä»¥åœ¨å¯¹è±¡è¿‡æœŸæ—¶ï¼Œè®©å®ƒçš„ææ„å‡½æ•°åˆ é™¤æŒ‡å‘çš„å†…å­˜ã€‚è¿™æ­£æ˜¯ä¸ºä»€ä¹ˆå‡ºç°<code>auto_ptr</code>ã€<code>unique_ptr</code>å’Œ<code>shared _ptr</code>çš„åŸå› äº†ã€‚</p><h1>ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆ</h1><p>è¦åˆ›å»ºæ™ºèƒ½æŒ‡é’ˆå¯¹è±¡ï¼Œå°±å¾—åŒ…å«å¤´æ–‡ä»¶memoryã€‚</p><p>æ¨¡æ¿auto_ptrçš„æ„é€ å‡½æ•°å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> X&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">auto_ptr</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">auto_ptr</span><span class="params">(X* p = <span class="number">0</span>)</span> <span class="keyword">noexcept</span></span>;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="explicit">explicit</h2><p><code>explicit</code>å…³é”®å­—ç”¨äº<code>ç¦æ­¢éšå¼ç±»å‹è½¬æ¢</code>ã€‚</p><ol><li><p>éšå¼è½¬æ¢æ˜¯ä»€ä¹ˆï¼Ÿ<br>éšå¼è½¬æ¢æ˜¯æŒ‡ç¼–è¯‘å™¨åœ¨ä¸éœ€è¦æ˜¾å¼è°ƒç”¨æ„é€ å‡½æ•°æˆ–è½¬æ¢å‡½æ•°çš„æƒ…å†µä¸‹ï¼Œè‡ªåŠ¨å°†ä¸€ç§ç±»å‹è½¬æ¢ä¸ºå¦ä¸€ç§ç±»å‹ã€‚<br>ä¾‹å¦‚ï¼š</p> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MyClass</span>(<span class="type">int</span> x) &#123; <span class="comment">/* ... */</span> &#125; <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(MyClass obj)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">func</span>(<span class="number">10</span>); <span class="comment">// éšå¼è°ƒç”¨ MyClass(10)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œï¼Œfunc(10) ä¼šè‡ªåŠ¨è°ƒç”¨ MyClass(int x) æ„é€ å‡½æ•°ï¼Œå°† int éšå¼è½¬æ¢ä¸º MyClass å¯¹è±¡ã€‚</p></li><li><p>éšå¼è½¬æ¢åœ¨<code>auto_ptr</code>ä¸­çš„é—®é¢˜<br>å‡è®¾ auto_ptr çš„æ„é€ å‡½æ•°æ²¡æœ‰ explicitï¼š</p></li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> X&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">auto_ptr</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">auto_ptr</span>(X* p = <span class="number">0</span>) <span class="keyword">throw</span>() : <span class="built_in">ptr</span>(p) &#123;&#125; <span class="comment">// æ²¡æœ‰ explicit</span></span><br><span class="line">    ~<span class="built_in">auto_ptr</span>() &#123; <span class="keyword">delete</span> ptr; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">X* <span class="title">get</span><span class="params">()</span> <span class="type">const</span> </span>&#123; <span class="keyword">return</span> ptr; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    X* ptr;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œä»¥ä¸‹ä»£ç æ˜¯åˆæ³•çš„ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">auto_ptr&lt;<span class="type">int</span>&gt; ap = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">5</span>);  <span class="comment">// éšå¼è°ƒç”¨æ„é€ å‡½æ•°</span></span><br></pre></td></tr></table></figure><ul><li>å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ<ol><li>new int(5) è¿”å›ä¸€ä¸ª int* ç±»å‹çš„æŒ‡é’ˆã€‚</li><li>ç”±äº auto_ptr çš„æ„é€ å‡½æ•°æ²¡æœ‰ explicitï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è°ƒç”¨ auto_ptr<int>(int*) æ„é€ å‡½æ•°ï¼Œå°† int* éšå¼è½¬æ¢ä¸º auto_ptr<int>ã€‚</li><li>æœ€ç»ˆï¼Œap æ˜¯ä¸€ä¸ª auto_ptr<int> å¯¹è±¡ï¼Œæ¥ç®¡äº† new int(5) è¿”å›çš„æŒ‡é’ˆã€‚</li></ol></li></ul><ol start="3"><li><p>ä¸ºä»€ä¹ˆéšå¼è½¬æ¢ä¼šå¯¼è‡´é—®é¢˜ï¼Ÿ<br>éšå¼è½¬æ¢å¯èƒ½å¯¼è‡´ä»¥ä¸‹é—®é¢˜ï¼š<br>(1) æ„å¤–çš„æ‰€æœ‰æƒè½¬ç§»<br>auto_ptr çš„æ ¸å¿ƒç‰¹æ€§æ˜¯<code>ç‹¬å æ‰€æœ‰æƒ</code>ï¼Œå³ä¸€ä¸ª auto_ptr å¯¹è±¡ç‹¬å ä¸€ä¸ªèµ„æºï¼Œä¸èƒ½æœ‰å¤šä¸ª auto_ptr å¯¹è±¡åŒæ—¶ç®¡ç†åŒä¸€ä¸ªèµ„æºã€‚</p><p>å¦‚æœå…è®¸éšå¼è½¬æ¢ï¼Œä»¥ä¸‹ä»£ç ä¼šå¯¼è‡´æ„å¤–çš„æ‰€æœ‰æƒè½¬ç§»ï¼š</p> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">auto_ptr&lt;<span class="type">int</span>&gt; ap1 = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">5</span>);  <span class="comment">// ap1 æ¥ç®¡æŒ‡é’ˆ</span></span><br><span class="line">auto_ptr&lt;<span class="type">int</span>&gt; ap2 = ap1;         <span class="comment">// ap1 çš„æ‰€æœ‰æƒè½¬ç§»åˆ° ap2</span></span><br></pre></td></tr></table></figure><ul><li>åœ¨ç¬¬äºŒè¡Œï¼Œap1 çš„æ‰€æœ‰æƒè¢«è½¬ç§»åˆ° ap2ï¼Œap1 å˜ä¸ºç©ºæŒ‡é’ˆã€‚</li><li>å¦‚æœåç»­ä»£ç ç»§ç»­ä½¿ç”¨ ap1ï¼Œä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºï¼ˆå¦‚è®¿é—®ç©ºæŒ‡é’ˆï¼‰ã€‚</li></ul></li></ol><p>(2) èµ„æºç®¡ç†é—®é¢˜<br>éšå¼è½¬æ¢å¯èƒ½å¯¼è‡´èµ„æºæ³„æ¼æˆ–é‡å¤é‡Šæ”¾ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(auto_ptr&lt;<span class="type">int</span>&gt; ap)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span>* raw_ptr = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">10</span>);</span><br><span class="line">    <span class="built_in">func</span>(raw_ptr);  <span class="comment">// éšå¼è½¬æ¢ï¼Œraw_ptr çš„æ‰€æœ‰æƒè¢«è½¬ç§»</span></span><br><span class="line">    <span class="comment">// æ­¤æ—¶ raw_ptr å·²è¢«é‡Šæ”¾ï¼Œåç»­è®¿é—®ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸º</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>func(raw_ptr) éšå¼è°ƒç”¨äº† auto_ptr<int>(int*) æ„é€ å‡½æ•°ï¼Œraw_ptr çš„æ‰€æœ‰æƒè¢«è½¬ç§»åˆ° func çš„å‚æ•° apã€‚</li><li>å½“ func è¿”å›æ—¶ï¼Œap è¢«é”€æ¯ï¼Œraw_ptr æŒ‡å‘çš„å†…å­˜è¢«é‡Šæ”¾ã€‚</li><li>å¦‚æœåç»­ä»£ç ç»§ç»­ä½¿ç”¨ raw_ptrï¼Œä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚</li></ul><p>å› æ­¤ï¼Œé€šè¿‡å°†æ„é€ å‡½æ•°å£°æ˜ä¸º explicitï¼Œå¯ä»¥ç¦æ­¢éšå¼è½¬æ¢ï¼Œå¼ºåˆ¶è¦æ±‚æ˜¾å¼è°ƒç”¨æ„é€ å‡½æ•°ã€‚</p><h2 id="noexcept">noexcept</h2><p><code>noexcept</code>è¡¨ç¤ºauto_ptrç±»çš„æ„é€ å‡½æ•°ä¿è¯ä¸ä¼šæŠ›å‡ºä»»ä½•å¼‚å¸¸ã€‚<br>å¦‚æœå‡½æ•°å£°æ˜äº† noexcept ä½†å®é™…ä¸ŠæŠ›å‡ºäº†å¼‚å¸¸ï¼Œç¨‹åºä¼šè°ƒç”¨ std::unexpected()ï¼Œé€šå¸¸å¯¼è‡´ç¨‹åºç»ˆæ­¢ã€‚</p><h2 id="ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆ">ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆ</h2><p>ç»§ç»­å›è¿‡å¤´çœ‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> X&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">auto_ptr</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">auto_ptr</span><span class="params">(X* p = <span class="number">0</span>)</span> <span class="keyword">noexcept</span></span>;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç„¶åç”³è¯·Xç±»å‹çš„auto_ptrå°†è·å¾—ä¸€ä¸ªæŒ‡å‘Xç±»å‹çš„auto_ptrï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">auto_ptr&lt;<span class="type">double</span>&gt; <span class="title">pd</span><span class="params">(<span class="keyword">new</span> <span class="type">double</span>)</span></span>; <span class="comment">// pdæ˜¯ä¸€ä¸ªæŒ‡å‘doubleç±»å‹çš„auto_ptr</span></span><br><span class="line"><span class="function">auto_ptr&lt;string&gt; <span class="title">ps</span><span class="params">(<span class="keyword">new</span> string)</span></span>; <span class="comment">// psæ˜¯ä¸€ä¸ªæŒ‡å‘stringçš„auto_ptr</span></span><br></pre></td></tr></table></figure><p>new double æ˜¯new è¿”å›çš„æŒ‡é’ˆï¼ŒæŒ‡å‘newå‡ºæ¥çš„å†…å­˜å—ã€‚new double æ˜¯æ„é€ å‡½æ•°auto_ptr<double>çš„å‚æ•°ï¼Œå¯¹åº”äºåŸå‹ä¸­å½¢å‚pçš„å®å‚ã€‚åŒæ ·ï¼Œnew stringä¹Ÿæ˜¯æ„é€ å‡½æ•°çš„å®å‚ã€‚å…¶ä»–ä¸¤ç§æ™ºèƒ½æŒ‡é’ˆçš„ä½¿ç”¨ä¹Ÿæ˜¯åŒæ ·çš„è¯­æ³•ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">unique_ptr&lt;<span class="type">double</span>&gt; <span class="title">pdu</span><span class="params">(<span class="keyword">new</span> <span class="type">double</span>)</span></span>; <span class="comment">// pd æ˜¯ä¸€ä¸ªæŒ‡å‘doubleçš„unique_ptr</span></span><br><span class="line"><span class="function">shared_ptr&lt;string&gt; <span class="title">pss</span><span class="params">(<span class="keyword">new</span> string)</span></span>; <span class="comment">// pd æ˜¯ä¸€ä¸ªæŒ‡å‘stringçš„shared_ptr</span></span><br></pre></td></tr></table></figure><p>è¦æ”¹é€ å…ˆå‰çš„remodel()å‡½æ•°ï¼Œéœ€è¦åŒ…å«memoryå¤´æ–‡ä»¶ã€å°†æŒ‡å‘stringçš„æŒ‡é’ˆæ”¹ä¸ºæŒ‡å‘stringçš„æ™ºèƒ½æŒ‡é’ˆã€åˆ é™¤deleteè¯­å¥ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">remodel</span><span class="params">(std::string&amp; str)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// std::string* ps = new std::string(str);</span></span><br><span class="line">    <span class="function">std::auto_ptr&lt;string&gt; <span class="title">ps</span><span class="params">(<span class="keyword">new</span> std::string(str))</span></span>;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">weird_thing</span>())</span><br><span class="line">        <span class="keyword">throw</span> <span class="built_in">exception</span>();</span><br><span class="line">    str = ps;</span><br><span class="line">    <span class="comment">// delete ps;</span></span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±äºæ‰€æœ‰çš„æ™ºèƒ½æŒ‡é’ˆç±»çš„æ„é€ å‡½æ•°éƒ½æœ‰<code>explicit</code>å…³é”®å­—ä¿®é¥°ï¼Œè¯¥æ„é€ å‡½æ•°å°†æŒ‡é’ˆä½œä¸ºå‚æ•°ï¼Œå¹¶ä¸”è¦æ˜¾å¼åœ°è°ƒç”¨æ„é€ å‡½æ•°ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">shared_ptr&lt;<span class="type">double</span>&gt; pd;</span><br><span class="line"><span class="type">double</span> *p_reg = <span class="keyword">new</span> <span class="type">double</span>;</span><br><span class="line">pd = p_reg; <span class="comment">// é”™è¯¯ï¼Œä½¿ç”¨äº†éšå¼è½¬æ¢</span></span><br><span class="line">pd = <span class="built_in">shared_ptr</span>&lt;<span class="type">double</span>&gt;(p_reg); <span class="comment">// æ­£ç¡®ï¼Œæ˜¾ç¤ºè½¬æ¢</span></span><br><span class="line">shared_ptr&lt;<span class="type">double</span>&gt; pshared = p_reg; <span class="comment">// é”™è¯¯ï¼Œä½¿ç”¨äº†éšå¼è½¬æ¢</span></span><br><span class="line"><span class="function">shared_ptr&lt;<span class="type">double</span>&gt; <span class="title">pshared</span><span class="params">(p_reg)</span></span>;  <span class="comment">// æ­£ç¡®ï¼Œæ˜¾ç¤ºè½¬æ¢</span></span><br></pre></td></tr></table></figure><p>æ­¤å¤–ï¼Œä¸‰ç±»æ™ºèƒ½æŒ‡é’ˆéƒ½åº”è¯¥é¿å…ä¸€ç‚¹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">string <span class="title">vacation</span><span class="params">(<span class="string">&quot;I wandered lonely as a cloud.&quot;</span>&#125;;</span></span></span><br><span class="line"><span class="params"><span class="function">shared_ptr&lt;string&gt; pvac(&amp;vacation);</span></span></span><br></pre></td></tr></table></figure><p>pvacçš„ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶ï¼Œè‡ªåŠ¨é‡Šæ”¾å…¶æŒ‡å‘çš„å†…å­˜ï¼Œè¿™å›å¯¼è‡´deleteä¸€ä¸ªä¸æ˜¯newå‡ºæ¥çš„å†…å­˜ã€‚</p><p>å¯¹äºauto_ptrï¼Œå¯¹äºä»¥ä¸‹èµ‹å€¼è¯­å¥ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">auto_ptr&lt;string&gt; <span class="title">ps</span><span class="params">(<span class="keyword">new</span> string(<span class="string">&quot;hello&quot;</span>))</span></span>;</span><br><span class="line">auto_ptr&lt;string&gt; vocation;</span><br><span class="line">vocation = ps;</span><br></pre></td></tr></table></figure><p>å®ƒæœ‰æ˜æ˜¾çš„bugï¼Œå› ä¸ºpså’Œvocationçš„ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶ï¼Œpsçš„ææ„å‡½æ•°ä¼šå°†è¿™å—newå‡ºæ¥çš„å†…å­˜é‡Šæ”¾ä¸€æ¬¡ï¼Œvocationçš„ææ„å‡½æ•°åˆä¼šå†é‡Šæ”¾ä¸€æ¬¡ã€‚</p><p>å¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ–¹æ³•è§£å†³ï¼š</p><ul><li>é‡è½½èµ‹å€¼è¿ç®—ç¬¦ï¼Œä½¿ç”¨æ·±æ‹·è´</li><li>å»ºç«‹æ‰€æœ‰æƒçš„æ¦‚å¿µï¼Œå¯¹äºç‰¹å®šçš„å¯¹è±¡ï¼Œåªå…è®¸ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆå¯ä»¥æ‹¥æœ‰å®ƒã€‚è¿™æ ·åªæœ‰æ‹¥æœ‰è¯¥å¯¹è±¡çš„æ™ºèƒ½æŒ‡é’ˆçš„ææ„å‡½æ•°ä¼šåˆ é™¤è¯¥å¯¹è±¡ã€‚auto_ptrå’Œunique_ptré‡‡ç”¨æ­¤ç­–ç•¥</li><li>åˆ›å»ºæ›´æ™ºèƒ½çš„æŒ‡é’ˆï¼Œè·Ÿè¸ªå¼•ç”¨ç‰¹å®šå¯¹è±¡çš„æ™ºèƒ½æŒ‡é’ˆçš„ä¸ªæ•°ï¼ˆç§°ä¸ºå¼•ç”¨è®¡æ•°ï¼‰ã€‚ä¾‹å¦‚ï¼Œèµ‹å€¼æ—¶ï¼Œè®¡æ•°å°†+1ï¼Œè€ŒæŒ‡é’ˆçš„ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶ï¼Œè®¡æ•°-1ã€‚åªæœ‰å½“æœ€åä¸€ä¸ªæŒ‡é’ˆçš„ç”Ÿå‘½å‘¨æœŸä¹Ÿç»“æŸæ—¶ï¼Œæ‰deleteã€‚shared_ptré‡‡ç”¨æ­¤ç­–ç•¥ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> C/C++ é¢è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C/C++ </tag>
            
            <tag> æ™ºèƒ½æŒ‡é’ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€è§„åˆ’äº”ï¼šçº¿æ€§DP</title>
      <link href="/2025/03/02/dp5/"/>
      <url>/2025/03/02/dp5/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥ç»§ç»­å­¦ä¹ çµèŒ¶å±±è‰¾åºœçš„åŸºç¡€ç®—æ³•ç²¾è®²ç³»åˆ—ä¸­çš„<a href="https://www.bilibili.com/video/BV1TM4y1o7ug/?spm_id_from=333.1007.top_right_bar_window_history.content.click&amp;vd_source=a0f19e79b7da02f4fa318d91be5bc86a">æœ€é•¿å…¬å…±å­åºåˆ— ç¼–è¾‘è·ç¦»ã€åŸºç¡€ç®—æ³•ç²¾è®² 19ã€‘</a>ï¼ˆæœ¬æ–‡å†…å®¹å‚è€ƒè¯¥è§†é¢‘ï¼Œç‚¹å‡»å³å¯è·³è½¬è§†é¢‘ï¼Œéå•†ä¸šå¼•ç”¨ï¼Œä¾µæƒè”ç³»åˆ ï¼‰ã€‚</p><p>çµèŒ¶å±±è‰¾åºœä¸»è¦é€šè¿‡ä¸¤é“Leetcodeé¢˜è¿›è¡Œè®²è§£ï¼š<a href="https://leetcode.cn/problems/longest-common-subsequence/description/">1143. æœ€é•¿å…¬å…±å­åºåˆ—</a>å’Œ<a href="https://leetcode.cn/problems/edit-distance/description/">72. ç¼–è¾‘è·ç¦»</a>ã€‚</p><h1>1143. æœ€é•¿å…¬å…±å­åºåˆ—</h1><p>ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² text1 å’Œ text2ï¼Œè¿”å›è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿<code>å…¬å…±å­åºåˆ—</code>çš„é•¿åº¦ã€‚å¦‚æœä¸å­˜åœ¨<code>å…¬å…±å­åºåˆ—</code>ï¼Œè¿”å› 0 ã€‚</p><p>ä¸€ä¸ªå­—ç¬¦ä¸²çš„<code>å­åºåˆ—</code>æ˜¯æŒ‡è¿™æ ·ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼šå®ƒæ˜¯ç”±åŸå­—ç¬¦ä¸²åœ¨ä¸æ”¹å˜å­—ç¬¦çš„ç›¸å¯¹é¡ºåºçš„æƒ…å†µä¸‹åˆ é™¤æŸäº›å­—ç¬¦ï¼ˆä¹Ÿå¯ä»¥ä¸åˆ é™¤ä»»ä½•å­—ç¬¦ï¼‰åç»„æˆçš„æ–°å­—ç¬¦ä¸²ã€‚</p><ul><li>ä¾‹å¦‚ï¼Œâ€œaceâ€ æ˜¯ â€œabcdeâ€ çš„å­åºåˆ—ï¼Œä½† â€œaecâ€ ä¸æ˜¯ â€œabcdeâ€ çš„å­åºåˆ—ã€‚</li></ul><p>ä¸¤ä¸ªå­—ç¬¦ä¸²çš„<code>å…¬å…±å­åºåˆ—</code>æ˜¯è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²æ‰€å…±åŒæ‹¥æœ‰çš„å­åºåˆ—ã€‚</p><p>å…¬å…±å­åºåˆ—å°±æ˜¯ä¸¤ä¸ªå­—ç¬¦ä¸²éƒ½æœ‰çš„å­åºåˆ—ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—æ‰€æœ‰å…¬å…±å­åºåˆ—ä¸­çš„æœ€é•¿é•¿åº¦ã€‚</p><p>æŠŠä¸¤ä¸ªå­—ç¬¦ä¸²åˆ†åˆ«è®¾ä¸ºså’Œtï¼Œé•¿åº¦è®¾ä¸ºnå’Œmï¼Œå’ŒèƒŒåŒ…é—®é¢˜ä¸€æ ·ï¼Œå­åºåˆ—ä¹Ÿæ˜¯è€ƒè™‘æ¯ä¸ªå­—ç¬¦<code>é€‰æˆ–ä¸é€‰</code>ï¼Œä»æœ€åä¸€ä¸ªå­—æ¯å¼€å§‹è€ƒè™‘ï¼Œsçš„æœ€åä¸€ä¸ªå­—æ¯è®¾ä¸ºxï¼Œtçš„æœ€åä¸€ä¸ªå­—æ¯è®¾ä¸ºyï¼Œåˆ†ä¸ºå››ç§æƒ…å†µï¼š</p><ul><li>ä¸é€‰xï¼Œä¸é€‰y</li><li>ä¸é€‰xï¼Œé€‰y</li><li>é€‰xï¼Œä¸é€‰y</li><li>é€‰xï¼Œé€‰y</li></ul><p>ä¸Šè¿°æ˜¯çµèŒ¶å±±è‰¾åºœç»™å‡ºçš„å¯å‘æ€è·¯ï¼Œå†æ¥çœ‹çœ‹ä»–æ€»ç»“çš„å›æº¯ä¸‰é—®ï¼š</p><ul><li>å½“å‰æ“ä½œï¼Ÿè€ƒè™‘s[i]å’Œt[j]é€‰æˆ–ä¸é€‰</li><li>å­é—®é¢˜ï¼Ÿsçš„å‰iä¸ªå­—æ¯å’Œtçš„å‰jä¸ªå­—æ¯çš„LCSé•¿åº¦</li><li>ä¸‹ä¸€ä¸ªå­é—®é¢˜ï¼Ÿ<ul><li>sçš„å‰i-1ä¸ªå­—æ¯å’Œtçš„å‰j-1ä¸ªå­—æ¯çš„LCSé•¿åº¦</li><li>sçš„å‰i-1ä¸ªå­—æ¯å’Œtçš„å‰jä¸ªå­—æ¯çš„LCSé•¿åº¦</li><li>sçš„å‰iä¸ªå­—æ¯å’Œtçš„å‰j-1ä¸ªå­—æ¯çš„LCSé•¿åº¦</li></ul></li></ul><p>è¿™æ ·å¯ä»¥ç¡®å®šé€’å½’å‚æ•°ä¸­çš„iå’Œjè¡¨ç¤ºçš„å­é—®é¢˜ï¼Œå°±æ˜¯sçš„å‰iä¸ªå­—æ¯å’Œtçš„å‰jä¸ªå­—æ¯çš„LCSé•¿åº¦ã€‚</p><p>å¦å¤–æ³¨æ„ï¼Œéƒ½é€‰å’Œéƒ½ä¸é€‰ä¸¤ç§æƒ…å†µçš„ä¸‹ä¸€ä¸ªå­é—®é¢˜æ˜¯ä¸€æ ·çš„ï¼Œå¹¶ä¸”åªæœ‰s[i] == t[j]çš„æ—¶å€™æ‰èƒ½éƒ½é€‰ã€‚</p><p>å¯ä»¥å¾—åˆ°çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (s[i] == t[j])</span><br><span class="line">    <span class="built_in">dfs</span>(i, j) = <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>, j), <span class="built_in">dfs</span>(i, j<span class="number">-1</span>), <span class="built_in">dfs</span>(i<span class="number">-1</span>, j<span class="number">-1</span>) + <span class="number">1</span>);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (s[i] != t[j])</span><br><span class="line">    <span class="built_in">dfs</span>(i, j) = <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>, j), <span class="built_in">dfs</span>(i, j<span class="number">-1</span>), <span class="built_in">dfs</span>(i<span class="number">-1</span>, j<span class="number">-1</span>));</span><br></pre></td></tr></table></figure><p>å¯ä»¥ç®€åŒ–æˆï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dfs</span>(i, j) = <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>, j), <span class="built_in">dfs</span>(i, j<span class="number">-1</span>), <span class="built_in">dfs</span>(i<span class="number">-1</span>, j<span class="number">-1</span>)) + (s[i] == t[j]);</span><br></pre></td></tr></table></figure><p>ç„¶åçµèŒ¶å±±è‰¾åºœæå‡ºäº†ä¸¤ä¸ªé—®é¢˜ï¼š</p><ol><li>åœ¨s[i] == t[j]çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘åªé€‰å…¶ä¸­ä¸€ä¸ªçš„æƒ…å†µå—ï¼Ÿ</li><li>åœ¨s[i] != t[j]çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘éƒ½ä¸é€‰çš„æƒ…å†µå—ï¼Ÿ</li></ol><p>ç­”æ¡ˆæ˜¯éƒ½ä¸éœ€è¦ã€‚çµèŒ¶å±±è‰¾åºœå¯¹è¿™ä¸€å—çš„è®²è§£æœ‰ç‚¹æ²¡å¬æ˜ç™½ï¼Œè°ˆè°ˆè‡ªå·±çš„ç†è§£ã€‚</p><p>å¯¹äºé—®é¢˜<code>åœ¨s[i] == t[j]çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘åªé€‰å…¶ä¸­ä¸€ä¸ªçš„æƒ…å†µå—ï¼Ÿ</code>ï¼Œæˆ‘è®¤ä¸ºåè¯æ³•æ›´å¥½ç†è§£ã€‚</p><p>å‡è®¾åœ¨ s[i] == t[j] æ—¶ï¼Œæˆ‘ä»¬ä¸å°†è¿™ä¸¤ä¸ªå­—ç¬¦åŠ å…¥ LCS ä¸­ï¼Œè€Œæ˜¯é€‰æ‹©å¿½ç•¥å…¶ä¸­ä¸€ä¸ªã€‚é‚£ä¹ˆï¼š</p><ul><li>å¦‚æœå¿½ç•¥s[i]ï¼Œé‚£ä¹ˆ LCS çš„é•¿åº¦æœ€å¤šæ˜¯ dfs(i-1, j)ã€‚</li><li>å¦‚æœå¿½ç•¥t[j]ï¼Œé‚£ä¹ˆ LCS çš„é•¿åº¦æœ€å¤šæ˜¯ dfs(i, j-1)ã€‚</li></ul><p>ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬é€‰æ‹©å°† s[i] å’Œ t[j] åŠ å…¥ LCS ä¸­ï¼Œé‚£ä¹ˆ LCS çš„é•¿åº¦æ˜¯ dfs(i-1, j-1) + 1ã€‚ç”±äº dfs(i-1, j-1) + 1 ä¸€å®šå¤§äºæˆ–ç­‰äº dfs(i-1, j) æˆ– dfs(i, j-1)ï¼Œå› æ­¤é€‰æ‹©åŒ¹é…è¿™ä¸¤ä¸ªå­—ç¬¦ä¸€å®šä¸ä¼šä½¿ç»“æœå˜å·®ï¼Œåè€Œå¯èƒ½ä½¿ç»“æœæ›´å¥½ã€‚</p><p>å› æ­¤s[i] === t[j]æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦è€ƒè™‘éƒ½é€‰çš„æƒ…å†µå°±å¯ä»¥äº†ã€‚</p><p>å¯¹äºé—®é¢˜<code>åœ¨s[i] != t[j]çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘éƒ½ä¸é€‰çš„æƒ…å†µå—ï¼Ÿ</code></p><p>å¦‚æœ s çš„ç¬¬ i ä¸ªå­—ç¬¦å’Œ t çš„ç¬¬ j ä¸ªå­—ç¬¦ä¸ç›¸ç­‰ï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘ä¸¤ç§æƒ…å†µï¼š</p><ul><li>å¿½ç•¥ s[i]ï¼Œå³åªè€ƒè™‘ s çš„å‰ i-1 ä¸ªå­—ç¬¦å’Œ t çš„å‰ j ä¸ªå­—ç¬¦çš„ LCSã€‚</li><li>å¿½ç•¥ t[j]ï¼Œå³åªè€ƒè™‘ s çš„å‰ i ä¸ªå­—ç¬¦å’Œ t çš„å‰ j-1 ä¸ªå­—ç¬¦çš„ LCSã€‚</li></ul><p>ç„¶åï¼Œæˆ‘ä»¬å–è¿™ä¸¤ç§æƒ…å†µçš„æœ€å¤§å€¼ã€‚</p><ul><li>ä¸ºä»€ä¹ˆä¸éœ€è¦è€ƒè™‘â€œéƒ½ä¸é€‰â€çš„æƒ…å†µï¼Ÿ<br>å› ä¸ºâ€œéƒ½ä¸é€‰â€çš„æƒ…å†µå·²ç»è¢«åŒ…å«åœ¨ä¸Šè¿°ä¸¤ç§æƒ…å†µä¸­äº†ã€‚å¦‚æœæˆ‘ä»¬æ—¢ä¸é€‰ s[i] ä¹Ÿä¸é€‰ t[j]ï¼Œé‚£ä¹ˆè¿™ç§æƒ…å†µç­‰ä»·äº dfs(i-1, j-1)ã€‚è€Œåœ¨ s[i] != t[j] æ—¶ï¼Œdfs(i-1, j-1)çš„å€¼ä¸€å®šå°äºæˆ–ç­‰äº dfs(i-1, j) æˆ– dfs(i, j-1)ï¼Œæ‰€ä»¥ä¸éœ€è¦å•ç‹¬è€ƒè™‘ã€‚</li></ul><h2 id="é€’å½’è§£æ³•">é€’å½’è§£æ³•</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’å½’</span></span><br><span class="line"><span class="comment">// dfs(i, j)è¡¨ç¤ºs[0...i-1]å’Œt[0...j-1]çš„LCS</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestCommonSubsequence</span><span class="params">(string s, string t)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> m = t.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">memo</span>(n, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(m, <span class="number">-1</span>));</span><br><span class="line">        <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">this</span> <span class="keyword">auto</span>&amp;&amp; dfs, <span class="type">int</span> i, <span class="type">int</span> j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; <span class="number">0</span> || j &lt; <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            <span class="type">int</span>&amp; res = memo[i][j];</span><br><span class="line">            <span class="keyword">if</span> (res != <span class="number">-1</span>)</span><br><span class="line">                <span class="keyword">return</span> res;</span><br><span class="line">            <span class="keyword">return</span> res = <span class="built_in">max</span>(<span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>, j), <span class="built_in">dfs</span>(i, j<span class="number">-1</span>)), <span class="built_in">dfs</span>(i<span class="number">-1</span>, j<span class="number">-1</span>) + (s[i] == t[j]));</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(n - <span class="number">1</span>, m - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦ä¸ºO(nm)ï¼Œç©ºé—´å¤æ‚åº¦ä¹Ÿä¸ºO(nm)ã€‚</p><h2 id="é€’æ¨">é€’æ¨</h2><p>èƒ½å¦ç»§ç»­ä¼˜åŒ–ç©ºé—´å¤æ‚åº¦ï¼ŸOf courseï¼</p><p>å…ˆæ”¹ä¸ºé€’æ¨ï¼ˆç©ºé—´å¤æ‚åº¦ä»ä¸ºO(nm)ï¼‰ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestCommonSubsequence</span><span class="params">(string s, string t)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> m = t.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">f</span>(n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(m + <span class="number">1</span>, <span class="number">0</span>));</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; ++j) &#123;</span><br><span class="line">                f[i<span class="number">+1</span>][j<span class="number">+1</span>] = <span class="built_in">max</span>(<span class="built_in">max</span>(f[i<span class="number">+1</span>][j], f[i][j<span class="number">+1</span>]), f[i][j] + (s[i] == t[j]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n][m];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="ä¸¤ä¸ªæ•°ç»„">ä¸¤ä¸ªæ•°ç»„</h3><p>å¾ˆå®¹æ˜“ä¼˜åŒ–æˆä»¥ä¸‹ç©ºé—´å¤æ‚åº¦ä¸ºO(m)çš„å½¢å¼ï¼ˆä½¿ç”¨ä¸¤ä¸ªæ•°ç»„ï¼‰ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestCommonSubsequence</span><span class="params">(string s, string t)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> m = t.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">f</span>(<span class="number">2</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(m + <span class="number">1</span>, <span class="number">0</span>));</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; ++j) &#123;</span><br><span class="line">                f[(i<span class="number">+1</span>) % <span class="number">2</span>][j<span class="number">+1</span>] = <span class="built_in">max</span>(<span class="built_in">max</span>(f[(i<span class="number">+1</span>) % <span class="number">2</span>][j], f[i % <span class="number">2</span>][j<span class="number">+1</span>]), f[i % <span class="number">2</span>][j] + (s[i] == t[j]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n % <span class="number">2</span>][m];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="ä¸€ä¸ªæ•°ç»„">ä¸€ä¸ªæ•°ç»„</h3><p>ç”»ä¸ªå›¾å¾ˆå®¹æ˜“å‘ç°ï¼Œå½“å‰çŠ¶æ€ç”±å·¦è¾¹ã€ä¸Šè¾¹ä»¥åŠå·¦ä¸Šä¸‰ä¸ªçŠ¶æ€è½¬ç§»è€Œæ¥ï¼Œå½“å‰çŠ¶æ€è¿˜éœ€è¦å‚ä¸å³è¾¹çŠ¶æ€çš„è½¬ç§»ï¼Œæ­¤æ—¶å­˜åœ¨è¦†ç›–é—®é¢˜ï¼Œå› æ­¤ç”¨ä¸€ä¸ªpreä¸´æ—¶å­˜å‚¨ä¸€ä¸‹å½“å‰çŠ¶æ€è½¬ç§»ä¹‹å‰çš„å€¼å³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestCommonSubsequence</span><span class="params">(string s, string t)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> m = t.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">f</span><span class="params">(m<span class="number">+1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="type">int</span> pre = f[<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; ++j) &#123;</span><br><span class="line">                <span class="type">int</span> tmp = f[j<span class="number">+1</span>];</span><br><span class="line">                f[j<span class="number">+1</span>] = <span class="built_in">max</span>(<span class="built_in">max</span>(f[j], f[j<span class="number">+1</span>]), pre + (s[i] == t[j]));</span><br><span class="line">                pre = tmp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[m];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>72. ç¼–è¾‘è·ç¦»</h1><p>ç»™ä½ ä¸¤ä¸ªå•è¯ word1 å’Œ word2ï¼Œ è¯·è¿”å›å°† word1 è½¬æ¢æˆ word2 æ‰€ä½¿ç”¨çš„æœ€å°‘æ“ä½œæ•°  ã€‚<br>ä½ å¯ä»¥å¯¹ä¸€ä¸ªå•è¯è¿›è¡Œå¦‚ä¸‹ä¸‰ç§æ“ä½œï¼š</p><ul><li>æ’å…¥ä¸€ä¸ªå­—ç¬¦</li><li>åˆ é™¤ä¸€ä¸ªå­—ç¬¦</li><li>æ›¿æ¢ä¸€ä¸ªå­—ç¬¦</li></ul><p>ä¾ç„¶è®°å®ƒä»¬åˆ†åˆ«ä¸ºså’Œtï¼ŒåŸºäºä¸Šè¿°ä¸‰ç§æ“ä½œæŠŠsæ”¹æˆtã€‚</p><p>åˆ†ææ–¹æ³•å’Œä¸Šä¸€é¢˜ç±»ä¼¼ã€‚</p><p><code>åˆ é™¤</code>ä¸€ä¸ªå­—æ¯ç›¸å½“äºå»æ‰s[i]ã€‚</p><p><code>æ’å…¥</code>ä¸€ä¸ªå­—æ¯çš„è¯ï¼Œç”±äºéœ€è¦ä¿æŒå’Œt[j]ä¸€æ ·ï¼Œé‚£sæ’å…¥ä¸€ä¸ªå­—æ¯ç›¸å½“äºå»æ‰t[j]ã€‚</p><p>å¦‚æœs[i] == t[j]ï¼Œé‚£ä¹ˆå°±éƒ½å»æ‰ï¼Œæ­¤æ—¶ä¸æ‰§è¡Œä»»ä½•æ“ä½œã€‚</p><p>å¦‚æœs[i] != t[j]åˆ™å¯ä»¥é€šè¿‡<code>æ›¿æ¢</code>æ“ä½œï¼Œæ¯”å¦‚è¯´å¯¹äºs=&quot;horse&quot;å’Œt=&quot;ros&quot;çš„æœ€åä¸€ä¸ªå­—æ¯éƒ½ä¸åŒï¼Œé‚£ä¹ˆæŠŠsçš„æœ€åä¸€ä¸ªå­—æ¯æ›¿æ¢æˆâ€™sâ€™ï¼Œç„¶åæŠŠså’Œtçš„æœ€åä¸€ä¸ªå­—æ¯éƒ½å»æ‰å³å¯ã€‚</p><ul><li>å¦‚æœs[i] == t[j]ï¼Œé‚£ä¹ˆå°±éƒ½å»æ‰ï¼Œæ­¤æ—¶ä¸æ‰§è¡Œä»»ä½•æ“ä½œã€‚</li><li>å¦‚æœs[i] != t[j]ï¼Œé‚£ä¹ˆå¯ä»¥æ‰§è¡Œçš„æ“ä½œç”±åˆ é™¤ã€æ’å…¥å’Œæ›¿æ¢ã€‚</li></ul><p>å¯ä»¥å¾—åˆ°çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (s[i] == t[j])</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dfs</span>(i - <span class="number">1</span>, j - <span class="number">1</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">max</span>(<span class="built_in">max</span>(<span class="built_in">dfs</span>(i - <span class="number">1</span>, j), <span class="built_in">dfs</span>(i, j - <span class="number">1</span>)), <span class="built_in">dfs</span>(i - <span class="number">1</span>, j - <span class="number">1</span>) + <span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>å…¶ä¸­s[i] != t[j]çš„æ—¶å€™dfs(i - 1, j)ç›¸å½“äº<code>åˆ é™¤</code>æ“ä½œï¼Œdfs(i, j - 1)ç›¸å½“äº<code>æ’å…¥</code>æ“ä½œï¼Œdfs(i - 1, j - 1) + 1ç›¸å½“äºæ›¿æ¢æ“ä½œã€‚</p><p>è¿˜æœ‰ä¸€äº›è¾¹ç•Œæ¡ä»¶å°±æ˜¯i &lt; 0æˆ–è€… j &lt; 0 éœ€è¦å¤„ç†ã€‚</p><ul><li>i &lt; 0<ul><li>sä¸ºç©ºtä¸ä¸ºç©ºï¼Œéœ€è¦åœ¨sä¸­æ’å…¥å’Œtç›¸ç­‰é•¿åº¦çš„å­—ç¬¦</li><li>æ•…è¿”å› j + 1</li></ul></li><li>j &lt; 0<ul><li>sä¸ä¸ºç©ºtä¸ºç©ºï¼Œéœ€è¦æŠŠsä¸­å­—æ¯å…¨éƒ¨åˆ é™¤ï¼Œåˆ é™¤é•¿åº¦ä¸ºtçš„é•¿åº¦</li><li>return i + 1;</li></ul></li></ul><h2 id="é€’å½’">é€’å½’</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minDistance</span><span class="params">(string s, string t)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> m = t.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">memo</span>(n<span class="number">+1</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(m<span class="number">+1</span>, <span class="number">-1</span>));</span><br><span class="line">        <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">this</span> <span class="keyword">auto</span>&amp;&amp; dfs, <span class="type">int</span> i, <span class="type">int</span> j)-&gt;<span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> j + <span class="number">1</span>; <span class="comment">// sä¸ºç©ºtä¸ä¸ºç©ºï¼Œéœ€è¦åœ¨sä¸­æ’å…¥å’Œtç›¸ç­‰é•¿åº¦çš„å­—ç¬¦</span></span><br><span class="line">            <span class="keyword">if</span> (j &lt; <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> i + <span class="number">1</span>; <span class="comment">// sä¸ä¸ºç©ºtä¸ºç©ºï¼Œéœ€è¦æŠŠsä¸­å­—æ¯å…¨éƒ¨åˆ é™¤ï¼Œåˆ é™¤é•¿åº¦ä¸ºtçš„é•¿åº¦</span></span><br><span class="line">            <span class="type">int</span>&amp; res = memo[i][j];</span><br><span class="line">            <span class="keyword">if</span> (res != <span class="number">-1</span>)</span><br><span class="line">                <span class="keyword">return</span> res;</span><br><span class="line">            <span class="keyword">if</span> (s[i] == t[j])</span><br><span class="line">                <span class="keyword">return</span> res = <span class="built_in">dfs</span>(i - <span class="number">1</span>, j - <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">return</span> res = <span class="built_in">min</span>(<span class="built_in">min</span>(<span class="built_in">dfs</span>(i - <span class="number">1</span>, j), <span class="built_in">dfs</span>(i, j - <span class="number">1</span>)), <span class="built_in">dfs</span>(i - <span class="number">1</span>, j - <span class="number">1</span>)) + <span class="number">1</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(n - <span class="number">1</span>, m - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="é€’æ¨-2">é€’æ¨</h2><p>é€’å½’å¾ˆå®¹æ˜“ç¿»è¯‘æˆé€’æ¨ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minDistance</span><span class="params">(string s, string t)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> m = t.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">f</span>(n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(m + <span class="number">1</span>, <span class="number">0</span>));</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; ++j) </span><br><span class="line">            f[<span class="number">0</span>][j<span class="number">+1</span>] = j + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            f[i<span class="number">+1</span>][<span class="number">0</span>] = i + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; ++j) &#123;</span><br><span class="line">                <span class="keyword">if</span> (s[i] == t[j]) </span><br><span class="line">                    f[i<span class="number">+1</span>][j<span class="number">+1</span>] = f[i][j];</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    f[i<span class="number">+1</span>][j<span class="number">+1</span>] = <span class="built_in">min</span>(<span class="built_in">min</span>(f[i][j<span class="number">+1</span>], f[i<span class="number">+1</span>][j]), f[i][j]) + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n][m];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="é€’æ¨è§£æ³•-ç©ºé—´å¤æ‚åº¦O-m-ä¸¤ä¸ªæ•°ç»„">é€’æ¨è§£æ³• ç©ºé—´å¤æ‚åº¦O(m) ä¸¤ä¸ªæ•°ç»„</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minDistance</span><span class="params">(string s, string t)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> m = t.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">f</span>(<span class="number">2</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(m + <span class="number">1</span>, <span class="number">0</span>));</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; ++j) </span><br><span class="line">            f[<span class="number">0</span>][j<span class="number">+1</span>] = j + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            f[(i<span class="number">+1</span>) % <span class="number">2</span>][<span class="number">0</span>] = i + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; ++j) &#123;</span><br><span class="line">                <span class="keyword">if</span> (s[i] == t[j]) </span><br><span class="line">                    f[(i<span class="number">+1</span>) % <span class="number">2</span>][j<span class="number">+1</span>] = f[i % <span class="number">2</span>][j];</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    f[(i<span class="number">+1</span>) % <span class="number">2</span>][j<span class="number">+1</span>] = <span class="built_in">min</span>(<span class="built_in">min</span>(f[i % <span class="number">2</span>][j<span class="number">+1</span>], f[(i<span class="number">+1</span>) % <span class="number">2</span>][j]), f[i % <span class="number">2</span>][j]) + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n % <span class="number">2</span>][m];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="é€’æ¨è§£æ³•-ç©ºé—´å¤æ‚åº¦O-m-ä¸€ä¸ªæ•°ç»„ï¼š">é€’æ¨è§£æ³• ç©ºé—´å¤æ‚åº¦O(m) ä¸€ä¸ªæ•°ç»„ï¼š</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minDistance</span><span class="params">(string s, string t)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> m = t.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">f</span><span class="params">(m + <span class="number">1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; ++j) </span><br><span class="line">            f[j<span class="number">+1</span>] = j + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="type">int</span> pre = f[<span class="number">0</span>];</span><br><span class="line">            f[<span class="number">0</span>] = i<span class="number">+1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; ++j) &#123;</span><br><span class="line">                <span class="type">int</span> tmp = f[j<span class="number">+1</span>];</span><br><span class="line">                <span class="keyword">if</span> (s[i] == t[j]) </span><br><span class="line">                    f[j<span class="number">+1</span>] = pre;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    f[j<span class="number">+1</span>] = <span class="built_in">min</span>(<span class="built_in">min</span>(f[j<span class="number">+1</span>], f[j]), pre) + <span class="number">1</span>;</span><br><span class="line">                pre = tmp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[m];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åŠ¨æ€è§„åˆ’ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€è§„åˆ’å››ï¼šå®Œå…¨èƒŒåŒ…</title>
      <link href="/2025/03/02/dp4/"/>
      <url>/2025/03/02/dp4/</url>
      
        <content type="html"><![CDATA[<h1>å‰è¨€</h1><p>ä»Šæ—¥ç»§ç»­å­¦ä¹ Bç«™Upä¸»å‡ºå“çš„åŸºç¡€ç®—æ³•ç²¾è®²ç³»åˆ—ï¼Œ<a href="https://www.bilibili.com/video/BV16Y411v7Y6/?vd_source=a0f19e79b7da02f4fa318d91be5bc86a">0-1èƒŒåŒ… å®Œå…¨èƒŒåŒ…ã€åŸºç¡€ç®—æ³•ç²¾è®² 18ã€‘</a>ï¼ˆç‚¹å‡»å³å¯è·³è½¬è§†é¢‘é“¾æ¥ï¼‰ã€‚</p><p>0-1èƒŒåŒ…å’Œå®Œå…¨èƒŒåŒ…æ˜¯éå¸¸é‡è¦çš„DPæ¨¡å‹ï¼ŒçµèŒ¶å±±è‰¾åºœè®¤ä¸ºä¸€å®šç¨‹åº¦ä¸Šå®ƒä»¬å°±æ˜¯â€œé€‰æˆ–ä¸é€‰â€æ€æƒ³çš„ä»£è¡¨ã€‚</p><p>æœ¬ç‰‡åšå®¢ä¸»è¦å…³æ³¨å®Œå…¨èƒŒåŒ…ã€‚</p><h1>1. å®Œå…¨èƒŒåŒ…</h1><h2 id="1-1-é—®é¢˜æè¿°">1.1 é—®é¢˜æè¿°</h2><p><code>å®Œå…¨èƒŒåŒ…</code>ï¼šæœ‰nç§ç‰©å“ï¼Œç¬¬iç§ç‰©å“çš„ä½“ç§¯ä¸º w[i]ï¼Œä»·å€¼ä¸º v[i]ï¼Œæ¯ç§ç‰©å“<code>æ— é™æ¬¡é‡å¤é€‰</code>ï¼Œæ±‚ä½“ç§¯å’Œä¸è¶…è¿‡ capacityæ—¶çš„æœ€å¤§ä»·å€¼å’Œã€‚</p><p>é€’å½’åšæ³•çš„å›æº¯ä¸‰é—®ä¸ºï¼š</p><ul><li>å½“å‰æ“ä½œ?æšä¸¾<code>ç¬¬</code>iç§ç‰©å“é€‰ä¸€ä¸ªæˆ–ä¸é€‰:<ul><li>ä¸é€‰ï¼Œå‰©ä½™å®¹é‡ä¸å˜;</li><li>é€‰ä¸€ä¸ªï¼Œå‰©ä½™å®¹é‡å‡å°‘ w[i]</li></ul></li><li>å­é—®é¢˜?åœ¨å‰©ä½™å®¹é‡ä¸ºcæ—¶ï¼Œä»<code>å‰</code>iç§ç‰©å“ä¸­å¾—åˆ°çš„æœ€å¤§ä»·å€¼å’Œ</li><li>ä¸‹ä¸€ä¸ªå­é—®é¢˜?åˆ†ç±»è®¨è®ºï¼š<ul><li>ä¸é€‰ï¼šåœ¨å‰©ä½™å®¹é‡ä¸ºcæ—¶ï¼Œä»<code>å‰</code>i-1 ç§ç‰©å“ä¸­å¾—åˆ°çš„æœ€å¤§ä»·å€¼å’Œ:</li><li>é€‰ä¸€ä¸ªï¼Œåœ¨å‰©ä½™å®¹é‡ä¸ºc-w[i]æ—¶ï¼Œä»<code>å‰</code>iç§ç‰©å“ä¸­å¾—åˆ°çš„æœ€å¤§ä»·å€¼å’Œ</li></ul></li></ul><p>è¿™é‡Œå’Œ0-1èƒŒåŒ…çš„å›æº¯<code>åŒºåˆ«</code>ä¸ºï¼Œåœ¨é€‰äº†ä¸€ä¸ªç‰©å“ä¹‹åï¼Œiæ˜¯ä¸å˜çš„ï¼Œè¡¨ç¤ºå¯ä»¥ç»§ç»­é€‰ç¬¬iä¸­ç‰©å“ã€‚å› æ­¤ä¸æ˜¯é€’å½’åˆ°i-1ï¼Œè€Œæ˜¯é€’å½’åˆ°iã€‚</p><p>å¾ˆå®¹æ˜“å¾—åˆ°å…¶å®ç°ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">unbounded_knapsack</span><span class="params">(<span class="type">int</span> c, vector&lt;<span class="type">int</span>&gt;&amp; w, vector&lt;<span class="type">int</span>&gt;&amp; v)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n = w.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">this</span> <span class="keyword">auto</span>&amp;&amp; dfs, <span class="type">int</span> i, <span class="type">int</span> c) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &lt; <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (c &lt; w[i])</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">dfs</span>(i<span class="number">-1</span>, c);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">max</span>(<span class="built_in">dfs</span>(i, c), <span class="built_in">dfs</span>(i, c-w[i]) + v[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dfs</span>(n<span class="number">-1</span>, c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>2. é›¶é’±å…‘æ¢</h1><p>çœ‹ä¸€é“Leetcodeé¢˜<a href="https://leetcode.cn/problems/coin-change/description/">322. é›¶é’±å…‘æ¢</a>ã€‚</p><h2 id="2-1-é—®é¢˜æè¿°">2.1 é—®é¢˜æè¿°</h2><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ coins ï¼Œè¡¨ç¤ºä¸åŒé¢é¢çš„ç¡¬å¸ï¼›ä»¥åŠä¸€ä¸ªæ•´æ•° amount ï¼Œè¡¨ç¤ºæ€»é‡‘é¢ã€‚</p><p>è®¡ç®—å¹¶è¿”å›å¯ä»¥å‡‘æˆæ€»é‡‘é¢æ‰€éœ€çš„<code>æœ€å°‘çš„ç¡¬å¸ä¸ªæ•°</code>ã€‚å¦‚æœæ²¡æœ‰ä»»ä½•ä¸€ç§ç¡¬å¸ç»„åˆèƒ½ç»„æˆæ€»é‡‘é¢ï¼Œè¿”å› -1 ã€‚</p><p>ä½ å¯ä»¥è®¤ä¸ºæ¯ç§ç¡¬å¸çš„æ•°é‡æ˜¯æ— é™çš„ã€‚</p><h2 id="2-2-åŸºæœ¬æ€è·¯">2.2 åŸºæœ¬æ€è·¯</h2><p>èƒŒåŒ…é—®é¢˜çš„å¸¸è§å˜å½¢ï¼š</p><ol><li>è‡³å¤šè£…capacityï¼Œæ±‚æ–¹æ¡ˆæ•°/æœ€å¤§ä»·å€¼å’Œ</li><li>æ°å¥½è£…capacityï¼Œæ±‚æ–¹æ¡ˆæ•°/æœ€å¤§/æœ€å°ä»·å€¼å’Œ</li><li>è‡³å°‘è£…capacityï¼Œæ±‚æ–¹æ¡ˆæ•°/æœ€å°ä»·å€¼å’Œ</li></ol><p>è¿™é“Leetcodeé¢˜ä¹Ÿæ˜¯å®Œå…¨èƒŒåŒ…çš„ä¸€ç§å˜å½¢ï¼ŒæŠŠç‰©å“ä»·å€¼çœ‹æˆæ˜¯1ï¼ŒæŠŠæ±‚æœ€å¤§æ”¹æˆæ±‚æœ€å°ï¼Œå¯ä»¥å¾—åˆ°çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dfs</span>(i, c) = <span class="built_in">min</span>(<span class="built_in">dfs</span>(i - <span class="number">1</span>, c), <span class="built_in">dfs</span>(i, c - w[i]) + <span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>dfs(i, c)è¡¨ç¤ºå‰iç§ç¡¬å¸ç»„åˆé‡‘é¢æ°å¥½ä¸ºcçš„æ‰€éœ€çš„ç¡¬å¸ä¸ªæ•°ã€‚ç”±äºè¦æ±‚æ°å¥½ç»„æˆamountï¼Œæ‰€ä»¥å½“c=0æ—¶æ‰èƒ½è¿”å›0è¡¨ç¤ºå‰iä¸ªç‰©å“ç»„æˆé‡‘é¢cï¼ˆé‡‘é¢0ï¼‰éœ€è¦0æšç¡¬å¸ï¼Œå¦åˆ™è¿”å›æ— ç©·å¤§è¡¨ç¤ºæ–¹æ¡ˆä¸åˆæ³•ã€‚è¿™æ ·åé¢å–minæ—¶è‡ªç„¶å°±å–åˆ°äº†ä¸æ˜¯æ— ç©·å¤§çš„æ–¹æ¡ˆã€‚</p><p>æœ€åè¿˜éœ€è¦åˆ¤æ–­ä¸€ä¸‹ï¼Œå¦‚æœanså°äºæ— ç©·å¤§è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªåˆæ³•æ–¹æ¡ˆï¼Œå¦åˆ™æ— åˆæ³•æ–¹æ¡ˆã€‚</p><h2 id="2-3-å…·ä½“å®ç°">2.3 å…·ä½“å®ç°</h2><h3 id="2-3-1-é€’å½’">2.3.1 é€’å½’</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">coinChange</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; coins, <span class="type">int</span> amount)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = coins.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">memo</span>(n, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(amount + <span class="number">1</span>, <span class="number">-1</span>));</span><br><span class="line">        <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">this</span> <span class="keyword">auto</span>&amp;&amp; dfs, <span class="type">int</span> i, <span class="type">int</span> c) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> c == <span class="number">0</span> ? <span class="number">0</span> : INT_MAX / <span class="number">2</span>;</span><br><span class="line">            <span class="type">int</span>&amp; res = memo[i][c];</span><br><span class="line">            <span class="keyword">if</span> (res != <span class="number">-1</span>)</span><br><span class="line">                <span class="keyword">return</span> res;</span><br><span class="line">            <span class="keyword">if</span> (c &lt; coins[i]) </span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">dfs</span>(i - <span class="number">1</span>, c);</span><br><span class="line">            <span class="keyword">return</span> res = <span class="built_in">min</span>(<span class="built_in">dfs</span>(i - <span class="number">1</span>, c), <span class="built_in">dfs</span>(i, c - coins[i]) + <span class="number">1</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="type">int</span> ans = <span class="built_in">dfs</span>(n - <span class="number">1</span>, amount);</span><br><span class="line">        <span class="keyword">return</span> ans &lt; INT_MAX / <span class="number">2</span> ? ans : <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[][] memo;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] coins;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">coinChange</span><span class="params">(<span class="type">int</span>[] coins, <span class="type">int</span> amount)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> coins.length;</span><br><span class="line">        <span class="built_in">this</span>.coins = coins;</span><br><span class="line">        memo = <span class="keyword">new</span> <span class="title class_">int</span>[n][amount + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            Arrays.fill(memo[i], -<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> dfs(n - <span class="number">1</span>, amount);</span><br><span class="line">        <span class="keyword">return</span> res &lt; Integer.MAX_VALUE / <span class="number">2</span> ? res : -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> c)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &lt; <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> c == <span class="number">0</span> ? <span class="number">0</span> : Integer.MAX_VALUE / <span class="number">2</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> memo[i][c];</span><br><span class="line">        <span class="keyword">if</span> (res != -<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        <span class="keyword">if</span> (c &lt; coins[i]) </span><br><span class="line">            <span class="keyword">return</span> dfs(i - <span class="number">1</span>, c);</span><br><span class="line">        <span class="type">return</span> <span class="variable">res</span> <span class="operator">=</span> Math.min(dfs(i - <span class="number">1</span>, c), dfs(i, c - coins[i]) + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-3-2-ä¼˜åŒ–ä¸ºé€’æ¨">2.3.2 ä¼˜åŒ–ä¸ºé€’æ¨</h3><p>ä¾ç„¶æ˜¯ä½¿ç”¨fæ•°ç»„ï¼Œæ ¹æ®é€’å½’è¾¹ç•Œæ¡ä»¶å½“<code>i &lt; 0 &amp;&amp; c == 0</code>æ—¶æ‰æ˜¯0ï¼Œå…¶ä»–éƒ½æ˜¯æ— ç©·å¤§ï¼Œæ‰€ä»¥fæ•°ç»„å¯ä»¥åˆå§‹åŒ–ä¸ºæ— ç©·å¤§ï¼Œf[0][0]åˆå§‹åŒ–ä¸º0ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’æ¨ ç©ºé—´å¤æ‚åº¦ O(n * amount) </span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">coinChange</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; coins, <span class="type">int</span> amount)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = coins.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">f</span>(n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(amount + <span class="number">1</span>, INT_MAX / <span class="number">2</span>));</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt;= amount; ++j) &#123;</span><br><span class="line">                f[i + <span class="number">1</span>][j] = f[i][j];</span><br><span class="line">                <span class="keyword">if</span> (j &gt;= coins[i])</span><br><span class="line">                    f[i + <span class="number">1</span>][j] = <span class="built_in">min</span>(f[i][j], f[i + <span class="number">1</span>][j - coins[i]] + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="type">int</span> res = f[n][amount];</span><br><span class="line">        <span class="keyword">return</span> res &lt; INT_MAX / <span class="number">2</span> ? res : <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’æ¨ ç©ºé—´å¤æ‚åº¦O(n * amount)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">coinChange</span><span class="params">(<span class="type">int</span>[] coins, <span class="type">int</span> amount)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> coins.length;</span><br><span class="line">        <span class="type">int</span>[][] f = <span class="keyword">new</span> <span class="title class_">int</span>[n + <span class="number">1</span>][amount + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n + <span class="number">1</span>; ++i) &#123;</span><br><span class="line">            Arrays.fill(f[i], Integer.MAX_VALUE / <span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt;= amount; ++j) &#123;</span><br><span class="line">                f[i + <span class="number">1</span>][j] = f[i][j];</span><br><span class="line">                <span class="keyword">if</span> (j &gt;= coins[i])</span><br><span class="line">                    f[i + <span class="number">1</span>][j] = Math.min(f[i][j], f[i+<span class="number">1</span>][j - coins[i]] + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> f[n][amount];</span><br><span class="line">        <span class="keyword">return</span> res &lt; Integer.MAX_VALUE / <span class="number">2</span> ? res : -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-3-3-ç©ºé—´ä¼˜åŒ–-ä¸¤ä¸ªæ•°ç»„">2.3.3 ç©ºé—´ä¼˜åŒ– ä¸¤ä¸ªæ•°ç»„</h3><p>åŒ0-1èƒŒåŒ…</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’æ¨ ç©ºé—´å¤æ‚åº¦ O(amount) ä¸¤ä¸ªæ•°ç»„</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">coinChange</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; coins, <span class="type">int</span> amount)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = coins.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">f</span>(<span class="number">2</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(amount + <span class="number">1</span>, INT_MAX / <span class="number">2</span>));</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt;= amount; ++j) &#123;</span><br><span class="line">                f[(i + <span class="number">1</span>) % <span class="number">2</span>][j] = f[i % <span class="number">2</span>][j];</span><br><span class="line">                <span class="keyword">if</span> (j &gt;= coins[i])</span><br><span class="line">                    f[(i + <span class="number">1</span>) % <span class="number">2</span>][j] = <span class="built_in">min</span>(f[i % <span class="number">2</span>][j], f[(i + <span class="number">1</span>) % <span class="number">2</span>][j - coins[i]] + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="type">int</span> res = f[n % <span class="number">2</span>][amount];</span><br><span class="line">        <span class="keyword">return</span> res &lt; INT_MAX / <span class="number">2</span> ? res : <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’æ¨ ç©ºé—´å¤æ‚åº¦O(amount)  ä¸¤ä¸ªæ•°ç»„</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">coinChange</span><span class="params">(<span class="type">int</span>[] coins, <span class="type">int</span> amount)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> coins.length;</span><br><span class="line">        <span class="type">int</span>[][] f = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">2</span>][amount + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">2</span>; ++i) &#123;</span><br><span class="line">            Arrays.fill(f[i], Integer.MAX_VALUE / <span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt;= amount; ++j) &#123;</span><br><span class="line">                f[(i + <span class="number">1</span>) % <span class="number">2</span>][j] = f[i % <span class="number">2</span>][j];</span><br><span class="line">                <span class="keyword">if</span> (j &gt;= coins[i])</span><br><span class="line">                    f[(i + <span class="number">1</span>) % <span class="number">2</span>][j] = Math.min(f[i % <span class="number">2</span>][j], f[(i+<span class="number">1</span>) % <span class="number">2</span>][j - coins[i]] + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> f[n % <span class="number">2</span>][amount];</span><br><span class="line">        <span class="keyword">return</span> res &lt; Integer.MAX_VALUE / <span class="number">2</span> ? res : -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-3-4-ç©ºé—´ä¼˜åŒ–-ä¸€ä¸ªæ•°ç»„">2.3.4 ç©ºé—´ä¼˜åŒ– ä¸€ä¸ªæ•°ç»„</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’æ¨ ç©ºé—´å¤æ‚åº¦ O(amount) ä¸€ä¸ªæ•°ç»„</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">coinChange</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; coins, <span class="type">int</span> amount)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = coins.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">f</span><span class="params">(amount + <span class="number">1</span>, INT_MAX / <span class="number">2</span>)</span></span>;</span><br><span class="line">        f[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt;= amount; ++j) &#123;</span><br><span class="line">                <span class="keyword">if</span> (j &gt;= coins[i])</span><br><span class="line">                    f[j] = <span class="built_in">min</span>(f[j], f[j - coins[i]] + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="type">int</span> res = f[amount];</span><br><span class="line">        <span class="keyword">return</span> res &lt; INT_MAX / <span class="number">2</span> ? res : <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’æ¨ ç©ºé—´å¤æ‚åº¦O(amount)  ä¸€ä¸ªæ•°ç»„</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">coinChange</span><span class="params">(<span class="type">int</span>[] coins, <span class="type">int</span> amount)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> coins.length;</span><br><span class="line">        <span class="type">int</span>[] f = <span class="keyword">new</span> <span class="title class_">int</span>[amount + <span class="number">1</span>];</span><br><span class="line">        Arrays.fill(f, Integer.MAX_VALUE / <span class="number">2</span>);</span><br><span class="line">        f[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt;= amount; ++j) &#123;</span><br><span class="line">                <span class="keyword">if</span> (j &gt;= coins[i])</span><br><span class="line">                    f[j] = Math.min(f[j], f[j - coins[i]] + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> f[amount];</span><br><span class="line">        <span class="keyword">return</span> res &lt; Integer.MAX_VALUE / <span class="number">2</span> ? res : -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åŠ¨æ€è§„åˆ’ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLäºŒï¼šä½¿ç”¨C++è¿æ¥MySQL</title>
      <link href="/2025/03/02/mysql2/"/>
      <url>/2025/03/02/mysql2/</url>
      
        <content type="html"><![CDATA[<h1>å‰è¨€</h1><p>åœ¨Visual Studio Code ä¸‹ä½¿ç”¨C++è¿æ¥MySQLè¿›è¡ŒåŸºæœ¬æ“ä½œï¼Œå‚è€ƒCSDNåšå®¢<a href="https://blog.csdn.net/weixin_40582034/article/details/115562097?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522fb76f6ed18bf4ea960962a642e3d6c29%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&amp;request_id=fb76f6ed18bf4ea960962a642e3d6c29&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-3-115562097-null-null.nonecase&amp;utm_term=mysql&amp;spm=1018.2226.3001.4450">C/C++è®¿é—®MySQLæ•°æ®åº“</a>ã€<a href="https://blog.csdn.net/weixin_41987016/article/details/135668803?spm=1001.2014.3001.5501">VsCode + CMakeæ„å»ºé¡¹ç›® C/C++è¿æ¥Mysqlæ•°æ®åº“ | æ•°æ®åº“å¢åˆ æ”¹æŸ¥C++å°è£… | ä¿¡æ¯ç®¡ç†ç³»ç»Ÿé€šç”¨ä»£ç  ---- è¯¾ç¨‹ç¬”è®°</a>ä»¥åŠ<a href="https://blog.csdn.net/weixin_52273949/article/details/130613224">windowsä¸‹ä½¿ç”¨vscodeåŸç”Ÿæ€é…ç½®c++é“¾æ¥mysqlæ•°æ®åº“</a>ä¸‰ç¯‡åšå®¢æ–‡ç« ï¼ˆç‚¹å‡»å³å¯è·³è½¬æ–‡ç« ï¼Œéå•†ä¸šå¼•ç”¨ï¼Œä¾µæƒè”ç³»åˆ ï¼‰ã€‚</p><h1>1. é…ç½®å·¥ç¨‹ç¯å¢ƒ</h1><ol><li>æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ä½œä¸ºå·¥ç¨‹ç›®å½•</li><li>å°†mysqlä¸‹çš„<code>includeæ–‡ä»¶å¤¹</code>ç›´æ¥æ‹·è´åˆ°å·¥ç¨‹ç›®å½•ä¸‹ã€æˆ–è€…åªæ‹·è´includeä¸­çš„mysql.hæ–‡ä»¶ã€‘<code>æ–¹ä¾¿å¼•ç”¨mysql.hå¤´æ–‡ä»¶</code></li><li>æ‹·è´<code>libmysql.dll</code> ã€<code>libmysql.lib</code>ã€<code>mysqlclient.lib</code>æ–‡ä»¶ç›´æ¥æ”¾åœ¨å·¥ç¨‹ç›®å½•ä¸‹<code>å› ä¸ºè¿™é‡Œå¯æ‰§è¡Œæ–‡ä»¶åœ¨å…¶æ‰€åœ¨ç›®å½•ä¸‹ç›´æ¥å¯»æ‰¾åŠ¨æ€é“¾æ¥æºæ–‡ä»¶</code></li><li>å°†<code>libmysql.dll</code> ã€<code>libmysql.lib</code>å†æ‹·è´åˆ°å·¥ç¨‹çš„libç›®å½•ä¸‹<code>æ–¹ä¾¿ç¼–è¯‘å†™åº“è·¯å¾„</code></li></ol><p>ç„¶åå·¥ç¨‹ç›®å½•å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">å·¥ç¨‹ç›®å½•</span><br><span class="line">â”‚  libmysql.dll</span><br><span class="line">â”‚  libmysql.lib</span><br><span class="line">â”‚  mysqlclient.lib</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€include</span><br><span class="line">â”‚</span><br><span class="line">â””â”€lib</span><br><span class="line">    libmysql.dll</span><br><span class="line">    libmysql.lib</span><br></pre></td></tr></table></figure><p>åˆ°æ­¤å·¥ç¨‹ç¯å¢ƒé…ç½®å®Œæˆã€‚</p><h1>2. ç¼–å†™ä»£ç </h1><h2 id="2-1-è¿æ¥æ•°æ®åº“">2.1 è¿æ¥æ•°æ®åº“</h2><p>å…ˆè¿æ¥æ•°æ®åº“ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;include/mysql.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">char</span> * host = <span class="string">&quot;127.0.0.1&quot;</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span> * user = <span class="string">&quot;root&quot;</span>; <span class="comment">// ç”¨æˆ·å</span></span><br><span class="line"><span class="type">const</span> <span class="type">char</span> * pw = <span class="string">&quot;123456&quot;</span>; <span class="comment">// å¯†ç </span></span><br><span class="line"><span class="type">const</span> <span class="type">char</span> * database_name = <span class="string">&quot;database_test&quot;</span>; <span class="comment">// æ•°æ®åº“å</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> port = <span class="number">3306</span>; <span class="comment">// ç«¯å£å·</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    MYSQL * con = <span class="built_in">mysql_init</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">mysql_real_connect</span> (con, host, user, pw, database_name, port, <span class="literal">nullptr</span>, <span class="number">0</span>)) &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;Failed to connect to database: Error:%s\n&quot;</span>, <span class="built_in">mysql_error</span>(con));</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Success&quot;</span>&lt;&lt;endl;</span><br><span class="line">    <span class="built_in">mysql_close</span>(con);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°†ä¸Šè¿°ä»£ç ä¿å­˜åˆ°main.cppæ–‡ä»¶ä¸­ï¼Œç„¶ååœ¨cmdä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œç¼–è¯‘ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g++ .\main.cpp -Llib -lmysql -Iinclude</span><br></pre></td></tr></table></figure><p>è§£é‡Šä¸€ä¸‹è¿™æ®µå‘½ä»¤ï¼š</p><ol><li>g++<ul><li>è¿™æ˜¯ GNU C++ ç¼–è¯‘å™¨</li></ul></li><li>.\main.cpp<ul><li>è¿™æ˜¯è¦ç¼–è¯‘çš„æºæ–‡ä»¶ï¼Œ.\main.cpp è¡¨ç¤ºå½“å‰ç›®å½•ä¸‹çš„ main.cpp æ–‡ä»¶ã€‚</li></ul></li><li>-Llib<ul><li>-L é€‰é¡¹ç”¨äºæŒ‡å®šåº“æ–‡ä»¶çš„æœç´¢è·¯å¾„ã€‚</li><li>lib æ˜¯åº“æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ã€‚ç¼–è¯‘å™¨ä¼šåœ¨ lib ç›®å½•ä¸­æŸ¥æ‰¾é“¾æ¥æ—¶éœ€è¦çš„åº“æ–‡ä»¶ã€‚</li></ul></li><li>-lmysql<ul><li>-lï¼ˆå°å†™lï¼‰ é€‰é¡¹ç”¨äºé“¾æ¥æŒ‡å®šçš„åº“ã€‚</li><li>mysql æ˜¯è¦é“¾æ¥çš„åº“åç§°ã€‚</li><li>åœ¨Linuxä¸­ï¼Œç¼–è¯‘å™¨ä¼šæŸ¥æ‰¾åä¸º libmysql.aï¼ˆé™æ€åº“ï¼‰æˆ– <a href="http://libmysql.so">libmysql.so</a>ï¼ˆåŠ¨æ€åº“ï¼‰çš„æ–‡ä»¶ã€‚</li><li>åœ¨Windowsä¸­ï¼Œç¼–è¯‘å™¨ä¼šæŸ¥æ‰¾åä¸º libmysql.libï¼ˆé™æ€åº“ï¼‰æˆ– libmysql.dllï¼ˆåŠ¨æ€åº“ï¼‰çš„æ–‡ä»¶ã€‚</li></ul></li><li>-Iinclude<ul><li>-Iï¼ˆå¤§å†™Iï¼‰ é€‰é¡¹ç”¨äºæŒ‡å®šå¤´æ–‡ä»¶çš„æœç´¢è·¯å¾„ã€‚</li><li>include æ˜¯å¤´æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ã€‚ç¼–è¯‘å™¨ä¼šåœ¨ include ç›®å½•ä¸­æŸ¥æ‰¾ #include æŒ‡ä»¤ä¸­å¼•ç”¨çš„å¤´æ–‡ä»¶ã€‚</li></ul></li></ol><p>è¿™æ¡å‘½ä»¤çš„ä½œç”¨æ˜¯ï¼š</p><ol><li>ç¼–è¯‘ main.cpp æ–‡ä»¶ã€‚</li><li>åœ¨ include ç›®å½•ä¸­æŸ¥æ‰¾å¤´æ–‡ä»¶ã€‚</li><li>åœ¨ lib ç›®å½•ä¸­æŸ¥æ‰¾ libmysql åº“æ–‡ä»¶ã€‚</li><li>å°† main.cpp ç¼–è¯‘æˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¹¶é“¾æ¥ libmysql åº“ã€‚</li><li>æœ€ç»ˆç”Ÿæˆa.exeï¼ˆwindowsï¼‰æˆ–è€…a.outï¼ˆlinuxï¼‰çš„å¯æ‰§è¡Œæ–‡ä»¶</li></ol><h2 id="2-2-å¢åˆ æŸ¥æ”¹">2.2 å¢åˆ æŸ¥æ”¹</h2><p>æˆ‘ä½¿ç”¨çš„æ•°æ®åº“åç§°ä¸ºdatabase_testï¼Œé‡Œé¢æœ‰ä¸ªè¡¨åç§°ä¸ºstudentsï¼Œè¡¨ä¸­å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+------------+--------------+--------------+</span><br><span class="line">| student_id | student_name | class_id     |</span><br><span class="line">+------------+--------------+--------------+</span><br><span class="line">|      10000 | å¼ ä¸‰         | è½¯ä»¶å·¥ç¨‹ä¸€ç­ |</span><br><span class="line">+------------+--------------+--------------+</span><br></pre></td></tr></table></figure><p>ä¸ºäº†æ–¹ä¾¿å¢åˆ æŸ¥æ”¹å’Œç®¡ç†ï¼Œå®šä¹‰ä¸€ä¸ªç»“æ„ä½“ç»„ç»‡ä¿¡æ¯ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="type">int</span> student_id;</span><br><span class="line">    string student_name;</span><br><span class="line">    <span class="type">int</span> class_id;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ’å…¥">æ’å…¥</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;include/mysql.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">char</span> * host = <span class="string">&quot;127.0.0.1&quot;</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span> * user = <span class="string">&quot;root&quot;</span>; <span class="comment">// ç”¨æˆ·å</span></span><br><span class="line"><span class="type">const</span> <span class="type">char</span> * pw = <span class="string">&quot;123456&quot;</span>; <span class="comment">// å¯†ç </span></span><br><span class="line"><span class="type">const</span> <span class="type">char</span> * database_name = <span class="string">&quot;database_test&quot;</span>; <span class="comment">// æ•°æ®åº“å</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> port = <span class="number">3306</span>; <span class="comment">// ç«¯å£å·</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="type">int</span> student_id;</span><br><span class="line">    string student_name;</span><br><span class="line">    string class_id;</span><br><span class="line">&#125;Student;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    MYSQL * con = <span class="built_in">mysql_init</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">mysql_real_connect</span> (con, host, user, pw, database_name, port, <span class="literal">nullptr</span>, <span class="number">0</span>)) &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;Failed to connect to database: Error: %s\n&quot;</span>, <span class="built_in">mysql_error</span>(con));</span><br><span class="line">        <span class="built_in">mysql_close</span>(con);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Success&quot;</span>&lt;&lt;endl;</span><br><span class="line"></span><br><span class="line">    Student stu&#123;<span class="number">10002</span>, <span class="string">&quot;æå&quot;</span>, <span class="string">&quot;è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯äºŒç­&quot;</span>&#125;;</span><br><span class="line">    <span class="type">char</span> sql[<span class="number">256</span>];</span><br><span class="line">    <span class="built_in">sprintf</span>(sql, <span class="string">&quot;insert into students (student_id, student_name, class_id) values (%d,&#x27;%s&#x27;,&#x27;%s&#x27;)&quot;</span>, </span><br><span class="line">        stu.student_id, stu.student_name.<span class="built_in">c_str</span>(), stu.class_id.<span class="built_in">c_str</span>());</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">mysql_query</span>(con, sql)) &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;Failed to insert data: Error: %s\n&quot;</span>, <span class="built_in">mysql_error</span>(con));</span><br><span class="line">        <span class="built_in">mysql_close</span>(con);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">mysql_close</span>(con);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>åˆ›å»ºä¸€ä¸ª Student å¯¹è±¡ stuï¼Œå¹¶åˆå§‹åŒ–å…¶æ•°æ®ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Student stu&#123;<span class="number">10002</span>, <span class="string">&quot;æå&quot;</span>, <span class="string">&quot;è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯äºŒç­&quot;</span>&#125;;</span><br></pre></td></tr></table></figure><ol start="2"><li>æ„é€  SQL æ’å…¥è¯­å¥</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> sql[<span class="number">256</span>];</span><br><span class="line"><span class="built_in">sprintf</span>(sql, <span class="string">&quot;insert into students (student_id, student_name, class_id) values (%d,&#x27;%s&#x27;,&#x27;%s&#x27;)&quot;</span>, </span><br><span class="line">    stu.student_id, stu.student_name.<span class="built_in">c_str</span>(), stu.class_id.<span class="built_in">c_str</span>());</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨ sprintf æ„é€ ä¸€ä¸ª SQL æ’å…¥è¯­å¥ã€‚<ul><li>sprintf æ˜¯ C æ ‡å‡†åº“ä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºå°†æ ¼å¼åŒ–çš„æ•°æ®å†™å…¥å­—ç¬¦ä¸²ä¸­ã€‚</li><li>å®ƒçš„ä½œç”¨ç±»ä¼¼äº printfï¼Œä½† printf æ˜¯å°†æ•°æ®è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºï¼ˆå¦‚ç»ˆç«¯ï¼‰ï¼Œè€Œ sprintf æ˜¯å°†æ•°æ®å†™å…¥ä¸€ä¸ªå­—ç¬¦æ•°ç»„ä¸­</li><li>sprintf çš„ %s æ ¼å¼è¯´æ˜ç¬¦è¦æ±‚ä¼ å…¥çš„å‚æ•°æ˜¯ä¸€ä¸ª C é£æ ¼å­—ç¬¦ä¸²ï¼ˆå³ const char* ç±»å‹ï¼‰ï¼Œä½¿ç”¨c_stræˆå‘˜å‡½æ•°å°†stringè½¬æ¢ä¸º C é£æ ¼å­—ç¬¦ä¸²</li><li><code>C é£æ ¼å­—ç¬¦ä¸²</code>ï¼šæ˜¯ä¸€ä¸ªä»¥ \0 ç»“å°¾çš„å­—ç¬¦æ•°ç»„ï¼ˆchar[] æˆ– const char*ï¼‰</li></ul></li><li>students æ˜¯ç›®æ ‡è¡¨åï¼Œstudent_idã€student_name å’Œ class_id æ˜¯è¡¨çš„å­—æ®µã€‚</li><li>stu.student_idã€stu.student_name å’Œ stu.class_id æ˜¯å¾…æ’å…¥çš„æ•°æ®ã€‚</li></ul><ol start="3"><li>æ‰§è¡Œ SQL è¯­å¥</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">mysql_query</span>(con, sql)) &#123;</span><br><span class="line">    <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;Failed to insert data: Error: %s\n&quot;</span>, <span class="built_in">mysql_error</span>(con));</span><br><span class="line">    <span class="built_in">mysql_close</span>(con);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>mysql_query æ‰§è¡Œ SQL è¯­å¥ã€‚<ul><li>å¦‚æœæ‰§è¡Œå¤±è´¥ï¼Œè¾“å‡ºé”™è¯¯ä¿¡æ¯å¹¶å…³é—­è¿æ¥ã€‚</li><li>å¦‚æœæ‰§è¡ŒæˆåŠŸï¼Œæ•°æ®å°†è¢«æ’å…¥åˆ°æ•°æ®åº“ä¸­ã€‚</li><li>mysql_query æ˜¯ MySQL C API ä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºå‘ MySQL æœåŠ¡å™¨å‘é€ SQL æŸ¥è¯¢å¹¶æ‰§è¡Œã€‚</li><li>mysql_query æ˜¯ MySQL C API ä¸­æœ€å¸¸ç”¨çš„å‡½æ•°ä¹‹ä¸€ï¼Œé€‚ç”¨äºæ‰§è¡Œå„ç§ SQL è¯­å¥</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹å•ä¾‹æ¨¡å¼</title>
      <link href="/2025/03/02/designPattern1/"/>
      <url>/2025/03/02/designPattern1/</url>
      
        <content type="html"><![CDATA[<p>é€šè¿‡ä»–äººåšå®¢å­¦ä¹ ä¸€ä¸‹å•ä¾‹æ¨¡å¼ä»¥åŠC++å®ç°ï¼Œåšå®¢æ–‡ç« é“¾æ¥<a href="https://blog.csdn.net/trackxiaoxin321/article/details/110749781">C++è®¾è®¡æ¨¡å¼ä¹‹å•ä¾‹æ¨¡å¼è¯¦è§£ï¼ˆæ‡’æ±‰æ¨¡å¼ã€é¥¿æ±‰æ¨¡å¼ã€åŒé‡é”ï¼‰</a>ã€‚</p><h1>1. èµ°è¿›å•ä¾‹æ¨¡å¼</h1><p>æˆ‘ä»¬å¸Œæœ›ç±»çš„å®ä¾‹å¯¹è±¡æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªï¼Œæ¯”å¦‚æ•°æ®åº“è¿æ¥é…ç½®ã€åº”ç”¨è®¾ç½®æ—¶ï¼Œç³»ç»Ÿä¸­éœ€è¦ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œæ‰€æœ‰æ¨¡å—å…±äº«åŒä¸€é…ç½®ã€‚å†æ¯”å¦‚æ•°æ®åº“è¿æ¥æ± ä¹Ÿéœ€è¦å…¨å±€ç®¡ç†ï¼Œé¿å…é¢‘ç¹åˆ›å»ºä¸é”€æ¯ã€‚</p><p>æ„Ÿè§‰ä¸Šè¿°ä¾‹å­å¹¶ä¸ç›´è§‚ï¼Œå†ä¸¾ä¸ªç›´è§‚é€šä¿—çš„ä¾‹å­â€”â€”å®¶é‡Œçš„ç”µè¡¨ã€‚å®¶é‡Œçš„ç”µè¡¨è®°å½•æ•´ä¸ªå®¶åº­çš„ç”¨ç”µé‡ã€‚æ— è®ºä½ åœ¨å¨æˆ¿ã€å§å®¤è¿˜æ˜¯å®¢å…ç”¨ç”µï¼Œç”µè¡¨éƒ½æ˜¯åŒä¸€ä¸ªã€‚ä½ ä¸ä¼šå¸Œæœ›æ¯ä¸ªæˆ¿é—´éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç”µè¡¨ï¼Œå› ä¸ºé‚£æ ·ä¼šå¯¼è‡´ç”¨ç”µé‡çš„è®¡ç®—æ··ä¹±ã€‚</p><p>æˆ‘ä»¬å¸Œæœ›å®ä¾‹å¯¹è±¡æœ‰ä¸”åªæœ‰ä¸€ä¸ªï¼Œæ­¤æ—¶å°±éœ€è¦ç”¨åˆ°å•ä¾‹æ¨¡å¼äº†ã€‚å•ä¾‹æ¨¡å¼ä¿è¯ä¸€ä¸ªç±»æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶ä¸”ä¼šæä¾›ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹ã€‚</p><p>å¦‚ä½•å®ç°è®©ä¸€ä¸ªç±»çš„å®ä¾‹åªæœ‰ä¸€ä¸ªå‘¢ï¼Ÿé‚£ä¹ˆå°±éœ€è¦åœ¨æ„é€ å‡½æ•°ä¸Šåšç‚¹â€œæ‰‹è„šâ€ã€‚å¦‚æœæ„é€ å‡½æ•°æ˜¯publicï¼Œé‚£ä¹ˆå°±æ²¡æœ‰ä»»ä½•é™åˆ¶åœ°å¯ä»¥æ„é€ å¯¹è±¡äº†ã€‚å› æ­¤ï¼Œéœ€è¦å°†æ„é€ å‡½æ•°ç§æœ‰åŒ–å³è®¾ç½®ä¸ºprivateå±æ€§ï¼Œå¹¶å¯¹å¤–æä¾›ä¸€ä¸ªæ¥å£ï¼Œå¹¶ä¸”è¿™ä¸ªæ¥å£å¾—æ˜¯é™æ€çš„å³staticå…³é”®å­—ä¿®é¥°çš„æ¥å£ã€‚å¦‚æœä¸ä½¿ç”¨staticå…³é”®å­—ä¿®é¥°ï¼Œé‚£ä¹ˆè°ƒç”¨è¿™ä¸ªæ¥å£å°±éœ€è¦åˆ›å»ºå¯¹è±¡ï¼Œè€Œæ„é€ å‡½æ•°åˆè¢«ç§æœ‰åŒ–äº†ï¼Œæ— æ³•åˆ›å»ºå¯¹è±¡ã€‚å› æ­¤è¿™ä¸ªæ¥å£å¾—æ˜¯é™æ€çš„ï¼ˆç±»ä¸­çš„é™æ€æ–¹æ³•å¯ä»¥é€šè¿‡<code>ç±»å::æ–¹æ³•å</code>çš„æ–¹å¼è°ƒç”¨ï¼Œæ— éœ€å¯¹è±¡ï¼‰ã€‚</p><p>æ­¤å¤–ï¼Œè¿˜éœ€è¦ç¦ç”¨æ‹·è´æ„é€ å‡½æ•°å’Œå¤åˆ¶è¿ç®—ç¬¦ã€‚</p><h2 id="1-2-è¡¥å……æ‹·è´æ„é€ å‡½æ•°">1.2 è¡¥å……æ‹·è´æ„é€ å‡½æ•°</h2><p>å¤ä¹ ä¸€ä¸‹æ‹·è´æ„é€ å‡½æ•°ã€‚</p><p>æ‹·è´æ„é€ å‡½æ•°æ˜¯C++ä¸­çš„ä¸€ä¸ªç‰¹æ®Šæˆå‘˜å‡½æ•°ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå¹¶å°†å…¶åˆå§‹åŒ–ä¸ºå¦ä¸€ä¸ªåŒç±»å‹å¯¹è±¡çš„å‰¯æœ¬ã€‚å®ƒåœ¨ä»¥ä¸‹æƒ…å†µä¸‹ä¼šè¢«è°ƒç”¨ï¼š</p><ul><li>ç”¨ä¸€ä¸ªå¯¹è±¡åˆå§‹åŒ–å¦ä¸€ä¸ªå¯¹è±¡æ—¶ã€‚</li><li>å°†å¯¹è±¡ä½œä¸ºå‚æ•°æŒ‰å€¼ä¼ é€’ç»™å‡½æ•°æ—¶ã€‚</li><li>ä»å‡½æ•°æŒ‰å€¼è¿”å›å¯¹è±¡æ—¶ã€‚</li></ul><p>æ‹·è´æ„é€ å‡½æ•°çš„å…¸å‹å½¢å¼å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// æ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="built_in">MyClass</span>(<span class="type">const</span> MyClass&amp; other) &#123;</span><br><span class="line">        <span class="comment">// æ‹·è´å‡½æ•°é€»è¾‘</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ‹·è´æ„é€ å‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ªå¸¸é‡å¼•ç”¨ï¼ˆconst MyClass&amp;ï¼‰ï¼Œè¡¨ç¤ºè¢«æ‹·è´çš„å¯¹è±¡ã€‚</p><p>æ‹·è´æ„é€ å‡½æ•°å¸¸è§é—®é¢˜æ˜¯<code>æµ…æ‹·è´</code>çš„é—®é¢˜ï¼Œä¸å†å¤šè¯´å•¦ã€‚</p><h1>2. å…·ä½“å®ç°</h1><p>å•ä¾‹æ¨¡å¼å®ç°æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li>æ‡’æ±‰æ–¹å¼</li><li>é¥¿æ±‰æ–¹å¼</li></ul><h1>3. æ‡’æ±‰æ–¹å¼</h1><p>æ‡’æ±‰æ–¹å¼ï¼šé¡¾åæ€ä¹‰ï¼Œå¾ˆâ€œæ‡’â€ï¼Œåªæœ‰ç”¨åˆ°äº†æ‰å®ä¾‹åŒ–å¯¹è±¡å¹¶è¿”å›ï¼ˆè°ƒç”¨äº†å¯¹å¤–çš„æ¥å£æ‰ä¼šå®ä¾‹åŒ–å¯¹è±¡ï¼‰ã€‚</p><h1>3.1 ä¸åŠ é”</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">static</span> Singleton* instance;<span class="comment">// é™æ€æˆå‘˜å˜é‡ï¼Œç±»å†…å£°æ˜ï¼Œç±»å¤–åˆå§‹åŒ–</span></span><br><span class="line"><span class="built_in">Singleton</span>() &#123;&#125;;<span class="comment">// æ„é€ å‡½æ•°å±æ€§è®¾ç½®ä¸ºç§æœ‰</span></span><br><span class="line">    <span class="built_in">Singleton</span>(<span class="type">const</span> Singleton &amp; sc) = <span class="keyword">delete</span>; <span class="comment">// ç¦ç”¨æ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line">    Singleton&amp; <span class="keyword">operator</span>=(<span class="type">const</span> Singleton &amp; sc) = <span class="keyword">delete</span>; <span class="comment">// ç¦ç”¨èµ‹å€¼è¿ç®—ç¬¦</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">static</span> Singleton&amp; <span class="title">getInstance</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (instance == <span class="literal">nullptr</span>)</span><br><span class="line">instance = <span class="keyword">new</span> <span class="built_in">Singleton</span>();</span><br><span class="line"><span class="keyword">return</span> *instance;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line">Singleton* Singleton::instance=<span class="literal">nullptr</span>; <span class="comment">// åˆå§‹åŒ–é™æ€å˜é‡</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Singleton&amp; singlep1 = Singleton::<span class="built_in">getInstance</span>();   <span class="comment">// é€šè¿‡ç±»åŸŸè·å–æ¥å£</span></span><br><span class="line">Singleton&amp; singlep2 = Singleton::<span class="built_in">getInstance</span>();</span><br><span class="line">    cout &lt;&lt; &amp;singlep1 &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; &amp;singlep2 &lt;&lt; endl;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°å®ç°æ˜¯<code>çº¿ç¨‹ä¸å®‰å…¨</code>çš„ï¼ŒåŸå› åœ¨äº<code>getInstance</code>æ–¹æ³•ä¸­çš„æ¡ä»¶åˆ¤æ–­å’Œå®ä¾‹åˆ›å»ºæ“ä½œä¸æ˜¯åŸå­çš„ã€‚åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå¯èƒ½ä¼šå¯¼è‡´å¤šä¸ªçº¿ç¨‹åŒæ—¶åˆ›å»ºå®ä¾‹ï¼Œä»è€Œç ´åå•ä¾‹æ¨¡å¼çš„å”¯ä¸€æ€§ã€‚</p><p>åœ¨ getInstance æ–¹æ³•ä¸­ï¼Œä»¥ä¸‹ä»£ç æ˜¯é—®é¢˜çš„æ ¹æºï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (instance == <span class="literal">nullptr</span>) </span><br><span class="line">    instance = <span class="keyword">new</span> <span class="built_in">Singleton</span>();</span><br></pre></td></tr></table></figure><ul><li>å¤šä¸ªçº¿ç¨‹å¯èƒ½åŒæ—¶è¿›å…¥ if (instance == nullptr) çš„åˆ¤æ–­ã€‚</li><li>å¦‚æœ instance ä¸º nullptrï¼Œå¤šä¸ªçº¿ç¨‹ä¼šåŒæ—¶æ‰§è¡Œ instance = new singleClass()ï¼Œå¯¼è‡´åˆ›å»ºå¤šä¸ªå®ä¾‹ã€‚</li><li>æœ€ç»ˆï¼Œinstance å¯èƒ½æŒ‡å‘ä¸åŒçš„å¯¹è±¡ï¼Œç ´åäº†å•ä¾‹æ¨¡å¼çš„å”¯ä¸€æ€§ã€‚</li></ul><h1>3.2 åŠ é”åæ£€æŸ¥</h1><p>ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œå¾ˆå®¹æ˜“æƒ³åˆ°ä½¿ç”¨äº’æ–¥ä¿¡å·é‡ä¹Ÿå°±æ˜¯äº’æ–¥é”æ¥è§£å†³ï¼Œäºæ˜¯å°±æœ‰ä»¥ä¸‹æ–¹æ¡ˆï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">static</span> Singleton* instance;   <span class="comment">// é™æ€æˆå‘˜å˜é‡ï¼Œç±»å†…å£°æ˜ï¼Œç±»å¤–åˆå§‹åŒ–</span></span><br><span class="line"><span class="type">static</span> mutex mtx;</span><br><span class="line"><span class="built_in">Singleton</span>() &#123;&#125;;  <span class="comment">// æ„é€ å‡½æ•°å±æ€§è®¾ç½®ä¸ºç§æœ‰</span></span><br><span class="line">    <span class="built_in">Singleton</span>(<span class="type">const</span> Singleton &amp; sc) = <span class="keyword">delete</span>; <span class="comment">// ç¦ç”¨æ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line">    Singleton&amp; <span class="keyword">operator</span>=(<span class="type">const</span> Singleton &amp; sc) = <span class="keyword">delete</span>; <span class="comment">// ç¦ç”¨èµ‹å€¼è¿ç®—ç¬¦</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">static</span> Singleton&amp; <span class="title">getInstance</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">mtx.<span class="built_in">lock</span>();</span><br><span class="line"><span class="keyword">if</span> (instance == <span class="literal">nullptr</span>)</span><br><span class="line">instance = <span class="keyword">new</span> <span class="built_in">Singleton</span>();</span><br><span class="line"><span class="keyword">return</span> *instance;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line">Singleton* Singleton::instance = <span class="literal">nullptr</span>; <span class="comment">// åˆå§‹åŒ–é™æ€å˜é‡</span></span><br><span class="line">mutex Singleton::mtx; <span class="comment">// ç±»å¤–åˆå§‹åŒ–</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Singleton&amp; singlep1 = Singleton::<span class="built_in">getInstance</span>();<span class="comment">// é€šè¿‡ç±»åŸŸè·å–æ¥å£</span></span><br><span class="line">Singleton&amp; singlep2 = Singleton::<span class="built_in">getInstance</span>();</span><br><span class="line">    cout &lt;&lt; &amp;singlep1 &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; &amp;singlep2 &lt;&lt; endl;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§å®ç°æ–¹æ³•æœ‰å¾ˆæ˜æ˜¾çš„ä¼˜ç¼ºç‚¹:</p><ul><li>ä¼˜ç‚¹<ul><li>ç®€å•ç›´è§‚</li></ul></li><li>ç¼ºç‚¹<ul><li>æ¯æ¬¡è°ƒç”¨<code>getInstance</code>éƒ½éœ€è¦åŠ é”ï¼Œæ€§èƒ½å¼€é”€è¾ƒå¤§ã€‚</li></ul></li></ul><h1>3.3 äºŒé‡é”</h1><p>å› æ­¤ç»§ç»­è¿›è¡Œæ”¹è¿›ï¼Œä½¿ç”¨<code>åŒé‡æ£€æŸ¥é”å®š</code>çš„æ–¹å¼ï¼Œåˆç§°ä¸º<code>äºŒé‡é”</code>ã€‚ä¸åŒäºå‰ä¸€ç§ä¸Šé”æ–¹æ³•ï¼ŒäºŒé‡é”çš„<code>æ ¸å¿ƒæ€æƒ³</code>æ˜¯é€šè¿‡ä¸¤æ¬¡æ£€æŸ¥å®ä¾‹æ˜¯å¦ä¸ºç©ºæ¥å‡å°‘åŠ é”çš„æ¬¡æ•°ï¼š</p><ol><li>ç¬¬ä¸€æ¬¡æ£€æŸ¥ï¼ˆä¸åŠ é”ï¼‰ï¼šæ£€æŸ¥å®ä¾‹æ˜¯å¦å·²ç»åˆ›å»ºã€‚å¦‚æœå·²ç»åˆ›å»ºï¼Œç›´æ¥è¿”å›å®ä¾‹ï¼Œé¿å…åŠ é”çš„å¼€é”€ã€‚</li><li>ç¬¬äºŒæ¬¡æ£€æŸ¥ï¼ˆåŠ é”ï¼‰ï¼šå¦‚æœå®ä¾‹æœªåˆ›å»ºï¼ŒåŠ é”åå†æ¬¡æ£€æŸ¥å®ä¾‹æ˜¯å¦ä¸ºç©ºã€‚å¦‚æœä»ç„¶ä¸ºç©ºï¼Œåˆ™åˆ›å»ºå®ä¾‹ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">static</span> Singleton* instance;   <span class="comment">// é™æ€æˆå‘˜å˜é‡ï¼Œç±»å†…å£°æ˜ï¼Œç±»å¤–åˆå§‹åŒ–</span></span><br><span class="line"><span class="type">static</span> mutex mtx;</span><br><span class="line"><span class="built_in">Singleton</span>() &#123;&#125;;  <span class="comment">// æ„é€ å‡½æ•°å±æ€§è®¾ç½®ä¸ºç§æœ‰</span></span><br><span class="line">    <span class="built_in">Singleton</span>(<span class="type">const</span> Singleton &amp; sc) = <span class="keyword">delete</span>; <span class="comment">// ç¦ç”¨æ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line">    Singleton&amp; <span class="keyword">operator</span>=(<span class="type">const</span> Singleton &amp; sc) = <span class="keyword">delete</span>; <span class="comment">// ç¦ç”¨èµ‹å€¼è¿ç®—ç¬¦</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">static</span> Singleton&amp; <span class="title">getInstance</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (instance == <span class="literal">nullptr</span>) &#123;</span><br><span class="line"><span class="comment">// mtx.lock();</span></span><br><span class="line"><span class="function">lock_guard&lt;mutex&gt; <span class="title">lock</span><span class="params">(mtx)</span></span>;</span><br><span class="line"><span class="keyword">if</span> (instance == <span class="literal">nullptr</span>)</span><br><span class="line">instance = <span class="keyword">new</span> <span class="built_in">Singleton</span>();</span><br><span class="line"><span class="comment">// mtx.unlock();</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> *instance;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line">Singleton* Singleton::instance = <span class="literal">nullptr</span>; <span class="comment">// åˆå§‹åŒ–é™æ€å˜é‡</span></span><br><span class="line">mutex Singleton::mtx; <span class="comment">// ç±»å¤–åˆå§‹åŒ–</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Singleton&amp; singlep1 = Singleton::<span class="built_in">getInstance</span>();<span class="comment">// é€šè¿‡ç±»åŸŸè·å–æ¥å£</span></span><br><span class="line">Singleton&amp; singlep2 = Singleton::<span class="built_in">getInstance</span>();</span><br><span class="line">    cout &lt;&lt; &amp;singlep1 &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; &amp;singlep2 &lt;&lt; endl;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>3.3.1 äºŒé‡é”ä¼˜ç‚¹</h1><ol><li>å‡å°‘åŠ é”å¼€é”€<ul><li>åªæœ‰åœ¨å®ä¾‹æœªåˆ›å»ºæ—¶æ‰åŠ é”ï¼Œé¿å…äº†æ¯æ¬¡è°ƒç”¨ getInstance éƒ½åŠ é”çš„æ€§èƒ½å¼€é”€ã€‚</li></ul></li><li>çº¿ç¨‹å®‰å…¨<ul><li>é€šè¿‡åŠ é”ç¡®ä¿å®ä¾‹åˆ›å»ºè¿‡ç¨‹çš„çº¿ç¨‹å®‰å…¨ã€‚</li></ul></li></ol><h1>3.3.2 é¢å¤–è¡¥å……</h1><p>ä¸Šè¿°å®ç°ä¸­å¯¹äºäº’æ–¥ä¿¡å·é‡mtxçš„ä¸Šé”ä½¿ç”¨çš„æ˜¯<code>mtx.lock()</code>ï¼Œè§£é”ä½¿ç”¨çš„æ˜¯<code>mtx.unlock()</code>ã€‚å…¶å®å¯ä»¥ä½¿ç”¨<code>lock_guard&lt;mutex&gt; lock(mtx)</code>æ¥å®ç°ã€‚</p><ol><li><p>mtx.lock() å’Œ mtx.unlock()</p><ul><li>æ‰‹åŠ¨åŠ é”å’Œè§£é”ï¼š<ul><li>mtx.lock()ï¼šæ‰‹åŠ¨åŠ é”ã€‚</li><li>mtx.unlock()ï¼šæ‰‹åŠ¨è§£é”ã€‚</li></ul></li><li>éœ€è¦æ˜¾å¼è°ƒç”¨è§£é”ï¼š<ul><li>å¦‚æœå¿˜è®°è°ƒç”¨ mtx.unlock()ï¼Œä¼šå¯¼è‡´é”æœªè¢«é‡Šæ”¾ï¼Œå¯èƒ½å¼•å‘æ­»é”ã€‚</li></ul></li><li>çµæ´»æ€§ï¼š<ul><li>å¯ä»¥åœ¨ä»£ç çš„ä»»ä½•åœ°æ–¹åŠ é”å’Œè§£é”ï¼Œé€‚åˆéœ€è¦ç²¾ç»†æ§åˆ¶é”çš„åœºæ™¯ã€‚</li></ul></li></ul></li><li><p>lock_guard<mutex> lock(mtx)</p><ul><li>è‡ªåŠ¨åŠ é”å’Œè§£é”ï¼š<ul><li>lock_guard æ˜¯ä¸€ä¸ª RAIIï¼ˆèµ„æºè·å–å³åˆå§‹åŒ–ï¼‰å°è£…ç±»ã€‚</li><li>åœ¨æ„é€ æ—¶è‡ªåŠ¨åŠ é”ï¼Œåœ¨ææ„æ—¶è‡ªåŠ¨è§£é”ã€‚</li></ul></li><li>æ— éœ€æ‰‹åŠ¨è§£é”ï¼š<ul><li>å³ä½¿å‡½æ•°æå‰è¿”å›æˆ–æŠ›å‡ºå¼‚å¸¸ï¼Œlock_guard ä¹Ÿèƒ½ä¿è¯é”è¢«é‡Šæ”¾ã€‚</li></ul></li><li>ç®€æ´æ€§å’Œå®‰å…¨æ€§ï¼š<ul><li>ä»£ç æ›´ç®€æ´ï¼Œä¸æ˜“å‡ºé”™ã€‚</li></ul></li></ul></li><li><p>lock_guard<mutex> lock(mtx) å’Œ mtx.lock() çš„åŒºåˆ«</p></li></ol><table><thead><tr><th>ç‰¹æ€§</th><th>lock_guard<mutex> lock(mtx)</th><th>mtx.lock() å’Œ mtx.unlock()</th></tr></thead><tbody><tr><td>åŠ é”æ–¹å¼</td><td>è‡ªåŠ¨åŠ é”ï¼ˆæ„é€ æ—¶ï¼‰</td><td>æ‰‹åŠ¨åŠ é”</td></tr><tr><td>è§£é”æ–¹å¼</td><td>è‡ªåŠ¨è§£é”ï¼ˆææ„æ—¶ï¼‰</td><td>æ‰‹åŠ¨è§£é”</td></tr><tr><td>å¼‚å¸¸å®‰å…¨</td><td>æ˜¯ï¼ˆå³ä½¿æŠ›å‡ºå¼‚å¸¸ä¹Ÿèƒ½è§£é”ï¼‰</td><td>å¦ï¼ˆéœ€è¦æ‰‹åŠ¨å¤„ç†å¼‚å¸¸ï¼‰</td></tr><tr><td>ä»£ç ç®€æ´æ€§</td><td>é«˜</td><td>ä½</td></tr><tr><td>çµæ´»æ€§</td><td>ä½ï¼ˆé”çš„ä½œç”¨åŸŸç”± lock_guard çš„ç”Ÿå‘½å‘¨æœŸå†³å®šï¼‰</td><td>é«˜ï¼ˆå¯ä»¥åœ¨ä»»æ„ä½ç½®åŠ é”å’Œè§£é”ï¼‰</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>ç®€å•çš„åŠ é”å’Œè§£é”åœºæ™¯</td><td>éœ€è¦ç²¾ç»†æ§åˆ¶é”çš„åœºæ™¯</td></tr></tbody></table><h1>3.4 é™æ€å±€éƒ¨å˜é‡å®ä¾‹åŒ–å®ç°æ‡’æ±‰æ–¹å¼</h1><p>C++11 æ ‡å‡†è§„å®šï¼Œé™æ€å±€éƒ¨å˜é‡çš„åˆå§‹åŒ–æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å› æ­¤å¯ä»¥ä½¿ç”¨é™æ€å±€éƒ¨å˜é‡åˆå§‹åŒ–æ¥å®ç°æ‡’æ±‰æ¨¡å¼ã€‚è¿™æ ·æ— éœ€æ‰‹åŠ¨ç®¡ç†é”æˆ–é™æ€æˆå‘˜å˜é‡ï¼Œä»£ç æ›´ç®€æ´ã€‚</p><ul><li>é™æ€å±€éƒ¨å˜é‡çš„ç‰¹æ€§<ul><li>ç”Ÿå‘½å‘¨æœŸï¼šé™æ€å±€éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸä»ç¬¬ä¸€æ¬¡æ‰§è¡Œåˆ°å®ƒçš„å£°æ˜è¯­å¥å¼€å§‹ï¼Œç›´åˆ°ç¨‹åºç»“æŸã€‚</li><li>çº¿ç¨‹å®‰å…¨ï¼šC++11 åŠä»¥ä¸Šæ ‡å‡†ä¿è¯ï¼Œé™æ€å±€éƒ¨å˜é‡çš„åˆå§‹åŒ–æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</li><li>å”¯ä¸€æ€§ï¼šé™æ€å±€éƒ¨å˜é‡åªä¼šè¢«åˆå§‹åŒ–ä¸€æ¬¡ã€‚</li></ul></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="built_in">Singleton</span>() &#123;&#125;;  <span class="comment">// æ„é€ å‡½æ•°å±æ€§è®¾ç½®ä¸ºç§æœ‰</span></span><br><span class="line">    <span class="built_in">Singleton</span>(<span class="type">const</span> Singleton &amp; sc) = <span class="keyword">delete</span>; <span class="comment">// ç¦ç”¨æ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line">    Singleton&amp; <span class="keyword">operator</span>=(<span class="type">const</span> Singleton &amp; sc) = <span class="keyword">delete</span>; <span class="comment">// ç¦ç”¨èµ‹å€¼è¿ç®—ç¬¦</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">static</span> Singleton&amp; <span class="title">getInstance</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">static</span> Singleton instance;</span><br><span class="line"><span class="keyword">return</span> instance;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Singleton&amp; singlep1 = Singleton::<span class="built_in">getInstance</span>();<span class="comment">// é€šè¿‡ç±»åŸŸè·å–æ¥å£</span></span><br><span class="line">Singleton&amp; singlep2 = Singleton::<span class="built_in">getInstance</span>();</span><br><span class="line">    cout &lt;&lt; &amp;singlep1 &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; &amp;singlep2 &lt;&lt; endl;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-é¥¿æ±‰æ–¹å¼">4. é¥¿æ±‰æ–¹å¼</h2><p>ä»¥ä¸Šæ˜¯å•ä¾‹æ¨¡å¼çš„æ‡’æ±‰å®ç°æ–¹æ³•ï¼Œæ¥ä¸‹æ¥ä»‹ç»é¥¿æ±‰å®ç°æ–¹æ³•ã€‚</p><p>é¥¿æ±‰æ¨¡å¼ï¼šä¸ç®¡è°ƒä¸è°ƒç”¨å¯¹å¤–æ¥å£ï¼Œéƒ½å·²ç»å®ä¾‹åŒ–å¯¹è±¡äº†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="type">static</span> Singleton* instance;   <span class="comment">// é™æ€æˆå‘˜å˜é‡ï¼Œç±»å†…å£°æ˜ï¼Œç±»å¤–åˆå§‹åŒ–</span></span><br><span class="line"><span class="built_in">Singleton</span>() &#123;&#125;;  <span class="comment">// æ„é€ å‡½æ•°å±æ€§è®¾ç½®ä¸ºç§æœ‰</span></span><br><span class="line"><span class="built_in">Singleton</span>(<span class="type">const</span> Singleton &amp; sc) = <span class="keyword">delete</span>; <span class="comment">// ç¦ç”¨æ‹·è´æ„é€ å‡½æ•°</span></span><br><span class="line">Singleton&amp; <span class="keyword">operator</span>=(<span class="type">const</span> Singleton &amp; sc) = <span class="keyword">delete</span>; <span class="comment">// ç¦ç”¨èµ‹å€¼è¿ç®—ç¬¦</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">static</span> Singleton&amp; <span class="title">getInstance</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> *instance;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line">Singleton* Singleton::instance = <span class="keyword">new</span> <span class="built_in">Singleton</span>(); <span class="comment">// åˆå§‹åŒ–é™æ€å˜é‡</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Singleton&amp; singlep1 = Singleton::<span class="built_in">getInstance</span>();<span class="comment">// é€šè¿‡ç±»åŸŸè·å–æ¥å£</span></span><br><span class="line">Singleton&amp; singlep2 = Singleton::<span class="built_in">getInstance</span>();</span><br><span class="line">    cout &lt;&lt; &amp;singlep1 &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; &amp;singlep2 &lt;&lt; endl;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
            <tag> å•ä¾‹æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaå¼€å‘ç¯å¢ƒæ­å»º</title>
      <link href="/2025/03/01/java1/"/>
      <url>/2025/03/01/java1/</url>
      
        <content type="html"><![CDATA[<h1>1. JDKçš„ä¸‹è½½ä¸å®‰è£…</h1><p>ç™¾åº¦æœç´¢JDK21åˆ°Oracleå®˜ç½‘ä¸‹è½½jdk21å³å¯ï¼Œéœ€è¦æ³¨å†Œè´¦å·ã€‚</p><p>ä¸‹è½½å¥½å¯¹åº”ç”µè„‘ç‰ˆæœ¬çš„å®‰è£…åŒ…åç›´æ¥å®‰è£…ï¼Œè®°å¾—æŠŠå®‰è£…ç›®å½•ç»™è®°æ¸…æ¥šï¼Œé…ç½®ç¯å¢ƒéœ€è¦ä½¿ç”¨ã€‚</p><h1>2. jre ç›®å½•çš„ç”Ÿæˆ</h1><p>å‡†å¤‡é…ç¯å¢ƒå˜é‡ï¼Œçªç„¶å‘ç°jdkä¸‹æ²¡æœ‰jreç›®å½•ã€‚ç™¾åº¦ä¸€æœå‘ç°éœ€è¦æ‰‹åŠ¨ç”Ÿæˆjreã€‚</p><ol><li>é¦–å…ˆä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡ŒCMD</li><li>è¿›å…¥åˆ°jdkçš„å®‰è£…ç›®å½•</li><li>è¿è¡Œå‘½ä»¤ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin\jlink.exe --module-path jmods --add-modules java.desktop --output jre</span><br></pre></td></tr></table></figure><ol start="4"><li>æ­¤æ—¶ä¼šå‘ç°jreç›®å½•å·²ç»ç”Ÿæˆ</li></ol><h1>3. é…ç½®ç¯å¢ƒç›®å½•</h1><ol><li>ç¼–è¾‘ç³»ç»Ÿç¯å¢ƒå˜é‡<ul><li>åˆ›å»ºä¸€ä¸ªæ–°çš„ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œåç§°ä¸º<code>JAVA_HOME</code>ï¼Œå€¼ä¸ºjavaçš„å®‰è£…è·¯å¾„</li></ul></li><li>é…ç½®PATHå˜é‡<ul><li>åœ¨PATHå˜é‡ä¸­æ·»åŠ <code>%JAVA_HOME%\bin</code></li><li>åœ¨PATHå˜é‡ä¸­æ·»åŠ <code>%JAVA_HOME%\jre\bin</code></li></ul></li><li>éªŒè¯<ul><li>åœ¨cmdä¸­è¾“å…¥<code>java -version</code></li><li>æ˜¾ç¤ºjavaçš„ç‰ˆæœ¬ç­‰ä¿¡æ¯å³ä¸ºæˆåŠŸ</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLä¸€ï¼šMySQLç¯å¢ƒé…ç½®</title>
      <link href="/2025/03/01/mysql1/"/>
      <url>/2025/03/01/mysql1/</url>
      
        <content type="html"><![CDATA[<p>å³æ—¥èµ·å­¦ä¹ Mysqlå¹¶è¿›è¡Œè®°å½•ã€‚</p><h1>æ•°æ®åº“åˆ†ç±»</h1><h2 id="å…³ç³»å‹æ•°æ®åº“">å…³ç³»å‹æ•°æ®åº“</h2><ul><li>ç§°ä½œSQL</li><li>Mysqlï¼ŒOracleï¼ŒSql Serverï¼Œ DB2ï¼Œ SQLlite</li><li>é€šè¿‡è¡¨ä¸è¡¨ä¹‹é—´ï¼Œè¡Œä¸è¡Œä¹‹é—´çš„å…³ç³»è¿›è¡Œæ•°æ®å­˜å‚¨</li></ul><h2 id="éå…³ç³»å‹æ•°æ®åº“">éå…³ç³»å‹æ•°æ®åº“</h2><ul><li>ç§°ä½œNoSQLå³Not only SQL</li><li>Redisï¼Œ MongoDB</li><li>å¯¹è±¡å­˜å‚¨ï¼Œé€šè¿‡å¯¹è±¡è‡ªèº«çš„å±æ€§æ¥è¿›è¡Œå­˜å‚¨</li></ul><h2 id="DBMS">DBMS</h2><ul><li>DBMSå³æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</li></ul><h2 id="MySQL">MySQL</h2><ul><li>MySQLæ˜¯ä¸€ä¸ªå…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</li><li>ç”±ç‘å…¸ MySQL AB å…¬å¸å¼€å‘</li><li>å±äº Oracle æ——ä¸‹äº§å“</li><li>MySQLæ˜¯æœ€æµè¡Œçš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¹‹ä¸€</li><li>åœ¨ WEB åº”ç”¨æ–¹é¢ï¼ŒMySQLæ˜¯æœ€å¥½çš„RDBMS (Relational Database Management Systemï¼Œå…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ)åº”ç”¨è½¯ä»¶ä¹‹ä¸€ã€‚</li></ul><h1>MySQL å®‰è£…</h1><h2 id="å»ºè®®">å»ºè®®</h2><ul><li>å°½é‡ä½¿ç”¨å‹ç¼©åŒ…ï¼Œä¸ç”¨exeæ–‡ä»¶ï¼ˆè²Œä¼¼ä¸æ³¨å†Œè¡¨æœ‰å…³ï¼‰</li></ul><h2 id="è¯¦ç»†å®‰è£…è¯´æ˜">è¯¦ç»†å®‰è£…è¯´æ˜</h2><ol><li>è§£å‹åˆ°åˆé€‚çš„ä½ç½®ï¼ˆæˆ‘çš„å®‰è£…ç›®å½•ä¸ºD:\ProgramFiles\mysql-5.7.44ï¼‰</li><li>ä¸ºè§£å‹åæ–‡ä»¶ä¸­çš„binç›®å½•é…ç½®ç¯å¢ƒå˜é‡</li><li>åœ¨è§£å‹åçš„ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªmy.iniæ–‡ä»¶ï¼ˆD:\ProgramFiles\mysql-5.7.44\my.iniï¼‰</li><li>ç¼–è¾‘my.iniæ–‡ä»¶ä¸ºï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">basedir=D:\ProgramFiles\mysql-5.7.44\</span><br><span class="line">datadir=D:\ProgramFiles\mysql-5.7.44\data\</span><br><span class="line">port=3306</span><br><span class="line">skip-grant-tables</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šè™½ç„¶æ²¡æœ‰dataç›®å½•ä¹Ÿä¸ç”¨å»æ‰‹åŠ¨åˆ›å»ºï¼</p><ol start="5"><li>å¯åŠ¨ç®¡ç†å‘˜æ¨¡å¼ä¸‹çš„cmdï¼Œå¹¶å°†ç›®å½•åˆ‡æ¢åˆ°mysqlçš„binç›®å½•ä¸‹ï¼Œç„¶åè¾“å…¥<code>mysqld --install</code><ul><li>æ˜¾ç¤ºService successfully installed.å³æˆåŠŸ</li></ul></li><li>å†è¾“å…¥<code>mysqld --initialize-insecure --user=mysql</code>åˆå§‹åŒ–æ•°æ®æ–‡ä»¶<ul><li>æ­¤æ—¶ä¼šåœ¨mysqlç›®å½•ä¸‹äº§ç”Ÿdataæ–‡ä»¶å¤¹</li></ul></li><li>è¾“å…¥<code>net start mysql</code>å¯åŠ¨mysqlæœåŠ¡</li><li>è¾“å…¥<code>mysql -u root -p</code>ï¼Œæ³¨æ„-påä¸è¦ï¼‹ä»»ä½•ä¸œè¥¿ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€‚æç¤ºè¾“å…¥å¯†ç ï¼Œç›´æ¥å›è½¦è·³è¿‡</li><li>è¾“å…¥<code>update mysql.user set authentication_string=password('123456') where user='root' and Host = 'localhost';</code>ä¿®æ”¹å¯†ç ä¸º123456ï¼Œæœ€åè¾“å…¥<code>flush priviledges;</code>åˆ·æ–°æƒé™ï¼ˆæ³¨æ„MySQLè¯­å¥ä»¥åˆ†å·ç»“å°¾ï¼‰<ul><li>å¦‚æœä½¿ç”¨çš„æ˜¯MySQL 5.7.6 åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œè¾“å…¥<code>ALTER USER 'root'@'localhost' IDENTIFIED BY '123456';</code>ï¼Œç„¶å<code>flush priviledges</code></li></ul></li><li>å°†my.iniæ–‡ä»¶<code>skip-grant-tables</code>åˆ é™¤</li><li>é‡å¯MySQLæœåŠ¡å³å¯ä½¿ç”¨<ul><li>net stop mysql</li><li>net start mysql</li></ul></li><li>è¾“å…¥<code>mysql -u root -p</code>å†é”®å…¥å¯†ç å³å¯ä½¿ç”¨</li></ol><h2 id="åŸºæœ¬å‘½ä»¤è¡Œ">åŸºæœ¬å‘½ä»¤è¡Œ</h2><ol><li>æŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> databases;</span><br></pre></td></tr></table></figure><ol start="2"><li>åˆ‡æ¢æ•°æ®åº“</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use [æ•°æ®åº“åç§°]</span><br></pre></td></tr></table></figure><ol start="3"><li>æŸ¥çœ‹æ•°æ®åº“ä¸­æ‰€æœ‰çš„è¡¨</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> tables;</span><br></pre></td></tr></table></figure><ol start="4"><li>æŸ¥çœ‹æ˜¾ç¤ºæ•°æ®åº“ä¸­æ‰€æœ‰è¡¨çš„ä¿¡æ¯</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">describe</span> [è¡¨å]</span><br></pre></td></tr></table></figure><ol start="5"><li>åˆ›å»ºæ•°æ®åº“</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database [æ•°æ®åº“åç§°]</span><br></pre></td></tr></table></figure><ol start="6"><li>é€€å‡ºè¿æ¥</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exit</span><br></pre></td></tr></table></figure><h2 id="sqlyogçš„ä½¿ç”¨">sqlyogçš„ä½¿ç”¨</h2><p>å‚è€ƒCSDNåšå®¢<a href="https://blog.csdn.net/weixin_43364551/article/details/116754626">https://blog.csdn.net/weixin_43364551/article/details/116754626</a></p><h2 id="æ•°æ®åº“åŸºæœ¬æ“ä½œ">æ•°æ®åº“åŸºæœ¬æ“ä½œ</h2><p>æ•°æ®åº“ XXX è¯­è¨€</p><ol><li>DDL å®šä¹‰</li><li>DML æ“ä½œ</li><li>DQL æŸ¥è¯¢</li><li>DCL æ§åˆ¶</li></ol><h1>æ“ä½œæ•°æ®åº“</h1><p>æ“ä½œæ•°æ®åº“-&gt;æ“ä½œæ•°æ®åº“ä¸­çš„è¡¨-&gt;æ“ä½œæ•°æ®åº“ä¸­çš„è¡¨çš„æ•°æ®</p><ol><li>åˆ›å»ºæ•°æ®åº“</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE [IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] [æ•°æ®åº“åç§°]</span><br></pre></td></tr></table></figure><ol start="2"><li>åˆ é™¤æ•°æ®åº“</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> DATABASE [IF <span class="keyword">EXISTS</span>] [æ•°æ®åº“åç§°]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> å…³ç³»å‹æ•°æ®åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€è§„åˆ’ä¸‰ï¼š0-1èƒŒåŒ…</title>
      <link href="/2025/02/28/dp3/"/>
      <url>/2025/02/28/dp3/</url>
      
        <content type="html"><![CDATA[<h1>å‰è¨€</h1><p>ä»Šæ—¥ç»§ç»­å­¦ä¹ Bç«™Upä¸»å‡ºå“çš„åŸºç¡€ç®—æ³•ç²¾è®²ç³»åˆ—ï¼Œ<a href="https://www.bilibili.com/video/BV16Y411v7Y6/?vd_source=a0f19e79b7da02f4fa318d91be5bc86a">0-1èƒŒåŒ… å®Œå…¨èƒŒåŒ…ã€åŸºç¡€ç®—æ³•ç²¾è®² 18ã€‘</a>ï¼ˆç‚¹å‡»å³å¯è·³è½¬è§†é¢‘é“¾æ¥ï¼‰ã€‚</p><p>0-1èƒŒåŒ…å’Œå®Œå…¨èƒŒåŒ…æ˜¯éå¸¸é‡è¦çš„DPæ¨¡å‹ï¼ŒçµèŒ¶å±±è‰¾åºœè®¤ä¸ºä¸€å®šç¨‹åº¦ä¸Šå®ƒä»¬å°±æ˜¯â€œé€‰æˆ–ä¸é€‰â€æ€æƒ³çš„ä»£è¡¨ã€‚</p><p>è¿™ç¯‡åšå®¢ä¸»è¦å…³æ³¨<code>0-1èƒŒåŒ…</code>ã€‚</p><h1>1. 0-1 èƒŒåŒ…</h1><h1>1.1 é—®é¢˜æè¿°</h1><p><code>0-1 èƒŒåŒ…</code>:æœ‰ n ä¸ªç‰©å“ï¼Œç¬¬iä¸ªç‰©å“çš„ä½“ç§¯ä¸º w[i]ï¼Œä»·å€¼ä¸º v[i]ï¼Œæ¯ä¸ªç‰©å“è‡³å¤šé€‰ä¸€ä¸ªï¼Œæ±‚ä½“ç§¯å’Œä¸è¶…è¿‡ capacity æ—¶çš„æœ€å¤§ä»·å€¼å’Œã€‚</p><h1>1.2 åŸºæœ¬æ€è·¯</h1><p>å…ˆä»å›æº¯å¼€å§‹æ€è€ƒï¼Œè¿™é‡Œå…ˆé™„ä¸ŠçµèŒ¶å±±è‰¾åºœæ€»ç»“çš„å…³äºè¯¥é—®é¢˜çš„å›æº¯ä¸‰é—®ï¼š</p><ul><li>å½“å‰æ“ä½œï¼Ÿæšä¸¾<code>ç¬¬</code>iä¸ªç‰©å“é€‰è¿˜æ˜¯ä¸é€‰ï¼š<ul><li>ä¸é€‰ï¼Œå‰©ä½™å®¹é‡ä¸å˜</li><li>é€‰ï¼Œå‰©ä½™å®¹é‡å˜å°</li></ul></li><li>å­é—®é¢˜ï¼Ÿå³åœ¨å‰©ä½™å®¹é‡ä¸ºcæ—¶ï¼Œä»<code>å‰</code>iä¸ªç‰©å“ä¸­å¾—åˆ°çš„æœ€å¤§ä»·å€¼å’Œ</li><li>ä¸‹ä¸€ä¸ªå­é—®é¢˜ï¼Ÿåˆ†ç±»è®¨è®º<ul><li>ä¸é€‰ï¼Œå‰©ä½™å®¹é‡ä»ä¸ºcï¼Œä»<code>å‰</code>i-1ä¸ªç‰©å“ä¸­å¾—åˆ°çš„æœ€å¤§ä»·å€¼å’Œ</li><li>é€‰ï¼Œå‰©ä½™å®¹é‡å˜ä¸ºc-w[i]ï¼Œä»<code>å‰</code>i-1ä¸ªç‰©å“ä¸­å¾—åˆ°çš„æœ€å¤§ä»·å€¼å’Œ</li></ul></li></ul><p>å…ˆä»å›æº¯å¼€å§‹æ€è€ƒï¼Œä¹Ÿå°±æ˜¯è€ƒè™‘ç¬¬iä¸ªç‰©å“é€‰è¿˜æ˜¯ä¸é€‰ï¼Œä¸é€‰-&gt;å®¹é‡ä¸å˜ï¼Œé€‰-&gt;å®¹é‡å˜å°ï¼Œç”±æ­¤ç¡®å®šé€’å½’å‚æ•°ä¸­çš„iå’Œcã€‚å¯¹åº”çš„<code>å­é—®é¢˜</code>å°±å˜æˆä»å‰iä¸ªç‰©å“ä¸­èƒ½å¾—åˆ°çš„æœ€å¤§ä»·å€¼å’Œã€‚</p><ul><li>ä¸é€‰<ul><li>å°±é€’å½’åˆ°å®ƒè¡¨ç¤ºåœ¨å‰©ä½™å®¹é‡ä¸ºcæ—¶ï¼Œä»å‰i-1ä¸ªç‰©å“ä¸­è·å¾—çš„æœ€å¤§ä»·å€¼å’Œã€‚</li></ul></li><li>é€‰<ul><li>å°±é€’å½’åˆ°å®ƒè¡¨ç¤ºåœ¨å‰©ä½™å®¹é‡ä¸ºc-w[i]æ—¶ï¼Œä»å‰i-1ä¸ªç‰©å“ä¸­è·å¾—çš„æœ€å¤§ä»·å€¼å’Œã€‚<br>ä¸Šè¿°ä¸¤ä¸ªå–æœ€å¤§å€¼å°±æ˜¯dfs(i, c)çš„ç»“æœäº†ã€‚</li></ul></li></ul><h1>1.3 å…·ä½“å®ç°</h1><p>åŸºäºä¸Šè¿°ç»“æœå¯ä»¥ç¼–å†™ä»£ç ï¼Œæˆ‘å¿½ç•¥çš„ä¸€ç‚¹æ˜¯å½“å‰©ä½™å®¹é‡cå°äºç¬¬iä¸ªç‰©å“å³<code>c &lt; w[i]</code>æ—¶ï¼Œæˆ‘ä»¬åªèƒ½ä¸é€‰ç¬¬iä¸ªç‰©å“ï¼Œå› æ­¤ç›´æ¥è¿”å›<code>dfs(i-1, c)</code>ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">zero_one_knapsack</span><span class="params">(<span class="type">int</span> capacity, vector&lt;<span class="type">int</span>&gt;&amp; w, vector&lt;<span class="type">int</span>&gt;&amp; v)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">this</span> <span class="keyword">auto</span>&amp;&amp; dfs, <span class="type">int</span> i, <span class="type">int</span> c)-&gt;<span class="type">int</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &lt; <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (c &lt; w[i])</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">dfs</span>(i<span class="number">-1</span>, c);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>, c), <span class="built_in">dfs</span>(i<span class="number">-1</span>, c-w[i]) + v[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> n = w.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dfs</span>(n<span class="number">-1</span>, capacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>2. 494.ç›®æ ‡å’Œ</h1><p>ç„¶åçœ‹Leetcodeé¢˜<a href="https://leetcode.cn/problems/target-sum/description/">494. ç›®æ ‡å’Œ</a>ï¼š</p><p>ç»™ä½ ä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° target ã€‚</p><p>å‘æ•°ç»„ä¸­çš„æ¯ä¸ªæ•´æ•°å‰æ·»åŠ  â€˜+â€™ æˆ– â€˜-â€™ ï¼Œç„¶åä¸²è”èµ·æ‰€æœ‰æ•´æ•°ï¼Œå¯ä»¥æ„é€ ä¸€ä¸ª<code>è¡¨è¾¾å¼</code>ï¼š</p><pre><code>ä¾‹å¦‚ï¼Œnums = [2, 1] ï¼Œå¯ä»¥åœ¨ 2 ä¹‹å‰æ·»åŠ  '+' ï¼Œåœ¨ 1 ä¹‹å‰æ·»åŠ  '-' ï¼Œç„¶åä¸²è”èµ·æ¥å¾—åˆ°è¡¨è¾¾å¼ &quot;+2-1&quot; ã€‚</code></pre><p>è¿”å›å¯ä»¥é€šè¿‡ä¸Šè¿°æ–¹æ³•æ„é€ çš„ã€è¿ç®—ç»“æœç­‰äº target çš„ä¸åŒ<code>è¡¨è¾¾å¼</code>çš„æ•°ç›®ã€‚</p><h1>2.1 åŸºæœ¬æ€è·¯</h1><p>è¿™é“é¢˜çœ‹ä¸Šå»å’Œ0-1èƒŒåŒ…æ²¡æœ‰å…³ç³»ã€‚</p><p>å‡è®¾æ·»åŠ æ­£å·çš„æ•°çš„å’Œä¸ºpï¼Œé‚£ä¹ˆæ·»åŠ è´Ÿå·çš„æ•°çš„å’Œä¸ºæ‰€æœ‰å…ƒç´ çš„å’Œså‡å»pã€‚é‚£ä¹ˆ<code>p - (s - p)</code>å°±æ˜¯targetäº†ï¼Œå³<code>p - (s - p) = t</code>=&gt;<code>2p=s+t</code>ï¼Œå› æ­¤<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>=</mo><mfrac><mrow><mi>s</mi><mo>+</mo><mi>t</mi></mrow><mrow><mn>2</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">p=\frac{s+t}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.824556em;"></span><span class="strut bottom" style="height:1.169556em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span><span class="mrel">=</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">2</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">s</span><span class="mbin">+</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span>ã€‚</p><p>ç°åœ¨é—®é¢˜å°±å˜æˆä»numsä¸­é€‰æ‹©ä¸€äº›æ•°å­—ï¼Œä½¿å¾—ä»–ä»¬çš„å’Œæ°å¥½ç­‰äº<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>s</mi><mo>+</mo><mi>t</mi></mrow><mrow><mn>2</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{s+t}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.824556em;"></span><span class="strut bottom" style="height:1.169556em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">2</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">s</span><span class="mbin">+</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span>çš„æ–¹æ¡ˆæ•°ã€‚æ³¨æ„s+tæ—¢ç„¶è¦é™¤ä»¥2é‚£ä¹ˆs+tå°±å¾—ä¸ºå¶æ•°ï¼Œå¹¶ä¸”ç”±äºnums[i]ä¸ºéè´Ÿæ•°ï¼Œæ•…æ— è®ºæ€ä¹ˆé€‰s+téƒ½ä¸ä¼šä¸ºè´Ÿæ•°ã€‚</p><h1>2.2 èƒŒåŒ…é—®é¢˜çš„å¸¸è§å˜å½¢</h1><p>èƒŒåŒ…é—®é¢˜çš„å¸¸è§å˜å½¢ï¼š</p><ol><li>è‡³å¤šè£…capacityï¼Œæ±‚æ–¹æ¡ˆæ•°/æœ€å¤§ä»·å€¼å’Œ</li><li>æ°å¥½è£…capacityï¼Œæ±‚æ–¹æ¡ˆæ•°/æœ€å¤§/æœ€å°ä»·å€¼å’Œ</li><li>è‡³å°‘è£…capacityï¼Œæ±‚æ–¹æ¡ˆæ•°/æœ€å°ä»·å€¼å’Œ</li></ol><p>ç»è¿‡çµèŒ¶å±±è‰¾åºœçš„å·§å¦™è½¬æ¢ï¼Œ494. ç›®æ ‡å’Œ é—®é¢˜å°±å˜å½¢ä¸ºä¸Šè¿°ç¬¬2ä¸­æƒ…å†µä¸‹çš„ï¼šæ°å¥½è£…capacityï¼Œæ±‚æ–¹æ¡ˆæ•°ã€‚</p><h1>2.3 é€’å½’è§£æ³•</h1><p>æ¥ä¸‹æ¥ç¼–å†™ä»£ç ã€‚é¦–å…ˆè®¡ç®—s+tï¼Œå¦‚æœs+tæ˜¯è´Ÿæ•°æˆ–è€…è¯´s+tæ˜¯ä¸€ä¸ªå¥‡æ•°ï¼Œåˆ™ä¸æ»¡è¶³è¦æ±‚ï¼Œæ–¹æ¡ˆæ•°ä¸º0ã€‚å¦åˆ™å°†s+té™¤ä»¥2ï¼ˆæ•´é™¤ï¼‰è®°ä¸ºpã€‚</p><p>å¯¹äºé€’å½’å‡½æ•°dfsï¼Œdfs(i, c)è¡¨ç¤ºå‰iä¸ªæ•°ç›¸åŠ å’Œä¸ºcçš„æ–¹æ¡ˆæ•°ã€‚å¯¹äºé€’å½’çš„è¾¹ç•Œæ¡ä»¶ï¼Œå› ä¸ºæ˜¯ä»targetå€’ç€å‡ï¼Œå½“c=0æ—¶è¯´æ˜æ‰¾åˆ°äº†ä¸€ä¸ªåˆæ³•çš„æ–¹æ¡ˆæ•°ï¼Œå› æ­¤è¿”å›1ã€‚å¦åˆ™è¿”å›0</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">findTargetSumWays</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> p = <span class="built_in">accumulate</span>(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>(), target); <span class="comment">// p = (s + t);</span></span><br><span class="line">        <span class="keyword">if</span> (p &lt; <span class="number">0</span> || p % <span class="number">2</span> == <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        p /= <span class="number">2</span>; <span class="comment">// p = (s + t) / 2</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">this</span> <span class="keyword">auto</span>&amp;&amp; dfs, <span class="type">int</span> i, <span class="type">int</span> c) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> c == <span class="number">0</span> ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span> (c &lt; nums[i])</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">dfs</span>(i - <span class="number">1</span>, c);</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">dfs</span>(i - <span class="number">1</span>, c - nums[i]) + <span class="built_in">dfs</span>(i - <span class="number">1</span>, c);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(n - <span class="number">1</span>, p);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] nums;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findTargetSumWays</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.nums = nums;</span><br><span class="line">        <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> Arrays.stream(nums).sum() + target;</span><br><span class="line">        <span class="keyword">if</span> (p &lt; <span class="number">0</span> || p % <span class="number">2</span> == <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        p /= <span class="number">2</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="keyword">return</span> dfs(n - <span class="number">1</span>, p);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> c)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &lt; <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> c == <span class="number">0</span> ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (c &lt; nums[i])</span><br><span class="line">            <span class="keyword">return</span> dfs(i - <span class="number">1</span>, c);</span><br><span class="line">        <span class="keyword">return</span> dfs(i - <span class="number">1</span>, c) + dfs(i - <span class="number">1</span>, c - nums[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¼˜åŒ–ä¸ºé€’æ¨">ä¼˜åŒ–ä¸ºé€’æ¨</h2><p>å¦‚ä½•å°†è®°å¿†åŒ–æœç´¢æ”¹æˆé€’æ¨ï¼ŸçµèŒ¶å±±è‰¾åºœæ€»ç»“å¦‚ä¸‹ï¼š</p><ol><li>dfs -&gt; fæ•°ç»„</li><li>é€’å½’ -&gt; å¾ªç¯</li><li>é€’å½’è¾¹ç•Œ -&gt; æ•°ç»„åˆå§‹å€¼</li></ol><p>dfsæ”¹æˆfæ•°ç»„ï¼Œè¿™é‡Œçš„fæ•°ç»„æ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„f[i][c]è¡¨ç¤ºå‰iä¸ªæ•°ç›¸åŠ å’Œä¸ºcçš„æ–¹æ¡ˆæ•°ã€‚éœ€è¦é‡ç‚¹å¤„ç†ä¸€ä¸‹è¾¹ç•Œæ¡ä»¶ï¼Œä»åŸé€’å½’ä¸­çš„è¾¹ç•Œæ¡ä»¶å…¥æ‰‹ã€‚é€’å½’çš„è¾¹ç•Œæ¡ä»¶æœ‰<code>i &lt; 0 &amp;&amp; c == 0</code>æ—¶return 1ï¼Œæ¯æ¬¡å‘ä¸‹é€’å½’æ—¶éƒ½ä¼ å‚i-1ï¼Œæ•…è´Ÿæ•°ä¸‹æ ‡ä¸ºè¾¹ç•Œã€‚åŸæ¥çš„</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (i &lt; <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> c == <span class="number">0</span> ? <span class="number">1</span> : <span class="number">0</span>;</span><br></pre></td></tr></table></figure><p>å¯ä»¥æ›´æ”¹ä¸º</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br></pre></td></tr></table></figure><p>åªå¯¹<code>i &lt; 0 &amp;&amp; c == 0</code>çš„è¾¹ç•Œæ¡ä»¶è½¬æ¢ä¸ºæ•°ç»„è¾¹ç•Œ<code>f[0][0] = 1</code>ï¼Œè€Œæ²¡æœ‰å¤„ç†<code>i &lt; 0 &amp;&amp; c != 0</code>æ˜¯å› ä¸ºc != 0æ—¶ä¸ä¸ºfæ•°ç»„è¾¹ç•Œã€‚</p><p>é€’å½’</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="built_in">dfs</span>(i<span class="number">-1</span>, c) + <span class="built_in">dfs</span>(i<span class="number">-1</span>, c - w[i]);</span><br></pre></td></tr></table></figure><p>æ”¹æˆå¾ªç¯ä¸º</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f[i][c] = f[i<span class="number">-1</span>][c] + f[i<span class="number">-1</span>][c-w[i]]</span><br></pre></td></tr></table></figure><p>ä¸ºäº†é¿å…è´Ÿæ•°ä¸‹æ ‡å°†fä¸­å‡ºç°içš„åœ°æ–¹å…¨éƒ¨+1ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f[i<span class="number">+1</span>][c] = f[i][c] + f[i][c-w[i]]</span><br></pre></td></tr></table></figure><p>ç›¸åº”çš„æ•°ç»„çš„ç¬¬ä¸€ç»´å¤§å°åº”ä¸ºnums.size() + 1ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">findTargetSumWays</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; w, <span class="type">int</span> t)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> p = <span class="built_in">accumulate</span>(w.<span class="built_in">begin</span>(), w.<span class="built_in">end</span>(), t);</span><br><span class="line">        <span class="keyword">if</span> (p &lt; <span class="number">0</span> || p % <span class="number">2</span> != <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        p /= <span class="number">2</span>;</span><br><span class="line">        <span class="type">int</span> n = w.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">f</span>(n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt; (p + <span class="number">1</span>, <span class="number">0</span>));</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> c = <span class="number">0</span>; c &lt;= p; ++c) &#123;</span><br><span class="line">                f[i<span class="number">+1</span>][c] = f[i][c];</span><br><span class="line">                <span class="keyword">if</span> (c &gt;= w[i])</span><br><span class="line">                    f[i<span class="number">+1</span>][c] += f[i][c-w[i]];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n][p];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findTargetSumWays</span><span class="params">(<span class="type">int</span>[] w, <span class="type">int</span> t)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">s</span> <span class="operator">=</span> Arrays.stream(w).sum();</span><br><span class="line">        <span class="keyword">if</span> (s + t &lt; <span class="number">0</span> || (s + t) % <span class="number">2</span> == <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> (s + t) / <span class="number">2</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> w.length;</span><br><span class="line">        <span class="type">int</span>[][] f = <span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">1</span>][p+<span class="number">1</span>];</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> <span class="number">0</span>; c &lt;= p; ++c) &#123;</span><br><span class="line">                f[i+<span class="number">1</span>][c] = f[i][c];</span><br><span class="line">                <span class="keyword">if</span> (c &gt;= w[i])</span><br><span class="line">                    f[i+<span class="number">1</span>][c] += f[i][c-w[i]];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n][p];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç»§ç»­ä¼˜åŒ–ç©ºé—´å¤æ‚åº¦">ç»§ç»­ä¼˜åŒ–ç©ºé—´å¤æ‚åº¦</h2><h3 id="ä¸¤ä¸ªæ•°ç»„">ä¸¤ä¸ªæ•°ç»„</h3><p>æ¯æ¬¡æŠŠf[i+1]ç®—å®Œä¹‹åï¼Œåé¢å°±ä¸ä¼šç”¨åˆ°f[i]äº†ï¼Œä¹Ÿå°±æ˜¯æ¯æ—¶æ¯åˆ»æ•°ç»„ä¸­åªæœ‰ä¸¤ä¸ªå…ƒç´ åœ¨å‚ä¸çŠ¶æ€è½¬ç§»ï¼Œå¹²è„†å°±åªç”¨ä¸¤ä¸ªæ•°ç»„ã€‚æ¯”å¦‚æŠŠf[1]ç®—å®Œäº†ï¼Œé‚£ä¹ˆè®¡ç®—f[2]æ—¶ç›´æ¥æŠŠç»“æœå¡«åˆ°f[0]å½“ä¸­ã€‚ç„¶åè®¡ç®—f[3]æ—¶ï¼Œf[1]æ²¡ç”¨ï¼Œå°±æŠŠf[3]å¡«åˆ°f[1]ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f[i<span class="number">+1</span>][c] = f[i][c];</span><br><span class="line"><span class="keyword">if</span> (c &gt;= w[i])</span><br><span class="line">    f[i<span class="number">+1</span>][c] += f[i][c-w[i]];</span><br></pre></td></tr></table></figure><p>æ”¹ä¸º</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f[(i<span class="number">+1</span>)%<span class="number">2</span>][c] = f[i%<span class="number">2</span>][c];</span><br><span class="line"><span class="keyword">if</span> (c &gt;= w[i])</span><br><span class="line">    f[(i<span class="number">+1</span>)%<span class="number">2</span>][c] += f[i%<span class="number">2</span>][c-w[i]];</span><br></pre></td></tr></table></figure><p>å³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">findTargetSumWays</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; w, <span class="type">int</span> t)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> p = <span class="built_in">accumulate</span>(w.<span class="built_in">begin</span>(), w.<span class="built_in">end</span>(), t);</span><br><span class="line">        <span class="keyword">if</span> (p &lt; <span class="number">0</span> || p % <span class="number">2</span> != <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        p /= <span class="number">2</span>;</span><br><span class="line">        <span class="type">int</span> n = w.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">f</span>(<span class="number">2</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt; (p + <span class="number">1</span>, <span class="number">0</span>));</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> c = <span class="number">0</span>; c &lt;= p; ++c) &#123;</span><br><span class="line">                f[(i<span class="number">+1</span>)%<span class="number">2</span>][c] = f[i%<span class="number">2</span>][c];</span><br><span class="line">                <span class="keyword">if</span> (c &gt;= w[i])</span><br><span class="line">                    f[(i<span class="number">+1</span>)%<span class="number">2</span>][c] += f[i%<span class="number">2</span>][c-w[i]];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n%<span class="number">2</span>][p];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findTargetSumWays</span><span class="params">(<span class="type">int</span>[] w, <span class="type">int</span> t)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">s</span> <span class="operator">=</span> Arrays.stream(w).sum();</span><br><span class="line">        <span class="keyword">if</span> (s + t &lt; <span class="number">0</span> || (s + t) % <span class="number">2</span> == <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> (s + t) / <span class="number">2</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> w.length;</span><br><span class="line">        <span class="type">int</span>[][] f = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">2</span>][p+<span class="number">1</span>];</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> <span class="number">0</span>; c &lt;= p; ++c) &#123;</span><br><span class="line">                f[(i+<span class="number">1</span>)%<span class="number">2</span>][c] = f[i%<span class="number">2</span>][c];</span><br><span class="line">                <span class="keyword">if</span> (c &gt;= w[i])</span><br><span class="line">                    f[(i+<span class="number">1</span>)%<span class="number">2</span>][c] += f[i%<span class="number">2</span>][c-w[i]];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n%<span class="number">2</span>][p];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸€ä¸ªæ•°ç»„">ä¸€ä¸ªæ•°ç»„</h3><p>èƒ½å¦è¿›ä¸€æ­¥ä¼˜åŒ–ï¼ŸOf courseï¼<br>ä¸¤è¡Œæ•°ç»„å¯¹äºç¬¬ä¸€ç»´æ˜¯æ­£å‘è®¡ç®—ï¼Œæœ‰è¦†ç›–é—®é¢˜ã€‚ä½†æ˜¯å¦‚æœåå‘è®¡ç®—å°±æ²¡æœ‰è¦†ç›–é—®é¢˜äº†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">findTargetSumWays</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; w, <span class="type">int</span> t)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> p = <span class="built_in">accumulate</span>(w.<span class="built_in">begin</span>(), w.<span class="built_in">end</span>(), t);</span><br><span class="line">        <span class="keyword">if</span> (p &lt; <span class="number">0</span> || p % <span class="number">2</span> != <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        p /= <span class="number">2</span>;</span><br><span class="line">        <span class="type">int</span> n = w.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">f</span><span class="params">(p<span class="number">+1</span>)</span></span>;</span><br><span class="line">        f[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) </span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> c = p; c &gt;= <span class="number">0</span>; --c) </span><br><span class="line">                <span class="keyword">if</span> (c &gt;= w[i])</span><br><span class="line">                    f[c] += f[c-w[i]];</span><br><span class="line">        <span class="keyword">return</span> f[p];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">findTargetSumWays</span><span class="params">(<span class="type">int</span>[] w, <span class="type">int</span> t)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">s</span> <span class="operator">=</span> Arrays.stream(w).sum();</span><br><span class="line">        <span class="keyword">if</span> (s + t &lt; <span class="number">0</span> || (s + t) % <span class="number">2</span> == <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> (s + t) / <span class="number">2</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> w.length;</span><br><span class="line">        <span class="type">int</span>[] f = <span class="keyword">new</span> <span class="title class_">int</span>[p+<span class="number">1</span>];</span><br><span class="line">        f[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) </span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> p; c &gt;= <span class="number">0</span>; --c) </span><br><span class="line">                <span class="keyword">if</span> (c &gt;= w[i])</span><br><span class="line">                    f[c] += f[c-w[i]];</span><br><span class="line">        <span class="keyword">return</span> f[p];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åŠ¨æ€è§„åˆ’ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode äºŒåä¹ï¼š2353. è®¾è®¡é£Ÿç‰©è¯„åˆ†ç³»ç»Ÿ</title>
      <link href="/2025/02/28/leetcode29/"/>
      <url>/2025/02/28/leetcode29/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/design-a-food-rating-system/description/">2353. è®¾è®¡é£Ÿç‰©è¯„åˆ†ç³»ç»Ÿ</a>ã€‚</p><p>è®¾è®¡ä¸€ä¸ªæ”¯æŒä¸‹è¿°æ“ä½œçš„é£Ÿç‰©è¯„åˆ†ç³»ç»Ÿï¼š</p><ul><li>ä¿®æ”¹ ç³»ç»Ÿä¸­åˆ—å‡ºçš„æŸç§é£Ÿç‰©çš„è¯„åˆ†ã€‚</li><li>è¿”å›ç³»ç»Ÿä¸­æŸä¸€ç±»çƒ¹é¥ªæ–¹å¼ä¸‹è¯„åˆ†æœ€é«˜çš„é£Ÿç‰©ã€‚</li></ul><p>å®ç° FoodRatings ç±»ï¼š</p><ul><li>FoodRatings(String[] foods, String[] cuisines, int[] ratings) åˆå§‹åŒ–ç³»ç»Ÿã€‚é£Ÿç‰©ç”± foodsã€cuisines å’Œ ratings æè¿°ï¼Œé•¿åº¦å‡ä¸º n ã€‚<ul><li>foods[i] æ˜¯ç¬¬ i ç§é£Ÿç‰©çš„åå­—ã€‚</li><li>cuisines[i] æ˜¯ç¬¬ i ç§é£Ÿç‰©çš„çƒ¹é¥ªæ–¹å¼ã€‚</li><li>ratings[i] æ˜¯ç¬¬ i ç§é£Ÿç‰©çš„æœ€åˆè¯„åˆ†ã€‚</li></ul></li><li>void changeRating(String food, int newRating) ä¿®æ”¹åå­—ä¸º food çš„é£Ÿç‰©çš„è¯„åˆ†ã€‚</li><li>String highestRated(String cuisine) è¿”å›æŒ‡å®šçƒ¹é¥ªæ–¹å¼ cuisine ä¸‹è¯„åˆ†æœ€é«˜çš„é£Ÿç‰©çš„åå­—ã€‚å¦‚æœå­˜åœ¨å¹¶åˆ—ï¼Œè¿”å›<code>å­—å…¸åºè¾ƒå°</code>çš„åå­—ã€‚</li></ul><p>æ³¨æ„ï¼Œå­—ç¬¦ä¸² x çš„å­—å…¸åºæ¯”å­—ç¬¦ä¸² y æ›´å°çš„å‰ææ˜¯ï¼šx åœ¨å­—å…¸ä¸­å‡ºç°çš„ä½ç½®åœ¨ y ä¹‹å‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¦ä¹ˆ x æ˜¯ y çš„å‰ç¼€ï¼Œæˆ–è€…åœ¨æ»¡è¶³ x[i] != y[i] çš„ç¬¬ä¸€ä¸ªä½ç½® i å¤„ï¼Œx[i] åœ¨å­—æ¯è¡¨ä¸­å‡ºç°çš„ä½ç½®åœ¨ y[i] ä¹‹å‰ã€‚</p><p>è¿™å‡ å¤©è®¾è®¡é¢˜åšå¾—å¤´å¤§ğŸ˜’ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">FoodRatings</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    unordered_map&lt;string, pair&lt;<span class="type">int</span>, string&gt;&gt; foods_map;</span><br><span class="line">    unordered_map&lt;string, set&lt;pair&lt;<span class="type">int</span>, string&gt;&gt;&gt; cuisines_map;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">FoodRatings</span>(vector&lt;string&gt;&amp; foods, vector&lt;string&gt;&amp; cuisines, vector&lt;<span class="type">int</span>&gt;&amp; ratings) &#123;</span><br><span class="line">        <span class="type">int</span> n = foods.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            foods_map[foods[i]] = &#123;ratings[i], cuisines[i]&#125;;</span><br><span class="line">            cuisines_map[cuisines[i]].<span class="built_in">emplace</span>(-ratings[i], foods[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">changeRating</span><span class="params">(string food, <span class="type">int</span> newRating)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">auto</span>&amp; [rating, cuisine] = foods_map[food];</span><br><span class="line">        cuisines_map[cuisine].<span class="built_in">erase</span>(&#123;-rating, food&#125;);</span><br><span class="line">        cuisines_map[cuisine].<span class="built_in">emplace</span>(-newRating, food);</span><br><span class="line">        rating = newRating;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function">string <span class="title">highestRated</span><span class="params">(string cuisine)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> cuisines_map[cuisine].<span class="built_in">begin</span>()-&gt;second;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your FoodRatings object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * FoodRatings* obj = new FoodRatings(foods, cuisines, ratings);</span></span><br><span class="line"><span class="comment"> * obj-&gt;changeRating(food,newRating);</span></span><br><span class="line"><span class="comment"> * string param_2 = obj-&gt;highestRated(cuisine);</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><p>ç”±äºæ¯æ—¥ä¸€é¢˜é¢˜å‹è¾ƒæ•£ï¼Œå³æ—¥èµ·æœ¬ä¸“æ åœæ›´ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Leetcode æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å“ˆå¸Œè¡¨ </tag>
            
            <tag> Leetcode æ¯æ—¥ä¸€é¢˜ </tag>
            
            <tag> è®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€è§„åˆ’äºŒ</title>
      <link href="/2025/02/27/dp2/"/>
      <url>/2025/02/27/dp2/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥ç»§ç»­åŠ¨æ€è§„åˆ’ï¼Œå…ˆæ¥é“ç®€å•é¢˜ç»ƒç»ƒæ‰‹<a href="https://leetcode.cn/problems/fibonacci-number/description/">509. æ–æ³¢é‚£å¥‘æ•°</a>ã€‚</p><p>æ–æ³¢é‚£å¥‘æ•° ï¼ˆé€šå¸¸ç”¨ F(n) è¡¨ç¤ºï¼‰å½¢æˆçš„åºåˆ—ç§°ä¸º æ–æ³¢é‚£å¥‘æ•°åˆ— ã€‚è¯¥æ•°åˆ—ç”± 0 å’Œ 1 å¼€å§‹ï¼Œåé¢çš„æ¯ä¸€é¡¹æ•°å­—éƒ½æ˜¯å‰é¢ä¸¤é¡¹æ•°å­—çš„å’Œã€‚ä¹Ÿå°±æ˜¯ï¼š</p><pre><code>F(0) = 0ï¼ŒF(1) = 1F(n) = F(n - 1) + F(n - 2)ï¼Œå…¶ä¸­ n &gt; 1</code></pre><p>ç»™å®š n ï¼Œè¯·è®¡ç®— F(n) ã€‚</p><p>è¿™é“é¢˜æˆ‘ç§°ä¹‹ä¸ºé€’å½’å…¥é—¨é¢˜ç›®ï¼Œä½†æ˜¯åœ¨DPé‡Œä¹Ÿç®—å…¥é—¨çº§å§ã€‚</p><h1>è·Ÿç€çµèŒ¶å±±è‰¾åºœå­¦DP</h1><p>æ¥ä¸‹æ¥ï¼Œå­¦ä¹ å­¦ä¹ çµèŒ¶å±±è‰¾åºœå‡ºå“çš„<a href="https://www.bilibili.com/video/BV1Xj411K7oF/?vd_source=a0f19e79b7da02f4fa318d91be5bc86a">åŠ¨æ€è§„åˆ’å…¥é—¨ï¼šä»è®°å¿†åŒ–æœç´¢åˆ°é€’æ¨ã€åŸºç¡€ç®—æ³•ç²¾è®² 17ã€‘</a>ï¼ˆè§†é¢‘é“¾æ¥ä¸ºBç«™UPä¸»çµèŒ¶å±±è‰¾åºœå‡ºå“ï¼Œç‚¹å‡»å³å¯è·³è½¬è§†é¢‘ï¼‰ã€‚</p><p>UPä¸»æŒ‡å‡ºï¼ŒåŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒï¼š</p><ul><li>çŠ¶æ€å®šä¹‰</li><li>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</li></ul><p>UPä¸»è¦æ˜¯é€šè¿‡Leetcodeä¸Šçš„ä¸€é“é¢˜ç›®<a href="https://leetcode.cn/problems/house-robber/description/">198. æ‰“å®¶åŠ«èˆ</a>æ¥è¿›è¡Œè®²è§£çš„ã€‚</p><p>ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å°å·ï¼Œè®¡åˆ’å·çªƒæ²¿è¡—çš„æˆ¿å±‹ã€‚æ¯é—´æˆ¿å†…éƒ½è—æœ‰ä¸€å®šçš„ç°é‡‘ï¼Œå½±å“ä½ å·çªƒçš„å”¯ä¸€åˆ¶çº¦å› ç´ å°±æ˜¯ç›¸é‚»çš„æˆ¿å±‹è£…æœ‰ç›¸äº’è¿é€šçš„é˜²ç›—ç³»ç»Ÿï¼Œå¦‚æœä¸¤é—´ç›¸é‚»çš„æˆ¿å±‹åœ¨åŒä¸€æ™šä¸Šè¢«å°å·é—¯å…¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŠ¥è­¦ã€‚</p><p>ç»™å®šä¸€ä¸ªä»£è¡¨æ¯ä¸ªæˆ¿å±‹å­˜æ”¾é‡‘é¢çš„éè´Ÿæ•´æ•°æ•°ç»„ï¼Œè®¡ç®—ä½  ä¸è§¦åŠ¨è­¦æŠ¥è£…ç½®çš„æƒ…å†µä¸‹ ï¼Œä¸€å¤œä¹‹å†…èƒ½å¤Ÿå·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><pre><code>è¾“å…¥ï¼š[1,2,3,1]è¾“å‡ºï¼š4è§£é‡Šï¼šå·çªƒ 1 å·æˆ¿å±‹ (é‡‘é¢ = 1) ï¼Œç„¶åå·çªƒ 3 å·æˆ¿å±‹ (é‡‘é¢ = 3)ã€‚ å·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ = 1 + 3 = 4 ã€‚</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code>è¾“å…¥ï¼š[2,7,9,3,1]è¾“å‡ºï¼š12è§£é‡Šï¼šå·çªƒ 1 å·æˆ¿å±‹ (é‡‘é¢ = 2), å·çªƒ 3 å·æˆ¿å±‹ (é‡‘é¢ = 9)ï¼Œæ¥ç€å·çªƒ 5 å·æˆ¿å±‹ (é‡‘é¢ = 1)ã€‚ å·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ = 2 + 9 + 1 = 12 ã€‚</code></pre><h2 id="çµèŒ¶å±±è‰¾åºœçš„æ€è·¯">çµèŒ¶å±±è‰¾åºœçš„æ€è·¯</h2><h3 id="é€’å½’">é€’å½’</h3><p>å…ˆæŠŠå®ƒçœ‹æˆä¸€é“å›æº¯é¢˜ï¼ŒæŠŠä¸€ä¸ªå¤§é—®é¢˜å˜æˆè§„æ¨¡æ›´å°çš„å­é—®é¢˜ï¼Œä»ç¬¬ä¸€ä¸ªæˆ¿å­æˆ–è€…æœ€åä¸€ä¸ªæˆ¿å­å¼€å§‹æ€è€ƒï¼Œå› ä¸ºä»–ä»¬æ”¶åˆ°çš„çº¦æŸæœ€å°‘ã€‚æ¯”å¦‚è€ƒè™‘æœ€åä¸€ä¸ªæˆ¿å­é€‰è¿˜æ˜¯ä¸é€‰ï¼š</p><ul><li>å¦‚æœä¸é€‰ï¼Œé‚£ä¹ˆé—®é¢˜å°±å˜æˆn-1ä¸ªæˆ¿å­çš„é—®é¢˜</li><li>å¦‚æœé€‰ï¼Œå°±å˜æˆn-2ä¸ªæˆ¿å­çš„é—®é¢˜<br>ä¸æ–­è¿™æ ·æ€è€ƒä¸‹å»å¯ä»¥å¾—åˆ°ä¸€æ£µæœç´¢æ ‘ï¼š</li></ul><p><img src="/images/dp2.png" alt=""></p><p>æ³¨ï¼šå›¾ç‰‡æ¥æºäºä¸Šè¿°æ‰€æBç«™è§†é¢‘ä¸­</p><p>æ³¨æ„ä¸€ç‚¹ï¼Œå›¾ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„æ•°å­—ä»£è¡¨ç¬¬å‡ ä¸ªæˆ¿å­ï¼Œ4å°±æ˜¯ç¬¬å››ä¸ªæˆ¿å­ã€‚</p><p>çµèŒ¶å±±è‰¾åºœæå‡ºäº†å›æº¯ä¸‰é—®ï¼š</p><ol><li>å½“å‰æ“ä½œï¼Ÿæ˜¯æšä¸¾<code>ç¬¬</code>iä¸ªæˆ¿å­é€‰/ä¸é€‰</li><li>å­é—®é¢˜ï¼Ÿæ˜¯<code>å‰</code>iä¸ªæˆ¿å­ä¸­å¾—åˆ°çš„æœ€å¤§é‡‘é¢å’Œ</li><li>ä¸‹ä¸€ä¸ªå­é—®é¢˜ï¼Ÿéœ€è¦åˆ†ç±»è®¨è®ºï¼š<ul><li>ä¸é€‰ï¼šä»<code>å‰</code>i-1ä¸ªæˆ¿å­å¾—åˆ°çš„æœ€å¤§é‡‘é¢å’Œ</li><li>é€‰ï¼šä»<code>å‰</code>i-2ä¸ªæˆ¿å­å¾—åˆ°çš„æœ€å¤§é‡‘é¢å’Œ<br>æœ€ç»ˆå¾—åˆ°ä»¥ä¸‹å®ç°ï¼š</li></ul></li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">rob</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        function&lt;<span class="type">int</span>(<span class="type">int</span>)&gt; dfs = [&amp;](<span class="type">int</span> i)-&gt;<span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; <span class="number">0</span>) </span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            <span class="type">int</span> res = <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>), nums[i] + <span class="built_in">dfs</span>(i<span class="number">-2</span>));</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(nums.<span class="built_in">size</span>()<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="è®°å¿†åŒ–æœç´¢">è®°å¿†åŒ–æœç´¢</h3><p>ä¸Šè¿°ä»£ç ç±»ä¼¼äºå›æº¯ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯æŒ‡æ•°çº§åˆ«çš„ï¼Œä¼šè¶…æ—¶ã€‚å¦‚ä½•ä¼˜åŒ–ï¼ŸçµèŒ¶å±±è‰¾åºœå¼•å¯¼æˆ‘ä»¬å›å»çœ‹ä¹‹å‰çš„é‚£é¢—æœç´¢æ ‘ã€‚è§‚å¯Ÿæœç´¢æ ‘æˆ‘ä»¬ä¼šå‘ç°ï¼Œæœ‰ä¸¤ä¸ªåŒ…å«èŠ‚ç‚¹2çš„å­æ ‘ï¼Œå¹¶ä¸”è¿™ä¸¤ä¸ªå­æ ‘æ˜¯ç›¸åŒçš„ã€‚ä¹Ÿå°±æ˜¯è¯´dfs(2)ç®—äº†ä¸¤æ¬¡ï¼Œä½†å®ƒä»¬çš„ç»“æœæ˜¯ä¸€æ ·ï¼Œå¹²è„†åœ¨ç¬¬ä¸€æ¬¡è®¡ç®—æ—¶å°±æŠŠè®¡ç®—ç»“æœå­˜åˆ°ä¸€ä¸ªcacheæ•°ç»„æˆ–è€…å“ˆå¸Œè¡¨é‡Œã€‚</p><p><img src="/images/dp2_2.png" alt=""></p><p>æ³¨ï¼šå›¾ç‰‡æ¥æºäºä¸Šè¿°æ‰€æBç«™è§†é¢‘ä¸­</p><p>ä¼˜åŒ–åçš„æœç´¢æ ‘å¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°è¿™æ£µæœç´¢æ ‘åªæœ‰O(n)ä¸ªèŠ‚ç‚¹ï¼Œæ—¶é—´å¤æ‚åº¦ä¹Ÿä¼˜åŒ–åˆ°äº†O(n)ã€‚</p><p><img src="/images/dp2_3.png" alt=""></p><p>æ³¨ï¼šå›¾ç‰‡æ¥æºäºä¸Šè¿°æ‰€æBç«™è§†é¢‘ä¸­</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">rob</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">memo</span><span class="params">(n, <span class="number">-1</span>)</span></span>;</span><br><span class="line">        function&lt;<span class="type">int</span>(<span class="type">int</span>)&gt; dfs = [&amp;](<span class="type">int</span> i)-&gt;<span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; <span class="number">0</span>) </span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span> (memo[i] != <span class="number">-1</span>)</span><br><span class="line">                <span class="keyword">return</span> memo[i];</span><br><span class="line">            memo[i] = <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>), nums[i] + <span class="built_in">dfs</span>(i<span class="number">-2</span>));</span><br><span class="line">            <span class="keyword">return</span> memo[i];</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(nums.<span class="built_in">size</span>()<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] nums, memo;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">rob</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.nums = nums;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        memo = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">        Arrays.fill(memo, -<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> dfs(n-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &lt; <span class="number">0</span>) </span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (memo[i] != -<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> memo[i];</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> Math.max(dfs(i-<span class="number">1</span>), dfs(i-<span class="number">2</span>) + nums[i]);</span><br><span class="line">        memo[i] = res;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¤æ‚åº¦å¦‚ä½•è®¡ç®—å‘¢ï¼Ÿæœ‰å…¬å¼ï¼š</p><ul><li>çŠ¶æ€æ•° <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>Ã—</mo></mrow><annotation encoding="application/x-tex">\times</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.58333em;"></span><span class="strut bottom" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord">Ã—</span></span></span></span>å•ä¸ªçŠ¶æ€æ‰€éœ€è¦çš„è®¡ç®—æ—¶é—´</li></ul><p>æœ¬é¢˜çŠ¶æ€ä¸ªæ•°æ˜¯O(n)ï¼Œå•ä¸ªçŠ¶æ€çš„è®¡ç®—æ—¶é—´æ˜¯O(1)ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚ç©ºé—´å¤æ‚åº¦ä¸ºO(n)ã€‚</p><h3 id="é€’æ¨">é€’æ¨</h3><p>æœ‰æ²¡æœ‰åŠæ³•æŠŠç©ºé—´å¤æ‚åº¦ä¼˜åŒ–åˆ°O(1)å‘¢ï¼Ÿé€’å½’çš„é€’å³è°ƒç”¨å‡½æ•°ï¼Œå½’å³returnã€‚</p><p>å†å›å¤´çœ‹ä¸Šé¢é‚£å¼ å›¾ï¼Œè¿™é‡Œä¸ºäº†é¿å…æ¥å›ç¿»ï¼Œå†åœ¨è¿™é‡Œé™„ä¸Šã€‚</p><p><img src="/images/dp2_3.png" alt=""></p><p>æ³¨ï¼šå›¾ç‰‡æ¥æºäºä¸Šè¿°æ‰€æBç«™è§†é¢‘ä¸­</p><p>è¿™é‡Œè®¡ç®—maxå‘ç”Ÿåœ¨dfsè°ƒç”¨ç»“æŸä¹‹åï¼Œä¹Ÿå°±æ˜¯åœ¨é€’å½’çš„â€œå½’â€çš„è¿‡ç¨‹ä¸­æ‰å‘ç”Ÿäº†å®é™…çš„maxè®¡ç®—ã€‚0å’Œ1å½’åˆ°2ï¼Œ2å’Œ1å½’åˆ°3ï¼Œ3å’Œ2å½’åˆ°4ï¼Œé‚£æ—¢ç„¶æˆ‘ä»¬çŸ¥é“è¦ä»å“ªäº›ç‚¹å½’åˆ°å“ªä¸ªç‚¹ï¼Œé‚£ä¹ˆå¹²è„†å»æ‰é€’å½’ä¸­çš„â€œé€’â€ï¼Œåªç•™ä¸‹â€œå½’â€çš„è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯ä»æœ€ä¸‹é¢å¼€å§‹å¾€ä¸Šè®¡ç®—ã€‚è¿™è¢«çµèŒ¶å±±è‰¾åºœç§°ä½œâ€œé€’æ¨â€ã€‚</p><pre><code>è‡ªé¡¶å‘ä¸‹ç®— = è®°å¿†åŒ–æœç´¢è‡ªåº•å‘ä¸Šç®— = é€’æ¨</code></pre><p>ä¸Šè¿°åº”è¯¥æ˜¯UPä¸»çµèŒ¶å±±è‰¾åºœæå‡ºçš„æ¦‚å¿µäº†ï¼Œä»”ç»†æƒ³æƒ³æ„Ÿè§‰å¾ˆæœ‰é“ç†ğŸ˜ã€‚</p><p>å¦‚ä½•å°†è®°å¿†åŒ–æœç´¢æ”¹æˆé€’æ¨ï¼ŸçµèŒ¶å±±è‰¾åºœæ€»ç»“å¦‚ä¸‹ï¼š</p><ol><li>dfs -&gt; fæ•°ç»„</li><li>é€’å½’ -&gt; å¾ªç¯</li><li>é€’å½’è¾¹ç•Œ -&gt; æ•°ç»„åˆå§‹å€¼</li></ol><p>åŸæ¥çš„é€’å½’ä¸º:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dfs</span>(i) = <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>), <span class="built_in">dfs</span>(i<span class="number">-2</span>) + nums[i]);</span><br></pre></td></tr></table></figure><p>åŸºäºä¸Šè¿°æ–¹æ³•å¾ˆå®¹æ˜“å°†é€’å½’ä¿®æ”¹æˆé€’æ¨ï¼Œä½†æ˜¯éœ€è¦å¯¹i = 0å’Œi = 1çš„æƒ…å†µç‰¹æ®Šå¤„ç†ï¼ˆå› ä¸ºä¼šäº§ç”Ÿè´Ÿæ•°ä¸‹æ ‡ï¼‰ã€‚</p><p>ä¸ºäº†é¿å…äº§ç”Ÿè´Ÿæ•°ä¸‹æ ‡ï¼Œå¯ä»¥æŠŠiæ”¹æˆä»2å¼€å§‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f[i] = <span class="built_in">max</span>(f[i<span class="number">-1</span>], f[i<span class="number">-2</span>] + nums[i]);</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥æŠŠä¸‰å¤„iéƒ½+2ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f[i<span class="number">+2</span>] = <span class="built_in">max</span>(f[i<span class="number">+1</span>], f[i] + nums[i]);</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆå¾—åˆ°</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">rob</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">f</span><span class="params">(n + <span class="number">2</span>)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) </span><br><span class="line">            f[i<span class="number">+2</span>] = <span class="built_in">max</span>(f[i<span class="number">+1</span>], f[i] + nums[i]);</span><br><span class="line">        <span class="keyword">return</span> f[n<span class="number">+1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> MAX(a, b) ((a) &gt; (b) ? (a) : (b))</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">rob</span><span class="params">(<span class="type">int</span>* nums, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">int</span> * f = (<span class="type">int</span> *)<span class="built_in">calloc</span>(n + <span class="number">2</span>, <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">        f[i+<span class="number">2</span>] = MAX(f[i+<span class="number">1</span>], f[i] + nums[i]);</span><br><span class="line">    <span class="keyword">return</span> f[n + <span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">rob</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="type">int</span>[] f = <span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) </span><br><span class="line">            f[i+<span class="number">2</span>] = Math.max(f[i+<span class="number">1</span>], f[i] + nums[i]);</span><br><span class="line">        <span class="keyword">return</span> f[n+<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€’æ¨çš„ä»£ç ç©ºé—´å¤æ‚åº¦ä»ç„¶ä¸ºO(n)ï¼Œä½†æ˜¯ç»“åˆä¸€å¼€å§‹çš„<a href="https://leetcode.cn/problems/fibonacci-number/description/">509. æ–æ³¢é‚£å¥‘æ•°</a>ï¼Œåº”è¯¥ä¸éš¾æƒ³åˆ°å¦‚ä½•ç©ºé—´ä¼˜åŒ–ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">rob</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> f1 = <span class="number">0</span>, f2 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="type">int</span> cur = <span class="built_in">max</span>(f1, f2 + nums[i]);</span><br><span class="line">            f2 = f1;</span><br><span class="line">            f1 = cur;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> MAX(a, b) ((a) &gt; (b) ? (a) : (b))</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">rob</span><span class="params">(<span class="type">int</span>* nums, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">int</span> f1 = <span class="number">0</span>, f2 = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> cur = MAX(f1, f2 + nums[i]);</span><br><span class="line">        f2 = f1;</span><br><span class="line">        f1 = cur;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> f1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">rob</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="type">int</span> <span class="variable">f1</span> <span class="operator">=</span> <span class="number">0</span>, f2 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">cur</span> <span class="operator">=</span> Math.max(f1, f2 + nums[i]);</span><br><span class="line">            f2 = f1;</span><br><span class="line">            f1 = cur;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åŠ¨æ€è§„åˆ’ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mallocã€free å’Œ newã€delete çš„åŒºåˆ«</title>
      <link href="/2025/02/27/cpp-interview1/"/>
      <url>/2025/02/27/cpp-interview1/</url>
      
        <content type="html"><![CDATA[<p>malloc å’Œ free æ˜¯Cè¯­è¨€çš„åº“å‡½æ•°ï¼Œ new å’Œ delete æ˜¯ C++ é‡Œçš„æ“ä½œç¬¦ã€‚è°ˆåˆ°åŒºåˆ«å°±è¦å»è®¨è®ºå…±åŒç‚¹ä¸ä¸åŒç‚¹ï¼Œå°¤å…¶è¦å…³æ³¨ä»–ä»¬ä¹‹é—´çš„å·®å¼‚ã€‚</p><h1>new å’Œ malloc</h1><ol><li>new è‡ªåŠ¨è®¡ç®—æ‰€éœ€åˆ†é…çš„å†…å­˜å¤§å°ï¼Œmallocéœ€è¦æ‰‹åŠ¨è®¡ç®—ã€‚</li><li>è¿”å›å€¼ä¸åŒï¼Œnewçš„è¿”å›å€¼ä¸ºå¯¹è±¡ç±»å‹çš„æŒ‡é’ˆï¼Œè€Œmallocè¿”å›çš„æ˜¯<code>void*</code>ç±»å‹çš„æŒ‡é’ˆï¼ˆä½¿ç”¨mallocå¾€å¾€éœ€è¦æ‰‹åŠ¨è¿›è¡Œç±»å‹è½¬æ¢ï¼‰ã€‚</li><li>new åˆ†é…å¤±è´¥æ—¶æŠ›å‡ºå¼‚å¸¸std::bad_allocï¼Œè€Œmallocåˆ†é…å¤±è´¥åˆ™è¿”å›NULLã€‚</li><li>new æ˜¯free storeä¸Šåˆ†é…å†…å­˜ï¼Œè€Œmallocæ˜¯åœ¨å †ä¸Šæˆ–è€…æ–‡ä»¶æ˜ å°„åŒºã€‚</li><li>new åˆ†é…çš„å†…å­˜ä¸€èˆ¬æ˜¯åˆå§‹åŒ–è¿‡çš„ï¼Œmallocåˆ†é…çš„å†…å­˜æ²¡æœ‰ç»è¿‡åˆå§‹åŒ–ã€‚</li></ol><h2 id="new-çš„å·¥ä½œè¿‡ç¨‹">new çš„å·¥ä½œè¿‡ç¨‹</h2><ol><li>ä½¿ç”¨newæ“ä½œç¬¦æ—¶ï¼Œå…ˆè°ƒç”¨operator newï¼ˆè¿™ä¸ªå¯ä»¥é‡è½½ï¼‰</li><li>ç„¶åç”³è¯·æ‰€éœ€çš„ç©ºé—´</li><li>æœ€åè°ƒç”¨æ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–æˆå‘˜å˜é‡</li></ol><h2 id="malloc">malloc</h2><ol><li>mallocåˆ†é…çš„è™šæ‹Ÿå†…å­˜</li><li>mallocå½“åˆ†é…çš„å†…å­˜å°äº128Kå­—èŠ‚æ—¶é€šè¿‡brkç³»ç»Ÿè°ƒç”¨åœ¨å †ä¸Šåˆ†é…å†…å­˜ï¼Œå½“è¶…è¿‡128Kå­—èŠ‚æ—¶é€šè¿‡mmapç³»ç»Ÿè°ƒç”¨åœ¨æ–‡ä»¶æ˜ å°„åŒºåˆ†é…å†…å­˜</li></ol><h1>delete å’Œ free</h1><ol><li>delete éœ€è¦å¯¹è±¡ç±»å‹çš„æŒ‡é’ˆï¼Œfree ä¸éœ€è¦å…³æ³¨éœ€è¦é‡Šæ”¾å¯¹è±¡çš„ç±»å‹<ul><li>deleteéœ€è¦è°ƒç”¨å¯¹åº”çš„ææ„å‡½æ•°ï¼Œæ“¦é™¤ç±»å‹deleteå°±ä¸çŸ¥é“è°ƒç”¨ä»€ä¹ˆææ„å‡½æ•°äº†ã€‚</li></ul></li></ol><h2 id="delete-å·¥ä½œè¿‡ç¨‹">delete å·¥ä½œè¿‡ç¨‹</h2><ol><li>å…ˆè°ƒç”¨ææ„å‡½æ•°</li><li>å†è°ƒç”¨operator deleteï¼ˆä¹Ÿå¯ä»¥è¿›è¡Œé‡è½½ï¼‰</li><li>é‡Šæ”¾ç©ºé—´</li></ol><h2 id="freeæ˜¯å¦‚ä½•çŸ¥é“è¦é‡Šæ”¾å¤šå¤§çš„ç©ºé—´">freeæ˜¯å¦‚ä½•çŸ¥é“è¦é‡Šæ”¾å¤šå¤§çš„ç©ºé—´</h2><p>mallocåˆ†é…å†…å­˜çš„æ—¶å€™ï¼Œäº‹å®ä¸Šå¤šåˆ†é…äº†16å­—èŠ‚çš„ç©ºé—´(16 + mem)ï¼Œè¿”å›å€¼è¿”å›memçš„é¦–åœ°å€ã€‚freeçš„æ—¶å€™ï¼Œå°±ä¼šå‘å·¦åç§»16å­—èŠ‚ï¼Œè¿™16å­—èŠ‚çš„ç©ºé—´å­˜å‚¨äº†å†…å­˜å—çš„æè¿°ä¿¡æ¯ï¼ŒåŒ…å«memçš„å¤§å°ã€‚freeå°±æ˜¯é€šè¿‡è¿™ç§æ–¹å¼æ¥è·å–è¦é‡Šæ”¾çš„ç©ºé—´å¤§å°ï¼Œå¹¶ä¸”æ­£å› ä¸ºæ­¤ï¼Œfreeé‡Šæ”¾æ—¶æ— éœ€å…³æ³¨æ‰€éœ€é‡Šæ”¾å¯¹è±¡çš„ç±»å‹ã€‚</p><h2 id="freeé‡Šæ”¾å†…å­˜åï¼Œè¿™å—å†…å­˜è¿˜åœ¨å—">freeé‡Šæ”¾å†…å­˜åï¼Œè¿™å—å†…å­˜è¿˜åœ¨å—</h2><ul><li>å¦‚æœå†…å­˜å—æ˜¯é€šè¿‡brkç³»ç»Ÿè°ƒç”¨è·å¾—çš„ï¼Œå†…å­˜ç®¡ç†å™¨ä¼šå°†è¿™å—å†…å­˜æ’å…¥åˆ°å…¶ç»´æŠ¤çš„<code>ç©ºé—²é“¾è¡¨</code>æˆ–<code>ç©ºé—²å†…å­˜æ± </code>ä¸­ï¼Œä»¥ä¾¿åœ¨åç»­çš„å†…å­˜åˆ†é…è¯·æ±‚ä¸­å¤ç”¨ã€‚</li><li>å¦‚æœæ˜¯é€šè¿‡mmapç³»ç»Ÿè°ƒç”¨è·å¾—çš„ï¼Œè¿™å—å†…å­˜ä¼šå½’è¿˜ç»™æ“ä½œç³»ç»Ÿã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> C/C++ é¢è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C/C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode æ¯æ—¥ä¸€é¢˜äºŒåå…«ï¼š2296. è®¾è®¡ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨</title>
      <link href="/2025/02/27/leetcode28/"/>
      <url>/2025/02/27/leetcode28/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥çš„Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/design-a-text-editor/description/">2296. è®¾è®¡ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨</a>ã€‚</p><p>è¯·ä½ è®¾è®¡ä¸€ä¸ªå¸¦å…‰æ ‡çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå®ƒå¯ä»¥å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ul><li>æ·»åŠ ï¼šåœ¨å…‰æ ‡æ‰€åœ¨å¤„æ·»åŠ æ–‡æœ¬ã€‚</li><li>åˆ é™¤ï¼šåœ¨å…‰æ ‡æ‰€åœ¨å¤„åˆ é™¤æ–‡æœ¬ï¼ˆæ¨¡æ‹Ÿé”®ç›˜çš„åˆ é™¤é”®ï¼‰ã€‚</li><li>ç§»åŠ¨ï¼šå°†å…‰æ ‡å¾€å·¦æˆ–è€…å¾€å³ç§»åŠ¨ã€‚</li></ul><p>å½“åˆ é™¤æ–‡æœ¬æ—¶ï¼Œåªæœ‰å…‰æ ‡å·¦è¾¹çš„å­—ç¬¦ä¼šè¢«åˆ é™¤ã€‚å…‰æ ‡ä¼šç•™åœ¨æ–‡æœ¬å†…ï¼Œä¹Ÿå°±æ˜¯è¯´ä»»æ„æ—¶å€™ 0 &lt;= cursor.position &lt;= currentText.length éƒ½æˆç«‹ã€‚</p><p>è¯·ä½ å®ç° TextEditor ç±»ï¼š</p><ul><li>TextEditor() ç”¨ç©ºæ–‡æœ¬åˆå§‹åŒ–å¯¹è±¡ã€‚</li><li>void addText(string text) å°† text æ·»åŠ åˆ°å…‰æ ‡æ‰€åœ¨ä½ç½®ã€‚æ·»åŠ å®Œåå…‰æ ‡åœ¨ text çš„å³è¾¹ã€‚</li><li>int deleteText(int k) åˆ é™¤å…‰æ ‡å·¦è¾¹ k ä¸ªå­—ç¬¦ã€‚è¿”å›å®é™…åˆ é™¤çš„å­—ç¬¦æ•°ç›®ã€‚</li><li>string cursorLeft(int k) å°†å…‰æ ‡å‘å·¦ç§»åŠ¨ k æ¬¡ã€‚è¿”å›ç§»åŠ¨åå…‰æ ‡å·¦è¾¹ min(10, len) ä¸ªå­—ç¬¦ï¼Œå…¶ä¸­ len æ˜¯å…‰æ ‡å·¦è¾¹çš„å­—ç¬¦æ•°ç›®ã€‚</li><li>string cursorRight(int k) å°†å…‰æ ‡å‘å³ç§»åŠ¨ k æ¬¡ã€‚è¿”å›ç§»åŠ¨åå…‰æ ‡å·¦è¾¹ min(10, len) ä¸ªå­—ç¬¦ï¼Œå…¶ä¸­ len æ˜¯å…‰æ ‡å·¦è¾¹çš„å­—ç¬¦æ•°ç›®ã€‚</li></ul><p>æœ€è¿‘çœŸçš„æ˜¯å¤´å¤§ï¼ŒLeetcodeçš„æ¯æ—¥ä¸€é¢˜æ€ä¹ˆè¿™å‡ å¤©ä¸€ç›´æè¿™ç§è®¾è®¡é¢˜ï¼Œè‹¦ä¸å ªè¨€ã€‚</p><p>è§£æ³•å‚è€ƒLeetcodeå®˜æ–¹çš„è§£æ³•ï¼Œä¸€å¼€å§‹å‡†å¤‡ä½¿ç”¨åŒå‘é“¾è¡¨çš„åšæ³•ï¼Œä½†æ˜¯å‘ç°ç¬¬äºŒç§åšæ³•â€”â€”ä½¿ç”¨æ ˆæ¥å®ç°è²Œä¼¼æ›´åŠ ç®€å•ï¼Œå°±æ˜¯ç”¨äº†æ ˆæ¥å®ç°ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> max_len 1000000</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MIN(a, b) ((a) &gt; (b) ? (b) : (a))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="type">char</span> *left;</span><br><span class="line">    <span class="type">char</span> *right;</span><br><span class="line">    <span class="type">int</span> leftSize;</span><br><span class="line">    <span class="type">int</span> rightSize;</span><br><span class="line">&#125; TextEditor;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">TextEditor* <span class="title function_">textEditorCreate</span><span class="params">()</span> &#123;</span><br><span class="line">    TextEditor *obj = (TextEditor*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(TextEditor));</span><br><span class="line">    obj-&gt;left = (<span class="type">char</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">char</span>) * max_len);</span><br><span class="line">    obj-&gt;right = (<span class="type">char</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">char</span>) * max_len);</span><br><span class="line">    obj-&gt;leftSize = <span class="number">0</span>;</span><br><span class="line">    obj-&gt;rightSize = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">textEditorAddText</span><span class="params">(TextEditor* obj, <span class="type">char</span>* text)</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (*text) &#123;</span><br><span class="line">        obj-&gt;left[obj-&gt;leftSize++] = *text;</span><br><span class="line">        ++text;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">textEditorDeleteText</span><span class="params">(TextEditor* obj, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (obj-&gt;leftSize &gt; <span class="number">0</span> &amp;&amp; k &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        obj-&gt;left[--obj-&gt;leftSize] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">        --k;</span><br><span class="line">        ++res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span>* <span class="title function_">textEditorCursorLeft</span><span class="params">(TextEditor* obj, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (obj-&gt;leftSize &gt; <span class="number">0</span> &amp;&amp; k &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        obj-&gt;right[obj-&gt;rightSize++] = obj-&gt;left[--obj-&gt;leftSize];</span><br><span class="line">        --k;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> retLen = MIN(<span class="number">10</span>, obj-&gt;leftSize);</span><br><span class="line">    <span class="type">char</span> * ret = (<span class="type">char</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">char</span>) * (retLen + <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; retLen; ++i) </span><br><span class="line">        ret[i] = obj-&gt;left[obj-&gt;leftSize-retLen+i];</span><br><span class="line">    ret[retLen] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span>* <span class="title function_">textEditorCursorRight</span><span class="params">(TextEditor* obj, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (obj-&gt;rightSize &gt; <span class="number">0</span> &amp;&amp; k &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        obj-&gt;left[obj-&gt;leftSize++] = obj-&gt;right[--obj-&gt;rightSize];</span><br><span class="line">        --k;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> retLen = MIN(<span class="number">10</span>, obj-&gt;leftSize);</span><br><span class="line">    <span class="type">char</span> * ret = (<span class="type">char</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">char</span>) * (retLen + <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; retLen; ++i) </span><br><span class="line">        ret[i] = obj-&gt;left[obj-&gt;leftSize-retLen+i];</span><br><span class="line">    ret[retLen] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> ret;   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">textEditorFree</span><span class="params">(TextEditor* obj)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj-&gt;left) </span><br><span class="line">        <span class="built_in">free</span>(obj-&gt;left);</span><br><span class="line">    <span class="keyword">if</span> (obj-&gt;right) </span><br><span class="line">        <span class="built_in">free</span>(obj-&gt;right);</span><br><span class="line">    <span class="built_in">free</span>(obj);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your TextEditor struct will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * TextEditor* obj = textEditorCreate();</span></span><br><span class="line"><span class="comment"> * textEditorAddText(obj, text);</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> * int param_2 = textEditorDeleteText(obj, k);</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> * char* param_3 = textEditorCursorLeft(obj, k);</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> * char* param_4 = textEditorCursorRight(obj, k);</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> * textEditorFree(obj);</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Leetcode æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode æ¯æ—¥ä¸€é¢˜ </tag>
            
            <tag> è®¾è®¡ </tag>
            
            <tag> æ ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€è§„åˆ’ä¸€</title>
      <link href="/2025/02/26/dp1/"/>
      <url>/2025/02/26/dp1/</url>
      
        <content type="html"><![CDATA[<p>å¼€å¯ä¸€ä¸ªåŠ¨æ€è§„åˆ’ä¸“æ ï¼Œè·Ÿç€çµèŒ¶å±±è‰¾åºœå­¦ä¹ ä¸€ä¸‹åŠ¨æ€è§„åˆ’ï¼Œå°†åŠ¨æ€è§„åˆ’æŒ‰åœ¨åœ°ä¸Šæ‘©æ“¦ã€‚<a href="https://leetcode.cn/circle/discuss/tXLS3i/"><br>åˆ†äº«ä¸¨ã€é¢˜å•ã€‘åŠ¨æ€è§„åˆ’ï¼ˆå…¥é—¨/èƒŒåŒ…/çŠ¶æ€æœº/åˆ’åˆ†/åŒºé—´/çŠ¶å‹/æ•°ä½/æ ‘å½¢/æ•°æ®ç»“æ„ä¼˜åŒ–ï¼‰</a>ã€‚</p><p>é¢˜ç›®ä¸º<a href="https://leetcode.cn/problems/climbing-stairs/description/">70. çˆ¬æ¥¼æ¢¯</a>ã€‚</p><p>å‡è®¾ä½ æ­£åœ¨çˆ¬æ¥¼æ¢¯ã€‚éœ€è¦ n é˜¶ä½ æ‰èƒ½åˆ°è¾¾æ¥¼é¡¶ã€‚</p><p>æ¯æ¬¡ä½ å¯ä»¥çˆ¬ 1 æˆ– 2 ä¸ªå°é˜¶ã€‚ä½ æœ‰å¤šå°‘ç§ä¸åŒçš„æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶å‘¢ï¼Ÿ</p><p>ç¤ºä¾‹ 1ï¼š</p><ul><li>è¾“å…¥ï¼šn = 2</li><li>è¾“å‡ºï¼š2</li><li>è§£é‡Šï¼šæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶ã€‚<ol><li>1 é˜¶ + 1 é˜¶</li><li>2 é˜¶</li></ol></li></ul><p>ç¤ºä¾‹ 2ï¼š</p><ul><li>è¾“å…¥ï¼šn = 3</li><li>è¾“å‡ºï¼š3</li><li>è§£é‡Šï¼šæœ‰ä¸‰ç§æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶ã€‚<ol><li>1 é˜¶ + 1 é˜¶ + 1 é˜¶</li><li>1 é˜¶ + 2 é˜¶</li><li>2 é˜¶ + 1 é˜¶</li></ol></li></ul><h1>åŸºæœ¬æ€è·¯</h1><p>n = 1æ—¶æœ‰1ç§æ–¹æ³•ï¼Œn = 2æ—¶æœ‰2ç§æ–¹æ³•ï¼›ä»ç¬¬ 3 é˜¶å¼€å§‹ï¼Œæ¯ä¸€é˜¶çš„çˆ¬æ³•æ•°ç­‰äºå‰ä¸€é˜¶çš„çˆ¬æ³•æ•°åŠ ä¸Šå‰ä¸¤é˜¶çš„çˆ¬æ³•æ•°ï¼Œå³ arr[i] = arr[i-1] + arr[i-2]ã€‚æœ€ç»ˆè¿”å› arr[n]ï¼Œå³ç¬¬ n é˜¶çš„çˆ¬æ³•æ•°ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">climbStairs</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt; <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">return</span> n == <span class="number">1</span> ? <span class="number">1</span> : <span class="number">2</span>;</span><br><span class="line">    <span class="type">int</span> * arr = (<span class="type">int</span> *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">int</span>) * (n + <span class="number">1</span>));</span><br><span class="line">    arr[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    arr[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">2</span>] = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">3</span>; i &lt;= n; ++i) </span><br><span class="line">        arr[i] = arr[i<span class="number">-1</span>] + arr[i<span class="number">-2</span>];</span><br><span class="line">    <span class="keyword">return</span> arr[n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">climbStairs</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (n &lt;<span class="number">3</span>)</span><br><span class="line">            <span class="keyword">return</span> n == <span class="number">1</span> ? <span class="number">1</span> : <span class="number">2</span>;</span><br><span class="line">        <span class="type">int</span> * arr = <span class="keyword">new</span> <span class="type">int</span>[n + <span class="number">1</span>];</span><br><span class="line">        arr[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        arr[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        arr[<span class="number">2</span>] = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">3</span>; i &lt;= n; ++i) </span><br><span class="line">            arr[i] = arr[i<span class="number">-1</span>] + arr[i<span class="number">-2</span>];</span><br><span class="line">        <span class="keyword">return</span> arr[n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç è™½ç„¶å¯ä»¥æ­£ç¡®æ±‚è§£ï¼Œä½†æ˜¯å­˜åœ¨ä¸€äº›é—®é¢˜ï¼š</p><ol><li>å†…å­˜æ³„æ¼<ul><li>ä½¿ç”¨ malloc åˆ†é…çš„å†…å­˜æ²¡æœ‰é‡Šæ”¾ï¼Œä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</li></ul></li><li>ç©ºé—´å¤æ‚åº¦ä¼˜åŒ–<ul><li>ä½¿ç”¨æ•°ç»„å­˜å‚¨æ‰€æœ‰é˜¶çš„çˆ¬æ³•æ•°ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(n)ï¼Œä½†å®é™…ä¸Šåªéœ€è¦å‰ä¸¤ä¸ªå€¼å³å¯ï¼Œå¯ä»¥ä¼˜åŒ–ä¸º O(1) çš„ç©ºé—´å¤æ‚åº¦ã€‚<br>ç»ä¼˜åŒ–è·å¾—å¦‚ä¸‹å®ç°ï¼š</li></ul></li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">climbStairs</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt; <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> pre1 = <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> pre2 = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">3</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> cur = pre1 + pre2;</span><br><span class="line">        pre1 = pre2;</span><br><span class="line">        pre2 = cur;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> pre2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>å¤æ‚åº¦åˆ†æ</h1><p>æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åŠ¨æ€è§„åˆ’ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode æ¯æ—¥ä¸€é¢˜äºŒåå…­ï¼š2502. è®¾è®¡å†…å­˜åˆ†é…å™¨</title>
      <link href="/2025/02/25/leetcode26/"/>
      <url>/2025/02/25/leetcode26/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥çš„Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/design-memory-allocator/description/">2502. è®¾è®¡å†…å­˜åˆ†é…å™¨</a>ã€‚</p><p>ç»™ä½ ä¸€ä¸ªæ•´æ•° n ï¼Œè¡¨ç¤ºä¸‹æ ‡ä» 0 å¼€å§‹çš„å†…å­˜æ•°ç»„çš„å¤§å°ã€‚æ‰€æœ‰å†…å­˜å•å…ƒå¼€å§‹éƒ½æ˜¯ç©ºé—²çš„ã€‚</p><p>è¯·ä½ è®¾è®¡ä¸€ä¸ªå…·å¤‡ä»¥ä¸‹åŠŸèƒ½çš„å†…å­˜åˆ†é…å™¨ï¼š</p><p>åˆ†é… ä¸€å—å¤§å°ä¸º size çš„è¿ç»­ç©ºé—²å†…å­˜å•å…ƒå¹¶èµ‹ id <code>mID</code> ã€‚<br>é‡Šæ”¾ ç»™å®š id <code>mID</code> å¯¹åº”çš„æ‰€æœ‰å†…å­˜å•å…ƒã€‚<br>æ³¨æ„ï¼š</p><p>å¤šä¸ªå—å¯ä»¥è¢«åˆ†é…åˆ°åŒä¸€ä¸ª mID ã€‚<br>ä½ å¿…é¡»é‡Šæ”¾<code>mID</code>å¯¹åº”çš„æ‰€æœ‰å†…å­˜å•å…ƒï¼Œå³ä¾¿è¿™äº›å†…å­˜å•å…ƒè¢«åˆ†é…åœ¨ä¸åŒçš„å—ä¸­ã€‚<br>å®ç°<code>Allocator</code>ç±»ï¼š</p><p>Allocator(int n) ä½¿ç”¨ä¸€ä¸ªå¤§å°ä¸º n çš„å†…å­˜æ•°ç»„åˆå§‹åŒ– Allocator å¯¹è±¡ã€‚<br>int allocate(int size, int mID) æ‰¾å‡ºå¤§å°ä¸º size ä¸ªè¿ç»­ç©ºé—²å†…å­˜å•å…ƒä¸”ä½äºæœ€å·¦ä¾§çš„å—ï¼Œåˆ†é…å¹¶èµ‹ id <code>mID</code> ã€‚è¿”å›å—çš„ç¬¬ä¸€ä¸ªä¸‹æ ‡ã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„å—ï¼Œè¿”å› -1 ã€‚<br>int freeMemory(int mID) é‡Šæ”¾ id <code>mID</code> å¯¹åº”çš„æ‰€æœ‰å†…å­˜å•å…ƒã€‚è¿”å›é‡Šæ”¾çš„å†…å­˜å•å…ƒæ•°ç›®ã€‚</p><h1>åˆ†æç†è§£</h1><p>é¢˜ç›®è¦æ±‚å®ç°ä¸€ä¸ªå†…å­˜ç®¡ç†å•å…ƒã€‚</p><p>å‡½æ•°allocateæœ‰ä¸¤ä¸ªå‚æ•°ï¼šsizeå’ŒmIDï¼Œsizeå³éœ€è¦æ‰¾åˆ°sizeä¸ªå†…å­˜å—å¹¶ä¸”è¿™äº›å†…å­˜å—å¾—æ˜¯è¿ç»­çš„ï¼ŒmIDå³è¿™äº›å†…å­˜å—å¾—è¢«èµ‹å€¼ä¸ºmIDã€‚è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ä¸ºè¿™äº›å†…å­˜å—çš„é¦–åœ°å€å³ä¸‹æ ‡ç´¢å¼•ã€‚</p><p>å‡½æ•°freeMemoryæœ‰ä¸€ä¸ªå‚æ•°mIDï¼Œå®ç°çš„åŠŸèƒ½ä¸ºå°†æ‰€æœ‰å†…å­˜å•å…ƒä¸­å€¼ä¸ºmIDçš„å•å…ƒé‡Šæ”¾ï¼Œç„¶åè¿”å›é‡Šæ”¾çš„å†…å­˜å•å…ƒçš„ä¸ªæ•°ã€‚</p><h1>åŸºæœ¬æ€è·¯</h1><p>æˆ‘çš„ç¬¬ä¸€æƒ³æ³•æ˜¯é€šè¿‡é“¾è¡¨æ¥è¿›è¡Œç»„ç»‡è¿™äº›å†…å­˜å—ï¼Œç„¶åé€šè¿‡å“ˆå¸Œè¡¨ã€äºŒç»´æ•°ç»„ç­‰è®°å½•æœªä½¿ç”¨çš„å†…å­˜å—çš„æ•°é‡å’Œå¤§å°ç­‰ã€‚ä½†æ˜¯ä¸€ç›´è‹¦äºå°†å†…å­˜å—æŒ‰ç…§å¤§å°è¿›è¡Œæ’åºè¿™ä»¶äº‹å„¿ï¼Œæ„Ÿè§‰è¿™ä¹ˆåšå°†äº‹æƒ…åè€Œå¤æ‚åŒ–äº†ï¼Œå¹¶ä¸”ä½¿ç”¨é“¾è¡¨è²Œä¼¼ä¹Ÿæœ‰ç‚¹å¤šä½™äº†ã€‚</p><p>æœ€åçœ‹äº†çœ‹<a href="https://leetcode.cn/problems/design-memory-allocator/solutions/2016010/bao-li-mo-ni-by-endlesscheng-bqba/?envType=daily-question&amp;envId=2025-02-25">çµèŒ¶å±±è‰¾åºœçš„é¢˜è§£</a>ã€‚ä»–æä¾›äº†ä¸¤ç§æ–¹æ³•ï¼š</p><ul><li>æ¨¡æ‹Ÿ</li><li>çº¿æ®µæ ‘</li></ul><p>çœ‹äº†çœ‹ä¸¤ç§æ–¹æ³•ï¼Œæ„Ÿè§‰ä½¿ç”¨ä»–çš„æ¨¡æ‹Ÿè§£æ³•å°±è¶³å¤Ÿäº†ã€‚</p><p>åŸºæœ¬æ€è·¯æ˜¯ä½¿ç”¨æ•°ç»„æ¥ç»„ç»‡å†…å­˜å—ï¼Œåœ¨åˆ†é…å†…å­˜å—æ—¶ï¼Œå¹¶ä¸”å…¨éƒ¨åˆå§‹åŒ–ä¸º0ï¼Œè¡¨ç¤ºå†…å­˜å—æœªä½¿ç”¨ï¼ˆé¢˜ç›®é™å®šmIDçš„å–å€¼èŒƒå›´ä¸º[1, 1000]ï¼‰ã€‚ç„¶åä»å¤´å¼€å§‹éå†ï¼Œå¯»æ‰¾åˆ°ä¸€å—å¤§å°ä¸ºsizeçš„è¿ç»­å†…å­˜å—ï¼Œæ‰¾ä¸åˆ°åˆ™è¿”å›-1ã€‚å›æ”¶å†…å­˜å—å°±æ›´ç®€å•äº†ï¼Œéå†æ‰€æœ‰å†…å­˜å—ï¼Œå†…å­˜å—å€¼ä¸ºmIDçš„å‡é‡Šæ”¾å¹¶è®¾ä¸º0ï¼Œå¹¶ä½¿ç”¨countè¿›è¡Œè®¡æ•°å³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Allocator</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> *mem;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Allocator</span>(<span class="type">int</span> n) &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;mem = (<span class="type">int</span> *)<span class="built_in">malloc</span>(<span class="built_in">sizeof</span>(<span class="type">int</span> ) * n);</span><br><span class="line">        <span class="keyword">this</span>-&gt;n = n;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) </span><br><span class="line">            <span class="keyword">this</span>-&gt;mem[i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">allocate</span><span class="params">(<span class="type">int</span> size, <span class="type">int</span> mID)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (mem[i] != <span class="number">0</span>) &#123;</span><br><span class="line">                count = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            ++count;</span><br><span class="line">            <span class="keyword">if</span> (count == size) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> j = i - count + <span class="number">1</span>; j &lt; i + <span class="number">1</span>; ++j) &#123;</span><br><span class="line">                    mem[j] = mID;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> i - count + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">freeMemory</span><span class="params">(<span class="type">int</span> mID)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (mem[i] == mID) &#123;</span><br><span class="line">                mem[i] = <span class="number">0</span>;</span><br><span class="line">                ++count;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your Allocator object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * Allocator* obj = new Allocator(n);</span></span><br><span class="line"><span class="comment"> * int param_1 = obj-&gt;allocate(size,mID);</span></span><br><span class="line"><span class="comment"> * int param_2 = obj-&gt;freeMemory(mID);</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="type">int</span> * mem;</span><br><span class="line">    <span class="type">int</span> n;    </span><br><span class="line">&#125; Allocator;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Allocator* <span class="title function_">allocatorCreate</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    Allocator * obj = (Allocator *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Allocator));</span><br><span class="line">    obj-&gt;mem = (<span class="type">int</span> *)<span class="built_in">calloc</span>(n, <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">    obj-&gt;n = n;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">allocatorAllocate</span><span class="params">(Allocator* obj, <span class="type">int</span> size, <span class="type">int</span> mID)</span> &#123;</span><br><span class="line">    <span class="type">int</span> *mem = obj-&gt;mem;</span><br><span class="line">    <span class="type">int</span> n = obj-&gt;n;</span><br><span class="line">    <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (mem[i] != <span class="number">0</span>) &#123;</span><br><span class="line">            count = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ++count;</span><br><span class="line">        <span class="keyword">if</span> (count == size) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = i - count + <span class="number">1</span>; j &lt; i + <span class="number">1</span>; ++j)</span><br><span class="line">                mem[j] = mID;</span><br><span class="line">            <span class="keyword">return</span> i - count + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">allocatorFreeMemory</span><span class="params">(Allocator* obj, <span class="type">int</span> mID)</span> &#123;</span><br><span class="line">    <span class="type">int</span> * mem = obj-&gt;mem;</span><br><span class="line">    <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> n = obj-&gt;n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (mem[i] == mID) &#123;</span><br><span class="line">            mem[i] = <span class="number">0</span>;</span><br><span class="line">            ++count;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">allocatorFree</span><span class="params">(Allocator* obj)</span> &#123;</span><br><span class="line">    <span class="built_in">free</span>(obj-&gt;mem);</span><br><span class="line">    <span class="built_in">free</span>(obj);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your Allocator struct will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * Allocator* obj = allocatorCreate(n);</span></span><br><span class="line"><span class="comment"> * int param_1 = allocatorAllocate(obj, size, mID);</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> * int param_2 = allocatorFreeMemory(obj, mID);</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> * allocatorFree(obj);</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h1>å¤æ‚åº¦åˆ†æ</h1><p>åˆ†é…å’Œé‡Šæ”¾å†…å­˜å‡½æ•°çš„æ—¶é—´å¤æ‚åº¦å‡ä¸ºO(n)ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Leetcode æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode æ¯æ—¥ä¸€é¢˜ </tag>
            
            <tag> æ•°ç»„ </tag>
            
            <tag> è®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode æ¯æ—¥ä¸€é¢˜äºŒåäº”ï¼š1656. è®¾è®¡æœ‰åºæµ</title>
      <link href="/2025/02/24/leetcode25/"/>
      <url>/2025/02/24/leetcode25/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥çš„ Leetcode æ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/design-an-ordered-stream/description/">1656. è®¾è®¡æœ‰åºæµ</a>ã€‚</p><p>æœ‰ n ä¸ª (id, value) å¯¹ï¼Œå…¶ä¸­ id æ˜¯ 1 åˆ° n ä¹‹é—´çš„ä¸€ä¸ªæ•´æ•°ï¼Œvalue æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ä¸å­˜åœ¨ id ç›¸åŒçš„ä¸¤ä¸ª (id, value) å¯¹ã€‚</p><p>è®¾è®¡ä¸€ä¸ªæµï¼Œä»¥ ä»»æ„ é¡ºåºè·å– n ä¸ª (id, value) å¯¹ï¼Œå¹¶åœ¨å¤šæ¬¡è°ƒç”¨æ—¶ æŒ‰ id é€’å¢çš„é¡ºåº è¿”å›ä¸€äº›å€¼ã€‚</p><p>å®ç° OrderedStream ç±»ï¼š</p><ul><li>OrderedStream(int n) æ„é€ ä¸€ä¸ªèƒ½æ¥æ”¶ n ä¸ªå€¼çš„æµï¼Œå¹¶å°†å½“å‰æŒ‡é’ˆ ptr è®¾ä¸º 1 ã€‚</li><li>String[] insert(int id, String value) å‘æµä¸­å­˜å‚¨æ–°çš„ (id, value) å¯¹ã€‚å­˜å‚¨åï¼š<ul><li>å¦‚æœæµå­˜å‚¨æœ‰ id = ptr çš„ (id, value) å¯¹ï¼Œåˆ™æ‰¾å‡ºä» id = ptr å¼€å§‹çš„ æœ€é•¿ id è¿ç»­é€’å¢åºåˆ— ï¼Œå¹¶ æŒ‰é¡ºåº è¿”å›ä¸è¿™äº› id å…³è”çš„å€¼çš„åˆ—è¡¨ã€‚ç„¶åï¼Œå°† ptr æ›´æ–°ä¸ºæœ€åé‚£ä¸ª  id + 1 ã€‚</li><li>å¦åˆ™ï¼Œè¿”å›ä¸€ä¸ªç©ºåˆ—è¡¨ã€‚</li></ul></li></ul><h1>å®˜æ–¹é¢˜è§£</h1><p>è¿™é“é¢˜é‡‡ç”¨äº†å®˜æ–¹é¢˜è§£ï¼Œè§£é‡Šçš„è¿˜æ˜¯æ¯”è¾ƒæ¸…æ¥šçš„ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="type">char</span> **stream;</span><br><span class="line">    <span class="type">int</span> streamSize;</span><br><span class="line">    <span class="type">int</span> ptr;</span><br><span class="line">&#125; OrderedStream;</span><br><span class="line"></span><br><span class="line">OrderedStream* <span class="title function_">orderedStreamCreate</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    OrderedStream *obj = (OrderedStream *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(OrderedStream));</span><br><span class="line">    obj-&gt;stream = (<span class="type">char</span> **)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">char</span> *) * (n + <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        obj-&gt;stream[i] = <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    obj-&gt;streamSize = n + <span class="number">1</span>;</span><br><span class="line">    obj-&gt;ptr = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> ** <span class="title function_">orderedStreamInsert</span><span class="params">(OrderedStream* obj, <span class="type">int</span> idKey, <span class="type">char</span> * value, <span class="type">int</span>* retSize)</span> &#123;</span><br><span class="line">    obj-&gt;stream[idKey] = value;</span><br><span class="line">    <span class="type">char</span> **res = (<span class="type">char</span> **)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">char</span> *) * obj-&gt;streamSize);</span><br><span class="line">    <span class="type">int</span> pos = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (obj-&gt;ptr &lt; obj-&gt;streamSize &amp;&amp; obj-&gt;stream[obj-&gt;ptr]) &#123;</span><br><span class="line">        res[pos++] = obj-&gt;stream[obj-&gt;ptr];</span><br><span class="line">        obj-&gt;ptr++;</span><br><span class="line">    &#125;</span><br><span class="line">    *retSize = pos;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">orderedStreamFree</span><span class="params">(OrderedStream* obj)</span> &#123;</span><br><span class="line">    <span class="built_in">free</span>(obj-&gt;stream);</span><br><span class="line">    <span class="built_in">free</span>(obj);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ä½œè€…ï¼šåŠ›æ‰£å®˜æ–¹é¢˜è§£</span><br><span class="line">é“¾æ¥ï¼šhttps:<span class="comment">//leetcode.cn/problems/design-an-ordered-stream/solutions/1749068/she-ji-you-xu-liu-by-leetcode-solution-3imb/</span></span><br><span class="line">æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰</span><br><span class="line">è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</span><br></pre></td></tr></table></figure><h1>å¯¹å®˜æ–¹é¢˜è§£è¿›è¡Œæ”¹å–„</h1><p>æ„Ÿè§‰å®˜æ–¹å°†Cè¯­è¨€å®ç°é‡Œçš„insertå‡½æ•°ä¸­çš„reså†…åµŒåˆ°ç»“æ„ä½“é‡Œæ¯”è¾ƒå¥½ï¼Œå¤§å°ä¸æµçš„å¤§å°ç›¸åŒï¼Œè¿™æ ·å°±ä¸å¿…åå¤åˆ†é…å†…å­˜ï¼Œä»¥åŠåç»­å¿˜è®°é‡Šæ”¾äº†ã€‚ä¸€ä¸‹æ˜¯æˆ‘è¿›è¡Œäº†æ”¹è¿›çš„ç‰ˆæœ¬ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="type">char</span> **str;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="type">int</span> ptr;</span><br><span class="line">    <span class="type">char</span> **buffer; </span><br><span class="line">&#125; OrderedStream;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">OrderedStream* <span class="title function_">orderedStreamCreate</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    OrderedStream* obj = (OrderedStream*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(OrderedStream));</span><br><span class="line">    obj-&gt;str = (<span class="type">char</span>**)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">char</span>*) * (n+<span class="number">1</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n + <span class="number">1</span>; ++i)</span><br><span class="line">        obj-&gt;str[i] = <span class="literal">NULL</span>;</span><br><span class="line">    obj-&gt;n = n;</span><br><span class="line">    obj-&gt;ptr = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ†é…ç¼“å†²åŒºå¤§å°</span></span><br><span class="line">    obj-&gt;buffer = (<span class="type">char</span> **)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">char</span> *) * n);</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span>** <span class="title function_">orderedStreamInsert</span><span class="params">(OrderedStream* obj, <span class="type">int</span> idKey, <span class="type">char</span>* value, <span class="type">int</span>* retSize)</span> &#123;</span><br><span class="line">    obj-&gt;str[idKey] = value;</span><br><span class="line">    <span class="type">int</span> pos = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (obj-&gt;ptr &lt;= obj-&gt;n &amp;&amp; obj-&gt;str[obj-&gt;ptr])</span><br><span class="line">        obj-&gt;buffer[pos++] = obj-&gt;str[obj-&gt;ptr++];</span><br><span class="line">    *retSize = pos;</span><br><span class="line">    <span class="keyword">return</span> obj-&gt;buffer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">orderedStreamFree</span><span class="params">(OrderedStream* obj)</span> &#123;</span><br><span class="line">    <span class="built_in">free</span>(obj-&gt;str);</span><br><span class="line">    <span class="built_in">free</span>(obj-&gt;buffer);</span><br><span class="line">    <span class="built_in">free</span>(obj);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your OrderedStream struct will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * OrderedStream* obj = orderedStreamCreate(n);</span></span><br><span class="line"><span class="comment"> * char** param_1 = orderedStreamInsert(obj, idKey, value, retSize);</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> * orderedStreamFree(obj);</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Leetcode æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode æ¯æ—¥ä¸€é¢˜ </tag>
            
            <tag> è®¾è®¡ </tag>
            
            <tag> æ•°æ®æµ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode æ¯æ—¥ä¸€é¢˜äºŒåå››ï¼š1206. è®¾è®¡è·³è¡¨</title>
      <link href="/2025/02/23/leetcode24/"/>
      <url>/2025/02/23/leetcode24/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥ Leetcode æ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/design-skiplist/description/">1206. è®¾è®¡è·³è¡¨</a>ã€‚</p><p>ä¸ä½¿ç”¨ä»»ä½•åº“å‡½æ•°ï¼Œè®¾è®¡ä¸€ä¸ª è·³è¡¨ ã€‚</p><p>è·³è¡¨æ˜¯åœ¨<code>O(log n)</code>æ—¶é—´å†…å®Œæˆå¢åŠ ã€åˆ é™¤ã€æœç´¢æ“ä½œçš„æ•°æ®ç»“æ„ã€‚è·³è¡¨ç›¸æ¯”äºæ ‘å †ä¸çº¢é»‘æ ‘ï¼Œå…¶åŠŸèƒ½ä¸æ€§èƒ½ç›¸å½“ï¼Œå¹¶ä¸”è·³è¡¨çš„ä»£ç é•¿åº¦ç›¸è¾ƒä¸‹æ›´çŸ­ï¼Œå…¶è®¾è®¡æ€æƒ³ä¸é“¾è¡¨ç›¸ä¼¼ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸€ä¸ªè·³è¡¨åŒ…å« [30, 40, 50, 60, 70, 90] ï¼Œç„¶åå¢åŠ  80ã€45 åˆ°è·³è¡¨ä¸­ï¼Œä»¥ä¸‹å›¾çš„æ–¹å¼æ“ä½œï¼š<br><img src="/images/1702370216-mKQcTt-1506_skiplist.gif" alt=""><br>æ³¨ï¼šå›¾ç‰‡æ¥æºäºLeetcode <a href="https://leetcode.cn/problems/design-skiplist/description/">https://leetcode.cn/problems/design-skiplist/description/</a></p><p>è·³è¡¨ä¸­æœ‰å¾ˆå¤šå±‚ï¼Œæ¯ä¸€å±‚æ˜¯ä¸€ä¸ªçŸ­çš„é“¾è¡¨ã€‚åœ¨ç¬¬ä¸€å±‚çš„ä½œç”¨ä¸‹ï¼Œå¢åŠ ã€åˆ é™¤å’Œæœç´¢æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸è¶…è¿‡ O(n)ã€‚è·³è¡¨çš„æ¯ä¸€ä¸ªæ“ä½œçš„å¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯ O(log(n))ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯ O(n)ã€‚</p><p>äº†è§£æ›´å¤š : <a href="https://oi-wiki.org/ds/skiplist/">https://oi-wiki.org/ds/skiplist/</a></p><p>åœ¨æœ¬é¢˜ä¸­ï¼Œä½ çš„è®¾è®¡åº”è¯¥è¦åŒ…å«è¿™äº›å‡½æ•°ï¼š</p><ul><li>bool search(int target) : è¿”å›targetæ˜¯å¦å­˜åœ¨äºè·³è¡¨ä¸­ã€‚</li><li>void add(int num): æ’å…¥ä¸€ä¸ªå…ƒç´ åˆ°è·³è¡¨ã€‚</li><li>bool erase(int num): åœ¨è·³è¡¨ä¸­åˆ é™¤ä¸€ä¸ªå€¼ï¼Œå¦‚æœ num ä¸å­˜åœ¨ï¼Œç›´æ¥è¿”å›false. å¦‚æœå­˜åœ¨å¤šä¸ª num ï¼Œåˆ é™¤å…¶ä¸­ä»»æ„ä¸€ä¸ªå³å¯ã€‚</li></ul><p>æ³¨æ„ï¼Œè·³è¡¨ä¸­å¯èƒ½å­˜åœ¨å¤šä¸ªç›¸åŒçš„å€¼ï¼Œä½ çš„ä»£ç éœ€è¦å¤„ç†è¿™ç§æƒ…å†µã€‚</p><h1>åˆ†æç†è§£</h1><p>è¿™é“é¢˜ç›®è®©æˆ‘ä»¬è®¾è®¡ä¸€ä¸ªæ•°æ®ç»“æ„â€”â€”è·³è¡¨ã€‚åœ¨è¿™ä¹‹å‰ç¡®å®ä¸æ€ä¹ˆäº†è§£è·³è¡¨ï¼Œä»”ç»†çœ‹äº†ä¸€ä¼šå„¿å‘ç°è·³è¡¨å’Œé“¾è¡¨æœ‰ç‚¹åƒï¼Œä½†æ˜¯è·³è¡¨åº”è¯¥è¯´æ˜¯ä¸€ä¸ªå¤šå±‚é“¾è¡¨ã€‚å…¶ä¸­ç¬¬0å±‚æ˜¯åŒ…å«æ‰€æœ‰å…ƒç´ çš„æœ‰åºé“¾è¡¨ï¼›1å±‚åŠä»¥ä¸Šï¼Œæ¯ä¸€å±‚éƒ½æ˜¯ä¸‹ä¸€å±‚çš„å­é›†ï¼Œä½œä¸ºç´¢å¼•å±‚ï¼Œå¸®åŠ©å¿«é€Ÿè·³è¿‡å¤šä¸ªå…ƒç´ ã€‚æ¯ä¸€å±‚çš„å…ƒç´ é€šè¿‡æŒ‡é’ˆè¿æ¥ï¼Œé«˜å±‚å…ƒç´ ä¼šæŒ‡å‘ä½å±‚çš„ç›¸åŒå…ƒç´ ï¼Œå½¢æˆä¸€ä¸ªâ€œè·³è·ƒâ€çš„ç»“æ„ã€‚</p><p>è·³è¡¨æœ‰ä¸‰ä¸ªæ ¸å¿ƒæ“ä½œï¼š</p><ol><li>æŸ¥æ‰¾</li><li>æ’å…¥</li><li>åˆ é™¤</li></ol><p>è·³è¡¨çš„åº”ç”¨è¿˜æŒºå¹¿æ³›çš„ï¼ŒRedisçš„æœ‰åºé›†åˆï¼ˆSorted Setï¼‰åº•å±‚å°±ä½¿ç”¨äº†è·³è¡¨ã€‚</p><p>è·³è¡¨å¯ä»¥å®ç°æ“ä½œå¤æ‚åº¦ä¸ºO(log n)çš„æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤ï¼Œè¿˜æ˜¯æŒºé«˜æ•ˆçš„ã€‚è°ˆä¸€è°ˆä¸ªäººå¯¹è¿™çš„ç†è§£å§ã€‚ä¸ç®¡è·³è¡¨è¿˜æ˜¯é“¾è¡¨ï¼Œéƒ½ç¦»ä¸å¼€æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤ä¸‰ä¸ªæ ¸å¿ƒæ“ä½œï¼Œè€Œç§ä»¥ä¸ºæ’å…¥å’Œåˆ é™¤éƒ½æ˜¯åŸºäºæŸ¥æ‰¾æ“ä½œçš„ï¼Œåªè¦æŸ¥æ‰¾å¾—å¿«ï¼Œæ’å…¥å’Œåˆ é™¤å¾—ä¹Ÿå°±å¿«ã€‚</p><p>é“¾è¡¨æŸ¥æ‰¾çš„æ—¶å€™ï¼Œæœ€åçš„æƒ…å†µä¸‹æ˜¯O(n)ï¼Œå°±æ˜¯éå†äº†æ•´ä¸ªè¡¨ã€‚è€Œè·³è¡¨ä½œä¸ºå¤šå±‚é“¾è¡¨ï¼Œå¯ä»¥è·³è¿‡éå†æŸäº›å…ƒç´ ï¼Œä»è€ŒåŠ å¿«æŸ¥æ‰¾é€Ÿåº¦ï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ã€‚</p><p>å‡è®¾æˆ‘ä»¬è¦åœ¨è·³è¡¨ä¸­æŸ¥æ‰¾å€¼ 7ï¼Œè·³è¡¨çš„ç»“æ„å¦‚ä¸‹ï¼š</p><ul><li>ç¬¬2å±‚ï¼ˆæœ€é«˜å±‚ï¼‰ï¼š1 -&gt; 9</li><li>ç¬¬1å±‚ï¼š1 -&gt; 5 -&gt; 9</li><li>ç¬¬0å±‚ï¼ˆåº•å±‚ï¼‰ï¼š1 -&gt; 3 -&gt; 5 -&gt; 7 -&gt; 9</li></ul><p>æŸ¥æ‰¾è¿‡ç¨‹ï¼š</p><ol><li>ä»æœ€é«˜å±‚ï¼ˆç¬¬2å±‚ï¼‰å¼€å§‹ï¼š<ul><li>å½“å‰èŠ‚ç‚¹æ˜¯ 1ï¼Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯ 9ã€‚</li><li>9 å¤§äº 7ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥è·³åˆ° 9ï¼Œè€Œæ˜¯å‘ä¸‹ç§»åŠ¨åˆ°ç¬¬1å±‚ã€‚</li></ul></li><li>åœ¨ç¬¬1å±‚ï¼š<ul><li>å½“å‰èŠ‚ç‚¹æ˜¯ 1ï¼Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯ 5ã€‚</li><li>5 å°äº 7ï¼Œæ‰€ä»¥è·³åˆ° 5ã€‚</li><li>ä» 5 å¼€å§‹ï¼Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯ 9ã€‚</li><li>9 å¤§äº 7ï¼Œæ‰€ä»¥å‘ä¸‹ç§»åŠ¨åˆ°ç¬¬0å±‚ã€‚</li></ul></li><li>åœ¨ç¬¬0å±‚ï¼š<ul><li>å½“å‰èŠ‚ç‚¹æ˜¯ 5ï¼Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯ 7ã€‚</li><li>7 ç­‰äºç›®æ ‡å€¼ï¼ŒæŸ¥æ‰¾æˆåŠŸã€‚</li></ul></li></ol><p>åŸºäºä¸Šè¿°è¿‡ç¨‹å¯ä»¥å¤§æ¦‚äº†è§£è·³è¡¨çš„æŸ¥è¯¢è¿‡ç¨‹ï¼Œå¯ä»¥çœ‹åˆ°è·³è¡¨åœ¨æŸ¥è¯¢7çš„æ—¶å€™è·³è¿‡äº†å¯¹3çš„éå†ã€‚è¿™ä¸ªä¾‹å­æˆ–è®¸å¹¶ä¸èƒ½å¾ˆå¥½åœ°ä½“ç°è·³è¡¨çš„é«˜æ•ˆï¼Œä½†æ˜¯åœ¨è§„æ¨¡è¾ƒå¤§æ—¶ï¼Œä¼šè·³è¿‡å¯¹å¾ˆå¤šå…ƒç´ çš„éå†ï¼Œäº§ç”Ÿè¾ƒå¥½çš„æ•ˆæœã€‚</p><p>æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ç‚¹ã€‚è·³è¡¨ä¾èµ–äºéšæœºç®—æ³•ã€‚åœ¨æœ€åçš„æƒ…å†µä¸‹ä¼šé€€åŒ–æˆå•å±‚æœ‰åºé“¾è¡¨ã€‚å› æ­¤éšæœºç®—æ³•çš„é€‰æ‹©å¾ˆé‡è¦ã€‚</p><h1>åŸºæœ¬æ€è·¯</h1><p>è¿™é“é¢˜æˆ‘æ˜¯ä¸€ç‚¹æ€è·¯éƒ½æ²¡æœ‰ï¼Œç ”ç©¶äº†è®¸ä¹…å®˜æ–¹é¢˜è§£ä¸­çš„Cè¯­è¨€å®ç°ã€‚ä¸€ç›´æ„Ÿè§‰Cè¯­è¨€æ˜¯ä¸é”™çš„è¯­è¨€ï¼Œè™½ç„¶æœ‰è¯¸å¤šçš„ä¸ä¾¿ï¼Œæ²¡æœ‰é¢å‘å¯¹è±¡ï¼Œæ²¡æœ‰ç±»ä¼¼äºC++çš„æ¨¡æ¿ã€‚ä½†æ˜¯ä¹Ÿä¸å¯å¦è®¤Cè¯­è¨€çš„ç²¾å¦™ã€‚æ‰€ä»¥ï¼ŒåŸºæœ¬æ€è·¯ï¼šæŠ„ï¼doge</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> MAX_LEVEL = <span class="number">32</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">double</span> P_FACTOR = <span class="number">0.25</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">SkiplistNode</span> &#123;</span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    vector&lt;SkiplistNode *&gt; forward;</span><br><span class="line">    <span class="built_in">SkiplistNode</span>(<span class="type">int</span> _val, <span class="type">int</span> _maxLevel = MAX_LEVEL) : <span class="built_in">val</span>(_val), forward(_maxLevel, <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Skiplist</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    SkiplistNode * head;</span><br><span class="line">    <span class="type">int</span> level;</span><br><span class="line">    mt19937 gen&#123;random_device&#123;&#125;()&#125;;</span><br><span class="line">    uniform_real_distribution&lt;<span class="type">double</span>&gt; dis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Skiplist</span>(): <span class="built_in">head</span>(<span class="keyword">new</span> <span class="built_in">SkiplistNode</span>(<span class="number">-1</span>)), <span class="built_in">level</span>(<span class="number">0</span>), <span class="built_in">dis</span>(<span class="number">0</span>, <span class="number">1</span>) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">search</span><span class="params">(<span class="type">int</span> target)</span> </span>&#123;</span><br><span class="line">        SkiplistNode *curr = <span class="keyword">this</span>-&gt;head;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="comment">/* æ‰¾åˆ°ç¬¬ i å±‚å°äºä¸”æœ€æ¥è¿‘ target çš„å…ƒç´ */</span></span><br><span class="line">            <span class="keyword">while</span> (curr-&gt;forward[i] &amp;&amp; curr-&gt;forward[i]-&gt;val &lt; target) &#123;</span><br><span class="line">                curr = curr-&gt;forward[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        curr = curr-&gt;forward[<span class="number">0</span>];</span><br><span class="line">        <span class="comment">/* æ£€æµ‹å½“å‰å…ƒç´ çš„å€¼æ˜¯å¦ç­‰äº target */</span></span><br><span class="line">        <span class="keyword">if</span> (curr &amp;&amp; curr-&gt;val == target) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> num)</span> </span>&#123;</span><br><span class="line">        <span class="function">vector&lt;SkiplistNode *&gt; <span class="title">update</span><span class="params">(MAX_LEVEL, head)</span></span>;</span><br><span class="line">        SkiplistNode *curr = <span class="keyword">this</span>-&gt;head;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="comment">/* æ‰¾åˆ°ç¬¬ i å±‚å°äºä¸”æœ€æ¥è¿‘ num çš„å…ƒç´ */</span></span><br><span class="line">            <span class="keyword">while</span> (curr-&gt;forward[i] &amp;&amp; curr-&gt;forward[i]-&gt;val &lt; num) &#123;</span><br><span class="line">                curr = curr-&gt;forward[i];</span><br><span class="line">            &#125;</span><br><span class="line">            update[i] = curr;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> lv = <span class="built_in">randomLevel</span>();</span><br><span class="line">        level = <span class="built_in">max</span>(level, lv);</span><br><span class="line">        SkiplistNode *newNode = <span class="keyword">new</span> <span class="built_in">SkiplistNode</span>(num, lv);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; lv; i++) &#123;</span><br><span class="line">            <span class="comment">/* å¯¹ç¬¬ i å±‚çš„çŠ¶æ€è¿›è¡Œæ›´æ–°ï¼Œå°†å½“å‰å…ƒç´ çš„ forward æŒ‡å‘æ–°çš„èŠ‚ç‚¹ */</span></span><br><span class="line">            newNode-&gt;forward[i] = update[i]-&gt;forward[i];</span><br><span class="line">            update[i]-&gt;forward[i] = newNode;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">erase</span><span class="params">(<span class="type">int</span> num)</span> </span>&#123;</span><br><span class="line">        <span class="function">vector&lt;SkiplistNode *&gt; <span class="title">update</span><span class="params">(MAX_LEVEL, <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">        SkiplistNode *curr = <span class="keyword">this</span>-&gt;head;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="comment">/* æ‰¾åˆ°ç¬¬ i å±‚å°äºä¸”æœ€æ¥è¿‘ num çš„å…ƒç´ */</span></span><br><span class="line">            <span class="keyword">while</span> (curr-&gt;forward[i] &amp;&amp; curr-&gt;forward[i]-&gt;val &lt; num) &#123;</span><br><span class="line">                curr = curr-&gt;forward[i];</span><br><span class="line">            &#125;</span><br><span class="line">            update[i] = curr;</span><br><span class="line">        &#125;</span><br><span class="line">        curr = curr-&gt;forward[<span class="number">0</span>];</span><br><span class="line">        <span class="comment">/* å¦‚æœå€¼ä¸å­˜åœ¨åˆ™è¿”å› false */</span></span><br><span class="line">        <span class="keyword">if</span> (!curr || curr-&gt;val != num) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; level; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (update[i]-&gt;forward[i] != curr) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">/* å¯¹ç¬¬ i å±‚çš„çŠ¶æ€è¿›è¡Œæ›´æ–°ï¼Œå°† forward æŒ‡å‘è¢«åˆ é™¤èŠ‚ç‚¹çš„ä¸‹ä¸€è·³ */</span></span><br><span class="line">            update[i]-&gt;forward[i] = curr-&gt;forward[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">delete</span> curr;</span><br><span class="line">        <span class="comment">/* æ›´æ–°å½“å‰çš„ level */</span></span><br><span class="line">        <span class="keyword">while</span> (level &gt; <span class="number">1</span> &amp;&amp; head-&gt;forward[level - <span class="number">1</span>] == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">            level--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">randomLevel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> lv = <span class="number">1</span>;</span><br><span class="line">        <span class="comment">/* éšæœºç”Ÿæˆ lv */</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="built_in">dis</span>(gen) &lt; P_FACTOR &amp;&amp; lv &lt; MAX_LEVEL) &#123;</span><br><span class="line">            lv++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> lv;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ä½œè€…ï¼šåŠ›æ‰£å®˜æ–¹é¢˜è§£</span><br><span class="line">é“¾æ¥ï¼šhttps:<span class="comment">//leetcode.cn/problems/design-skiplist/solutions/1696545/she-ji-tiao-biao-by-leetcode-solution-e8yh/</span></span><br><span class="line">æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰</span><br><span class="line">è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> MAX_LEVEL = <span class="number">32</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> P_FACTOR = RAND_MAX &gt;&gt; <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">SkiplistNode</span> &#123;</span></span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    <span class="type">int</span> maxLevel;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">SkiplistNode</span> **<span class="title">forward</span>;</span></span><br><span class="line">&#125; SkiplistNode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    SkiplistNode *head;</span><br><span class="line">    <span class="type">int</span> level;</span><br><span class="line">&#125; Skiplist;</span><br><span class="line"></span><br><span class="line">SkiplistNode *<span class="title function_">skiplistNodeCreat</span><span class="params">(<span class="type">int</span> val, <span class="type">int</span> maxLevel)</span> &#123;</span><br><span class="line">    SkiplistNode *obj = (SkiplistNode *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(SkiplistNode));</span><br><span class="line">    obj-&gt;val = val;</span><br><span class="line">    obj-&gt;maxLevel = maxLevel;</span><br><span class="line">    obj-&gt;forward = (SkiplistNode **)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(SkiplistNode *) * maxLevel);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; maxLevel; i++) &#123;</span><br><span class="line">        obj-&gt;forward[i] = <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">skiplistNodeFree</span><span class="params">(SkiplistNode* obj)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj-&gt;forward) &#123;</span><br><span class="line">        <span class="built_in">free</span>(obj-&gt;forward);</span><br><span class="line">        obj-&gt;forward = <span class="literal">NULL</span>;</span><br><span class="line">        obj-&gt;maxLevel = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">free</span>(obj);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Skiplist* <span class="title function_">skiplistCreate</span><span class="params">()</span> &#123;</span><br><span class="line">    Skiplist *obj = (Skiplist *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Skiplist));</span><br><span class="line">    obj-&gt;head = skiplistNodeCreat(<span class="number">-1</span>, MAX_LEVEL);</span><br><span class="line">    obj-&gt;level = <span class="number">0</span>;</span><br><span class="line">    srand(time(<span class="literal">NULL</span>));</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">skiplistFree</span><span class="params">(Skiplist* obj)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (SkiplistNode * curr = obj-&gt;head; curr; ) &#123;</span><br><span class="line">        SkiplistNode *prev = curr;</span><br><span class="line">        curr = curr-&gt;forward[<span class="number">0</span>];</span><br><span class="line">        skiplistNodeFree(prev);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">free</span>(obj);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="keyword">inline</span> <span class="type">int</span> <span class="title function_">randomLevel</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> lv = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">/* éšæœºç”Ÿæˆ lv */</span></span><br><span class="line">    <span class="keyword">while</span> (rand() &lt; P_FACTOR &amp;&amp; lv &lt; MAX_LEVEL) &#123;</span><br><span class="line">        lv++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> lv;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="title function_">skiplistSearch</span><span class="params">(Skiplist* obj, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    SkiplistNode *curr = obj-&gt;head;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = obj-&gt;level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="comment">/* æ‰¾åˆ°ç¬¬ i å±‚å°äºä¸”æœ€æ¥è¿‘ target çš„å…ƒç´ */</span></span><br><span class="line">        <span class="keyword">while</span> (curr-&gt;forward[i] &amp;&amp; curr-&gt;forward[i]-&gt;val &lt; target) &#123;</span><br><span class="line">            curr = curr-&gt;forward[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    curr = curr-&gt;forward[<span class="number">0</span>];</span><br><span class="line">    <span class="comment">/* æ£€æµ‹å½“å‰å…ƒç´ çš„å€¼æ˜¯å¦ç­‰äº target */</span></span><br><span class="line">    <span class="keyword">if</span> (curr &amp;&amp; curr-&gt;val == target) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">skiplistAdd</span><span class="params">(Skiplist* obj, <span class="type">int</span> num)</span> &#123;</span><br><span class="line">    SkiplistNode *update[MAX_LEVEL];</span><br><span class="line">    SkiplistNode *curr = obj-&gt;head;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = obj-&gt;level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="comment">/* æ‰¾åˆ°ç¬¬ i å±‚å°äºä¸”æœ€æ¥è¿‘ num çš„å…ƒç´ */</span></span><br><span class="line">        <span class="keyword">while</span> (curr-&gt;forward[i] &amp;&amp; curr-&gt;forward[i]-&gt;val &lt; num) &#123;</span><br><span class="line">            curr = curr-&gt;forward[i];</span><br><span class="line">        &#125;</span><br><span class="line">        update[i] = curr;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> lv = randomLevel();</span><br><span class="line">    <span class="keyword">if</span> (lv &gt; obj-&gt;level) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = obj-&gt;level; i &lt; lv; i++) &#123;</span><br><span class="line">            update[i] = obj-&gt;head;</span><br><span class="line">        &#125;</span><br><span class="line">        obj-&gt;level = lv;</span><br><span class="line">    &#125;</span><br><span class="line">    SkiplistNode *newNode = skiplistNodeCreat(num, lv);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; lv; i++) &#123;</span><br><span class="line">        <span class="comment">/* å¯¹ç¬¬ i å±‚çš„çŠ¶æ€è¿›è¡Œæ›´æ–°ï¼Œå°†å½“å‰å…ƒç´ çš„ forward æŒ‡å‘æ–°çš„èŠ‚ç‚¹ */</span></span><br><span class="line">        newNode-&gt;forward[i] = update[i]-&gt;forward[i];</span><br><span class="line">        update[i]-&gt;forward[i] = newNode;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="title function_">skiplistErase</span><span class="params">(Skiplist* obj, <span class="type">int</span> num)</span> &#123;</span><br><span class="line">    SkiplistNode *update[MAX_LEVEL];</span><br><span class="line">    SkiplistNode *curr = obj-&gt;head;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = obj-&gt;level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="comment">/* æ‰¾åˆ°ç¬¬ i å±‚å°äºä¸”æœ€æ¥è¿‘ num çš„å…ƒç´ */</span></span><br><span class="line">        <span class="keyword">while</span> (curr-&gt;forward[i] &amp;&amp; curr-&gt;forward[i]-&gt;val &lt; num) &#123;</span><br><span class="line">            curr = curr-&gt;forward[i];</span><br><span class="line">        &#125;</span><br><span class="line">        update[i] = curr;</span><br><span class="line">    &#125;</span><br><span class="line">    curr = curr-&gt;forward[<span class="number">0</span>];</span><br><span class="line">    <span class="comment">/* å¦‚æœå€¼ä¸å­˜åœ¨åˆ™è¿”å› false */</span></span><br><span class="line">    <span class="keyword">if</span> (!curr || curr-&gt;val != num) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; obj-&gt;level; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (update[i]-&gt;forward[i] != curr) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="comment">/* å¯¹ç¬¬ i å±‚çš„çŠ¶æ€è¿›è¡Œæ›´æ–°ï¼Œå°† forward æŒ‡å‘è¢«åˆ é™¤èŠ‚ç‚¹çš„ä¸‹ä¸€è·³ */</span></span><br><span class="line">        update[i]-&gt;forward[i] = curr-&gt;forward[i];</span><br><span class="line">    &#125;</span><br><span class="line">    skiplistNodeFree(curr);</span><br><span class="line">    <span class="comment">/* æ›´æ–°å½“å‰çš„ level */</span></span><br><span class="line">    <span class="keyword">while</span> (obj-&gt;level &gt; <span class="number">1</span> &amp;&amp; obj-&gt;head-&gt;forward[obj-&gt;level - <span class="number">1</span>] == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        obj-&gt;level--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ä½œè€…ï¼šåŠ›æ‰£å®˜æ–¹é¢˜è§£</span><br><span class="line">é“¾æ¥ï¼šhttps:<span class="comment">//leetcode.cn/problems/design-skiplist/solutions/1696545/she-ji-tiao-biao-by-leetcode-solution-e8yh/</span></span><br><span class="line">æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰</span><br><span class="line">è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</span><br></pre></td></tr></table></figure><p>æˆ‘ä¸»è¦å›´ç»•ç€Cè¯­è¨€çš„å®ç°è¿›è¡Œä¸€ä¸‹ç†è§£ï¼Œä¾¿äºæ—¥åå¤ä¹ ã€‚ç†è§£äº†Cè¯­è¨€ç‰ˆæœ¬ï¼ŒC++ç‰ˆæœ¬ä¹Ÿå°±ä¸éš¾äº†ã€‚</p><h2 id="ä»£ç ç†è§£">ä»£ç ç†è§£</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> MAX_LEVEL = <span class="number">32</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> P_FACTOR = RAND_MAX &gt;&gt; <span class="number">2</span>;</span><br></pre></td></tr></table></figure><p>é¦–å…ˆå®šä¹‰äº†ä¸¤ä¸ªå¸¸é‡MAX_LEVELå’ŒP_FACTORã€‚MAX_LEVELæ˜¯è·³è¡¨çš„æœ€å¤§å±‚æ•°ï¼Œè€ŒP_FACTORæ˜¯ä¸€ä¸ªæ¦‚ç‡ï¼Œè¿™é‡Œç§°å®ƒä¸ºæ¦‚ç‡æˆ–è®¸æœ‰ç‚¹ç‰µå¼ºï¼Œç»“åˆç€å‡½æ•°randomLevelåº”è¯¥å°±ä¸éš¾ç†è§£äº†ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">static</span> <span class="keyword">inline</span> <span class="type">int</span> <span class="title function_">randomLevel</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> lv = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">/* éšæœºç”Ÿæˆ lv */</span></span><br><span class="line">    <span class="keyword">while</span> (rand() &lt; P_FACTOR &amp;&amp; lv &lt; MAX_LEVEL) </span><br><span class="line">        lv++;</span><br><span class="line">    <span class="keyword">return</span> lv;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡½æ•°randomLevelæ˜¯ä¸€ä¸ªé™æ€çš„å†…è”å‡½æ•°ï¼Œç”±å…³é”®å­—<code>static</code>å’Œ<code>inline</code>æ ‡è¯†ã€‚</p><h3 id="staticå…³é”®å­—"><code>static</code>å…³é”®å­—</h3><p><code>static</code>å°†å‡½æ•°çš„ä½œç”¨åŸŸé™åˆ¶åœ¨å½“å‰æ–‡ä»¶å†…ï¼Œå…¶ä»–æ–‡ä»¶æ— æ³•è®¿é—®è¿™ä¸ªå‡½æ•°ã€‚è¿™é‡Œä½¿ç”¨staticå…³é”®å­—æ ‡è¯†è¿™ä¸ªå‡½æ•°æœ‰ä»¥ä¸‹å¥½å¤„ï¼š</p><ol><li>é¿å…å‘½åå†²çª<ul><li>å¦‚æœå…¶ä»–æ–‡ä»¶ä¸­ä¹Ÿå®šä¹‰äº†åŒåçš„ randomLevel å‡½æ•°ï¼Œé“¾æ¥æ—¶ä¼šå‘ç”Ÿå†²çªã€‚</li><li>ä½¿ç”¨ static å¯ä»¥ç¡®ä¿è¿™ä¸ªå‡½æ•°åªåœ¨å½“å‰æ–‡ä»¶ä¸­å¯è§ï¼Œé¿å…å†²çªã€‚</li></ul></li><li>å°è£…æ€§<ul><li>randomLevel æ˜¯è·³è¡¨å†…éƒ¨ä½¿ç”¨çš„è¾…åŠ©å‡½æ•°ï¼Œä¸éœ€è¦æš´éœ²ç»™å¤–éƒ¨ã€‚</li></ul></li></ol><h3 id="inlineå…³é”®å­—"><code>inline</code>å…³é”®å­—</h3><p><code>inline</code>å…³é”®å­—å°†å‡½æ•°æ ‡è¯†ä¸º<code>å†…è”å‡½æ•°</code>ï¼Œæç¤ºç¼–è¯‘å™¨å°†å‡½æ•°å†…è”å±•å¼€ï¼Œå³å°†å‡½æ•°çš„ä»£ç ç›´æ¥æ’å…¥åˆ°è°ƒç”¨å¤„ï¼Œè€Œä¸æ˜¯é€šè¿‡å‡½æ•°è°ƒç”¨çš„æ–¹å¼æ‰§è¡Œã€‚ä½¿ç”¨<code>inline</code>å…³é”®å­—æœ‰ä»¥ä¸‹å¥½å¤„ï¼š</p><ol><li>å‡å°‘å‡½æ•°è°ƒç”¨å¼€é”€<ul><li>å‡½æ•°è°ƒç”¨éœ€è¦ä¿å­˜ä¸Šä¸‹æ–‡ã€è·³è½¬åˆ°å‡½æ•°åœ°å€ã€æ‰§è¡Œå®Œåå†è¿”å›ï¼Œè¿™äº›æ“ä½œæœ‰ä¸€å®šçš„å¼€é”€ã€‚</li><li>randomLevel æ˜¯ä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Œå†…è”å±•å¼€å¯ä»¥é¿å…è¿™äº›å¼€é”€ï¼Œæé«˜æ€§èƒ½ã€‚</li></ul></li><li>é€‚åˆå°å‹å‡½æ•°<ul><li>randomLevel çš„é€»è¾‘éå¸¸ç®€å•ï¼ˆåªæ˜¯ä¸€ä¸ªå¾ªç¯ï¼‰ï¼Œé€‚åˆå†…è”å±•å¼€ã€‚</li><li>å¦‚æœå‡½æ•°ä½“è¾ƒå¤§ï¼Œå†…è”å¯èƒ½ä¼šå¯¼è‡´ä»£ç è†¨èƒ€ï¼Œåè€Œé™ä½æ€§èƒ½ã€‚æ‰€ä»¥è¯´ä¸æ˜¯æ‰€æœ‰çš„å‡½æ•°éƒ½é€‚åˆä½œå†…è”å£°æ˜ã€‚</li></ul></li><li>ç¼–è¯‘å™¨ä¼˜åŒ–<ul><li>inline æ˜¯å¯¹ç¼–è¯‘å™¨çš„å»ºè®®ï¼Œç¼–è¯‘å™¨å¯ä»¥é€‰æ‹©æ˜¯å¦çœŸæ­£å†…è”å±•å¼€ã€‚</li></ul></li></ol><h3 id="randomLevel-å‡½æ•°">randomLevel å‡½æ•°</h3><p>randomLevelå‡½æ•°çš„ä½œç”¨æ˜¯ç”Ÿæˆä¸€ä¸ªéšæœºæ•°ï¼Œéšæœºæ•°çš„åŒºé—´ä¸º[1, MAX_LEVEL]å³[1, 32]ã€‚lvä»1å¼€å§‹ï¼Œæ¯æ¬¡ä»¥25%çš„æ¦‚ç‡é€’å¢ã€‚ä¸ºä»€ä¹ˆæ˜¯25%å‘¢ï¼Ÿè¿™å°±å¾—çœ‹å¼€å¤´çš„é™æ€å¸¸é‡P_FACTORï¼ŒP_FACTOR = RAND_MAX &gt;&gt; 2ã€‚RAND_MAXä¸ºrandå‡½æ•°èƒ½ç”Ÿæˆçš„éšæœºæ•°çš„æœ€å¤§å€¼ï¼Œç„¶åå³ç§»ä¸¤ä½ï¼Œä¹Ÿå°±æ˜¯é™¤ä»¥4ã€‚randèƒ½ç”Ÿæˆçš„éšæœºæ•°åŒºé—´ä¸º[1, RAND_MAX]ï¼Œå½“ç”Ÿæˆçš„éšæœºæ•°å°äºP_FACTORå³RAND_MAX / 4æ—¶è¿›è¡Œé€’å¢ã€‚ç”Ÿæˆçš„éšæœºæ•°å°äºP_FACTORçš„åŒºé—´å <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mn>1</mn></mrow><mrow><mn>4</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.845108em;"></span><span class="strut bottom" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">4</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span>ï¼Œå¤§äºP_FACTORçš„åŒºé—´å <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mn>3</mn></mrow><mrow><mn>4</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{3}{4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.845108em;"></span><span class="strut bottom" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">4</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">3</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span>ï¼Œè¿™ä¹Ÿä¸éš¾ç†è§£ä¸ºä»€ä¹ˆæ˜¯25%æ¦‚ç‡ã€‚è¿˜æœ‰å°±æ˜¯éšæœºæ•°çš„ç”Ÿæˆéœ€è¦åˆå§‹åŒ–éšæœºæ•°ç§å­ï¼Œè¿™ä¸€æ­¥åœ¨è·³è¡¨çš„åˆ›å»ºä¸­é€šè¿‡<code>srand(time(NULL))</code>å®ç°äº†ã€‚</p><h3 id="è·³è¡¨æœ‰å…³ç»“æ„ä½“">è·³è¡¨æœ‰å…³ç»“æ„ä½“</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">SkiplistNode</span> &#123;</span></span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    <span class="type">int</span> maxLevel;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">SkiplistNode</span> **<span class="title">forward</span>;</span></span><br><span class="line">&#125; SkiplistNode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    SkiplistNode *head;</span><br><span class="line">    <span class="type">int</span> level;</span><br><span class="line">&#125; Skiplist;</span><br></pre></td></tr></table></figure><p>ç±»ä¼¼äºé“¾è¡¨ï¼Œå…¶ä¸­SkiplistNodeæ˜¯è·³è¡¨ä¸­<code>èŠ‚ç‚¹çš„å®šä¹‰</code>ï¼ŒSkiplistæ˜¯<code>è·³è¡¨çš„å®šä¹‰</code>ã€‚</p><p><code>SkiplistNode</code>ç»“æ„ä½“å†…valä»£è¡¨èŠ‚ç‚¹å­˜å‚¨çš„å€¼ï¼ŒmaxLevelä¸ºè¯¥èŠ‚ç‚¹çš„æœ€å¤§å±‚æ•°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯å¦‚æœæŸä¸ªèŠ‚ç‚¹çš„maxLevelå€¼ä¸º4ï¼Œé‚£ä¹ˆè¯´æ˜è¯¥èŠ‚ç‚¹å­˜åœ¨äºç¬¬0ã€1ã€2ã€3å±‚ã€‚ç»“æ„ä½“å†…çš„forwardæ˜¯ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œè€Œforward[i]æŒ‡å‘è¯¥èŠ‚ç‚¹åœ¨ç¬¬iå±‚çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p><p><code>Skiplist</code>ç»“æ„ä½“ï¼Œä¸ªäººæ„Ÿè§‰ä¸ç”¨å®ƒä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯ä½¿ç”¨åæ–¹ä¾¿ç®¡ç†ï¼Œä¸»è¦æ˜¯æ–¹ä¾¿å‚æ•°çš„åœ°å€ä¼ é€’ã€‚è¿™æ ·æ¯æ¬¡åªéœ€è¦å°†Skiplistç±»å‹çš„æŒ‡é’ˆä¼ é€’ç»™å‡½æ•°å³å¯ï¼Œå¦åˆ™æ—¢è¦ä¼ æŒ‡å‘*headçš„æŒ‡é’ˆï¼Œåˆè¦ä¼ æŒ‡å‘levelçš„æŒ‡é’ˆï¼Œå®å±ä¸æ–¹ä¾¿ã€‚è¿˜éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯levelçš„å€¼ï¼Œå®ƒå…¶å®æ˜¯è·³è¡¨ä¸­æ‰€æœ‰èŠ‚ç‚¹ä¸­maxLevelå€¼æœ€å¤§çš„é‚£ä¸€ä¸ªã€‚</p><h3 id="è·³è¡¨èŠ‚ç‚¹çš„åˆ›å»º">è·³è¡¨èŠ‚ç‚¹çš„åˆ›å»º</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SkiplistNode *<span class="title function_">skiplistNodeCreat</span><span class="params">(<span class="type">int</span> val, <span class="type">int</span> maxLevel)</span> &#123;</span><br><span class="line">    SkiplistNode *obj = (SkiplistNode *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(SkiplistNode));</span><br><span class="line">    obj-&gt;val = val;</span><br><span class="line">    obj-&gt;maxLevel = maxLevel;</span><br><span class="line">    obj-&gt;forward = (SkiplistNode **)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(SkiplistNode *) * maxLevel);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; maxLevel; i++) </span><br><span class="line">        obj-&gt;forward[i] = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‡½æ•°å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯ä¸ºè·³è¡¨èŠ‚ç‚¹åˆ†é…å†…å­˜ï¼Œåˆå§‹åŒ–è·³è¡¨èŠ‚ç‚¹ä¸­çš„valã€maxLevelï¼Œä¸ºè·³è¡¨èŠ‚ç‚¹çš„æŒ‡é’ˆæ•°ç»„forwardåˆ†é…å†…å­˜ï¼Œå¹¶å°†æ‰€æœ‰çš„æˆå‘˜æŒ‡å‘NULLã€‚</p><h3 id="è·³è¡¨èŠ‚ç‚¹çš„é‡Šæ”¾">è·³è¡¨èŠ‚ç‚¹çš„é‡Šæ”¾</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">skiplistNodeFree</span><span class="params">(SkiplistNode* obj)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj-&gt;forward) &#123;</span><br><span class="line">        <span class="built_in">free</span>(obj-&gt;forward);</span><br><span class="line">        obj-&gt;forward = <span class="literal">NULL</span>;</span><br><span class="line">        obj-&gt;maxLevel = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">free</span>(obj);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç†è§£äº†è·³è¡¨èŠ‚ç‚¹çš„åˆ›å»ºï¼Œé‚£ä¹ˆé‡Šæ”¾ä¹Ÿä¸éš¾ç†è§£ï¼Œç›¸å½“äºå°†åˆ›å»ºèŠ‚ç‚¹æ—¶æ‰€åšçš„äº‹å„¿åè¿‡æ¥åšä¸€éã€‚é‡Šæ”¾forwardï¼ˆåœ¨é‡Šæ”¾å‰å…ˆæ£€æŸ¥å…¶æ˜¯å¦ä¸ºNULLï¼Œé¿å…åå¤é‡Šæ”¾ï¼‰ï¼Œé‡Šæ”¾è·³è¡¨èŠ‚ç‚¹æ‰€å ç”¨å†…å­˜ã€‚</p><h3 id="è·³è¡¨çš„åˆ›å»ºä¸é‡Šæ”¾">è·³è¡¨çš„åˆ›å»ºä¸é‡Šæ”¾</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Skiplist* <span class="title function_">skiplistCreate</span><span class="params">()</span> &#123;</span><br><span class="line">    Skiplist *obj = (Skiplist *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Skiplist));</span><br><span class="line">    obj-&gt;head = skiplistNodeCreat(<span class="number">-1</span>, MAX_LEVEL);</span><br><span class="line">    obj-&gt;level = <span class="number">0</span>;</span><br><span class="line">    srand(time(<span class="literal">NULL</span>));</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">skiplistFree</span><span class="params">(Skiplist* obj)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (SkiplistNode * curr = obj-&gt;head; curr; ) &#123;</span><br><span class="line">        SkiplistNode *prev = curr;</span><br><span class="line">        curr = curr-&gt;forward[<span class="number">0</span>];</span><br><span class="line">        skiplistNodeFree(prev);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">free</span>(obj);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸€å—ä¹Ÿç±»ä¼¼äºè·³è¡¨èŠ‚ç‚¹çš„åˆ›å»ºä¸é‡Šæ”¾ï¼Œä¸å†èµ˜è¿°ã€‚</p><h3 id="è·³è¡¨çš„æœç´¢">è·³è¡¨çš„æœç´¢</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">bool</span> <span class="title function_">skiplistSearch</span><span class="params">(Skiplist* obj, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    SkiplistNode *curr = obj-&gt;head;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = obj-&gt;level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">        <span class="keyword">while</span> (curr-&gt;forward[i] &amp;&amp; curr-&gt;forward[i]-&gt;val &lt; target)</span><br><span class="line">            curr = curr-&gt;forward[i];</span><br><span class="line">    curr = curr-&gt;forward[<span class="number">0</span>];</span><br><span class="line">    <span class="comment">/* æ£€æµ‹å½“å‰å…ƒç´ çš„å€¼æ˜¯å¦ç­‰äº target */</span></span><br><span class="line">    <span class="keyword">if</span> (curr &amp;&amp; curr-&gt;val == target) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿”å›targetæ˜¯å¦å­˜åœ¨äºè·³è¡¨ä¸­ï¼Œå­˜åœ¨è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚</p><p>æˆ‘å¼€å§‹çœ‹åˆ°è¿™æ®µä»£ç æ˜¯å¤§å†™çš„æ‡µé€¼ï¼Œè°ƒè¯•äº†ä¸€ä¼šå„¿æ‰æ˜ç™½æ˜¯æ€ä¹ˆä¸ªäº‹å„¿ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = obj-&gt;level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">    <span class="keyword">while</span> (curr-&gt;forward[i] &amp;&amp; curr-&gt;forward[i]-&gt;val &lt; target)</span><br><span class="line">        curr = curr-&gt;forward[i];</span><br></pre></td></tr></table></figure><p>ç†è§£äº†è¿™æ®µå¾ªç¯ä½“åº”è¯¥å°±å·®ä¸å¤šäº†ã€‚è¿˜è¦å¼ºè°ƒçš„ä¸€ç‚¹æ˜¯è·³è¡¨çš„å¤´èŠ‚ç‚¹å­˜åœ¨äºæ¯ä¸€å±‚ã€‚</p><p>ä»è·³è¡¨çš„æœ€é«˜å±‚å¼€å§‹éå†ï¼Œåœ¨æ¯å±‚å®šä½åˆ°æœ€åä¸€ä¸ªå°äºtargetçš„èŠ‚ç‚¹ï¼Œå°±å‘ä¸‹ç§»åŠ¨ä¸€å±‚ã€‚å½“éå†åˆ°æœ€åä¸€å±‚æ—¶ï¼Œå°±æ‰¾åˆ°äº†æœ€åº•å±‚æœ€åä¸€ä¸ªå°äºtargetçš„èŠ‚ç‚¹ï¼Œå®ƒçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å¾ˆæœ‰å¯èƒ½å°±æ˜¯ç›®æ ‡èŠ‚ç‚¹ã€‚ä½¿ç”¨<code>cur = cur-&gt;forward[0]</code>è®©curæŒ‡å‘è¯¥èŠ‚ç‚¹ï¼Œæ£€æŸ¥å…¶æ˜¯å¦ä¸ºNULLï¼Œä¸ä¸ºNULLå°±å†æ£€æŸ¥èŠ‚ç‚¹çš„å€¼æ˜¯å¦ä¸ºtargetå³å¯ã€‚</p><p>æŸ¥æ‰¾è¿‡ç¨‹æ˜¯ä»æœ€é«˜å±‚å¼€å§‹ï¼Œé€å±‚å‘ä¸‹æŸ¥æ‰¾ç›®æ ‡å€¼ã€‚</p><ol><li>åˆå§‹åŒ–</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SkiplistNode *curr = obj-&gt;head;</span><br></pre></td></tr></table></figure><ul><li>curr æŒ‡å‘è·³è¡¨çš„å¤´èŠ‚ç‚¹ã€‚</li></ul><ol start="2"><li>ä»æœ€é«˜å±‚å¼€å§‹æŸ¥æ‰¾</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = obj-&gt;level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br></pre></td></tr></table></figure><ul><li>obj-&gt;level æ˜¯è·³è¡¨å½“å‰çš„æœ€å¤§å±‚æ•°ã€‚</li><li>ä»æœ€é«˜å±‚ï¼ˆobj-&gt;level - 1ï¼‰å¼€å§‹ï¼Œé€å±‚å‘ä¸‹æŸ¥æ‰¾ã€‚</li></ul><ol start="3"><li>åœ¨å½“å‰å±‚å‘å³æŸ¥æ‰¾</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (curr-&gt;forward[i] &amp;&amp; curr-&gt;forward[i]-&gt;val &lt; target) </span><br><span class="line">    curr = curr-&gt;forward[i];</span><br></pre></td></tr></table></figure><ul><li>curr-&gt;forward[i] æ˜¯å½“å‰èŠ‚ç‚¹åœ¨ç¬¬ i å±‚çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚</li><li>å¦‚æœä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼å°äº targetï¼Œåˆ™ç»§ç»­å‘å³ç§»åŠ¨ã€‚</li><li>è¿™ä¸ªè¿‡ç¨‹ä¼šè·³è¿‡å¤šä¸ªèŠ‚ç‚¹ï¼Œå¿«é€Ÿæ¥è¿‘ç›®æ ‡å€¼ã€‚</li></ul><ol start="4"><li>ç§»åŠ¨åˆ°ä¸‹ä¸€å±‚</li></ol><ul><li>å½“åœ¨å½“å‰å±‚æ— æ³•ç»§ç»­å‘å³ç§»åŠ¨æ—¶ï¼Œå‘ä¸‹ç§»åŠ¨åˆ°ä¸‹ä¸€å±‚<code>ï¼ˆi--ï¼‰</code>ï¼Œç»§ç»­æŸ¥æ‰¾ã€‚</li></ul><ol start="5"><li>æœ€ç»ˆå®šä½åˆ°ç›®æ ‡èŠ‚ç‚¹</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curr = curr-&gt;forward[<span class="number">0</span>];</span><br></pre></td></tr></table></figure><ul><li>æŸ¥æ‰¾ç»“æŸåï¼Œcurr æŒ‡å‘ç¬¬0å±‚ä¸­æœ€åä¸€ä¸ªå°äº target çš„èŠ‚ç‚¹ã€‚</li><li>curr-&gt;forward[0] æ˜¯ç¬¬0å±‚ä¸­ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¯èƒ½æ˜¯ç›®æ ‡èŠ‚ç‚¹ã€‚</li></ul><ol start="6"><li>æ£€æŸ¥æ˜¯å¦æ‰¾åˆ°ç›®æ ‡å€¼</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (curr &amp;&amp; curr-&gt;val == target) </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœ curr-&gt;forward[0] å­˜åœ¨ä¸”å€¼ç­‰äº targetï¼Œåˆ™è¿”å› trueã€‚</li><li>å¦åˆ™è¿”å› falseã€‚</li></ul><h3 id="è·³è¡¨ä¸­èŠ‚ç‚¹çš„æ·»åŠ ">è·³è¡¨ä¸­èŠ‚ç‚¹çš„æ·»åŠ </h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">skiplistAdd</span><span class="params">(Skiplist* obj, <span class="type">int</span> num)</span> &#123;</span><br><span class="line">    SkiplistNode *update[MAX_LEVEL];</span><br><span class="line">    SkiplistNode *curr = obj-&gt;head;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = obj-&gt;level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="comment">/* æ‰¾åˆ°ç¬¬ i å±‚å°äºä¸”æœ€æ¥è¿‘ num çš„å…ƒç´ */</span></span><br><span class="line">        <span class="keyword">while</span> (curr-&gt;forward[i] &amp;&amp; curr-&gt;forward[i]-&gt;val &lt; num) &#123;</span><br><span class="line">            curr = curr-&gt;forward[i];</span><br><span class="line">        &#125;</span><br><span class="line">        update[i] = curr;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> lv = randomLevel();</span><br><span class="line">    <span class="keyword">if</span> (lv &gt; obj-&gt;level) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = obj-&gt;level; i &lt; lv; i++) &#123;</span><br><span class="line">            update[i] = obj-&gt;head;</span><br><span class="line">        &#125;</span><br><span class="line">        obj-&gt;level = lv;</span><br><span class="line">    &#125;</span><br><span class="line">    SkiplistNode *newNode = skiplistNodeCreat(num, lv);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; lv; i++) &#123;</span><br><span class="line">        <span class="comment">/* å¯¹ç¬¬ i å±‚çš„çŠ¶æ€è¿›è¡Œæ›´æ–°ï¼Œå°†å½“å‰å…ƒç´ çš„ forward æŒ‡å‘æ–°çš„èŠ‚ç‚¹ */</span></span><br><span class="line">        newNode-&gt;forward[i] = update[i]-&gt;forward[i];</span><br><span class="line">        update[i]-&gt;forward[i] = newNode;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>skiplistAdd çš„ä½œç”¨æ˜¯å‘è·³è¡¨ä¸­æ’å…¥ä¸€ä¸ªå€¼ä¸º num çš„èŠ‚ç‚¹ã€‚æ’å…¥æ—¶éœ€è¦ï¼š</p><ol><li>æ‰¾åˆ°æ¯ä¸€å±‚ä¸­æœ€åä¸€ä¸ªå°äº num çš„èŠ‚ç‚¹ã€‚</li><li>éšæœºç”Ÿæˆæ–°èŠ‚ç‚¹çš„å±‚æ•°ã€‚</li><li>å°†æ–°èŠ‚ç‚¹æ’å…¥åˆ°æ¯ä¸€å±‚çš„æ­£ç¡®ä½ç½®ã€‚</li></ol><h4 id="æ’å…¥è¿‡ç¨‹">æ’å…¥è¿‡ç¨‹</h4><ol><li>åˆå§‹åŒ–</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SkiplistNode *update[MAX_LEVEL];</span><br><span class="line">SkiplistNode *cur = obj-&gt;head;</span><br></pre></td></tr></table></figure><ul><li>updateæ˜¯ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œç”¨äºè®°å½•æ¯ä¸€å±‚ä¸­æœ€åä¸€ä¸ªå°äºnumçš„èŠ‚ç‚¹ã€‚</li><li>curæ˜¯å½“å‰èŠ‚ç‚¹ï¼Œåˆå§‹åŒ–ä¸ºè·³è¡¨çš„å¤´èŠ‚ç‚¹ã€‚</li></ul><ol start="2"><li>æŸ¥æ‰¾æ’å…¥ä½ç½®</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = obj-&gt;level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">    <span class="keyword">while</span> (cur-&gt;forward[i] &amp;&amp; cur-&gt;forward[i]-&gt;val &lt; num) </span><br><span class="line">        cur = cur-&gt;forward[i];</span><br><span class="line">    update[i] = cur;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä»æœ€é«˜å¤„(<code>obj-&gt;level-1</code>)å¼€å§‹ï¼Œé€å±‚å‘ä¸‹æŸ¥æ‰¾ã€‚</li><li>åœ¨æ¯ä¸€å±‚ä¸­ï¼Œå‘å³ç§»åŠ¨curï¼Œç›´åˆ°æ‰¾åˆ°æœ€åä¸€ä¸ªå°äºnumçš„èŠ‚ç‚¹ã€‚</li><li>å°†curè®°å½•åˆ°update[i]ï¼Œè¡¨ç¤ºåœ¨ç¬¬iå±‚ï¼Œåº”å°†æ–°èŠ‚ç‚¹æ’å…¥update[i]çš„åé¢ã€‚</li></ul><ol start="3"><li>éšæœºç”Ÿæˆæ–°èŠ‚ç‚¹çš„å±‚æ•°</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> lv = randomLevel();</span><br></pre></td></tr></table></figure><ul><li>è°ƒç”¨ randomLevel å‡½æ•°ï¼Œéšæœºç”Ÿæˆæ–°èŠ‚ç‚¹çš„å±‚æ•° lvã€‚</li></ul><ol start="4"><li>æ›´æ–°è·³è¡¨çš„å±‚æ•°</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (lv &gt; obj-&gt;level) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = obj-&gt;level; i &lt; lv; ++i) </span><br><span class="line">        update[i] = obj-&gt;head;</span><br><span class="line">    obj-&gt;level = lv;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœæ–°èŠ‚ç‚¹çš„å±‚æ•°lvå¤§äºè·³è¡¨çš„å±‚æ•°obj-&gt;levelï¼Œéœ€è¦æ›´æ–°è·³è¡¨çš„å±‚æ•°</li><li>å¯¹äºæ–°å¢çš„å±‚ï¼ˆobj-&gt;level-1åˆ°lv-1ï¼‰ï¼Œå°†update[i]åˆå§‹åŒ–ä¸ºå¤´èŠ‚ç‚¹obj-&gt;headã€‚</li><li>æ›´æ–°è·³è¡¨çš„å±‚æ•°obj-&gt;levelä¸ºlvã€‚</li></ul><ol start="5"><li>åˆ›å»ºæ–°èŠ‚ç‚¹</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SkiplistNode * newNode = skiplistNodeCreate(num, lv);</span><br></pre></td></tr></table></figure><ul><li>è°ƒç”¨ skiplistNodeCreate å‡½æ•°ï¼Œåˆ›å»ºä¸€ä¸ªå€¼ä¸º numã€å±‚æ•°ä¸º lv çš„æ–°èŠ‚ç‚¹ã€‚</li></ul><ol start="6"><li>æ’å…¥æ–°èŠ‚ç‚¹</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; lv; ++i) &#123;</span><br><span class="line">    newNode-&gt;forward[i] = update[i]-&gt;forward[i];</span><br><span class="line">    update[i]-&gt;forward[i] = newNode;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>éå†æ–°èŠ‚ç‚¹çš„æ¯ä¸€å±‚ï¼ˆä»ç¬¬0å±‚åˆ°ç¬¬ lv - 1 å±‚ï¼‰ï¼š<ul><li>å°†æ–°èŠ‚ç‚¹çš„ forward[i] æŒ‡å‘ update[i]-&gt;forward[i]ã€‚</li><li>å°† update[i]-&gt;forward[i] æŒ‡å‘æ–°èŠ‚ç‚¹ã€‚</li></ul></li></ul><p>è¿™æ ·ï¼Œæ–°èŠ‚ç‚¹å°±è¢«æ’å…¥åˆ°æ¯ä¸€å±‚çš„æ­£ç¡®ä½ç½®ã€‚</p><h3 id="è·³è¡¨èŠ‚ç‚¹çš„åˆ é™¤">è·³è¡¨èŠ‚ç‚¹çš„åˆ é™¤</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">bool</span> <span class="title function_">skiplistErase</span><span class="params">(Skiplist* obj, <span class="type">int</span> num)</span> &#123;</span><br><span class="line">    SkiplistNode *update[MAX_LEVEL];</span><br><span class="line">    SkiplistNode *curr = obj-&gt;head;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = obj-&gt;level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">while</span> (curr-&gt;forward[i] &amp;&amp; curr-&gt;forward[i]-&gt;val &lt; num) &#123;</span><br><span class="line">            curr = curr-&gt;forward[i];</span><br><span class="line">        &#125;</span><br><span class="line">        update[i] = curr;</span><br><span class="line">    &#125;</span><br><span class="line">    curr = curr-&gt;forward[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">if</span> (!curr || curr-&gt;val != num) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; obj-&gt;level; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (update[i]-&gt;forward[i] != curr) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125; </span><br><span class="line">        update[i]-&gt;forward[i] = curr-&gt;forward[i];</span><br><span class="line">    &#125;</span><br><span class="line">    skiplistNodeFree(curr);</span><br><span class="line">    <span class="keyword">while</span> (obj-&gt;level &gt; <span class="number">1</span> &amp;&amp; obj-&gt;head-&gt;forward[obj-&gt;level - <span class="number">1</span>] == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        obj-&gt;level--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>skiplistErase çš„ä½œç”¨æ˜¯ä»è·³è¡¨ä¸­åˆ é™¤å€¼ä¸º num çš„èŠ‚ç‚¹ã€‚å¦‚æœèŠ‚ç‚¹å­˜åœ¨å¹¶æˆåŠŸåˆ é™¤ï¼Œè¿”å› trueï¼›å¦åˆ™è¿”å› falseã€‚</p><h4 id="åˆ é™¤è¿‡ç¨‹">åˆ é™¤è¿‡ç¨‹</h4><ol><li>åˆå§‹åŒ–</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SkiplistNode *update[MAX_LEVEL];</span><br><span class="line">SkiplistNode *curr = obj-&gt;head;</span><br></pre></td></tr></table></figure><ul><li>update æ•°ç»„ç”¨äºè®°å½•æ¯ä¸€å±‚ä¸­éœ€è¦æ›´æ–°çš„èŠ‚ç‚¹ã€‚</li><li>curr æŒ‡å‘è·³è¡¨çš„å¤´èŠ‚ç‚¹ï¼ˆheadï¼‰ï¼Œç”¨äºéå†è·³è¡¨</li></ul><ol start="2"><li>æŸ¥æ‰¾å¾…åˆ é™¤èŠ‚ç‚¹çš„ä½ç½®</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = obj-&gt;level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">    <span class="keyword">while</span> (curr-&gt;forward[i] &amp;&amp; curr-&gt;forward[i]-&gt;val &lt; num) </span><br><span class="line">        curr = curr-&gt;forward[i];</span><br><span class="line">    update[i] = curr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä»æœ€é«˜å±‚å¼€å§‹ï¼Œé€å±‚å‘ä¸‹æŸ¥æ‰¾å€¼ä¸º num çš„èŠ‚ç‚¹ã€‚</li><li>åœ¨æ¯ä¸€å±‚ä¸­ï¼Œæ‰¾åˆ°æœ€åä¸€ä¸ªå°äº num çš„èŠ‚ç‚¹ï¼Œå¹¶è®°å½•åˆ° update[i] ä¸­ã€‚</li><li>è¿™ä¸ªè¿‡ç¨‹å’Œ skiplistSearch ç±»ä¼¼ï¼Œç›®çš„æ˜¯å®šä½å¾…åˆ é™¤èŠ‚ç‚¹çš„ä½ç½®ã€‚</li></ul><ol start="3"><li>å®šä½å¾…åˆ é™¤èŠ‚ç‚¹</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curr = curr-&gt;forward[<span class="number">0</span>];</span><br><span class="line">curr ç°åœ¨æŒ‡å‘ç¬¬<span class="number">0</span>å±‚ä¸­æœ€åä¸€ä¸ªå°äº num çš„èŠ‚ç‚¹ã€‚</span><br></pre></td></tr></table></figure><ul><li>curr-&gt;forward[0] æ˜¯ç¬¬0å±‚ä¸­ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¯èƒ½æ˜¯å¾…åˆ é™¤èŠ‚ç‚¹</li></ul><ol start="4"><li>æ£€æŸ¥èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!curr || curr-&gt;val != num) </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœ curr-&gt;forward[0] ä¸å­˜åœ¨ï¼Œæˆ–è€…å®ƒçš„å€¼ä¸ç­‰äº numï¼Œè¯´æ˜èŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œè¿”å› falseã€‚</li></ul><ol start="5"><li>æ›´æ–°æ¯ä¸€å±‚çš„æŒ‡é’ˆ</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; obj-&gt;level; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (update[i]-&gt;forward[i] != curr) </span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    update[i]-&gt;forward[i] = curr-&gt;forward[i];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>éå†æ¯ä¸€å±‚ï¼Œæ›´æ–°æŒ‡å‘å¾…åˆ é™¤èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚</li><li>å¦‚æœ update[i]-&gt;forward[i] ä¸ç­‰äº currï¼Œè¯´æ˜åœ¨è¿™ä¸€å±‚ä¸­ä¸éœ€è¦æ›´æ–°ï¼ˆå› ä¸ºå¾…åˆ é™¤èŠ‚ç‚¹ä¸åœ¨è¿™ä¸€å±‚ï¼‰ï¼Œå¹¶ä¸”æ˜¯ä»åº•å±‚å‘é«˜å±‚éå†çš„ï¼Œæ‰€ä»¥åé¢çš„æ‰€æœ‰å±‚ä¹Ÿä¸éœ€è¦æ›´æ–°ï¼Œbreaké€€å‡ºã€‚</li><li>å¦åˆ™ï¼Œå°† update[i]-&gt;forward[i] æŒ‡å‘ curr-&gt;forward[i]ï¼Œè·³è¿‡å¾…åˆ é™¤èŠ‚ç‚¹ã€‚</li></ul><ol start="6"><li>é‡Šæ”¾å¾…åˆ é™¤èŠ‚ç‚¹</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">skiplistNodeFree(curr);</span><br></pre></td></tr></table></figure><p>è°ƒç”¨ skiplistNodeFree å‡½æ•°é‡Šæ”¾å¾…åˆ é™¤èŠ‚ç‚¹çš„å†…å­˜ã€‚</p><ol start="7"><li>æ›´æ–°è·³è¡¨çš„å±‚æ•°</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (obj-&gt;level &gt; <span class="number">1</span> &amp;&amp; obj-&gt;head-&gt;forward[obj-&gt;level - <span class="number">1</span>] == <span class="literal">NULL</span>) </span><br><span class="line">    obj-&gt;level--;</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœåˆ é™¤èŠ‚ç‚¹åï¼ŒæŸäº›å±‚å˜ä¸ºç©ºï¼ˆå³å¤´èŠ‚ç‚¹åœ¨è¿™ä¸€å±‚çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸º NULLï¼‰ï¼Œåˆ™é™ä½è·³è¡¨çš„å±‚æ•°ã€‚</li><li>è¿™æ˜¯ä¸ºäº†ç¡®ä¿è·³è¡¨çš„å±‚æ•°ä¸ä¼šè¿‡é«˜ï¼Œé¿å…æµªè´¹ç©ºé—´ã€‚</li></ul><ol start="8"><li>è¿”å›ç»“æœ</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><ul><li>åˆ é™¤æˆåŠŸï¼Œè¿”å› trueã€‚</li></ul><p>åˆ°æ­¤æ•´ä¸ªä»£ç å¯ç®—æ˜¯ç†è§£å®Œæ¯•äº†QvQã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Leetcode æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode æ¯æ—¥ä¸€é¢˜ </tag>
            
            <tag> è®¾è®¡ </tag>
            
            <tag> é“¾è¡¨ </tag>
            
            <tag> è·³è¡¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode æ¯æ—¥ä¸€é¢˜äºŒåä¸‰ï¼š2506. ç»Ÿè®¡ç›¸ä¼¼å­—ç¬¦ä¸²å¯¹çš„æ•°ç›®</title>
      <link href="/2025/02/22/leetcode23/"/>
      <url>/2025/02/22/leetcode23/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥ Leetcode æ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/count-pairs-of-similar-strings/description/">2506. ç»Ÿè®¡ç›¸ä¼¼å­—ç¬¦ä¸²å¯¹çš„æ•°ç›®</a>ã€‚</p><p>ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„å­—ç¬¦ä¸²æ•°ç»„ words ã€‚</p><p>å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²ç”±ç›¸åŒçš„å­—ç¬¦ç»„æˆï¼Œåˆ™è®¤ä¸ºè¿™ä¸¤ä¸ªå­—ç¬¦ä¸² ç›¸ä¼¼ ã€‚</p><ul><li>ä¾‹å¦‚ï¼Œâ€œabcaâ€ å’Œ â€œcbaâ€ ç›¸ä¼¼ï¼Œå› ä¸ºå®ƒä»¬éƒ½ç”±å­—ç¬¦ â€˜aâ€™ã€â€˜bâ€™ã€â€˜câ€™ ç»„æˆã€‚</li><li>ç„¶è€Œï¼Œâ€œabacbaâ€ å’Œ â€œbcfdâ€ ä¸ç›¸ä¼¼ï¼Œå› ä¸ºå®ƒä»¬ä¸æ˜¯ç›¸åŒå­—ç¬¦ç»„æˆçš„ã€‚</li></ul><p>è¯·ä½ æ‰¾å‡ºæ»¡è¶³å­—ç¬¦ä¸² words[i] å’Œ words[j] ç›¸ä¼¼çš„ä¸‹æ ‡å¯¹ (i, j) ï¼Œå¹¶è¿”å›ä¸‹æ ‡å¯¹çš„æ•°ç›®ï¼Œå…¶ä¸­ 0 &lt;= i &lt; j &lt;= words.length - 1 ã€‚</p><h1>åˆ†æç†è§£</h1><p>é¢˜ç›®ç»™äº†ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„å­˜æ”¾çš„æ˜¯å­—ç¬¦ä¸²ï¼Œç„¶åè¦æ±‚æˆ‘ä»¬ç»Ÿè®¡ç›¸ä¼¼å­—ç¬¦ä¸²çš„å¯¹æ•°ã€‚è€Œç›¸ä¼¼å­—ç¬¦ä¸²å°±æ˜¯å‡ºç°çš„å­—æ¯ç›¸åŒçš„å­—ç¬¦ä¸²ï¼Œæ— è®ºå­—æ¯çš„ä¸ªæ•°ï¼Œçœ‹ä¾‹å­å°±èƒ½å¾ˆå¥½çš„æ˜ç™½ã€‚</p><h1>åŸºæœ¬æ€è·¯</h1><p>æšä¸¾æ¯ä¸ªå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦æ˜¯å¦å‡ºç°ï¼Œç„¶åæ¯”è¾ƒé€ä¸ªæ¯”è¾ƒæ¯å¯¹å­—ç¬¦ä¸²å³å¯ã€‚</p><p>æŒ‰ç…§ä¸Šè¿°æ€è·¯åº”ä½¿ç”¨çš„æ•°æ®ç»“æ„æ˜¯å“ˆå¸Œè¡¨ï¼Œä½†æ˜¯å…¶å®ä½¿ç”¨ä¸€ä¸ªintå‹å˜é‡å³å¯ã€‚å› ä¸ºé¢˜ç›®é™å®šäº†æ¯ä¸ªå­—ç¬¦ä¸²ä¸­å‡ºç°çš„å­—æ¯å‡ä¸ºå°å†™å­—æ¯ï¼Œè€Œå°å†™å­—æ¯ä¸º26ä¸ªï¼Œintå‹å˜é‡ä¸º4å­—èŠ‚ä¸º32ä½ï¼Œåˆšå¥½æ»¡è¶³éœ€è¦ã€‚åˆå§‹æ—¶ç½®ä¸º0ï¼Œä»æœ€ä½ä½ä¾æ¬¡å¼€å§‹è®°å½•å­—æ¯aã€bã€cã€dâ€¦â€¦æ˜¯å¦å‡ºç°å³å¯ï¼Œå‡ºç°å°±å°†è¯¥ä½ç½®ä¸º1ã€‚é€šè¿‡ç§»ä½å’Œæˆ–æ“ä½œï¼Œ<code>bitNum[i] = bitNum[i] | (1 &lt;&lt; (words[i][j] - 'a'))</code>å³å¯ã€‚è¿™é‡Œå‡æ‰â€™aâ€™æ˜¯å› ä¸ºå°å†™å­—æ¯å¯¹åº”çš„ASCIIç å€¼ä¸º97~122ã€‚å¦‚æœç›´æ¥å·¦ç§»çš„è¯å°±å·¦ç§»97~122ä½äº†ï¼Œå‡å»â€™aâ€™åå°±æ˜¯å·¦ç§»0~25.</p><p>ä½¿ç”¨intå˜é‡è®°å½•æ¯ä¸ªå­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—æ¯æ˜¯å¦å‡ºç°ä¹‹åï¼Œæ¯ä¸ªå­—ç¬¦ä¸²å°±å¯¹åº”ä¸€ä¸ªå€¼ã€‚å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯ç›¸ä¼¼å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆä»–ä»¬å¯¹åº”çš„å€¼ç›¸ç­‰ã€‚å°†æ¯ä¸ªå­—ç¬¦ä¸²å¯¹åº”çš„å€¼ä½¿ç”¨æ•°ç»„å­˜å‚¨åï¼Œä½¿ç”¨ä¸¤å±‚å¾ªç¯æšä¸¾å³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">similarPairs</span><span class="params">(vector&lt;string&gt;&amp; words)</span> </span>&#123;</span><br><span class="line">     <span class="type">int</span> n = words.<span class="built_in">size</span>();</span><br><span class="line">     <span class="type">int</span>* bitNum = <span class="keyword">new</span> <span class="type">int</span>[n]&#123;&#125;;</span><br><span class="line">     <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">         <span class="type">int</span>&amp; cur = bitNum[i];</span><br><span class="line">         <span class="keyword">for</span> (<span class="keyword">auto</span>&amp; str: words[i])</span><br><span class="line">             cur = cur | (<span class="number">1</span> &lt;&lt; (str - <span class="string">&#x27;a&#x27;</span>));</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">         <span class="keyword">for</span> (<span class="type">int</span> j = i + <span class="number">1</span>; j &lt; n; ++j)        </span><br><span class="line">         res += (bitNum[i] == bitNum[j]);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">similarPairs</span><span class="params">(<span class="type">char</span>** words, <span class="type">int</span> wordsSize)</span> &#123;</span><br><span class="line">    <span class="type">int</span> * bitNum = (<span class="type">int</span> *)<span class="built_in">calloc</span>(wordsSize, <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; wordsSize; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="built_in">strlen</span>(words[i]); ++j) &#123;</span><br><span class="line">            bitNum[i] = bitNum[i] | (<span class="number">1</span> &lt;&lt; (words[i][j] - <span class="string">&#x27;a&#x27;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; wordsSize; ++i)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = i + <span class="number">1</span>; j &lt; wordsSize; ++j) </span><br><span class="line">            <span class="keyword">if</span> (bitNum[i] == bitNum[j])</span><br><span class="line">                ++res;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>å¤æ‚åº¦åˆ†æ</h1><p>æ—¶é—´å¤æ‚åº¦ä¸ºO(n * min(m, n))ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„ words çš„é•¿åº¦ï¼Œm æ˜¯æ•°ç»„ words ä¸­å•ä¸ªå­—ç¬¦ä¸²çš„å¹³å‡é•¿åº¦ã€‚<br>ç©ºé—´å¤æ‚åº¦ä¸ºO(n)ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Leetcode æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode æ¯æ—¥ä¸€é¢˜ </tag>
            
            <tag> ä½è¿ç®— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode æ¯æ—¥ä¸€é¢˜äºŒåäºŒï¼š2209. ç”¨åœ°æ¯¯è¦†ç›–åçš„æœ€å°‘ç™½è‰²ç –å—</title>
      <link href="/2025/02/21/leetcode22/"/>
      <url>/2025/02/21/leetcode22/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/minimum-white-tiles-after-covering-with-carpets/description/">2209. ç”¨åœ°æ¯¯è¦†ç›–åçš„æœ€å°‘ç™½è‰²ç –å—</a>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Leetcode æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode æ¯æ—¥ä¸€é¢˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode æ¯æ—¥ä¸€é¢˜äºŒåä¸€ï¼š2595. å¥‡å¶ä½æ•°</title>
      <link href="/2025/02/20/leetcode21/"/>
      <url>/2025/02/20/leetcode21/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/number-of-even-and-odd-bits/description/">2595. å¥‡å¶ä½æ•°</a>ã€‚</p><p>ç»™ä½ ä¸€ä¸ªæ­£æ•´æ•° n ã€‚</p><p>ç”¨ even è¡¨ç¤ºåœ¨ n çš„äºŒè¿›åˆ¶å½¢å¼ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ä¸­å€¼ä¸º 1 çš„å¶æ•°ä¸‹æ ‡çš„ä¸ªæ•°ã€‚</p><p>ç”¨ odd è¡¨ç¤ºåœ¨ n çš„äºŒè¿›åˆ¶å½¢å¼ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ä¸­å€¼ä¸º 1 çš„å¥‡æ•°ä¸‹æ ‡çš„ä¸ªæ•°ã€‚</p><p>è¯·æ³¨æ„ï¼Œåœ¨æ•°å­—çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­ï¼Œä½ä¸‹æ ‡çš„é¡ºåº ä»å³åˆ°å·¦ã€‚</p><p>è¿”å›æ•´æ•°æ•°ç»„ answer ï¼Œå…¶ä¸­ answer = [even, odd] ã€‚</p><h1>æ€è·¯åˆ†æ</h1><p>ä½¿ç”¨intå‹å˜é‡evenå’Œoddåˆ†åˆ«è®°å½•ï¼Œå¯¹nè¿›è¡Œç§»ä½æ“ä½œï¼Œå› ä¸ºè®°å½•çš„æ˜¯1çš„ä¸ªæ•°ï¼Œå› æ­¤ç›´æ¥åœ¨ç§»ä½æ“ä½œåç›´æ¥åŠ åœ¨evenæˆ–è€…oddä¸Šå³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">evenOddBit</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> even = <span class="number">0</span>, odd = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> pos = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (n &gt;&gt; pos != <span class="number">0</span>) &#123;</span><br><span class="line">            even += (n &gt;&gt; pos++ &amp; <span class="number">1</span>);</span><br><span class="line">            odd += (n &gt;&gt; pos++ &amp; <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> &#123;even, odd&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Note: The returned array must be malloced, assume caller calls free().</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">int</span>* <span class="title function_">evenOddBit</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span>* returnSize)</span> &#123;</span><br><span class="line">    <span class="type">int</span>* res = (<span class="type">int</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">int</span>) * <span class="number">2</span>);</span><br><span class="line">    <span class="built_in">memset</span>(res, <span class="number">0</span>, <span class="keyword">sizeof</span>(<span class="type">int</span>) * <span class="number">2</span>);</span><br><span class="line">    *returnSize = <span class="number">2</span>;</span><br><span class="line">    <span class="type">int</span> pos = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (n &gt;&gt; pos != <span class="number">0</span>) &#123;</span><br><span class="line">        res[<span class="number">0</span>] += (n &gt;&gt; pos++ &amp; <span class="number">1</span>);</span><br><span class="line">        res[<span class="number">1</span>] += (n &gt;&gt; pos++ &amp; <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>å¤æ‚åº¦åˆ†æ</h1><p>æ—¶é—´å¤æ‚åº¦ä¸ºO(log n)ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚çµèŒ¶å±±è‰¾åºœå°±æ¯”è¾ƒå‰å®³äº†ï¼Œä½¿ç”¨äº†ä½æ©ç çš„åŠæ³•ï¼Œå®ç°äº†O(1)å¤æ‚åº¦çš„ç®—æ³•ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Leetcode æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode æ¯æ—¥ä¸€é¢˜ </tag>
            
            <tag> ä½è¿ç®— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode æ¯æ—¥ä¸€é¢˜äºŒåï¼š624. æ•°ç»„åˆ—è¡¨ä¸­çš„æœ€å¤§è·ç¦»</title>
      <link href="/2025/02/19/leetcode20/"/>
      <url>/2025/02/19/leetcode20/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/maximum-distance-in-arrays/description/">624. æ•°ç»„åˆ—è¡¨ä¸­çš„æœ€å¤§è·ç¦»</a>ã€‚</p><p>ç»™å®š m ä¸ªæ•°ç»„ï¼Œæ¯ä¸ªæ•°ç»„éƒ½å·²ç»æŒ‰ç…§å‡åºæ’å¥½åºäº†ã€‚</p><p>ç°åœ¨ä½ éœ€è¦ä»ä¸¤ä¸ªä¸åŒçš„æ•°ç»„ä¸­é€‰æ‹©ä¸¤ä¸ªæ•´æ•°ï¼ˆæ¯ä¸ªæ•°ç»„é€‰ä¸€ä¸ªï¼‰å¹¶ä¸”è®¡ç®—å®ƒä»¬çš„è·ç¦»ã€‚ä¸¤ä¸ªæ•´æ•° a å’Œ b ä¹‹é—´çš„è·ç¦»å®šä¹‰ä¸ºå®ƒä»¬å·®çš„ç»å¯¹å€¼ |a-b| ã€‚</p><h1>åˆ†æç†è§£</h1><p>é¢˜ç›®æ„æ€å¾ˆæ˜ç¡®ï¼Œå¹¶ä¸”æ¯ä¸ªæ•°ç»„ä¸­çš„æ•°æ˜¯æŒ‰å‡åºæ’åˆ—çš„ï¼Œæˆ‘ä»¬éœ€è¦è¿”å›ä¸åŒæ•°ç»„ä¸­çš„ä¸¤ä¸ªæ•°çš„å·®å€¼çš„ç»å¯¹å€¼ï¼Œå¹¶ä¸”è¿™ä¸ªå·®å€¼çš„ç»å¯¹å€¼å¾—æ˜¯æœ€å¤§çš„é‚£ä¸ªã€‚</p><h1>æ€è·¯åˆ†æ</h1><p>æš´åŠ›çš„åšæ³•æ˜¯æšä¸¾æ‰€æœ‰çš„å·®å€¼çš„ç»å¯¹å€¼è¿›è¡Œæ¯”è¾ƒï¼Œè¿”å›ç»å¯¹å€¼æœ€å¤§çš„é‚£ä¸ªå³å¯ï¼Œä½†æ˜¯è¿™ç§åšæ³•æ˜¾ç„¶æœ‰æå‡ç©ºé—´ï¼Œå¹¶ä¸”æ•ˆç‡ä¸é«˜ï¼Œå¤æ‚åº¦ä¸ºäºŒé˜¶ã€‚</p><p>ç„¶åæˆ‘ä¸€å¼€å§‹çš„æƒ³æ³•æ˜¯æ¯”è¾ƒæ‰€æœ‰æ•°ç»„çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œç„¶åå–å‡ºè¿™äº›æœ€å¤§å€¼ä¸­çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ä¸­çš„æœ€å°å€¼ï¼Œè¿”å›ä»–ä»¬çš„å·®å€¼å³å¯ï¼Œä½†æ˜¯æ— æ³•æ’é™¤ä»–ä»¬åœ¨åŒä¸€ä¸ªæ•°ç»„ä¸­çš„æƒ…å†µã€‚</p><p>ç´§æ¥ç€ï¼Œæˆ‘å…ˆæ‰¾å‡ºæœ€å°å€¼ä¸­çš„æœ€å°å€¼ï¼Œç„¶åè®°å½•ä¸‹å…¶ä¸‹æ ‡ï¼›ç„¶ååœ¨å¯»æ‰¾æœ€å¤§å€¼ä¸­çš„æœ€å¤§å€¼æ—¶ï¼Œæ’é™¤è¿™ä¸ªä¸‹æ ‡å³å¯ã€‚ä½†æ˜¯ä¾ç„¶æ— æ³•æ’é™¤æŸäº›ç‰¹æ®Šæƒ…å†µï¼Œå¦‚å¯¹äº[[-2],[-3,-2,1]]ï¼Œä¼šè®°å½•æ•°ç»„â‘¡ä¸­çš„-3ä¸ºæœ€å°å€¼ï¼Œè®°å½•æ•°ç»„â‘ ä¸­çš„-2ä¸ºæœ€å¤§å€¼ï¼Œå¾—åˆ°ç»“æœ1ã€‚ä½†åº”è¯¥æ˜¯1-(-2)=3ã€‚</p><p>äºæ˜¯ä¹æˆ‘åˆå¼€å§‹å…ˆæ‰¾å‡ºæœ€å¤§å€¼ä¸­çš„æœ€å¤§å€¼ï¼Œç„¶åæœ€å°å€¼ä¸­çš„æœ€å°å€¼ï¼Œä½†æ˜¯ä¾ç„¶æ— æ³•æ’é™¤æŸäº›ç‰¹æ®Šæƒ…å†µã€‚</p><p>å†äºæ˜¯ä¹ï¼Œæˆ‘è½¬å‘äº†çµèŒ¶å±±è‰¾åºœçš„é¢˜è§£ã€‚ä»–çš„æ€è·¯å¾ˆæ¸…æ™°ï¼Œè§£é‡Šå¾—ä¹Ÿæ¯”è¾ƒæ¸…æ¥šã€‚åŸºæœ¬æ€è·¯æ˜¯éå†æ¯ä¸ªæ•°ç»„ï¼Œå…ˆè®¡ç®—å½“å‰æ•°ç»„ä¸è®°å½•çš„æœ€å°å€¼å’Œè®°å½•çš„æœ€å¤§å€¼ä¹‹é—´çš„æœ€å¤§è·ç¦»ã€‚è®°å½•çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ä¸ºmin_aå’Œmax_bï¼Œç„¶åå½“å‰æ•°ç»„çš„æœ€å¤§å€¼æ˜¯æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå®ƒå‡å»min_aå¯èƒ½æ˜¯ä¸€ä¸ªå€™é€‰ç»“æœï¼›æœ€å°å€¼æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œmax_bå‡å»å®ƒæ˜¯ä¸€ä¸ªå€™é€‰ç»“æœã€‚ç„¶åæ›´æ–°min_aå’Œmax_bã€‚æœ€ç»ˆå³å¯å¾—åˆ°ç»“æœã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxDistance</span><span class="params">(vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&amp; arrays)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> m = arrays.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> min_a = arrays[<span class="number">0</span>][<span class="number">0</span>], max_b = arrays[<span class="number">0</span>].<span class="built_in">back</span>();</span><br><span class="line">        <span class="type">int</span> ans = INT_MIN;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; m; ++i) &#123;</span><br><span class="line">            ans = <span class="built_in">max</span>(<span class="built_in">max</span>(max_b - arrays[i].<span class="built_in">front</span>(), arrays[i].<span class="built_in">back</span>() - min_a), ans);</span><br><span class="line">            min_a = <span class="built_in">min</span>(min_a, arrays[i].<span class="built_in">front</span>());</span><br><span class="line">            max_b = <span class="built_in">max</span>(max_b, arrays[i].<span class="built_in">back</span>());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> max(a, b) ((a) &gt; (b) ? (a) : (b))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> min(a, b) ((a) &gt; (b) ? (b) : (a))</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">maxDistance</span><span class="params">(<span class="type">int</span>** arrays, <span class="type">int</span> arraysSize, <span class="type">int</span>* arraysColSize)</span> &#123;</span><br><span class="line">    <span class="type">int</span> min_a = arrays[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">    <span class="type">int</span> max_b = arrays[<span class="number">0</span>][arraysColSize[<span class="number">0</span>]<span class="number">-1</span>];</span><br><span class="line">    <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; arraysSize; ++i) &#123;</span><br><span class="line">        ans = max(max(max_b - arrays[i][<span class="number">0</span>], arrays[i][arraysColSize[i]<span class="number">-1</span>] - min_a), ans);</span><br><span class="line">        min_a = min(min_a, arrays[i][<span class="number">0</span>]);</span><br><span class="line">        max_b = max(max_b, arrays[i][arraysColSize[i]<span class="number">-1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Leetcode æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode æ¯æ—¥ä¸€é¢˜ </tag>
            
            <tag> æ•°ç»„ </tag>
            
            <tag> è´ªå¿ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode æ¯æ—¥ä¸€é¢˜åä¹ï¼š2080. åŒºé—´å†…æŸ¥è¯¢æ•°å­—çš„é¢‘ç‡</title>
      <link href="/2025/02/18/leetcode19/"/>
      <url>/2025/02/18/leetcode19/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/range-frequency-queries/description/">2080. åŒºé—´å†…æŸ¥è¯¢æ•°å­—çš„é¢‘ç‡</a>ã€‚</p><p>è¯·ä½ è®¾è®¡ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œå®ƒèƒ½æ±‚å‡ºç»™å®šå­æ•°ç»„å†…ä¸€ä¸ªç»™å®šå€¼çš„ é¢‘ç‡ ã€‚</p><p>å­æ•°ç»„ä¸­ä¸€ä¸ªå€¼çš„ é¢‘ç‡ æŒ‡çš„æ˜¯è¿™ä¸ªå­æ•°ç»„ä¸­è¿™ä¸ªå€¼çš„å‡ºç°æ¬¡æ•°ã€‚</p><p>è¯·ä½ å®ç°<code>RangeFreqQuery</code>ç±»ï¼š</p><ul><li>RangeFreqQuery(int[] arr) ç”¨ä¸‹æ ‡ä» 0 å¼€å§‹çš„æ•´æ•°æ•°ç»„ arr æ„é€ ä¸€ä¸ªç±»çš„å®ä¾‹ã€‚</li><li>int query(int left, int right, int value) è¿”å›å­æ•°ç»„ arr[leftâ€¦right] ä¸­ value çš„ é¢‘ç‡ ã€‚</li></ul><p>ä¸€ä¸ª å­æ•°ç»„ æŒ‡çš„æ˜¯æ•°ç»„ä¸­ä¸€æ®µè¿ç»­çš„å…ƒç´ ã€‚arr[leftâ€¦right] æŒ‡çš„æ˜¯ nums ä¸­åŒ…å«ä¸‹æ ‡ left å’Œ right åœ¨å†… çš„ä¸­é—´ä¸€æ®µè¿ç»­å…ƒç´ ã€‚</p><h1>åˆ†æç†è§£</h1><p>ç›®æ ‡æ˜¯å®ç°ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œè¯¥æ•°æ®ç»“æ„èƒ½å¤Ÿåœ¨ç»™å®šä¸€ä¸ªæ•°ç»„çš„æƒ…å†µä¸‹ï¼Œè¿”å›åœ¨æŒ‡å®šä¸‹æ ‡èŒƒå›´å†…ç‰¹å®šå€¼çš„é¢‘ç‡ã€‚æŒ‡å®šä¸‹æ ‡èŒƒå›´è®°ä½œ[left, right]ã€‚</p><h1>åŸºæœ¬æ€è·¯</h1><p>åŸºæœ¬æ€è·¯æ˜¯ä½¿ç”¨å“ˆå¸Œè¡¨å°†æ•°ç»„ä¸­çš„æ•°å€¼ä¸å…¶å‡ºç°çš„ä¸‹æ ‡ä½ç½®å»ºç«‹æ˜ å°„å…³ç³»ï¼Œä¸‹æ ‡ä½ç½®ä½¿ç”¨æ•°ç»„å°±å¯ä»¥å­˜å‚¨ã€‚ç„¶åå†ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œå¹¶ä¸”æ˜¯ä¸¤æ¬¡äºŒåˆ†æŸ¥æ‰¾ï¼š</p><ul><li>ç¬¬ä¸€æ¬¡äºŒåˆ†æŸ¥æ‰¾ç”¨äºæŸ¥æ‰¾ä¸‹æ ‡ä½ç½®æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå¤§äºrightçš„å€¼ã€‚</li><li>ç¬¬äºŒæ¬¡äºŒåˆ†æŸ¥æ‰¾ç”¨äºæŸ¥æ‰¾ä¸‹æ ‡ä½ç½®æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå°äºç­‰äºleftçš„å€¼ã€‚</li></ul><p>äºŒè€…è¿›è¡Œç›¸å‡å³ä¸ºæ‰€æ±‚ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">RangeFreqQuery</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    unordered_map&lt;<span class="type">int</span>, vector&lt;<span class="type">int</span>&gt;&gt; hash;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">RangeFreqQuery</span>(vector&lt;<span class="type">int</span>&gt;&amp; arr) &#123;</span><br><span class="line">        <span class="type">int</span> n = arr.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">            hash[arr[i]].<span class="built_in">emplace_back</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">query</span><span class="params">(<span class="type">int</span> left, <span class="type">int</span> right, <span class="type">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">auto</span> it = hash.<span class="built_in">find</span>(value);</span><br><span class="line">        <span class="keyword">if</span> (it == hash.<span class="built_in">end</span>())</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt;&amp; nums = hash[value];</span><br><span class="line">        <span class="comment">// return ranges::upper_bound(nums, right) - ranges::lower_bound(nums, left);</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">upper_bound</span>(nums, right) - <span class="built_in">lower_bound</span>(nums, left);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">upper_bound</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> left = <span class="number">0</span>, right = nums.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">            <span class="type">int</span> mid = (left + right) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (nums[mid] &gt; value)</span><br><span class="line">                right = mid - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                left = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> left;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">lower_bound</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> left = <span class="number">0</span>, right = nums.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">            <span class="type">int</span> mid = (left + right) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (nums[mid] &gt;= value)</span><br><span class="line">                right = mid - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                left = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> left;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your RangeFreqQuery object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * RangeFreqQuery* obj = new RangeFreqQuery(arr);</span></span><br><span class="line"><span class="comment"> * int param_1 = obj-&gt;query(left,right,value);</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure> <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><p>Cè¯­è¨€å“ˆå¸Œè¡¨åº“çš„ä½¿ç”¨è¯·æŸ¥çœ‹è¿™ç¯‡æ–‡ç« <a href="https://malone-ai.github.io/2025/02/18/c1">Cè¯­è¨€å“ˆå¸Œè¡¨åº“ä½¿ç”¨</a>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Leetcode æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å“ˆå¸Œè¡¨ </tag>
            
            <tag> Leetcode æ¯æ—¥ä¸€é¢˜ </tag>
            
            <tag> äºŒåˆ†æŸ¥æ‰¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cè¯­è¨€å“ˆå¸Œè¡¨åº“ä½¿ç”¨</title>
      <link href="/2025/02/18/c1/"/>
      <url>/2025/02/18/c1/</url>
      
        <content type="html"><![CDATA[<p>å†™ä¸€ç¯‡åšå®¢è®°å½•ä¸€ä¸‹Cè¯­è¨€çš„å“ˆå¸Œè¡¨åº“çš„ä½¿ç”¨ã€‚å“ˆå¸Œè¡¨è¯´ç™½äº†å°±æ˜¯Pythonçš„å­—å…¸ï¼Œæˆ‘è®¤ä¸ºäºŒè€…å‡ ä¹æ— å¼‚ã€‚æœ¬æ–‡ä¸»è¦è®¨è®ºçš„æ˜¯uthashåº“ã€‚</p><h1>ä½¿ç”¨æ­¥éª¤</h1><ol><li>å®‰è£…ä¸åŒ…å«<br>uthashæ˜¯ä¸€ä¸ªå•æ–‡ä»¶å¤´åº“ï¼Œåªéœ€è¦ä¸‹è½½<code>uthash.h</code>åº“å¹¶å°†å…¶åŒ…å«åœ¨é¡¹ç›®ä¸­å³å¯ã€‚</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;uthash.h&quot;</span></span></span><br></pre></td></tr></table></figure><ol start="2"><li>å®šä¹‰ç»“æ„ä½“<br>å®šä¹‰ä¸€ä¸ªç»“æ„ä½“æ¥è¡¨ç¤ºå“ˆå¸Œè¡¨ä¸­çš„å…ƒç´ ï¼Œå¹¶ä¸”ç»“æ„ä½“ä¸­å¿…é¡»åŒ…å«<code>UT_hash_handle</code>ç±»å‹çš„å­—æ®µã€‚</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="type">int</span> key;    <span class="comment">// é”®</span></span><br><span class="line">    <span class="type">int</span> value;  <span class="comment">// å€¼</span></span><br><span class="line">    UT_hash_handle hh; <span class="comment">// å£°æ˜ä¸€ä¸ªUT_hash_handleç±»å‹çš„å˜é‡</span></span><br><span class="line">&#125;Hash;</span><br></pre></td></tr></table></figure><ol start="3"><li>åˆå§‹åŒ–å“ˆå¸Œè¡¨<br>å“ˆå¸Œè¡¨æ˜¯ä¸€ä¸ªæŒ‡å‘Hashç±»å‹çš„æŒ‡é’ˆï¼Œåˆå§‹æ—¶è®¾ä¸º<code>NULL</code>ã€‚</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hash* hash = <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure><ol start="4"><li>æ’å…¥å…ƒç´ <br>ä½¿ç”¨<code>HASH_ADD_INT</code>å®å°†å…ƒç´ æ’å…¥å“ˆå¸Œè¡¨ã€‚</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Hash* item = (Hash*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Hash));</span><br><span class="line">item-&gt;key = key;    <span class="comment">// æ­¤å¤„çš„keyä½ å¯ä»¥ä»»æ„æŒ‡å®š</span></span><br><span class="line">item-&gt;value = value;    <span class="comment">// æ­¤å¤„çš„valueä½ å¯ä»¥ä»»æ„æŒ‡å®š</span></span><br><span class="line">HASH_ADD_INT(hash, key, item);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Cè¯­è¨€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cè¯­è¨€ </tag>
            
            <tag> å“ˆå¸Œè¡¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode æ¯æ—¥ä¸€é¢˜åå…«ï¼š1287. æœ‰åºæ•°ç»„ä¸­å‡ºç°æ¬¡æ•°è¶…è¿‡25%çš„å…ƒç´ </title>
      <link href="/2025/02/17/leetcode18/"/>
      <url>/2025/02/17/leetcode18/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥Leecodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/element-appearing-more-than-25-in-sorted-array/description/">1287. æœ‰åºæ•°ç»„ä¸­å‡ºç°æ¬¡æ•°è¶…è¿‡25%çš„å…ƒç´ </a>ã€‚</p><p>ç»™ä½ ä¸€ä¸ªéé€’å‡çš„ æœ‰åº æ•´æ•°æ•°ç»„ï¼Œå·²çŸ¥è¿™ä¸ªæ•°ç»„ä¸­æ°å¥½æœ‰ä¸€ä¸ªæ•´æ•°ï¼Œå®ƒçš„å‡ºç°æ¬¡æ•°è¶…è¿‡æ•°ç»„å…ƒç´ æ€»æ•°çš„ 25%ã€‚</p><p>è¯·ä½ æ‰¾åˆ°å¹¶è¿”å›è¿™ä¸ªæ•´æ•°</p><h1>åŸºæœ¬æ€è·¯</h1><p>æ•°ç»„æ˜¯<code>éé€’å‡</code>é¡ºåºçš„ï¼Œé‚£å°±å¥½åŠäº†ï¼Œç›´æ¥éå†</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">findSpecialInteger</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; arr)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = arr.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> res = arr[<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> count = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[i] == res) &#123;</span><br><span class="line">                ++count;</span><br><span class="line">                <span class="keyword">if</span> (count &gt;= (n / <span class="number">4</span> + <span class="number">1</span>))</span><br><span class="line">                    <span class="keyword">return</span> arr[i];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                res = arr[i];</span><br><span class="line">                count = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">findSpecialInteger</span><span class="params">(<span class="type">int</span>* arr, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">int</span> res = arr[<span class="number">0</span>];</span><br><span class="line">    <span class="type">int</span> count = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[i] == res) &#123;</span><br><span class="line">            ++count;</span><br><span class="line">            <span class="keyword">if</span> (count &gt;= n / <span class="number">4</span> + <span class="number">1</span>)</span><br><span class="line">                <span class="keyword">return</span> arr[i];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            res = arr[i];</span><br><span class="line">            count = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>å¤æ‚åº¦</h1><p>æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Leetcode æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode æ¯æ—¥ä¸€é¢˜ </tag>
            
            <tag> æ•°ç»„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode æ¯æ—¥ä¸€é¢˜åä¸ƒï¼š1299. å°†æ¯ä¸ªå…ƒç´ æ›¿æ¢ä¸ºå³ä¾§æœ€å¤§å…ƒç´ </title>
      <link href="/2025/02/16/leetcode17/"/>
      <url>/2025/02/16/leetcode17/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥Leecodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/replace-elements-with-greatest-element-on-right-side/description/">1299. å°†æ¯ä¸ªå…ƒç´ æ›¿æ¢ä¸ºå³ä¾§æœ€å¤§å…ƒç´ </a>ã€‚</p><p>ç»™ä½ ä¸€ä¸ªæ•°ç»„ arr ï¼Œè¯·ä½ å°†æ¯ä¸ªå…ƒç´ ç”¨å®ƒå³è¾¹æœ€å¤§çš„å…ƒç´ æ›¿æ¢ï¼Œå¦‚æœæ˜¯æœ€åä¸€ä¸ªå…ƒç´ ï¼Œç”¨ -1 æ›¿æ¢ã€‚</p><p>å®Œæˆæ‰€æœ‰æ›¿æ¢æ“ä½œåï¼Œè¯·ä½ è¿”å›è¿™ä¸ªæ•°ç»„ã€‚</p><h1>åˆ†æç†è§£</h1><p>é¢˜ç›®å¾ˆå¥½ç†è§£ï¼Œæ— éœ€å¤šè¨€ã€‚</p><h1>åŸºæœ¬æ€è·¯</h1><p>ä»æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹å‘å‰éå†ï¼Œç„¶åç»´æŠ¤ä¸€ä¸ªä»å½“å‰å…ƒç´ å¾€åçš„æœ€å¤§å€¼å³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">replaceElements</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; arr)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = arr.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> cur_max = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">            <span class="type">int</span> tmp = arr[i];</span><br><span class="line">            arr[i] = cur_max;</span><br><span class="line">            cur_max = <span class="built_in">max</span>(cur_max, tmp);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> arr;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Note: The returned array must be malloced, assume caller calls free().</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Max(a, b) ((a) &gt; (b) ? (a) : (b))</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span>* <span class="title function_">replaceElements</span><span class="params">(<span class="type">int</span>* arr, <span class="type">int</span> arrSize, <span class="type">int</span>* returnSize)</span> &#123;</span><br><span class="line">    <span class="type">int</span> cur_max = <span class="number">-1</span>;</span><br><span class="line">    *returnSize = arrSize;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = arrSize - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">        <span class="type">int</span> tmp = arr[i];</span><br><span class="line">        arr[i] = cur_max;</span><br><span class="line">        cur_max = Max(cur_max, tmp);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>å¤æ‚åº¦</h1><p>æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Leetcode æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode æ¯æ—¥ä¸€é¢˜ </tag>
            
            <tag> æ•°ç»„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode æ¯æ—¥ä¸€é¢˜åå…­ï¼š1706. çƒä¼šè½ä½•å¤„</title>
      <link href="/2025/02/15/leetcode16/"/>
      <url>/2025/02/15/leetcode16/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥çš„Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/where-will-the-ball-fall/description/">1706. çƒä¼šè½ä½•å¤„</a>ã€‚</p><p>ç”¨ä¸€ä¸ªå¤§å°ä¸º m x n çš„äºŒç»´ç½‘æ ¼ grid è¡¨ç¤ºä¸€ä¸ªç®±å­ã€‚ä½ æœ‰ n é¢—çƒã€‚ç®±å­çš„é¡¶éƒ¨å’Œåº•éƒ¨éƒ½æ˜¯å¼€ç€çš„ã€‚</p><p>ç®±å­ä¸­çš„æ¯ä¸ªå•å…ƒæ ¼éƒ½æœ‰ä¸€ä¸ªå¯¹è§’çº¿æŒ¡æ¿ï¼Œè·¨è¿‡å•å…ƒæ ¼çš„ä¸¤ä¸ªè§’ï¼Œå¯ä»¥å°†çƒå¯¼å‘å·¦ä¾§æˆ–è€…å³ä¾§ã€‚</p><ul><li>å°†çƒå¯¼å‘å³ä¾§çš„æŒ¡æ¿è·¨è¿‡å·¦ä¸Šè§’å’Œå³ä¸‹è§’ï¼Œåœ¨ç½‘æ ¼ä¸­ç”¨ 1 è¡¨ç¤ºã€‚</li><li>å°†çƒå¯¼å‘å·¦ä¾§çš„æŒ¡æ¿è·¨è¿‡å³ä¸Šè§’å’Œå·¦ä¸‹è§’ï¼Œåœ¨ç½‘æ ¼ä¸­ç”¨ -1 è¡¨ç¤ºã€‚</li></ul><p>åœ¨ç®±å­æ¯ä¸€åˆ—çš„é¡¶ç«¯å„æ”¾ä¸€é¢—çƒã€‚æ¯é¢—çƒéƒ½å¯èƒ½å¡åœ¨ç®±å­é‡Œæˆ–ä»åº•éƒ¨æ‰å‡ºæ¥ã€‚å¦‚æœçƒæ°å¥½å¡åœ¨ä¸¤å—æŒ¡æ¿ä¹‹é—´çš„ â€œVâ€ å½¢å›¾æ¡ˆï¼Œæˆ–è€…è¢«ä¸€å—æŒ¡å¯¼å‘åˆ°ç®±å­çš„ä»»æ„ä¸€ä¾§è¾¹ä¸Šï¼Œå°±ä¼šå¡ä½ã€‚</p><p>è¿”å›ä¸€ä¸ªå¤§å°ä¸º n çš„æ•°ç»„ answer ï¼Œå…¶ä¸­ answer[i] æ˜¯çƒæ”¾åœ¨é¡¶éƒ¨çš„ç¬¬ i åˆ—åä»åº•éƒ¨æ‰å‡ºæ¥çš„é‚£ä¸€åˆ—å¯¹åº”çš„ä¸‹æ ‡ï¼Œå¦‚æœçƒå¡åœ¨ç›’å­é‡Œï¼Œåˆ™è¿”å› -1 ã€‚</p><h1>åˆ†æç†è§£</h1><p>ç»™äº†ä¸€ä¸ªçŸ©é˜µï¼ŒçŸ©é˜µä¸­æ¯ä¸ªå…ƒç´ è¦ä¹ˆä¸º1è¦ä¹ˆä¸º-1ï¼Œä¸º1ä»£è¡¨æŒ¡æ¿è¿æ¥å·¦ä¸Šè§’å’Œå³ä¸‹è§’ï¼›ä¸º-1ä»£è¡¨æŒ¡æ¿è¿æ¥å³ä¸Šè§’å’Œå·¦ä¸‹è§’ã€‚ç„¶åä»æœ€ä¸Šå±‚å‡ºå‘çš„æ¯ä¸ªå°çƒæœ€ç»ˆè½ç‚¹çš„ä½ç½®ï¼Œä½¿ç”¨ä¸‹æ ‡è¡¨ç¤ºï¼Œå…¶ä¸­å¦‚æœå°çƒä¸èƒ½è¾¾åˆ°åº•éƒ¨å°±è¿”å›-1ã€‚</p><h1>åŸºæœ¬æ€è·¯</h1><p>çœ‹åˆ°é¢˜ç›®æ˜¯ä¸€è„¸æ‡µé€¼ï¼Œç›´æ¥çœ‹çµèŒ¶å±±è‰¾åºœçš„è§£é¢˜æ€è·¯ï¼Œä¸€çœ‹å¤§å®¶åŸºæœ¬ä¸Šéƒ½æ˜¯çµèŒ¶å±±è‰¾åºœçš„æ€è·¯ï¼ˆdogeï¼‰ã€‚</p><p>ä»–çš„æ€è·¯æ˜¯ï¼Œä»åˆ—å¼€å§‹éå†ï¼Œä¸€åˆ—ä¸€åˆ—åœ°éå†ã€‚è€Œåœ¨å¯¹æ¯åˆ—çš„éå†ä¸­ï¼Œè¿›è¡Œé€è¡Œéå†ã€‚å¼€å§‹è¡Œéå†ä¹‹å‰ï¼Œè®°å½•ä¸‹å½“å‰éå†çš„åˆ—å·ï¼Œç„¶åè¿›å…¥è¡Œéå†ï¼Œåœ¨åˆ—å·ä¸ŠåŠ ä¸Šå½“å‰ä½ç½®æ‰€å¯¹åº”ä½ç½®çš„å€¼ï¼Œç›¸å½“äºå·¦å³ç§»åŠ¨ã€‚ç„¶åæ¯æ¬¡è®°å½•è¿›è¡ŒåŠ æ³•åçš„åˆ—å·æ˜¯å¦å°äº0æˆ–è€…å¤§äºåˆ—å°ºå¯¸æœ€å¤§å€¼ï¼ˆæ­¤æ—¶å‡ºç•Œï¼Œå¯¹åº”äºå¡åœ¨è¾¹ç•Œï¼‰ï¼Œæ˜¯å¦æ­¤æ—¶çš„åˆ—å·æ‰€å¯¹åº”çš„çŸ©é˜µå…ƒç´ å€¼æ˜¯å¦ä¸ä¸Šä¸€æ¬¡åˆ—å·æ‰€å¯¹åº”çš„çŸ©é˜µå…ƒç´ å€¼ç›¸ç­‰ï¼ˆæ­¤æ—¶å¦‚æœä¸ç›¸ç­‰ï¼Œåˆ™å½¢æˆäº†â€œVâ€å½¢ï¼‰ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">findBall</span><span class="params">(vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&amp; grid)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = grid[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">res</span><span class="params">(n)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; ++j) &#123;</span><br><span class="line">            <span class="type">int</span> cur = j;</span><br><span class="line">            <span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt; &amp;row: grid) &#123;</span><br><span class="line">                <span class="type">int</span> d = row[cur];</span><br><span class="line">                cur += d;</span><br><span class="line">                <span class="keyword">if</span> (cur &lt; <span class="number">0</span> || cur &gt;= n || row[cur] != d) &#123;</span><br><span class="line">                    cur = <span class="number">-1</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            res[j] = cur;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Note: The returned array must be malloced, assume caller calls free().</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">int</span>* <span class="title function_">findBall</span><span class="params">(<span class="type">int</span>** grid, <span class="type">int</span> gridSize, <span class="type">int</span>* gridColSize, <span class="type">int</span>* returnSize)</span></span><br><span class="line">&#123;</span><br><span class="line">    *returnSize = *gridColSize;</span><br><span class="line">    <span class="type">int</span>* res = (<span class="type">int</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">int</span>) * (*returnSize));</span><br><span class="line">    <span class="type">int</span>* p = res;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; *gridColSize; ++j) &#123;</span><br><span class="line">        <span class="type">int</span> cur = j;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; gridSize; ++i) &#123;</span><br><span class="line">            <span class="type">int</span> d = grid[i][cur];</span><br><span class="line">            cur += d;</span><br><span class="line">            <span class="keyword">if</span> (cur &lt; <span class="number">0</span> || cur &gt;= *gridColSize || grid[i][cur] != d) &#123;</span><br><span class="line">                cur = <span class="number">-1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        *p = cur;</span><br><span class="line">        ++p;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>å¤æ‚åº¦</h1><p>æ—¶é—´å¤æ‚åº¦ä¸ºO(<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>n</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">n^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">n</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>)ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Leetcode æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode æ¯æ—¥ä¸€é¢˜ </tag>
            
            <tag> æ•°ç»„ </tag>
            
            <tag> çŸ©é˜µ </tag>
            
            <tag> æ¨¡æ‹Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode æ¯æ—¥ä¸€é¢˜åäº”ï¼š1552. ä¸¤çƒä¹‹é—´çš„ç£åŠ›</title>
      <link href="/2025/02/14/leetcode15/"/>
      <url>/2025/02/14/leetcode15/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥Leetcode æ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/magnetic-force-between-two-balls/description/">1552. ä¸¤çƒä¹‹é—´çš„ç£åŠ›</a>ï¼š</p><p>åœ¨ä»£å·ä¸º C-137 çš„åœ°çƒä¸Šï¼ŒRick å‘ç°å¦‚æœä»–å°†ä¸¤ä¸ªçƒæ”¾åœ¨ä»–æ–°å‘æ˜çš„ç¯®å­é‡Œï¼Œå®ƒä»¬ä¹‹é—´ä¼šå½¢æˆç‰¹æ®Šå½¢å¼çš„ç£åŠ›ã€‚Rick æœ‰ n ä¸ªç©ºçš„ç¯®å­ï¼Œç¬¬ i ä¸ªç¯®å­çš„ä½ç½®åœ¨ position[i] ï¼ŒMorty æƒ³æŠŠ m ä¸ªçƒæ”¾åˆ°è¿™äº›ç¯®å­é‡Œï¼Œä½¿å¾—ä»»æ„ä¸¤çƒé—´ æœ€å°ç£åŠ› æœ€å¤§ã€‚</p><p>å·²çŸ¥ä¸¤ä¸ªçƒå¦‚æœåˆ†åˆ«ä½äº x å’Œ y ï¼Œé‚£ä¹ˆå®ƒä»¬ä¹‹é—´çš„ç£åŠ›ä¸º |x - y| ã€‚</p><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ position å’Œä¸€ä¸ªæ•´æ•° m ï¼Œè¯·ä½ è¿”å›æœ€å¤§åŒ–çš„æœ€å°ç£åŠ›ã€‚</p><h1>åˆ†æç†è§£</h1><p>positionæ•°ç»„çš„æ¯ä¸ªå…ƒç´ position[i]ä»£è¡¨ä¸€ä¸ªä½ç½®ï¼Œç„¶åä»ä¸­æŒ‘é€‰å‡ºmä¸ªä½ç½®ï¼Œæ±‚å¾—è¿™mä¸ªä½ç½®ä¹‹é—´çš„è·ç¦»çš„ç»å¯¹å€¼ï¼ˆè¿™ä¸ªç»å¯¹å€¼å³ç£åŠ›å€¼ï¼‰ä¸­çš„æœ€å°å€¼ï¼Œå¹¶ä¸”è¿˜è¦ä½¿è¿™ä¸ªæœ€å°å€¼æœ€å¤§ã€‚</p><h1>åŸºæœ¬æ€è·¯</h1><p>è¿™é“é¢˜å‘ˆç°å‡ºæ˜æ˜¾çš„<code>å•è°ƒæ€§</code>ï¼š</p><ul><li>å¦‚æœæˆ‘ä»¬èƒ½æ‰¾åˆ°ä¸€ä¸ªç£åŠ›å€¼dï¼Œä½¿å¾—å¯ä»¥æ”¾ç½®mä¸ªçƒï¼Œé‚£ä¹ˆæ‰€æœ‰æ¯”då°çš„å€¼ä¹Ÿä¸€å®šå¯ä»¥æ»¡è¶³æ¡ä»¶ã€‚å› ä¸ºå¦‚æœdå¯ä»¥ï¼Œé‚£ä¹ˆæ›´å°çš„dæ›´å®¹æ˜“æ»¡è¶³ã€‚</li><li>å¦‚æœdä¸èƒ½æ»¡è¶³æ¡ä»¶ï¼Œé‚£ä¹ˆæ‰€æœ‰æ¯”då¤§çš„å€¼ä¹Ÿä¸€å®šä¸èƒ½æ»¡è¶³æ¡ä»¶ã€‚å› ä¸ºå¦‚æœdä¸å¯ä»¥ï¼Œé‚£ä¹ˆæ›´å¤§çš„å€¼åªä¼šæ›´éš¾æ»¡è¶³ã€‚</li></ul><p>å› æ­¤æ­¤é¢˜ç›®æœ‰æ˜æ˜¾çš„å•è°ƒæ€§ï¼Œè€ƒè™‘<code>äºŒåˆ†æŸ¥æ‰¾</code>ã€‚ä½¿ç”¨äºŒåˆ†æ³•éå†dçš„å¯èƒ½å€¼ï¼Œå¹¶ä¸”ä¸æ–­æ£€æŸ¥å½“å‰çš„då€¼æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œæ»¡è¶³å°±å°è¯•æ›´å¤§çš„dï¼Œä¸æ»¡è¶³å°±å°è¯•æ›´å°çš„då€¼ã€‚dçš„éå†åŒºé—´ä¸ºpositionä¸­çš„ä¸¤ä¸¤å…ƒç´ ä¹‹é—´çš„æœ€å°å€¼mä¸æœ€å¤§å€¼Mç»„æˆçš„åŒºé—´[m, M]ã€‚positionæ•°ç»„æ˜¯æœªç»æ’åºçš„ï¼Œç»è¿‡æ’åºåå¾ˆå®¹æ˜“æ±‚å¾—Mä¸ºæœ€åä¸€ä¸ªå…ƒç´ å‡å»ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œè€Œmä¸å®¹æ˜“æ±‚å¾—ã€‚ä½†æ˜¯æˆ‘ä»¬æ³¨æ„åˆ°æœ‰æ¡ä»¶1â‰¤position[i]â‰¤10^9ï¼Œå› æ­¤å¯ä»¥å¾—åˆ°mçš„ä¸‹ç•Œä¸º1ã€‚</p><p>ç°åœ¨åªéœ€è¦ç¡®å®šæ£€æŸ¥å½“å‰då€¼æ˜¯å¦æ»¡è¶³æ¡ä»¶çš„é€»è¾‘å°±å¯ä»¥äº†ã€‚åŸºæœ¬æƒ³æ³•æ˜¯è®¾ç½®ä¸€ä¸ªpreä»£è¡¨ä¸Šä¸€ä¸ªæ”¾å°çƒçš„ä½ç½®ï¼Œåˆå§‹åŒ–ä¸ºposition[0]ï¼Œå¹¶è®¾å®šä¸€ä¸ªè®¡æ•°å™¨count=1ï¼Œç„¶åä»position[1]å¼€å§‹é€æ¸å‘åéå†ï¼Œæ¯å½“position[i]-preçš„å€¼â‰¥dæ—¶ï¼Œå°±ä½¿è®¡æ•°å™¨è‡ªå¢ï¼Œå¹¶ä¿®æ­£preä¸ºposition[i]å³å¯</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxDistance</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; position, <span class="type">int</span> m)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = position.<span class="built_in">size</span>();</span><br><span class="line">        <span class="built_in">sort</span>(position.<span class="built_in">begin</span>(), position.<span class="built_in">end</span>());</span><br><span class="line">        <span class="type">int</span> left = <span class="number">1</span>, right = position.<span class="built_in">back</span>() - position[<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">            <span class="type">int</span> mid = (left + right) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">check</span>(mid, position, m)) &#123;</span><br><span class="line">                left = mid + <span class="number">1</span>;</span><br><span class="line">                res = mid;</span><br><span class="line">            &#125;<span class="keyword">else</span></span><br><span class="line">                right = mid - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> right;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(<span class="type">int</span> d, <span class="type">const</span> vector&lt;<span class="type">int</span>&gt;&amp; pos, <span class="type">int</span> m)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="type">int</span> count = <span class="number">1</span>; <span class="comment">// ç¬¬ä¸€ä¸ªçƒå·²æ”¾ç½®</span></span><br><span class="line">        <span class="type">int</span> prev = pos[<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> n = pos.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (pos[i] - prev &gt;= d) &#123;</span><br><span class="line">                ++count;</span><br><span class="line">                prev = pos[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count &gt;= m ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// typedef enum &#123;</span></span><br><span class="line"><span class="comment">//     false, </span></span><br><span class="line"><span class="comment">//     true</span></span><br><span class="line"><span class="comment">// &#125;bool;</span></span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="title function_">check</span><span class="params">(<span class="type">int</span> d, <span class="type">int</span> *pos, <span class="type">int</span> n, <span class="type">int</span> m)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> count = <span class="number">1</span>; <span class="comment">// ç¬¬ä¸€ä¸ªçƒå·²æ”¾ç½®</span></span><br><span class="line">    <span class="type">int</span> pre = pos[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (pos[i] - pre &gt;= d) &#123;</span><br><span class="line">            ++count;</span><br><span class="line">            pre = pos[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count &gt;= m ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">cmpFunc</span><span class="params">(<span class="type">const</span> <span class="type">void</span> *a, <span class="type">const</span> <span class="type">void</span> *b)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> *(<span class="type">int</span> *)a - *(<span class="type">int</span> *)b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">maxDistance</span><span class="params">(<span class="type">int</span>* pos, <span class="type">int</span> n, <span class="type">int</span> m)</span></span><br><span class="line">&#123;</span><br><span class="line">    qsort(pos, n, <span class="keyword">sizeof</span>(*pos), cmpFunc);</span><br><span class="line">    <span class="type">int</span> left = <span class="number">1</span>, right = pos[n<span class="number">-1</span>] - pos[<span class="number">0</span>];</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">        <span class="type">int</span> mid = (left + right) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (check(mid, pos, n, m)) &#123;</span><br><span class="line">            res = mid;</span><br><span class="line">            left = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span></span><br><span class="line">            right = mid - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>å¤æ‚åº¦åˆ†æ</h1><h1>æ—¶é—´å¤æ‚åº¦</h1><p>é¦–å…ˆå¿«æ’çš„å¤æ‚åº¦ä¸ºO(n log n)ï¼Œç„¶åäºŒåˆ†æŸ¥æ‰¾çš„å¤æ‚åº¦ä¸ºO(log M)ï¼ˆMä¸ºpositionæ•°ç»„ä¸­ä»»æ„ä¸¤ä¸¤å…ƒç´ å·®çš„ç»å¯¹å€¼ä¸­çš„æœ€å¤§å€¼ï¼Œcheckå‡½æ•°çš„å¤æ‚åº¦ä¸ºO(n)ï¼Œæ€»ä½“å¤æ‚åº¦ä¸ºO(n log n + n log M)ã€‚</p><h1>ç©ºé—´å¤æ‚åº¦</h1><p>ä½¿ç”¨å¸¸æ•°ä¸ªå˜é‡ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Leetcode æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode æ¯æ—¥ä¸€é¢˜ </tag>
            
            <tag> äºŒåˆ†æŸ¥æ‰¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode æ¯æ—¥ä¸€é¢˜åå››ï¼š1742. ç›’å­ä¸­å°çƒçš„æœ€å¤§æ•°é‡</title>
      <link href="/2025/02/13/leetcode14/"/>
      <url>/2025/02/13/leetcode14/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥çš„Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/maximum-number-of-balls-in-a-box/description/">1742. ç›’å­ä¸­å°çƒçš„æœ€å¤§æ•°é‡</a>ã€‚</p><p>ä½ åœ¨ä¸€å®¶ç”Ÿäº§å°çƒçš„ç©å…·å‚å·¥ä½œï¼Œæœ‰ n ä¸ªå°çƒï¼Œç¼–å·ä» lowLimit å¼€å§‹ï¼Œåˆ° highLimit ç»“æŸï¼ˆåŒ…æ‹¬ lowLimit å’Œ highLimit ï¼Œå³ n == highLimit - lowLimit + 1ï¼‰ã€‚å¦æœ‰æ— é™æ•°é‡çš„ç›’å­ï¼Œç¼–å·ä» 1 åˆ° infinity ã€‚</p><p>ä½ çš„å·¥ä½œæ˜¯å°†æ¯ä¸ªå°çƒæ”¾å…¥ç›’å­ä¸­ï¼Œå…¶ä¸­ç›’å­çš„ç¼–å·åº”å½“ç­‰äºå°çƒç¼–å·ä¸Šæ¯ä½æ•°å­—çš„å’Œã€‚ä¾‹å¦‚ï¼Œç¼–å· 321 çš„å°çƒåº”å½“æ”¾å…¥ç¼–å· 3 + 2 + 1 = 6 çš„ç›’å­ï¼Œè€Œç¼–å· 10 çš„å°çƒåº”å½“æ”¾å…¥ç¼–å· 1 + 0 = 1 çš„ç›’å­ã€‚</p><p>ç»™ä½ ä¸¤ä¸ªæ•´æ•° lowLimit å’Œ highLimit ï¼Œè¿”å›æ”¾æœ‰æœ€å¤šå°çƒçš„ç›’å­ä¸­çš„å°çƒæ•°é‡ã€‚å¦‚æœæœ‰å¤šä¸ªç›’å­éƒ½æ»¡è¶³æ”¾æœ‰æœ€å¤šå°çƒï¼Œåªéœ€è¿”å›å…¶ä¸­ä»»ä¸€ç›’å­çš„å°çƒæ•°é‡ã€‚</p><h1>æ€è·¯åˆ†æ</h1><p>éå†[lowLimit, highLimit]ï¼Œå¹¶ä¸”è®¡ç®—æ¯ä½æ•°å­—ä¹‹å’Œï¼Œç„¶åè®°å½•åˆ°å“ˆå¸Œè¡¨ä¸­ï¼Œè¿”å›æœ€å¤§çš„ä¸€ä¸ªï¼Œè¿™æ˜¯æˆ‘çš„ç¬¬ä¸€æƒ³æ³•ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">countBalls</span><span class="params">(<span class="type">int</span> lowLimit, <span class="type">int</span> highLimit)</span> </span>&#123;</span><br><span class="line">        unordered_map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; hash;</span><br><span class="line">        <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = lowLimit; i &lt;= highLimit; ++i) &#123;</span><br><span class="line">            <span class="type">int</span> cur = <span class="built_in">bitSum</span>(i);</span><br><span class="line">            hash[cur]++;</span><br><span class="line">            <span class="keyword">if</span> (hash[cur] &gt; res)</span><br><span class="line">                res = hash[cur];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">bitSum</span><span class="params">(<span class="type">int</span> num)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (num != <span class="number">0</span>) &#123;</span><br><span class="line">            res += num % <span class="number">10</span>;</span><br><span class="line">            num /= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>çµèŒ¶å±±è‰¾åºœçš„è§£æ³•</h1><p>ä¸‹åˆçš„æ—¶å€™çœ‹è§äº†çµç¥å†™çš„é¢˜è§£ï¼Œçµç¥å°±æ˜¯çµç¥ï¼Œç›´æ¥ç»™å‡ºäº†ä¸‰ç§æ–¹æ³•ï¼š</p><ol><li>æš´åŠ›æšä¸¾</li><li>å‰ç¼€å’Œ</li><li>æ•°ä½DP</li></ol><h2 id="æš´åŠ›æšä¸¾">æš´åŠ›æšä¸¾</h2><p>æš´åŠ›æšä¸¾çš„æ€è·¯å’Œæˆ‘ç›¸åŒï¼Œä½†çµç¥æ›´ç‰›çš„æ˜¯ä½¿ç”¨äº†ä¸€ä¸ªæ•°ç»„æ¥å­˜å‚¨å„ä¸ªæ•°ä½å’Œçš„ä¸ªæ•°ï¼Œä»–æ³¨æ„åˆ°äº†æ¡ä»¶1 &lt;= lowLimit &lt;= highLimit &lt;= <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>5</mn></msup></mrow><annotation encoding="application/x-tex">10^5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">1</span><span class="mord"><span class="mord mathrm">0</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">5</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ï¼Œæ•°ä½å’Œæœ€å¤§å€¼ä¸ºæ•°å­—99999è®¡ç®—æ‰€å¾—çš„45ï¼Œæœ€å°ä¸º1ï¼Œç›´æ¥ç”¨ç»„å­˜å‚¨ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">countBalls</span><span class="params">(<span class="type">int</span> lowLimit, <span class="type">int</span> highLimit)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> cnt[<span class="number">46</span>]&#123;&#125;; <span class="comment">// 99999 çš„æ•°ä½å’Œ = 45</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = lowLimit; i &lt;= highLimit; i++) &#123;</span><br><span class="line">            <span class="type">int</span> s = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> x = i; x &gt; <span class="number">0</span>; x /= <span class="number">10</span>) &#123;</span><br><span class="line">                s += x % <span class="number">10</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            cnt[s]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ranges::<span class="built_in">max</span>(cnt);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ä½œè€…ï¼šçµèŒ¶å±±è‰¾åºœ</span><br><span class="line">é“¾æ¥ï¼šhttps:<span class="comment">//leetcode.cn/problems/maximum-number-of-balls-in-a-box/solutions/3073112/san-chong-fang-fa-bao-li-mei-ju-qian-zhu-kze9/</span></span><br><span class="line">æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰</span><br><span class="line">è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</span><br></pre></td></tr></table></figure><h2 id="å‰ç¼€å’Œ">å‰ç¼€å’Œ</h2><h2 id="æ•°ä½DP">æ•°ä½DP</h2>]]></content>
      
      
      <categories>
          
          <category> Leetcode æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
            <tag> å“ˆå¸Œè¡¨ </tag>
            
            <tag> Leetcode æ¯æ—¥ä¸€é¢˜ </tag>
            
            <tag> æš´åŠ› </tag>
            
            <tag> æšä¸¾ </tag>
            
            <tag> è®°å¿†åŒ–æœç´¢ </tag>
            
            <tag> å‰ç¼€å’Œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode æ¯æ—¥ä¸€é¢˜åä¸‰ï¼š1760. è¢‹å­é‡Œæœ€å°‘æ•°ç›®çš„çƒ</title>
      <link href="/2025/02/12/leetcode13/"/>
      <url>/2025/02/12/leetcode13/</url>
      
        <content type="html"><![CDATA[<p>è¿™é‡Œæƒ³è°ˆè°ˆä¹‹å‰å†™Leetcode æ¯æ—¥ä¸€é¢˜æ–‡ç« çš„é¡ºåºï¼Œæˆ‘åŸºæœ¬ä¸Šæ˜¯å…ˆæŠŠä»£ç æ”¾ä¸Šå»ï¼Œç„¶åå°†ä»£ç è¿›è¡Œè¯¦ç»†è®²è§£ã€‚æ„Ÿè§‰è¿™ç§æ–¹æ³•ä¸åˆé€‚ï¼Œå› ä¸ºæ˜¯å…ˆæœ‰æ€è·¯ç„¶åæœ‰ä»£ç ã€‚å…ˆä»£ç åæ€è·¯æ˜¾ç„¶æ˜¯æœ¬æœ«å€’ç½®äº†ï¼Œè¿™ä¸€ç‚¹è¦æ”¹æ”¹ã€‚</p><p>ä»Šæ—¥çš„Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/minimum-limit-of-balls-in-a-bag/description/">1760. è¢‹å­é‡Œæœ€å°‘æ•°ç›®çš„çƒ</a>ã€‚</p><h1>åˆ†æç†è§£</h1><p>è¯¥é¢˜ç»™å®šä¸€ä¸ªæ•°ç»„numsï¼Œå…¶ä¸­çš„æ¯ä¸ªå…ƒç´ nums[i]ä»£è¡¨ç¬¬iä¸ªè¢‹å­ä¸­æœ‰å‡ ä¸ªå°çƒã€‚è¿˜ç»™å®šäº†ä¸€ä¸ªæ•°maxOperationså³æœ€å¤§æ“ä½œæ•°ã€‚æ¥ä¸‹æ¥è¦å¯¹numsè¿›è¡Œæ“ä½œï¼Œæ¯æ¬¡æ“ä½œå¯ä»¥å°†ç¬¬iä¸ªè¢‹å­ä¸­çš„å°çƒæ‹†åˆ†åˆ°ä¸¤ä¸ªè¢‹å­é‡Œã€‚æ€»å…±è¿›è¡Œçš„æ“ä½œæ•°ä¸èƒ½è¶…è¿‡maxOperationsï¼Œæœ€åè¦ä½¿å¾—è¿›è¡Œä¸è¶…è¿‡maxOperationsæ¬¡çš„æ“ä½œåï¼Œä½¿å¾—numsæ•°ç»„ä¸­çš„æœ€å¤§å€¼æœ€å°ï¼ˆèŠ±äº†ä¸€ç‚¹æ—¶é—´æ‰ç†è§£dogeï¼‰ã€‚</p><h1>æ€è·¯åˆ†æ</h1><p>è¿™é“é¢˜çš„ä¸€ä¸ªå…³é”®ç‚¹æ˜¯å¯»æ‰¾ä¸€ä¸ªæœ€å°çš„â€œæœ€å¤§å€¼â€ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æ‰¾åˆ°çš„æœ€å¤§å€¼midï¼Œä½¿å¾—åœ¨è¿›è¡Œä¸è¶…è¿‡maxOperationsæ¬¡æ“ä½œåï¼Œæ‰€æœ‰è¢‹å­ä¸­çš„å°çƒæ•°éƒ½ä¸è¶…è¿‡midå³numsä¸­æ¯ä¸ªå…ƒç´ numéƒ½æ»¡è¶³num &lt;= midã€‚å› ä¸ºå½“midå¯èƒ½æ—¶ï¼Œæ¯”midæ›´å¤§çš„æ•°ä¹Ÿä¸€å®šå¯è¡Œã€‚æ¯”å¦‚å½“mid=3å¯è¡Œæ—¶ï¼Œmid=4æˆ–è€…mid=5ç­‰æ›´å¤§çš„æ•´æ•°ä¹Ÿä¸€å®šå¯è¡Œï¼Œå› ä¸ºå…è®¸çš„æœ€å¤§å€¼å˜å¤§äº†ï¼Œæ“ä½œæ¬¡æ•°ä¼šæ›´å°‘æˆ–è€…ä¸å˜ã€‚å½“midä¸å¯è¡Œæ—¶ï¼Œæ¯”midæ›´å°çš„æ•°ä¸€å®šä¸å¯è¡Œï¼Œå› ä¸ºå…è®¸çš„æœ€å¤§å€¼å˜å°äº†ï¼Œæ“ä½œæ¬¡æ•°ä¼šæ›´å¤šã€‚æ¯”å¦‚mid=3ä¸å¯è¡Œæ—¶ï¼Œé‚£ä¹ˆmid=2éœ€è¦æ›´å¤šçš„æ“ä½œæ¬¡æ•°ã€‚å› æ­¤æœ¬é¢˜ç›®å­˜åœ¨å•è°ƒæ€§ï¼Œç¬¦åˆäºŒåˆ†æœç´¢çš„åº”ç”¨æ¡ä»¶ã€‚</p><p>é¢˜ç›®ç»™å®šäº†æ¡ä»¶numsä¸­æ‰€æœ‰å…ƒç´ å‡ä¸ºå¤§äºç­‰äº1çš„æ•´æ•°ï¼Œæ‰€ä»¥midçš„ä¸‹ç•Œä¸º1ï¼Œè€Œä¸Šç•Œä¸ºnumsä¸­æœ€å¤§å…ƒç´ çš„å€¼ã€‚å› æ­¤æˆ‘ä»¬é€šè¿‡äºŒåˆ†æœç´¢æ¥éå†[1, M]å°±è¡Œï¼ˆMä¸ºnumsä¸­æœ€å¤§å…ƒç´ ï¼‰ã€‚</p><p>å¦å¤–ä¸€ä¸ªå…³é”®ç‚¹å°±æ˜¯æ‹†åˆ†æ¬¡æ•°çš„å…¬å¼ï¼Œå°±æ˜¯ç»™å®šä¸€ä¸ªnumï¼Œå°†å…¶æ‹†åˆ†åˆ°ä¸å¤§äºmidçš„æ¬¡æ•°å¦‚ä½•è®¡ç®—ã€‚ä¸€å¼€å§‹æˆ‘è®¤ä¸ºå…¶ä¸ºnum // midï¼Œç„¶åå¯¹äºnum=9ï¼Œmid=3ï¼Œå‘ç°9/3=3ï¼Œä½†æ˜¯9æ‹†åˆ†åˆ°ä¸å¤§äº3åªéœ€ä¸¤æ¬¡æ“ä½œï¼š9=6+3=3+3+3ã€‚ã€‚ã€‚</p><p>å¯¹äºä¸€ä¸ªå«æœ‰numä¸ªå°çƒçš„è¢‹å­ï¼Œè¿›è¡Œæ‹†åˆ†ä½¿å¾—æ¯ä¸ªè¢‹å­ä¸­çš„å°çƒæ•°ä¸è¶…è¿‡midï¼Œåˆ™è¢‹å­æ•°ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>âŒˆ</mo><mfrac><mrow><mi>n</mi><mi>u</mi><mi>m</mi></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac><mo>âŒ‰</mo></mrow><annotation encoding="application/x-tex">\lceil \frac{num}{mid} \rceil</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.095em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mopen">âŒˆ</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">âŒ‰</span></span></span></span>ï¼Œè€Œå¯¹åº”çš„æ“ä½œæ¬¡æ•°ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>âŒˆ</mo><mfrac><mrow><mi>n</mi><mi>u</mi><mi>m</mi></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac><mo>âŒ‰</mo><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\lceil \frac{num}{mid} \rceil - 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.095em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mopen">âŒˆ</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">âŒ‰</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span>ã€‚è¿™é‡Œæƒ³æ’å…¥ä¸€ç‚¹å…¶ä»–å†…å®¹ï¼Œä¸Šå–æ•´ä¸ä¸‹å–æ•´ç­‰çš„æ•°å­¦å…¬å¼çš„æ¨å¯¼ï¼Œè¿˜æ˜¯æ”¾åœ¨åé¢å¼„ä¸ªé™„å½•å§ã€‚è€Œç¼–ç¨‹è¯­è¨€ä¸­çš„é™¤æ³•æ“ä½œä¸€èˆ¬æ˜¯ä¸‹å–æ•´é™¤æ³•ï¼Œæ‰€ä»¥è¿˜éœ€è¦è¿›è¡Œè½¬æ¢ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>âŒˆ</mo><mfrac><mrow><mi>n</mi><mi>u</mi><mi>m</mi></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac><mo>âŒ‰</mo><mo>âˆ’</mo><mn>1</mn><mo>=</mo><mo>âŒŠ</mo><mfrac><mrow><mi>n</mi><mi>u</mi><mi>m</mi><mo>âˆ’</mo><mn>1</mn></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac><mo>âŒ‹</mo></mrow><annotation encoding="application/x-tex">\lceil \frac{num}{mid} \rceil - 1 = \lfloor \frac{num - 1}{mid} \rfloor</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.845108em;"></span><span class="strut bottom" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mopen">âŒˆ</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">âŒ‰</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mrel">=</span><span class="mopen">âŒŠ</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">âŒ‹</span></span></span></span>ã€‚å› æ­¤å°†å«æœ‰numä¸ªå°çƒçš„è¢‹å­è¿›è¡Œæ‹†åˆ†ä½¿å¾—æ¯ä¸ªè¢‹å­ä¸­çš„å°çƒä¸è¶…è¿‡midæ‰€éœ€çš„æ“ä½œæ¬¡æ•°ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>n</mi><mi>u</mi><mi>m</mi><mo>âˆ’</mo><mn>1</mn></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{num-1}{mid}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.845108em;"></span><span class="strut bottom" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span>ä¸‹å–æ•´ã€‚</p><p>æ¥ä¸‹æ¥åœ¨åŒºé—´[1, M]éå†midï¼ˆMä¸ºnumsä¸­æœ€å¤§å€¼ï¼‰ï¼Œå…·ä½“æ­¥éª¤ä¸ºï¼š</p><ol><li>åˆå§‹åŒ–å·¦è¾¹ç•Œleft=1ï¼Œæœ‰è¾¹ç•Œright=M</li><li>åœ¨æ¯æ¬¡å¾ªç¯ä¸­ï¼Œmid = <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>âŒŠ</mo><mfrac><mrow><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mo>+</mo><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi></mrow><mrow><mn>2</mn></mrow></mfrac><mo>âŒ‹</mo></mrow><annotation encoding="application/x-tex">\lfloor \frac{left+right}{2} \rfloor</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.9322159999999999em;"></span><span class="strut bottom" style="height:1.277216em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mopen">âŒŠ</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">2</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.44610799999999995em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">h</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">âŒ‹</span></span></span></span>ï¼Œè®¡ç®—æ€»çš„æ“ä½œæ¬¡æ•°æ˜¯å¦â‰¤maxOperations</li><li>å¦‚æœæ»¡è¶³æ¡ä»¶åˆ™å°è¯•æ›´å°çš„midå³right=midï¼Œå¦åˆ™éœ€è¦å¢å¤§midå³left=mid+1</li><li>å½“leftâ‰¥rightæ—¶ï¼Œè¿”å›rightå³å¯</li></ol><p>æŒ‰ç…§ä¸Šè¿°æ­¥éª¤å¯å¾—C++å®ç°ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minimumSize</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> maxOperations)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> left = <span class="number">1</span>, right = *<span class="built_in">max_element</span>(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>());</span><br><span class="line">        <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">            <span class="type">int</span> mid = (left + right) / <span class="number">2</span>;</span><br><span class="line">            <span class="type">int</span> cur = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;num: nums) &#123;</span><br><span class="line">                cur = cur + (num - <span class="number">1</span>) / mid;</span><br><span class="line">                <span class="keyword">if</span> (cur &gt; maxOperations)</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (cur &lt;= maxOperations)</span><br><span class="line">                right = mid;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                left = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> right;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>å¤æ‚åº¦åˆ†æ</h1><h2 id="æ—¶é—´å¤æ‚åº¦">æ—¶é—´å¤æ‚åº¦</h2><p>å¤–å±‚å¾ªç¯æ˜¯äºŒåˆ†æœç´¢ï¼Œå¤æ‚åº¦ä¸ºO(log M)ï¼ˆMä¸ºnumsä¸­çš„æœ€å¤§å€¼ï¼‰ï¼›å†…å±‚å¾ªç¯çš„å¤æ‚åº¦ä¸ºO(n)ï¼ˆnä¸ºnumsä¸­å…ƒç´ ä¸ªæ•°ï¼‰ï¼Œæ€»çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n log M)ã€‚</p><h2 id="ç©ºé—´å¤æ‚åº¦">ç©ºé—´å¤æ‚åº¦</h2><p>ä½¿ç”¨å¸¸æ•°ä¸ªéå†ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚</p><h1>é™„å½•</h1><h2 id="1-lceil-frac-num-mid-rceil-1-lfloor-frac-num-mid-rfloor-å—">1. $ \lceil \frac{num}{mid} \rceil - 1== \lfloor \frac{num}{mid} \rfloor$ å—</h2><h3 id="æƒ…å†µ-1ï¼š-frac-num-mid-æ˜¯æ•´æ•°">æƒ…å†µ 1ï¼š<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>n</mi><mi>u</mi><mi>m</mi></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{num}{mid}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.695392em;"></span><span class="strut bottom" style="height:1.040392em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span>æ˜¯æ•´æ•°</h3><ul><li>è®¾ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>n</mi><mi>u</mi><mi>m</mi></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac><mo>=</mo><mi>k</mi></mrow><annotation encoding="application/x-tex">\frac{num}{mid} = k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.695392em;"></span><span class="strut bottom" style="height:1.040392em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span>ï¼Œå…¶ä¸­kæ˜¯æ•´æ•°</li><li>ä¸Šå–æ•´åå‡1ï¼š<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>âŒˆ</mo><mi>k</mi><mo>âŒ‰</mo><mo>âˆ’</mo><mn>1</mn><mo>=</mo><mi>k</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\lceil k \rceil - 1 = k -1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">âŒˆ</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">âŒ‰</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span>â€‹</li><li>ä¸‹å–æ•´ï¼š<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>âŒŠ</mo><mi>k</mi><mo>âŒ‹</mo><mo>=</mo><mi>k</mi></mrow><annotation encoding="application/x-tex">\lfloor k \rfloor = k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">âŒŠ</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">âŒ‹</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span>â€‹</li><li>ç»“è®ºä¸ç›¸ç­‰</li></ul><h3 id="æƒ…å†µ-2ï¼š-frac-num-mid-ä¸æ˜¯æ•´æ•°">æƒ…å†µ 2ï¼š<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>n</mi><mi>u</mi><mi>m</mi></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{num}{mid}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.695392em;"></span><span class="strut bottom" style="height:1.040392em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span>ä¸æ˜¯æ•´æ•°</h3><ul><li>è®¾ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>n</mi><mi>u</mi><mi>m</mi></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac><mo>=</mo><mi>k</mi><mo>+</mo><mi>f</mi></mrow><annotation encoding="application/x-tex">\frac{num}{mid} = k + f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.695392em;"></span><span class="strut bottom" style="height:1.040392em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.10764em;">f</span></span></span></span>ï¼Œå…¶ä¸­kæ˜¯æ•´æ•°ï¼Œ0 &lt; f &lt; 1</li><li>ä¸Šå–æ•´åå‡1ï¼š<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>âŒˆ</mo><mi>k</mi><mo>+</mo><mi>f</mi><mo>âŒ‰</mo><mo>âˆ’</mo><mn>1</mn><mo>=</mo><mi>k</mi><mo>+</mo><mn>1</mn><mo>âˆ’</mo><mn>1</mn><mo>=</mo><mi>k</mi></mrow><annotation encoding="application/x-tex">\lceil k + f \rceil - 1 = k + 1 - 1 = k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">âŒˆ</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mclose">âŒ‰</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mbin">+</span><span class="mord mathrm">1</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span>â€‹</li><li>ä¸‹å–æ•´ï¼š<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>âŒŠ</mo><mi>k</mi><mo>+</mo><mi>f</mi><mo>âŒ‹</mo><mo>=</mo><mi>k</mi></mrow><annotation encoding="application/x-tex">\lfloor k + f \rfloor = k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">âŒŠ</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mclose">âŒ‹</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span>â€‹</li><li>ç»“è®ºç›¸ç­‰</li></ul><p>å› æ­¤$ \lceil \frac{num}{mid} \rceil - 1== \lfloor \frac{num}{mid} \rfloor$ä¸æˆç«‹ã€‚</p><h2 id="2-lceil-frac-num-mid-rceil-1-lfloor-frac-num-1-mid-rfloor">2. <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>âŒˆ</mo><mfrac><mrow><mi>n</mi><mi>u</mi><mi>m</mi></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac><mo>âŒ‰</mo><mo>âˆ’</mo><mn>1</mn><mo>=</mo><mo>âŒŠ</mo><mfrac><mrow><mi>n</mi><mi>u</mi><mi>m</mi><mo>âˆ’</mo><mn>1</mn></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac><mo>âŒ‹</mo></mrow><annotation encoding="application/x-tex">\lceil \frac{num}{mid} \rceil - 1= \lfloor \frac{num-1}{mid} \rfloor</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.845108em;"></span><span class="strut bottom" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mopen">âŒˆ</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">âŒ‰</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mrel">=</span><span class="mopen">âŒŠ</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">âŒ‹</span></span></span></span></h2><p>è®¾<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>n</mi><mi>u</mi><mi>m</mi></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac><mo>=</mo><mi>k</mi><mo>+</mo><mi>f</mi></mrow><annotation encoding="application/x-tex">\frac{num}{mid}=k+f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.695392em;"></span><span class="strut bottom" style="height:1.040392em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.10764em;">f</span></span></span></span>ï¼Œå…¶ä¸­kä¸ºæ•´æ•°éƒ¨åˆ†ï¼Œfä¸ºå°æ•°éƒ¨åˆ†ï¼Œ0â‰¤f&lt;1ã€‚</p><ul><li>è‹¥f=0ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>âŒˆ</mo><mfrac><mrow><mi>n</mi><mi>u</mi><mi>m</mi></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac><mo>âŒ‰</mo><mo>=</mo><mo>âŒˆ</mo><mi>k</mi><mo>+</mo><mi>f</mi><mo>âŒ‰</mo><mo>=</mo><mo>âŒˆ</mo><mi>k</mi><mo>âŒ‰</mo><mo>=</mo><mi>k</mi></mrow><annotation encoding="application/x-tex">\lceil \frac{num}{mid} \rceil=\lceil k+f \rceil = \lceil k \rceil = k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.095em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mopen">âŒˆ</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">âŒ‰</span><span class="mrel">=</span><span class="mopen">âŒˆ</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mclose">âŒ‰</span><span class="mrel">=</span><span class="mopen">âŒˆ</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">âŒ‰</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span></li><li>è‹¥f&gt;0ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>âŒˆ</mo><mfrac><mrow><mi>n</mi><mi>u</mi><mi>m</mi></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac><mo>âŒ‰</mo><mo>=</mo><mo>âŒˆ</mo><mi>k</mi><mo>+</mo><mi>f</mi><mo>âŒ‰</mo><mo>=</mo><mi>k</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\lceil \frac{num}{mid} \rceil=\lceil k+f \rceil = k+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.095em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mopen">âŒˆ</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">âŒ‰</span><span class="mrel">=</span><span class="mopen">âŒˆ</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mclose">âŒ‰</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span></li></ul><p>é€šè¿‡å˜å½¢å¯ä»¥ç»Ÿä¸€ä¸Šè¿°ä¸¤ç§æƒ…å†µï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>n</mi><mi>u</mi><mi>m</mi><mo>+</mo><mi>m</mi><mi>i</mi><mi>d</mi><mo>âˆ’</mo><mn>1</mn></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac><mo>=</mo><mi>k</mi><mo>+</mo><mi>f</mi><mo>+</mo><mn>1</mn><mo>âˆ’</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{num+mid-1}{mid}=k+f+1-\frac{1}{mid}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8801079999999999em;"></span><span class="strut bottom" style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mbin">+</span><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mbin">+</span><span class="mord mathrm">1</span><span class="mbin">âˆ’</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></p><ul><li>è‹¥f=0ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>n</mi><mi>u</mi><mi>m</mi><mo>+</mo><mi>m</mi><mi>i</mi><mi>d</mi><mo>âˆ’</mo><mn>1</mn></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac><mo>=</mo><mi>k</mi><mo>+</mo><mi>f</mi><mo>+</mo><mn>1</mn><mo>âˆ’</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac><mo>=</mo><mi>k</mi><mo>+</mo><mn>1</mn><mo>âˆ’</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{num+mid-1}{mid}=k+f+1-\frac{1}{mid}=k+1-\frac{1}{mid}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8801079999999999em;"></span><span class="strut bottom" style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mbin">+</span><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mbin">+</span><span class="mord mathrm">1</span><span class="mbin">âˆ’</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mbin">+</span><span class="mord mathrm">1</span><span class="mbin">âˆ’</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span>ï¼Œä¸‹å–æ•´ä¸ºk</li><li>è‹¥f&gt;0ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>n</mi><mi>u</mi><mi>m</mi><mo>+</mo><mi>m</mi><mi>i</mi><mi>d</mi><mo>âˆ’</mo><mn>1</mn></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac><mo>=</mo><mi>k</mi><mo>+</mo><mi>f</mi><mo>+</mo><mn>1</mn><mo>âˆ’</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac><mo>=</mo><mi>k</mi><mo>+</mo><mi>f</mi><mo>+</mo><mn>1</mn><mo>âˆ’</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{num+mid-1}{mid}=k+f+1-\frac{1}{mid}=k+f+1-\frac{1}{mid}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8801079999999999em;"></span><span class="strut bottom" style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mbin">+</span><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mbin">+</span><span class="mord mathrm">1</span><span class="mbin">âˆ’</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mbin">+</span><span class="mord mathrm">1</span><span class="mbin">âˆ’</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span>ï¼Œä¸‹å–æ•´ä¸ºk+1</li></ul><p>å› æ­¤<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>âŒˆ</mo><mfrac><mrow><mi>n</mi><mi>u</mi><mi>m</mi></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac><mo>âŒ‰</mo><mo>=</mo><mo>âŒŠ</mo><mfrac><mrow><mi>n</mi><mi>u</mi><mi>m</mi><mo>+</mo><mi>m</mi><mi>i</mi><mi>d</mi><mo>âˆ’</mo><mn>1</mn></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac><mo>âŒ‹</mo></mrow><annotation encoding="application/x-tex">\lceil \frac{num}{mid} \rceil = \lfloor\frac{num+mid-1}{mid}\rfloor</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8801079999999999em;"></span><span class="strut bottom" style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mopen">âŒˆ</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">âŒ‰</span><span class="mrel">=</span><span class="mopen">âŒŠ</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mbin">+</span><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">âŒ‹</span></span></span></span>ã€‚ä¸‹å–æ•´å‡½æ•°æœ‰æ€§è´¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>âŒŠ</mo><mi>x</mi><mo>+</mo><mn>1</mn><mo>âŒ‹</mo><mo>=</mo><mo>âŒŠ</mo><mi>x</mi><mo>âŒ‹</mo><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\lfloor x + 1 \rfloor = \lfloor x \rfloor + 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">âŒŠ</span><span class="mord mathit">x</span><span class="mbin">+</span><span class="mord mathrm">1</span><span class="mclose">âŒ‹</span><span class="mrel">=</span><span class="mopen">âŒŠ</span><span class="mord mathit">x</span><span class="mclose">âŒ‹</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span>ï¼Œå› æ­¤<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>âŒŠ</mo><mfrac><mrow><mi>n</mi><mi>u</mi><mi>m</mi><mo>+</mo><mi>m</mi><mi>i</mi><mi>d</mi><mo>âˆ’</mo><mn>1</mn></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac><mo>âŒ‹</mo><mo>=</mo><mo>âŒŠ</mo><mfrac><mrow><mi>n</mi><mi>u</mi><mi>m</mi><mo>âˆ’</mo><mn>1</mn></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac><mo>+</mo><mn>1</mn><mo>âŒ‹</mo><mo>=</mo><mo>âŒŠ</mo><mfrac><mrow><mi>n</mi><mi>u</mi><mi>m</mi><mo>âˆ’</mo><mn>1</mn></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac><mo>âŒ‹</mo><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\lfloor\frac{num+mid-1}{mid}\rfloor=\lfloor\frac{num-1}{mid}+1\rfloor=\lfloor\frac{num-1}{mid}\rfloor+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8801079999999999em;"></span><span class="strut bottom" style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mopen">âŒŠ</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mbin">+</span><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">âŒ‹</span><span class="mrel">=</span><span class="mopen">âŒŠ</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mbin">+</span><span class="mord mathrm">1</span><span class="mclose">âŒ‹</span><span class="mrel">=</span><span class="mopen">âŒŠ</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">âŒ‹</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span>ï¼Œç»§è€Œå¯å¾—<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>âŒˆ</mo><mfrac><mrow><mi>n</mi><mi>u</mi><mi>m</mi></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac><mo>âŒ‰</mo><mo>âˆ’</mo><mn>1</mn><mo>=</mo><mo>âŒŠ</mo><mfrac><mrow><mi>n</mi><mi>u</mi><mi>m</mi><mo>âˆ’</mo><mn>1</mn></mrow><mrow><mi>m</mi><mi>i</mi><mi>d</mi></mrow></mfrac><mo>âŒ‹</mo></mrow><annotation encoding="application/x-tex">\lceil \frac{num}{mid} \rceil - 1= \lfloor\frac{num-1}{mid}\rfloor</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.845108em;"></span><span class="strut bottom" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mopen">âŒˆ</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">âŒ‰</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mrel">=</span><span class="mopen">âŒŠ</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">âŒ‹</span></span></span></span>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Leetcode æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode æ¯æ—¥ä¸€é¢˜ </tag>
            
            <tag> æ•°ç»„ </tag>
            
            <tag> äºŒåˆ†æŸ¥æ‰¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode æ¯æ—¥ä¸€é¢˜åäºŒï¼š913. çŒ«å’Œè€é¼ </title>
      <link href="/2025/02/11/leetcode12/"/>
      <url>/2025/02/11/leetcode12/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥çš„Leetcode æ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/cat-and-mouse/description/">913. çŒ«å’Œè€é¼ </a>ã€‚</p><p>ä¸¤ä½ç©å®¶åˆ†åˆ«æ‰®æ¼”çŒ«å’Œè€é¼ ï¼Œåœ¨ä¸€å¼  æ— å‘ å›¾ä¸Šè¿›è¡Œæ¸¸æˆï¼Œä¸¤äººè½®æµè¡ŒåŠ¨ã€‚</p><p>å›¾çš„å½¢å¼æ˜¯ï¼šgraph[a] æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œç”±æ»¡è¶³ ab æ˜¯å›¾ä¸­çš„ä¸€æ¡è¾¹çš„æ‰€æœ‰èŠ‚ç‚¹ b ç»„æˆã€‚</p><p>è€é¼ ä»èŠ‚ç‚¹ 1 å¼€å§‹ï¼Œç¬¬ä¸€ä¸ªå‡ºå‘ï¼›çŒ«ä»èŠ‚ç‚¹ 2 å¼€å§‹ï¼Œç¬¬äºŒä¸ªå‡ºå‘ã€‚åœ¨èŠ‚ç‚¹ 0 å¤„æœ‰ä¸€ä¸ªæ´ã€‚</p><p>åœ¨æ¯ä¸ªç©å®¶çš„è¡ŒåŠ¨ä¸­ï¼Œä»–ä»¬ å¿…é¡» æ²¿ç€å›¾ä¸­ä¸æ‰€åœ¨å½“å‰ä½ç½®è¿é€šçš„ä¸€æ¡è¾¹ç§»åŠ¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè€é¼ åœ¨èŠ‚ç‚¹ 1 ï¼Œé‚£ä¹ˆå®ƒå¿…é¡»ç§»åŠ¨åˆ° graph[1] ä¸­çš„ä»»ä¸€èŠ‚ç‚¹ã€‚</p><p>æ­¤å¤–ï¼ŒçŒ«æ— æ³•ç§»åŠ¨åˆ°æ´ä¸­ï¼ˆèŠ‚ç‚¹ 0ï¼‰ã€‚</p><p>ç„¶åï¼Œæ¸¸æˆåœ¨å‡ºç°ä»¥ä¸‹ä¸‰ç§æƒ…å½¢ä¹‹ä¸€æ—¶ç»“æŸï¼š</p><ul><li>å¦‚æœçŒ«å’Œè€é¼ å‡ºç°åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ï¼ŒçŒ«è·èƒœã€‚</li><li>å¦‚æœè€é¼ åˆ°è¾¾æ´ä¸­ï¼Œè€é¼ è·èƒœã€‚</li><li>å¦‚æœæŸä¸€ä½ç½®é‡å¤å‡ºç°ï¼ˆå³ï¼Œç©å®¶çš„ä½ç½®å’Œç§»åŠ¨é¡ºåºéƒ½ä¸ä¸Šä¸€æ¬¡è¡ŒåŠ¨ç›¸åŒï¼‰ï¼Œæ¸¸æˆå¹³å±€ã€‚</li></ul><p>ç»™ä½ ä¸€å¼ å›¾ graph ï¼Œå¹¶å‡è®¾ä¸¤ä½ç©å®¶éƒ½éƒ½ä»¥æœ€ä½³çŠ¶æ€å‚ä¸æ¸¸æˆï¼š</p><ul><li>å¦‚æœè€é¼ è·èƒœï¼Œåˆ™è¿”å› 1ï¼›</li><li>å¦‚æœçŒ«è·èƒœï¼Œåˆ™è¿”å› 2ï¼›</li><li>å¦‚æœå¹³å±€ï¼Œåˆ™è¿”å› 0 ã€‚</li></ul><h1>åˆ†æç†è§£</h1><p>è¿™é“é¢˜æ˜¯çœŸæ»´éš¾ï¼Œçœ‹äº†å¥½ä¹…å¥½ä¹…æ‰å¼„æ˜ç™½é‚£ä¹ˆä¸€ç‚¹ï¼Œleetcodeå®˜æ–¹ç»™çš„æ ‡ç­¾ä¹Ÿæ˜¯<code>å›°éš¾</code>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Leetcode æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode æ¯æ—¥ä¸€é¢˜ </tag>
            
            <tag> å›¾ </tag>
            
            <tag> åšå¼ˆ </tag>
            
            <tag> æ‹“æ‰‘æ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode æ¯æ—¥ä¸€é¢˜åï¼š63. ä¸åŒè·¯å¾„ II</title>
      <link href="/2025/02/09/leetcode10/"/>
      <url>/2025/02/09/leetcode10/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/unique-paths-ii/description/">63. ä¸åŒè·¯å¾„ II</a>ã€‚</p><p>ç»™å®šä¸€ä¸ª m x n çš„æ•´æ•°æ•°ç»„ gridã€‚ä¸€ä¸ªæœºå™¨äººåˆå§‹ä½äº å·¦ä¸Šè§’ï¼ˆå³ grid[0][0]ï¼‰ã€‚æœºå™¨äººå°è¯•ç§»åŠ¨åˆ° å³ä¸‹è§’ï¼ˆå³ grid[m - 1][n - 1]ï¼‰ã€‚æœºå™¨äººæ¯æ¬¡åªèƒ½å‘ä¸‹æˆ–è€…å‘å³ç§»åŠ¨ä¸€æ­¥ã€‚</p><p>ç½‘æ ¼ä¸­çš„éšœç¢ç‰©å’Œç©ºä½ç½®åˆ†åˆ«ç”¨ 1 å’Œ 0 æ¥è¡¨ç¤ºã€‚æœºå™¨äººçš„ç§»åŠ¨è·¯å¾„ä¸­ä¸èƒ½åŒ…å« ä»»ä½• æœ‰éšœç¢ç‰©çš„æ–¹æ ¼ã€‚</p><p>è¿”å›æœºå™¨äººèƒ½å¤Ÿåˆ°è¾¾å³ä¸‹è§’çš„ä¸åŒè·¯å¾„æ•°é‡ã€‚</p><p>æµ‹è¯•ç”¨ä¾‹ä¿è¯ç­”æ¡ˆå°äºç­‰äº 2 * 10^9ã€‚</p><p>æç¤ºï¼š</p><ul><li>m == obstacleGrid.length</li><li>n == obstacleGrid[i].length</li><li>1 &lt;= m, n &lt;= 100</li><li>obstacleGrid[i][j] ä¸º 0 æˆ– 1</li></ul><h1>åˆ†æç†è§£</h1><p>æä¾›ä¸€ä¸ªmxnäºŒç»´æ•°ç»„gridï¼Œå…¶ä¸­çš„å…ƒç´ ä¸º1ä»£è¡¨æœ‰éšœç¢ç‰©ï¼Œä¸º0ä»£è¡¨æ— éšœç¢ç‰©ã€‚æœºå™¨äººåˆå§‹ä½äº(0, 0)å¤„ï¼Œç›®çš„åœ°ä¸º(m-1, n-1)ï¼Œéœ€è¦æˆ‘ä»¬æ±‚å‡ºä»(0, 0)åˆ°(m-1, n-1)çš„è·¯å¾„ä¸ªæ•°ã€‚</p><h1>åŸºæœ¬æ€è·¯</h1><p>ä½¿ç”¨åŠ¨æ€è§„åˆ’æ±‚è§£ï¼Œæ±‚è§£ä¸€ä¸ªäºŒç»´çš„dpæ•°ç»„ï¼Œdp[i+1][j+1]æ¥ä»£è¡¨ä»(0, 0)åˆ°(i, j)çš„è·¯å¾„ä¸ªæ•°ã€‚è¿™é‡Œä½¿ç”¨dp[i+1][j+1]è€Œä¸ç”¨dp[i][j]æ˜¯æœ‰åŸå› çš„ï¼Œä¸»è¦æ˜¯è¯¥é¢˜ç›®æœ‰ä¸ªç‰¹æ®Šçš„å‡ ä¸ªç”¨ä¾‹ï¼Œ(0, 0)å¤„ä¸ºéšœç¢ç‰©ï¼Œå¯¼è‡´è§£ä¸º0ã€‚</p><p>åˆå§‹æ—¶å°†dpä¸­æ‰€æœ‰å…ƒç´ å‡è®¾ä¸º0ï¼Œç„¶åå°†dp[0][1]æˆ–è€…dp[1][0]åˆå§‹åŒ–ä¸º1ã€‚è€Œåœ¨æ±‚è§£dp[i+1][j+1]æ—¶dp[i+1][j+1] = dp[i+1][j] + dp[i][j+1]ï¼Œè¿™æ ·å½“i=0æ—¶æ±‚å¾—dp[1][1]=dp[0][1]+dp[1][0]å³ä»(0, 0)åˆ°(0, 0)çš„è·¯å¾„æ¡æ•°ã€‚è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯ä¸ç”¨ç‰¹æ®ŠåŒ–å¤„ç†è¾¹ç•Œï¼Œä¾¿äºæ’°å†™ä»£ç ã€‚æœ€åè¿”å›dp[m][n]å³(0, 0)åˆ°(m-1, n-1)çš„è·¯å¾„æ¡æ•°ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">uniquePathsWithObstacles</span><span class="params">(vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&amp; obstacleGrid)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> m = obstacleGrid.<span class="built_in">size</span>(), n = obstacleGrid[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">dp</span>(m<span class="number">+1</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n<span class="number">+1</span>, <span class="number">0</span>));</span><br><span class="line">        dp[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (obstacleGrid[i][j] == <span class="number">0</span>)</span><br><span class="line">                    dp[i<span class="number">+1</span>][j<span class="number">+1</span>] = dp[i][j<span class="number">+1</span>] + dp[i<span class="number">+1</span>][j];</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    dp[i<span class="number">+1</span>][j<span class="number">+1</span>] = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;   </span><br><span class="line">        <span class="keyword">return</span> dp[m][n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">uniquePathsWithObstacles</span><span class="params">(<span class="type">int</span>** obstacleGrid, <span class="type">int</span> obstacleGridSize, <span class="type">int</span>* obstacleGridColSize)</span> &#123;</span><br><span class="line">    <span class="type">int</span> m = obstacleGridSize, n = *obstacleGridColSize;</span><br><span class="line">    <span class="type">int</span>** dp = (<span class="type">int</span>**)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">int</span> *) * (m+<span class="number">1</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m + <span class="number">1</span>; ++i) &#123;</span><br><span class="line">        dp[i] = (<span class="type">int</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">int</span>) * (n+<span class="number">1</span>));</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; n + <span class="number">1</span>; ++j)</span><br><span class="line">            dp[i][j] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    dp[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (obstacleGrid[i][j] == <span class="number">0</span>)</span><br><span class="line">                dp[i+<span class="number">1</span>][j+<span class="number">1</span>] = dp[i+<span class="number">1</span>][j] + dp[i][j+<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                dp[i+<span class="number">1</span>][j+<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[m][n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>å¤æ‚åº¦</h1><p>æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦å‡ä¸ºO(<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>n</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">n^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">n</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>)ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Leetcode æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
            <tag> Leetcode æ¯æ—¥ä¸€é¢˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode æ¯æ—¥ä¸€é¢˜ä¹ï¼š128. æœ€é•¿è¿ç»­åºåˆ—</title>
      <link href="/2025/02/08/leetcode9/"/>
      <url>/2025/02/08/leetcode9/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥çš„Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/longest-consecutive-sequence/description/">128. æœ€é•¿è¿ç»­åºåˆ—</a>ã€‚</p><h1>åˆ†æç†è§£</h1><p>é¢˜ç›®ç»™ä¸€ä¸ªæœªæ’åºçš„æ•´æ•°æ•°ç»„ï¼Œè¦æ±‚æˆ‘ä»¬æ‰¾å‡ºä¸€ä¸ªæœ€é•¿çš„è¿ç»­çš„å­åºåˆ—ï¼Œå½“ç„¶ä¸éœ€è¦æ±‚è¿™ä¸ªå­åºåˆ—æ˜¯ä»€ä¹ˆï¼Œåªéœ€è¦æ±‚å‡ºä»–çš„é•¿åº¦ã€‚é¢˜ç›®è¦æ±‚ä½¿ç”¨æ—¶é—´å¤æ‚åº¦ä¸ºO(n)çš„ç®—æ³•ã€‚</p><h1>æ€è·¯åˆ†æ</h1><p>ç”±äºé¢˜ç›®è¦æ±‚ä½¿ç”¨æ—¶é—´å¤æ‚åº¦ä¸ºO(n)çš„ç®—æ³•ï¼Œæ•…æ’åºæ˜¯ä¸å¯èƒ½ç”¨çš„äº†ï¼Œå› ä¸ºæ’åºçš„å¤æ‚åº¦æœ€ä½ä¹Ÿä¸ºO(n log n)ã€‚ä½†æ˜¯æäº¤å®Œé¢˜è§£åå‘ç°ï¼Œæœ€å¿«çš„æ–¹æ³•ç«Ÿç„¶æ˜¯æ’åºï¼Œç»™æˆ‘éœ‡æƒŠå‘†ä½äº†ã€‚å¯èƒ½æ˜¯å®˜æ–¹çš„ä¾‹å­æ¯”è¾ƒç‰¹æ®Šç­‰åŸå› å§ã€‚ä¸è¿‡æ¥ç€çœ‹çµç¥ç»™å‡ºçš„å“ˆå¸Œè¡¨çš„æ–¹æ³•ã€‚</p><p>é¦–å…ˆå°†æ•°ç»„ç”¨å“ˆå¸Œè¡¨å»é‡ï¼Œå°†æ•°ç»„è½¬æ¢ä¸ºå“ˆå¸Œé›†åˆå³æ²¡æœ‰é‡å¤å…ƒç´ çš„é›†åˆã€‚ç„¶åå¼€å§‹éå†å“ˆå¸Œé›†åˆã€‚</p><p>éå†çš„æ—¶å€™ï¼Œå¯¹äºæ¯ä¸€ä¸ªå…ƒç´ xï¼š</p><ul><li>å¦‚æœx-1å­˜åœ¨äºå“ˆå¸Œé›†åˆä¸­ï¼Œå°±è·³è¿‡å½“å‰å…ƒç´ ï¼›</li><li>å¦‚æœx-1ä¸å­˜åœ¨ä¸å“ˆå¸Œé›†åˆä¸­ï¼Œå°±å¼€å§‹è®°å½•ä»xå¼€å§‹çš„è¿ç»­å­åºåˆ—çš„é•¿åº¦ã€‚å°±æ˜¯ä¾æ¬¡éå†x+1ã€x+2ã€x+3ï¼Œâ€¦</li></ul><p>x-1å­˜åœ¨äºå“ˆå¸Œé›†åˆæ—¶ï¼Œè·³è¿‡å½“å‰å…ƒç´ æ˜¯å› ä¸ºæœ€é•¿è¿ç»­å­åºåˆ—çš„é•¿åº¦ä¸€å®šä¸ä»xå¼€å§‹ï¼Œå¯èƒ½ä»x-1ã€ä¹Ÿå¯èƒ½ä»x-2å¼€å§‹ï¼Œä½†ä¸ä¼šæ˜¯ä»xå¼€å§‹ã€‚è¿™å°±æ˜¯åŸºæœ¬æ€è·¯äº†ï¼Œç›´æ¥ç»™å‡ºC++ä»£ç ï¼Œä¸‹æ¬¡è¯•è¯•ç”¨Rustï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestConsecutive</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="function">unordered_set&lt;<span class="type">int</span>&gt; <span class="title">hash</span><span class="params">(nums.begin(), nums.end())</span></span>;</span><br><span class="line">        <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;i: hash) &#123;</span><br><span class="line">            <span class="keyword">if</span> (hash.<span class="built_in">count</span>(i<span class="number">-1</span>))</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            hash.<span class="built_in">insert</span>(i);</span><br><span class="line">            <span class="type">int</span> j = i + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span> (hash.<span class="built_in">count</span>(j))</span><br><span class="line">                j++;</span><br><span class="line">            res = <span class="built_in">max</span>(j - i, res);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Leetcode æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å“ˆå¸Œè¡¨ </tag>
            
            <tag> Leetcode æ¯æ—¥ä¸€é¢˜ </tag>
            
            <tag> æ•°ç»„ </tag>
            
            <tag> å¹¶æŸ¥é›† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode æ¯æ—¥ä¸€é¢˜å…«ï¼š59. èºæ—‹çŸ©é˜µ II</title>
      <link href="/2025/02/07/leetcode8/"/>
      <url>/2025/02/07/leetcode8/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/spiral-matrix-ii/description/">59. èºæ—‹çŸ©é˜µ II</a>ã€‚</p><p>æœ¬é¢˜å‚è€ƒå¤§ç¥Krahetsçš„è§£æ³•ï¼Œè¿™ç§è§£æ³•æœ€ä¾¿äºç†è§£ã€‚Krahetsçš„åŸºæœ¬æ€è·¯æ˜¯ä¾æ¬¡å¡«å……ä¸Šè¾¹ç•Œã€å³è¾¹ç•Œã€ä¸‹è¾¹ç•Œå’Œå·¦è¾¹ç•Œï¼Œæ¯æ¬¡å¡«å……å®Œè¾¹ç•Œåï¼Œå¯¹å¡«å……çš„è¾¹ç•Œè¿›è¡Œå‹ç¼©ï¼Œè§ä»£ç ä¸­çš„t++ã€râ€“ã€bâ€“ã€l++ï¼Œç›´åˆ°å¡«å……å®Œæ¯•ä¸ºæ­¢ã€‚ä»¥ä¸‹æ˜¯ä»–çš„Javaä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[][] generateMatrix(<span class="type">int</span> n) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> <span class="number">0</span>, r = n - <span class="number">1</span>, t = <span class="number">0</span>, b = n - <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span>[][] mat = <span class="keyword">new</span> <span class="title class_">int</span>[n][n];</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">1</span>, tar = n * n;</span><br><span class="line">        <span class="keyword">while</span>(num &lt;= tar)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> l; i &lt;= r; i++) mat[t][i] = num++; <span class="comment">// left to right.</span></span><br><span class="line">            t++;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> t; i &lt;= b; i++) mat[i][r] = num++; <span class="comment">// top to bottom.</span></span><br><span class="line">            r--;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> r; i &gt;= l; i--) mat[b][i] = num++; <span class="comment">// right to left.</span></span><br><span class="line">            b--;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> b; i &gt;= t; i--) mat[i][l] = num++; <span class="comment">// bottom to top.</span></span><br><span class="line">            l++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> mat;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ä½œè€…ï¼šKrahets</span><br><span class="line">é“¾æ¥ï¼šhttps:<span class="comment">//leetcode.cn/problems/spiral-matrix-ii/solutions/12594/spiral-matrix-ii-mo-ni-fa-she-ding-bian-jie-qing-x/</span></span><br><span class="line">æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰</span><br><span class="line">è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</span><br></pre></td></tr></table></figure><p>å‚è€ƒå…¶Javaä»£ç ç»™å‡ºC++ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">generateMatrix</span>(<span class="type">int</span> n) &#123;</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">matrix</span>(n, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n));</span><br><span class="line">        <span class="type">int</span> left = <span class="number">0</span>, right = n - <span class="number">1</span>, up = <span class="number">0</span>, down = n - <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> num = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (num &lt;= n * n) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = left; i &lt;= right; i++)</span><br><span class="line">                matrix[up][i] = num++;</span><br><span class="line">            up++;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = up; i &lt;= down; i++)</span><br><span class="line">                matrix[i][right] = num++;</span><br><span class="line">            right--;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = right; i &gt;= left; i--)</span><br><span class="line">                matrix[down][i] = num++;</span><br><span class="line">            down--;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = down; i &gt;= up; i--)</span><br><span class="line">                matrix[i][left] = num++;</span><br><span class="line">            left++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> matrix;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>å¤æ‚åº¦</h1><p>æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦æ˜¾è€Œæ˜“è§ï¼Œä¸ºO(<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>n</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">n^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">n</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>)å’ŒO(1)ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Leetcode æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode æ¯æ—¥ä¸€é¢˜ </tag>
            
            <tag> æ•°ç»„ </tag>
            
            <tag> çŸ©é˜µ </tag>
            
            <tag> æ¨¡æ‹Ÿ </tag>
            
            <tag> å›æº¯ </tag>
            
            <tag> æ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode æ¯æ—¥ä¸€é¢˜ä¸ƒï¼š47. å…¨æ’åˆ— II</title>
      <link href="/2025/02/06/leetcode7/"/>
      <url>/2025/02/06/leetcode7/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/permutations-ii/description/">47. å…¨æ’åˆ— II</a>ã€‚æ‹¿åˆ°è¿™é“é¢˜ä¸€çœ¼å°±æƒ³åˆ°ç®—æ³•è¯¾ä¸Šçš„<code>ç”Ÿæˆæ’åˆ—</code>ï¼Œå½“å³å°±ä½¿ç”¨å›æº¯ç®—æ³•è§£å†³ï¼Œç›´æ¥æäº¤ï¼Œç›´æ¥æŠ¥é”™ã€‚æ²¡æ³¨æ„åˆ°é¢˜ç›®æœ‰æ¡é™åˆ¶æ¡ä»¶â€”â€”å­˜åœ¨é‡å¤å…ƒç´ ã€‚ç”±äºé¢˜ç›®å«åš<code>47. å…¨æ’åˆ— II</code>ï¼Œé‚£æˆ‘ä¼°è®¡è‚¯å®šå­˜åœ¨<code>å…¨æ’åˆ— I</code>çš„é¢˜ç›®ï¼Œæ‰€æœ‰å…ƒç´ å‡ä¸é‡å¤ï¼Œä¸€æ‰¾è¿˜çœŸæœ‰<a href="https://leetcode.cn/problems/permutations/description/">46. å…¨æ’åˆ—</a>ã€‚ç›´æ¥copyä»£ç è¿‡å»ï¼Œæäº¤è¿è¡Œï¼Œç›´æ¥é€šè¿‡ï¼Œçˆ½æ­ªæ­ªã€‚</p><h1>46. å…¨æ’åˆ—</h1><p>å…ˆçœ‹çœ‹ä¸å­˜åœ¨é‡å¤å…ƒç´ çš„<a href="https://leetcode.cn/problems/permutations/description/">46. å…¨æ’åˆ—</a>ï¼Œè¿™é“é¢˜æ›´ç®€å•ï¼Œç›´æ¥ç”¨ç”Ÿæˆæ’åˆ—çš„å›æº¯ç®—æ³•ï¼Œç…§ç€æŠ„å°±è¡Œã€‚</p><h2 id="æ€è·¯åˆ†æ">æ€è·¯åˆ†æ</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">permute</span>(vector&lt;<span class="type">int</span>&gt;&amp; nums) &#123;</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">path</span><span class="params">(nums)</span></span>;</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; res;</span><br><span class="line">        <span class="built_in">perm</span>(<span class="number">0</span>, path, res);</span><br><span class="line">        <span class="keyword">return</span> res;    </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">perm</span><span class="params">(<span class="type">int</span> i, vector&lt;<span class="type">int</span>&gt;&amp; path, vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&amp; res)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (i == path.<span class="built_in">size</span>())</span><br><span class="line">            res.<span class="built_in">push_back</span>(path);</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = i; j &lt; path.<span class="built_in">size</span>(); j++) &#123;</span><br><span class="line">                <span class="built_in">swap</span>(path[j], path[i]);</span><br><span class="line">                <span class="built_in">perm</span>(i<span class="number">+1</span>, path, res);</span><br><span class="line">                <span class="built_in">swap</span>(path[j], path[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è¿™éƒ¨åˆ†é€’å½’è¦å¼„æ¸…æ¥šæ‰§è¡Œè¿‡ç¨‹ã€‚permuteæ˜¯ä¸»å‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªæ•´æ•°æ•°ç»„numsçš„è¾“å…¥ï¼Œpathæ˜¯numsçš„ä¸€ä¸ªå‰¯æœ¬ï¼Œç”¨äºå­˜æ”¾å½“å‰éå†åˆ°çš„æ’åˆ—ï¼Œresç”¨äºå­˜æ”¾æ‰€æœ‰æ’åˆ—ï¼Œpermæ˜¯ä¸€ä¸ªé€’å½’å‡½æ•°ï¼Œé€šè¿‡è°ƒç”¨perm(0, path, res)æ¥ä»ç´¢å¼•0å¼€å§‹ç”Ÿæˆæ’åˆ—ã€‚ç„¶åæ˜¯permçš„ä¸æ–­é€’å½’è°ƒç”¨ã€‚</p><p>ç„¶åçœ‹permå‡½æ•°çš„å…·ä½“æ‰§è¡Œè¿‡ç¨‹ï¼Œé¦–å…ˆæ˜¯ifæ¡ä»¶åˆ¤æ–­ï¼Œåªæœ‰å½“iä¸path.size()ç›¸ç­‰æ—¶æ‰ä¼šæ‰§è¡Œï¼Œä¸€èˆ¬å…ˆæ‰§è¡Œelseé‡Œçš„å†…å®¹ã€‚elseåŒ…æ‹¬ä¸€ä¸ªå¾ªç¯ï¼Œå¯¹äºå½“å‰ä½ç½®iï¼Œéå†ä»iåˆ°path.size()-1çš„æ‰€æœ‰ä½ç½®jï¼Œæ¯æ¬¡éå†è¿‡ç¨‹ä¸­äº¤æ¢path[j]ä¸path[i]ï¼Œç›¸å½“äºå°†path[j]äº¤æ¢åˆ°å½“å‰çš„ä½ç½®iå¤„ã€‚ç„¶åé€’å½’è°ƒç”¨perm(i+1, path, res)ï¼Œå¤„ç†ä¸‹ä¸€ä¸ªä½ç½®i+1ï¼Œç„¶åå›æº¯å³å°†path[j]ä¸path[i]äº¤æ¢å›æ¥ã€‚</p><h3 id="ä¾‹å­">ä¾‹å­</h3><p>çœ‹ä¸€ä¸ªä¾‹å­[1, 2, 3]ã€‚<br>1.åˆå§‹è°ƒç”¨perm(0, [1, 2, 3], res)ã€‚<br>2.åœ¨perm(0, [1, 2, 3], res)ä¸­i = 0ä¸ç­‰äºpath.size()ï¼Œæ‰§è¡Œelseä¸­çš„forå¾ªç¯ï¼Œi = 0ï¼Œéå†jä»0åˆ°2ï¼š</p><ul><li>j = 0ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[0]ä¸path[0]ï¼Œpathä»ä¸º[1, 2, 3]ï¼Œé€’å½’è°ƒç”¨perm(1, [1, 2, 3], res)ï¼š<ul><li>åœ¨perm(1, [1, 2, 3], res)ä¸­ï¼Œi = 1ä¸ç­‰äºpath.size()ï¼Œæ‰§è¡Œelseä¸­çš„forå¾ªç¯ï¼Œéå†jä»1åˆ°2ï¼š<ul><li>j = 1ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[1]å’Œpath[1]ï¼Œpathä»ä¸º[1, 2, 3]ï¼Œé€’å½’è°ƒç”¨perm(2, [1, 2, 3], res)ï¼š<ul><li>åœ¨perm(2, [1, 2, 3], res)ä¸­ï¼Œi = 2ï¼Œéå†jä»2åˆ°2ï¼š<ul><li>j = 2ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[2]ä¸path[2]ï¼Œresä»ä¸º[1, 2, 3]ï¼Œé€’å½’è°ƒç”¨perm(3, [1, 2, 3], res)ï¼š<ul><li>åœ¨perm(3, [1, 2, 3], res)ä¸­ï¼Œi = 3ç­‰äºpath.size()ï¼Œæ»¡è¶³ifæ¡ä»¶ï¼Œæ‰§è¡Œ<code>res.push_back([1, 2, 3])</code>ï¼Œç„¶åå›æº¯ã€‚</li></ul></li><li>j = 2ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[2]ä¸path[2]ï¼ˆæ­¤æ—¶çš„äº¤æ¢å¯¹åº”ä¸Šæ–¹çš„äº¤æ¢ï¼Œè¿™é‡Œçš„äº¤æ¢åº”è¯¥å«åšæ¢å›ï¼‰ï¼Œpathä»ä¸º[1, 2, 3]ï¼Œå›æº¯ã€‚</li></ul></li></ul></li><li>j = 1ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[1]å’Œpath[1]ï¼ˆæ­¤æ—¶çš„äº¤æ¢ä¸ºæ¢å›ï¼‰ï¼Œpathä¸º[1, 2, 3]ï¼Œå›æº¯ã€‚</li><li>j = 2ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[2]ä¸path[1]ï¼Œpathä¸º[1, 3, 2]ï¼Œé€’å½’è°ƒç”¨perm(2, [1, 3, 2], res)ï¼š<ul><li>åœ¨perm(2, [1, 3, 2], res)ä¸­ï¼Œi = 2ï¼Œæ‰§è¡Œelseä¸­çš„forå¾ªç¯ï¼Œéå†jä»2åˆ°2ï¼š<ul><li>j = 2ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[2]ä¸path[2]ï¼Œresä»ä¸º[1, 3, 2]ï¼Œé€’å½’è°ƒç”¨perm(3, [1, 3, 2], res)ï¼š<ul><li>åœ¨perm(3, [1, 3, 2], res)ä¸­ï¼Œi = 3ç­‰äºpath.size()ï¼Œæ»¡è¶³ifæ¡ä»¶ï¼Œæ‰§è¡Œ<code>res.push_back([1, 3, 2])</code>ï¼Œç„¶åå›æº¯ã€‚</li></ul></li><li>j = 2ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[2]ä¸path[2]ï¼ˆæ­¤æ—¶çš„äº¤æ¢å¯¹åº”ä¸Šæ–¹çš„äº¤æ¢ï¼Œè¿™é‡Œçš„äº¤æ¢åº”è¯¥å«åšæ¢å›ï¼‰ï¼Œpathä¸º[1, 3, 2]ï¼Œå›æº¯ã€‚</li></ul></li></ul></li><li>j = 2ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[2]å’Œpath[1]ï¼ˆæ­¤æ—¶çš„äº¤æ¢ä¸ºæ¢å›ï¼‰ï¼Œpathä¸º[1, 2, 3]ï¼Œå›æº¯ã€‚</li></ul></li></ul></li><li>j = 0ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[0]ä¸path[0]ï¼ˆæ¢å›ï¼‰ï¼Œpathä¸º[1, 2, 3]ï¼Œå›æº¯ã€‚</li><li>j = 1ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[1]ä¸path[0]ï¼Œpathä¸º[2, 1, 3]ï¼Œé€’å½’è°ƒç”¨perm(1, [2, 1, 3], res)ï¼š<ul><li>åœ¨perm(1, [2, 1, 3], res)ä¸­ï¼Œi = 1ä¸ç­‰äºpath.size()ï¼Œæ‰§è¡Œelseä¸­çš„forå¾ªç¯ï¼Œéå†jä»1åˆ°2<ul><li>j = 1ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[1]å’Œpath[1]ï¼Œpathä»ä¸º[2, 1, 3]ï¼Œé€’å½’è°ƒç”¨perm(2, [2, 1, 3], res)ï¼š<ul><li>åœ¨perm(2, [2, 1, 3], res)ä¸­ï¼Œi = 2ï¼Œéå†jä»2åˆ°2ï¼š<ul><li>j = 2ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[2]ä¸path[2]ï¼Œresä»ä¸º[2, 1, 3]ï¼Œé€’å½’è°ƒç”¨perm(3, [2, 1, 3], res)ï¼š<ul><li>åœ¨perm(3, [2, 1, 3], res)ä¸­ï¼Œi = 3ç­‰äºpath.size()ï¼Œæ»¡è¶³ifæ¡ä»¶ï¼Œæ‰§è¡Œ<code>res.push_back([2, 1, 3])</code>ï¼Œç„¶åå›æº¯ã€‚</li></ul></li><li>j = 2ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[2]ä¸path[2]ï¼ˆæ­¤æ—¶çš„äº¤æ¢å¯¹åº”ä¸Šæ–¹çš„äº¤æ¢ï¼Œè¿™é‡Œçš„äº¤æ¢åº”è¯¥å«åšæ¢å›ï¼‰ï¼Œpathä»ä¸º[2, 1, 3]ï¼Œå›æº¯ã€‚</li></ul></li></ul></li><li>j = 1ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[1]å’Œpath[1]ï¼ˆæ­¤æ—¶çš„äº¤æ¢ä¸ºæ¢å›ï¼‰ï¼Œpathä¸º[2, 1, 3]ï¼Œå›æº¯ã€‚</li><li>j = 2ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[2]ä¸path[1]ï¼Œresä¸º[2, 3, 1]ï¼Œé€’å½’è°ƒç”¨perm(2, [2, 3, 1], res)ï¼š<ul><li>åœ¨perm(2, [2, 3, 1], res)ä¸­ï¼Œi = 2ï¼Œæ‰§è¡Œelseä¸­çš„forå¾ªç¯ï¼Œéå†jä»2åˆ°2ï¼š<ul><li>j = 2ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[2]ä¸path[2]ï¼Œresä»ä¸º[2, 3, 1]ï¼Œé€’å½’è°ƒç”¨perm(3, [2, 3, 1], res)ï¼š<ul><li>åœ¨perm(3, [2, 3, 1], res)ä¸­ï¼Œi = 3ç­‰äºpath.size()ï¼Œæ»¡è¶³ifæ¡ä»¶ï¼Œæ‰§è¡Œ<code>res.push_back([2, 3, 1])</code>ï¼Œç„¶åå›æº¯ã€‚</li></ul></li><li>j = 2ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[2]ä¸path[2]ï¼ˆæ­¤æ—¶çš„äº¤æ¢å¯¹åº”ä¸Šæ–¹çš„äº¤æ¢ï¼Œè¿™é‡Œçš„äº¤æ¢åº”è¯¥å«åšæ¢å›ï¼‰ï¼Œpathä¸º[2, 3, 1]ï¼Œå›æº¯ã€‚</li></ul></li></ul></li><li>j = 2ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[2]å’Œpath[1]ï¼ˆæ­¤æ—¶çš„äº¤æ¢ä¸ºæ¢å›ï¼‰ï¼Œpathä¸º[2, 1, 3]ï¼Œå›æº¯ã€‚</li></ul></li></ul></li><li>j = 1ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[1]ä¸path[0]ï¼ˆæ¢å›ï¼‰ï¼Œpathä¸º[1, 2, 3]ï¼Œå›æº¯ã€‚</li><li>j = 2ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[2]ä¸path[0]ï¼Œpathä¸º[3, 2, 1]ï¼Œé€’å½’è°ƒç”¨perm(1, [3, 2, 1], res)ï¼š<ul><li>åœ¨perm(1, [3, 2, 1], res)ä¸­ï¼Œi = 1ä¸ç­‰äºpath.size()ï¼Œæ‰§è¡Œelseä¸­çš„forå¾ªç¯ï¼Œéå†jä»1åˆ°2<ul><li>j = 1ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[1]å’Œpath[1]ï¼Œpathä»ä¸º[3, 2, 1]ï¼Œé€’å½’è°ƒç”¨perm(2, [3, 2, 1], res)ï¼š<ul><li>åœ¨perm(2, [3, 2, 1], res)ä¸­ï¼Œi = 2ï¼Œéå†jä»2åˆ°2ï¼š<ul><li>j = 2ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[2]ä¸path[2]ï¼Œresä»ä¸º[3, 2, 1]ï¼Œé€’å½’è°ƒç”¨perm(3, [3, 2, 1], res)ï¼š<ul><li>åœ¨perm(3, [2, 3, 1], res)ä¸­ï¼Œi = 3ç­‰äºpath.size()ï¼Œæ»¡è¶³ifæ¡ä»¶ï¼Œæ‰§è¡Œ<code>res.push_back([3, 2, 1])</code>ï¼Œç„¶åå›æº¯ã€‚</li></ul></li><li>j = 2ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[2]ä¸path[2]ï¼ˆæ­¤æ—¶çš„äº¤æ¢å¯¹åº”ä¸Šæ–¹çš„äº¤æ¢ï¼Œè¿™é‡Œçš„äº¤æ¢åº”è¯¥å«åšæ¢å›ï¼‰ï¼Œpathä»ä¸º[3, 2, 1]ï¼Œå›æº¯ã€‚</li></ul></li></ul></li><li>j = 1ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[1]å’Œpath[1]ï¼ˆæ­¤æ—¶çš„äº¤æ¢ä¸ºæ¢å›ï¼‰ï¼Œpathä¸º[3, 2, 1]ï¼Œå›æº¯ã€‚</li><li>j = 2ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[2]ä¸path[1]ï¼Œresä¸º[3, 1, 2]ï¼Œé€’å½’è°ƒç”¨perm(2, [3, 1, 2], res)ï¼š<ul><li>åœ¨perm(2, [3, 1, 2], res)ä¸­ï¼Œi = 2ï¼Œæ‰§è¡Œelseä¸­çš„forå¾ªç¯ï¼Œéå†jä»2åˆ°2ï¼š<ul><li>j = 2ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[2]ä¸path[2]ï¼Œresä»ä¸º[3, 1, 2]ï¼Œé€’å½’è°ƒç”¨perm(3, [3, 1, 2], res)ï¼š<ul><li>åœ¨perm(3, [2, 3, 1], res)ä¸­ï¼Œi = 3ç­‰äºpath.size()ï¼Œæ»¡è¶³ifæ¡ä»¶ï¼Œæ‰§è¡Œ<code>res.push_back([3, 1, 2])</code>ï¼Œç„¶åå›æº¯ã€‚</li><li>j = 2ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[2]ä¸path[2]ï¼ˆæ­¤æ—¶çš„äº¤æ¢å¯¹åº”ä¸Šæ–¹çš„äº¤æ¢ï¼Œè¿™é‡Œçš„äº¤æ¢åº”è¯¥å«åšæ¢å›ï¼‰ï¼Œpathä¸º[3, 1, 2]ï¼Œå›æº¯ã€‚</li></ul></li></ul></li></ul></li><li>j = 2ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[2]å’Œpath[1]ï¼ˆæ­¤æ—¶çš„äº¤æ¢ä¸ºæ¢å›ï¼‰ï¼Œpathä¸º[3, 2, 1]ï¼Œå›æº¯ã€‚</li></ul></li></ul></li><li>j = 2ï¼Œäº¤æ¢path[j]ä¸path[i]å³path[2]ä¸path[0]ï¼ˆæ¢å›ï¼‰ï¼Œpathä¸º[1, 2, 3]ï¼Œå›æº¯ã€‚<br>3.permé€’å½’æ‰§è¡Œç»“æŸï¼Œå›åˆ°permuteå‡½æ•°ï¼Œæ­¤æ—¶çš„resä¸º:</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    [1, 2, 3],</span><br><span class="line">    [1, 3, 2],</span><br><span class="line">    [2, 1, 3],</span><br><span class="line">    [2, 3, 1],</span><br><span class="line">    [3, 2, 1],</span><br><span class="line">    [3, 1, 2],</span><br><span class="line">]</span><br><span class="line">```   </span><br><span class="line">ä¸Šè¿°è®²è§£å¯èƒ½æ¯”è¾ƒå•°å—¦ï¼Œçœ‹è¿™ä¸ªç¤ºæ„å›¾åº”è¯¥æ›´å¥½ç†è§£ï¼š</span><br></pre></td></tr></table></figure><p>å¼€å§‹: [1, 2, 3]<br>|<br>Â±- [1, 2, 3] (i=0, j=0)<br>|      |<br>|      Â±- [1, 2, 3] (i=1, j=1)<br>|      |      |<br>|      |      Â±- [1, 2, 3] (i=2, j=2) -&gt; åŠ å…¥ç»“æœé›†<br>|      |<br>|      Â±- [1, 3, 2] (i=1, j=2)<br>|             |<br>|             Â±- [1, 3, 2] (i=2, j=2) -&gt; åŠ å…¥ç»“æœé›†<br>|<br>Â±- [2, 1, 3] (i=0, j=1)<br>|      |<br>|      Â±- [2, 1, 3] (i=1, j=1)<br>|      |      |<br>|      |      Â±- [2, 1, 3] (i=2, j=2) -&gt; åŠ å…¥ç»“æœé›†<br>|      |<br>|      Â±- [2, 3, 1] (i=1, j=2)<br>|             |<br>|             Â±- [2, 3, 1] (i=2, j=2) -&gt; åŠ å…¥ç»“æœé›†<br>|<br>Â±- [3, 2, 1] (i=0, j=2)<br>|<br>Â±- [3, 2, 1] (i=1, j=1)<br>|      |<br>|      Â±- [3, 2, 1] (i=2, j=2) -&gt; åŠ å…¥ç»“æœé›†<br>|<br>Â±- [3, 1, 2] (i=1, j=2)<br>|<br>Â±- [3, 1, 2] (i=2, j=2) -&gt; åŠ å…¥ç»“æœé›†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## å¤æ‚åº¦åˆ†æ</span><br><span class="line">### æ—¶é—´å¤æ‚åº¦</span><br><span class="line">nä¸ªå…ƒç´ æœ‰n!ä¸ªæ’åˆ—ï¼Œè€Œç”Ÿæˆæ¯ä¸ªæ’åˆ—çš„æ—¶é—´ä¸ºO(n)ï¼Œæ•…æ€»çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n$\times$n!)ã€‚</span><br><span class="line">### ç©ºé—´å¤æ‚åº¦</span><br><span class="line">é€’å½’æ·±åº¦ä¸ºnï¼Œç©ºé—´å¤æ‚åº¦ä¸»è¦æ¥æºäºé€’å½’æ ˆï¼Œä¸ºO(n)ã€‚</span><br><span class="line"></span><br><span class="line"># 47. å…¨æ’åˆ— II</span><br><span class="line">## æ€è·¯åˆ†æ</span><br><span class="line">[46. å…¨æ’åˆ—](https://leetcode.cn/problems/permutations/description/)ä½¿ç”¨çš„æ˜¯é€’å½’äº¤æ¢æ³•ï¼Œå½“å¤„ç†åˆ°ä½ç½®içš„æ—¶å€™ï¼Œå°†iå’Œåé¢çš„æ¯ä¸€ä¸ªå…ƒç´ è¿›è¡Œäº¤æ¢ï¼Œç„¶åé€’å½’å¤„ç†ä½ç½®i+1ã€‚æ¯”å¦‚å¯¹äºnums=[1, 2, 3]ï¼Œi=0çš„æ—¶å€™ï¼Œéå†jä»0åˆ°2ï¼Œäº¤æ¢1å’Œ1ã€1å’Œ2ã€1å’Œ3ï¼›ä¾ç…§ä¸Šè¿°æ–¹æ³•èƒ½äº§ç”Ÿå…¨æ’åˆ—ã€‚ä½†å½“æœ‰é‡å¤å…ƒç´ æ—¶ï¼Œå°±ä¼šå‡ºç°é‡å¤çš„æƒ…å†µï¼Œæ¯”å¦‚å¯¹äºnums=[1, 1, 2]ï¼Œi=0çš„æ—¶å€™ï¼Œéå†jä»0åˆ°2ï¼Œäº¤æ¢1å’Œ1ã€1å’Œ1ã€1å’Œ2ï¼Œäº¤æ¢åçš„numsæ˜¯ä¸€æ ·çš„ï¼Œè¿™å°±ä¼šå¯¼è‡´åç»­äº§ç”Ÿé‡å¤çš„åºåˆ—ã€‚</span><br><span class="line"></span><br><span class="line">æ‰€ä»¥ï¼Œé—®é¢˜åœ¨äºå¦‚ä½•é¿å…å¤„ç†ç›¸åŒçš„å…ƒç´ ã€‚è¿™é‡Œä½¿ç”¨ä¸€ä¸ªå“ˆå¸Œè¡¨è®°å½•å·²ç»äº¤æ¢è¿‡çš„å…ƒç´ ï¼Œåœ¨æ¯æ¬¡éå†äº¤æ¢å‰ï¼Œå…ˆæŸ¥æ‰¾å…¶æ˜¯å¦å·²ç»äº¤æ¢è¿‡ï¼Œäº¤æ¢è¿‡çš„å…ƒç´ å°±è·³è¿‡äº¤æ¢ã€‚æ¯”å¦‚å¯¹äºnums=[1, 1, 2]ï¼Œi=0æ—¶ï¼Œéå†jä»0åˆ°2ï¼Œäº¤æ¢1å’Œ1ã€1å’Œ1ã€1å’Œ2ï¼Œä½†æ˜¯äº¤æ¢å‰ï¼Œå…ˆæŸ¥æ‰¾å…¶æ˜¯å¦å·²ç»äº¤æ¢è¿‡ï¼Œç¬¬ä¸€æ¬¡äº¤æ¢1å’Œ1æ—¶ï¼Œ1ä¸åœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œæ‰€ä»¥è¿›è¡Œäº¤æ¢ï¼›ç¬¬äºŒæ¬¡äº¤æ¢1å’Œ1çš„æ—¶å€™ï¼Œ1å·²ç»åœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œç›´æ¥è·³è¿‡ï¼›äº¤æ¢1å’Œ2çš„æ—¶å€™ï¼Œ2ä¸åœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œæ•…è¿›è¡Œäº¤æ¢ã€‚æœ€ç»ˆæœ¬è½®äº§ç”Ÿçš„åºåˆ—ä»åŸæ¥çš„[1, 1, 2]ã€[1, 1, 2]ã€[2, 1, 1]å˜æˆ[1, 1, 2]ã€[2, 1, 1]ã€‚</span><br><span class="line"></span><br><span class="line">ä¸‹é¢æ˜¯C++å®ç°ï¼š</span><br><span class="line">```cpp</span><br><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    vector&lt;vector&lt;int&gt;&gt; permuteUnique(vector&lt;int&gt;&amp; nums) &#123;</span><br><span class="line">        sort(nums.begin(), nums.end());</span><br><span class="line">        vector&lt;vector&lt;int&gt;&gt; res;</span><br><span class="line">        vector&lt;int&gt; path(nums);</span><br><span class="line">        perm(0, path, res);</span><br><span class="line">        return res;</span><br><span class="line">    &#125;</span><br><span class="line">    void perm(int i, vector&lt;int&gt;&amp; path, vector&lt;vector&lt;int&gt;&gt; &amp;res) &#123;</span><br><span class="line">        if (i == path.size())</span><br><span class="line">            res.push_back(path);</span><br><span class="line">        else &#123;</span><br><span class="line">            unordered_set&lt;int&gt; used;</span><br><span class="line">            for (int j = i; j &lt; path.size(); ++j) &#123;</span><br><span class="line">                if (used.count(path[j]))</span><br><span class="line">                    continue;</span><br><span class="line">                used.insert(path[j]);</span><br><span class="line">                swap(path[j], path[i]);</span><br><span class="line">                perm(i+1, path, res);</span><br><span class="line">                swap(path[j], path[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="å¤æ‚åº¦åˆ†æ">å¤æ‚åº¦åˆ†æ</h2><h3 id="æ—¶é—´å¤æ‚åº¦">æ—¶é—´å¤æ‚åº¦</h3><p>æœ‰é‡å¤å…ƒç´ æ—¶ï¼Œæ—¶é—´å¤æ‚åº¦çš„ä¸Šé™ä¾ç„¶ä¸å˜ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸ºO(n<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>Ã—</mo></mrow><annotation encoding="application/x-tex">\times</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.58333em;"></span><span class="strut bottom" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord">Ã—</span></span></span></span>n!)ã€‚å…¶å®å¯ä»¥æ›´ç²¾ç¡®ï¼Œå®é™…ç”Ÿæˆçš„æ’åˆ—æ•°ä¸ºM=\frac{n!}{k_1!Â·k_2!Â·...Â·k_m!}ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>k</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">k_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03148em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>æ˜¯ç¬¬iä¸ªé‡å¤å…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>Ã—</mo></mrow><annotation encoding="application/x-tex">\times</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.58333em;"></span><span class="strut bottom" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord">Ã—</span></span></span></span>M)ã€‚</p><h3 id="ç©ºé—´å¤æ‚åº¦">ç©ºé—´å¤æ‚åº¦</h3><p>ç©ºé—´å¤æ‚åº¦ä¾ç„¶ä¸ºO(n)ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Leetcode æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å“ˆå¸Œè¡¨ </tag>
            
            <tag> Leetcode æ¯æ—¥ä¸€é¢˜ </tag>
            
            <tag> æ•°ç»„ </tag>
            
            <tag> å›æº¯ </tag>
            
            <tag> æ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode æ¯æ—¥ä¸€é¢˜å…­ï¼š90. å­é›† II</title>
      <link href="/2025/02/05/leetcode6/"/>
      <url>/2025/02/05/leetcode6/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/subsets-ii/description/">90. å­é›† II</a>ã€‚</p><h1>æ€è·¯åˆ†æ</h1><p>é¢˜ç›®å¾ˆå¥½ç†è§£ï¼ŒåŸºæœ¬æ€è·¯æ˜¯ä½¿ç”¨å›æº¯æ³•è¿›è¡Œè§£å†³ã€‚è¿™ç§æ–¹æ³•å…¶å®æ˜¯å‚è€ƒæ²™ç‰¹çš„M. H. Alsuwaiyelçš„ã€Šç®—æ³•è®¾è®¡æŠ€å·§ä¸åˆ†æã€‹çš„ç”Ÿæˆæ’åˆ—ç®—æ³•ï¼Œç›´æ¥ç…§ç€ä¼ªä»£ç æŠ„å°±è¡Œã€‚ç”±äºæ•°ç»„ä¸­å­˜åœ¨é‡å¤å…ƒç´ ï¼Œå› æ­¤å…ˆå¯¹å…¶è¿›è¡Œæ’åºï¼Œæ–¹ä¾¿æ’é™¤é‡å¤å…ƒç´ ã€‚ä¸‹é¢ç»™å‡ºC++å®ç°ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">subsetsWithDup</span>(vector&lt;<span class="type">int</span>&gt;&amp; nums) &#123;</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; res;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; path;</span><br><span class="line">        <span class="built_in">sort</span>(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>());</span><br><span class="line">        <span class="built_in">backtrack</span>(nums, <span class="number">0</span>, path, res);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">backtrack</span><span class="params">(<span class="type">const</span> vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> cur, vector&lt;<span class="type">int</span>&gt;&amp; path, vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&amp; res)</span> </span>&#123;</span><br><span class="line">        res.<span class="built_in">push_back</span>(path);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = cur; i &lt; nums.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &gt; cur &amp;&amp; nums[i] == nums[i<span class="number">-1</span>])</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            path.<span class="built_in">push_back</span>(nums[i]);</span><br><span class="line">            <span class="built_in">backtrack</span>(nums, i<span class="number">+1</span>, path, res);</span><br><span class="line">            path.<span class="built_in">pop_back</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>backtrack</code>å‡½æ•°æ˜¯æ ¸å¿ƒï¼Œå®ƒæ¥å—å››ä¸ªå‚æ•°ï¼Œè¾“å…¥æ•°ç»„ã€å½“å‰éå†åˆ°çš„æ•°çš„ä¸‹æ ‡curã€å½“å‰å­é›†pathä»¥åŠè¾“å‡ºæ•°ç»„ã€‚ä¸€å¼€å§‹æ—¶åˆ›å»ºäº†ä¸€ä¸ªpathæ•°ç»„ï¼Œå…¶ä¸ºç©ºã€‚</p><p>ç„¶åè°ƒç”¨backtrackå‡½æ•°<code>backtrack(nums, 0, path, res)</code>ã€‚åœ¨backtrackå‡½æ•°ä¸­ï¼Œå…ˆå°†pathå‹å…¥resä¸­ï¼Œæ­¤æ—¶pathä¸ºç©ºé›†ï¼Œå› è€Œç©ºé›†è¢«åŒ…å«è¿›å»äº†ã€‚ç„¶åè¿›å…¥å¾ªç¯ä½“å†…éƒ¨ï¼Œæ¯æ¬¡å¾ªç¯å…ˆæ£€æŸ¥å½“å‰éå†å…ƒç´ æ˜¯å¦æ˜¯å½“å‰å…ƒç´ å³<code>i &gt; start</code>ï¼Œå¦‚æœæ˜¯åˆ™æ£€æŸ¥å½“å‰éå†å…ƒç´ æ˜¯å¦ä¸ä¸Šä¸€ä¸ªå…ƒç´ ç›¸åŒå³<code>nums[i] == nums[i-1]</code>ï¼Œå¦‚æœç›¸åŒåˆ™è·³è¿‡å½“å‰éå†å…ƒç´ ï¼Œéå†ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚è¿™é‡Œè¯´äº†ä¸€ä¸ªå½“å‰éå†å…ƒç´ å’Œå½“å‰å…ƒç´ ï¼Œæ„Ÿè§‰å®¹æ˜“è®©äººæ··æ·†ã€‚å½“å‰å…ƒç´ å³backtracké‡Œå‚æ•°curå¯¹åº”ä¸‹æ ‡çš„å…ƒç´ ï¼Œè€Œå½“å‰éå†å…ƒç´ æ˜¯åœ¨backtrackå‡½æ•°å†…éƒ¨çš„forå¾ªç¯ä½“ä¸­éå†åˆ°çš„å…ƒç´ çš„ä¸‹æ ‡ã€‚ä¸Šè¿°ç”±ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (i &gt; start &amp;&amp; nums[i] == nums[i<span class="number">-1</span>])</span><br><span class="line">    <span class="keyword">continue</span></span><br></pre></td></tr></table></figure><p>å®ç°ï¼Œç”¨äºæ’é™¤é‡å¤å…ƒç´ ã€‚å½“å‰éå†å…ƒç´ æ˜¯å½“å‰å…ƒç´ æˆ–è€…å½“å‰éå†å…ƒç´ ä¸ä¸Šä¸€ä¸ªå…ƒç´ ä¸åŒæ—¶æ‰§è¡Œ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path.<span class="built_in">push_back</span>(nums[i]);</span><br><span class="line"><span class="built_in">backtrak</span>(nums, i<span class="number">+1</span>, path, res);</span><br></pre></td></tr></table></figure><p>path.push_back(nums[i])å®ç°å°†é€‰æ‹©å½“å‰éå†å…ƒç´ ï¼Œç„¶åè°ƒç”¨backtrackå‡½æ•°ï¼Œè€Œbacktrackå‡½æ•°æ‰€æ‰§è¡Œçš„ç¬¬ä¸€ä»¶äº‹æ˜¯<code>res.push_back(path)</code>ï¼Œä¹Ÿå°±æ˜¯å°†ä¸€ä¸ªå­é›†å‹å…¥äº†è¾“å‡ºæ•°ç»„ä¸­ã€‚</p><p>å›æº¯æ³•çš„æ•´ä¸ªè¿‡ç¨‹æ˜¯ä»ç©ºé›†å¼€å§‹æ¯æ¬¡å¢åŠ ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶å‹å…¥åˆ°è¾“å‡ºæ•°ç»„ä¸­ï¼Œç›´åˆ°numsæ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ éƒ½åŒ…å«è¿›pathä¸­ä¸ºæ­¢ã€‚ç„¶åå¼€å§‹å›æº¯ã€‚ç”¨ä¾‹å­è§£é‡Šæˆ–è®¸æ›´ç›´è§‚ã€‚å‡è®¾numsä¸º[1,2,3,3,4]ï¼Œåˆ™å‹å…¥åˆ°è¾“å‡ºæ•°ç»„ä¸­çš„å­é›†ä¾æ¬¡ä¸º[]ã€[1]ã€[1ã€2]ã€[1ã€2ã€3]ã€[1ã€2ã€3ã€3]ã€[1ã€2ã€3ã€3ã€5]ï¼Œæ­¤æ—¶å·²ç»å°†æ‰€æœ‰å…ƒç´ å‹å…¥pathä¸­ï¼Œæœ€æ·±ä¸€å±‚çš„backtrackå‡½æ•°å†…å…ˆå°†[1ã€2ã€3ã€3ã€5]å‹å…¥åˆ°resä¸­ï¼Œç„¶åæ‰§è¡Œfor (i = start; i &lt; nums.size(); i++)ï¼Œä½†æ­¤æ—¶i = nums.size()æ•…è¿›å…¥forå¾ªç¯æ—¶ä¸æ»¡è¶³i &lt; nums.size()ç›´æ¥é€€å‡ºå¾ªç¯åå›æº¯ã€‚å›æº¯åå°†æœ€åä¸€ä¸ªå…ƒç´ å¼¹å‡ºï¼Œpathå˜ä¸º[1,2,3,3]ã€‚ç„¶åé€€å‡ºå¾ªç¯ä½“å›æº¯ï¼Œå†å°†æœ€åä¸€ä¸ªå…ƒç´ å¼¹å‡ºï¼Œpathå˜ä¸º[1,2,3]ã€‚æ­¤æ—¶è¿˜æ»¡è¶³å¾ªç¯æ¡ä»¶å°†å…ƒç´ 5å‹å…¥pathï¼Œpathå˜ä¸º[1,2,3,5]ã€‚ç„¶åè°ƒç”¨backtrackå‡½æ•°ã€‚æ¥ä¸‹æ¥pathä¾æ¬¡å˜åŒ–ä¸º[1,2,5]ã€[1,3,3]ã€[1,3,3,5]ã€[1,5]ã€‚ã€‚ã€‚</p><h1>å¤æ‚åº¦åˆ†æ</h1><h2 id="æ—¶é—´å¤æ‚åº¦">æ—¶é—´å¤æ‚åº¦</h2><p>å¯¹äºä¸€ä¸ªå¤§å°ä¸ºnçš„æ•°ç»„ï¼Œå­é›†çš„é•¿åº¦ä¸º0~nã€‚æ¯æ¬¡é€’å½’è°ƒç”¨å°†pathçš„å‰¯æœ¬åŠ å…¥åˆ°resä¸­ï¼Œæ¯æ¬¡å°†å­é›†å¤åˆ¶åˆ°è¾“å‡ºæ•°ç»„ä¸­æ‰€éœ€æ—¶é—´ä¸å­é›†çš„é•¿åº¦æœ‰å…³ï¼Œä½†ä¸Šç•Œä¸å˜ï¼Œå› æ­¤å°†ä¸€ä¸ªå­é›†å¤åˆ¶åˆ°è¾“å‡ºæ•°ç»„çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚è€Œè¾“å…¥æ•°ç»„çš„å¤§å°ä¸ºnï¼Œå¦‚æœä¸å­˜åœ¨é‡å¤å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯æœ€åæƒ…å†µï¼Œæ­¤æ—¶å­é›†çš„æ•°é‡ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.664392em;"></span><span class="strut bottom" style="height:0.664392em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathrm">2</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ã€‚è€Œå½“å­˜åœ¨é‡å¤å…ƒç´ æ—¶ï¼Œè™½ç„¶å¯ä»¥é€šè¿‡å‰ªææ“ä½œå‡å°‘é€’å½’è°ƒç”¨çš„æ¬¡æ•°ï¼Œä½†æ˜¯æ‰§è¡Œæ¬¡æ•°çš„ä¸Šç•Œä¾ç„¶ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.664392em;"></span><span class="strut bottom" style="height:0.664392em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathrm">2</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ã€‚å› æ­¤æ—¶é—´å¤æ‚åº¦ä¸ºO(<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>Ã—</mo><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">n\times 2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.664392em;"></span><span class="strut bottom" style="height:0.747722em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mbin">Ã—</span><span class="mord"><span class="mord mathrm">2</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>)ã€‚</p><h2 id="ç©ºé—´å¤æ‚åº¦">ç©ºé—´å¤æ‚åº¦</h2><p>åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨çš„ç©ºé—´ä¸»è¦æ˜¯é€’å½’è°ƒç”¨æ ˆï¼Œå…¶æœ€å¤§æ·±åº¦å¯ä»¥è¾¾åˆ°O(n)ï¼Œå³ä½¿åœ¨å­˜åœ¨é‡å¤å…ƒç´ æ—¶å…¶ä¸Šç•Œä¾ç„¶ä¿æŒä¸å˜ã€‚å› æ­¤ç©ºé—´å¤æ‚åº¦ä¸ºO(n)ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Leetcode æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode æ¯æ—¥ä¸€é¢˜ </tag>
            
            <tag> æ•°ç»„ </tag>
            
            <tag> å›æº¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode æ¯æ—¥ä¸€é¢˜äº”ï¼š922. æŒ‰å¥‡å¶æ’åºæ•°ç»„ II</title>
      <link href="/2025/02/04/leetcode5/"/>
      <url>/2025/02/04/leetcode5/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/sort-array-by-parity-ii/description/">922. æŒ‰å¥‡å¶æ’åºæ•°ç»„ II</a>ã€‚</p><p>è¿™é“é¢˜æ¯”è¾ƒç®€å•ï¼Œä»…ä»…åšä¸€ä¸ªè®°å½•ã€‚æ—¶é—´å¤æ‚åº¦ä¸ºO(n), ç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚<br>ä»¥ä¸‹æ˜¯C++å®ç°ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">sortArrayByParityII</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">res</span><span class="params">(n)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> i = <span class="number">0</span>, j = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> x: nums) &#123;</span><br><span class="line">            <span class="keyword">if</span> (x % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                res[i] = x;</span><br><span class="line">                i += <span class="number">2</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                res[j] = x;</span><br><span class="line">                j += <span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Leetcode æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode æ¯æ—¥ä¸€é¢˜ </tag>
            
            <tag> æ•°ç»„ </tag>
            
            <tag> åŒæŒ‡é’ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode æ¯æ—¥ä¸€é¢˜å››ï¼š680. éªŒè¯å›æ–‡ä¸² II</title>
      <link href="/2025/02/03/leetcode4/"/>
      <url>/2025/02/03/leetcode4/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥Leecodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/valid-palindrome-ii/description/">680. éªŒè¯å›æ–‡ä¸² II</a>ã€‚</p><h1>æ€è·¯åˆ†æ</h1><p>æä¾›ä¸€ä¸ªå­—ç¬¦ä¸²sï¼Œæœ€å¤šå¯ä»¥åˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼Œå¦‚æœsèƒ½æˆä¸ºå›æ–‡ä¸²ï¼Œè¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚å…ˆç»™å‡ºC++å®ç°ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">checkPalindrome</span><span class="params">(<span class="type">const</span> string&amp; s, <span class="type">int</span> low, <span class="type">int</span> high)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> i = low, j = high;</span><br><span class="line">        <span class="keyword">while</span> (i &lt;= j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s[i] != s[j])</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            i++;</span><br><span class="line">            j--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">validPalindrome</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> low = <span class="number">0</span>, high = s.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (low &lt; high) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s[low] == s[high]) &#123;</span><br><span class="line">                ++low;</span><br><span class="line">                --high;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">checkPalindrome</span>(s, low, high - <span class="number">1</span>) || <span class="built_in">checkPalindrome</span>(s, low + <span class="number">1</span>, high);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­validPalindromeå‡½æ•°æ˜¯è¦å®ç°çš„å‡½æ•°ï¼ŒcheckPalindromeå‡½æ•°æ˜¯è¾…åŠ©å‡½æ•°ã€‚è¾…åŠ©å‡½æ•°checkPalindromeå‡½æ•°æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼šå­—ç¬¦ä¸²sã€æ•´å‹æ•°lowå’Œhighï¼Œæ£€æŸ¥å­—ç¬¦ä¸²sä»ä¸‹æ ‡lowåˆ°highä¹‹é—´çš„å­—ç¬¦ä¸²æ˜¯å¦æ˜¯å›æ–‡ä¸²ã€‚</p><p>validPalindromeå‡½æ•°ä½¿ç”¨lowå’Œhighä¸¤ä¸ªæŒ‡é’ˆï¼Œåˆå§‹åŒ–æ—¶low = 0, high = s.size() - 1ã€‚ç„¶åè¿›å…¥whileå¾ªç¯ï¼Œæ£€æŸ¥s[low] == s[high]æ˜¯å¦æˆç«‹ï¼Œå¦‚æœæˆç«‹åˆ™lowè‡ªå¢1ã€highè‡ªå‡1ã€‚å¦‚æœä¸æˆç«‹åˆ™éœ€è¦åˆ é™¤s[low]æˆ–è€…s[high]ï¼Œç”±äºæœ€å¤šåˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥ç›´æ¥è¿”å›åˆ é™¤s[low]æˆ–è€…s[high]åçš„ç»“æœå°±è¡Œå³checkPalindrome(s, low, high - 1) || checkPalindrome(s, low + 1, high)ã€‚</p><p>çœ‹ä¸€ä¸ªä¾‹å­â€™abcaâ€™ï¼Œå¼€å§‹æ—¶low=0ï¼Œ high = 3ï¼Œs[low] == s[high]æˆç«‹ï¼Œlow++å¾—low=1,highâ€“å¾—high=2ï¼Œæ­¤æ—¶s[low] == s[high]ä¸æˆç«‹ï¼Œå› æ­¤è°ƒç”¨checkPalindrome(s, low+1, high)å’ŒcheckPalindrome(s, low, high-1)ï¼Œå‰è€…åˆ é™¤s[low]ï¼Œåè€…åˆ é™¤s[high]ï¼Œlow+1=2,high=2ï¼Œå› æ­¤å‰è€…ä¸ºtrueï¼Œå› ä¸ºæ˜¯<code>||</code>ç¬¦å·ï¼Œæ­¤æ—¶å°±ç›´æ¥è¿”å›trueã€‚å¦‚æœæ‰§è¡Œåè€…ï¼Œhigh-1=1ï¼Œlow=1ï¼Œå› æ­¤åè€…ä¹Ÿä¸ºtrueã€‚ä¹Ÿå°±æ˜¯è¯´å¯¹äºå­—ç¬¦ä¸²â€™abcaâ€™ï¼Œåˆ é™¤s[1]å˜æˆâ€™acaâ€™å’Œåˆ é™¤s[2]å˜æˆâ€™abaâ€™éƒ½å¯ä»¥ä½¿å…¶å˜æˆå›æ–‡ä¸²ã€‚</p><h1>å¤æ‚åº¦åˆ†æ</h1><h2 id="æ—¶é—´å¤æ‚åº¦">æ—¶é—´å¤æ‚åº¦</h2><p>å¦‚æœsæ˜¯å›æ–‡ä¸²ï¼Œåˆ™ä¸è°ƒç”¨checkPalindromeå‡½æ•°ï¼Œå¾ªç¯æ‰§è¡Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>n</mi></mrow><mrow><mn>2</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{n}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.695392em;"></span><span class="strut bottom" style="height:1.040392em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">2</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span>æ¬¡ï¼Œæ­¤æ—¶æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚<br>å¦‚æœsä¸æ˜¯å›æ–‡ä¸²ï¼Œå‡è®¾æ‰§è¡Œç¬¬kæ¬¡æ—¶éœ€è¦åˆ é™¤å­—ç¬¦æ—¶ï¼Œä»ç„¶éœ€è¦æ£€æŸ¥å‰©ä½™n-2k-1ä¸ªå­—ç¬¦ï¼Œæœ€å¤šéœ€è¦å¾ªç¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>n</mi><mo>âˆ’</mo><mn>2</mn><mi>k</mi><mo>âˆ’</mo><mn>1</mn></mrow><mrow><mn>2</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{n-2k-1}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8801079999999999em;"></span><span class="strut bottom" style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">2</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mbin">âˆ’</span><span class="mord mathrm">2</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span>æ¬¡ï¼Œå¹¶ä¸”éœ€è¦è°ƒç”¨checkPalindromeä¸¤æ¬¡ï¼Œkæ— è®ºå–ä½•å€¼ï¼Œå¾ªç¯æ¬¡æ•°çš„ä¸Šç•Œä¾ç„¶ä¸º2 * nï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚</p><h2 id="ç©ºé—´å¤æ‚åº¦">ç©ºé—´å¤æ‚åº¦</h2><p>ä½¿ç”¨å¸¸æ•°ä¸ªå˜é‡ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Leetcode æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode æ¯æ—¥ä¸€é¢˜ </tag>
            
            <tag> è´ªå¿ƒ </tag>
            
            <tag> åŒæŒ‡é’ˆ </tag>
            
            <tag> å­—ç¬¦ä¸² </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode æ¯æ—¥ä¸€é¢˜ä¸‰ï¼š598. åŒºé—´åŠ æ³• II</title>
      <link href="/2025/02/02/leetcode3/"/>
      <url>/2025/02/02/leetcode3/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥Leetcodeçš„æ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/range-addition-ii/description/">598. åŒºé—´åŠ æ³• II</a>ã€‚</p><h1>æ€è·¯åˆ†æ</h1><p>ç»™ä¸€ä¸ªæ•´æ•°må’Œä¸€ä¸ªæ•´æ•°n,å¯¹ä¸€ä¸ªçŸ©é˜µMï¼Œåˆå§‹æ—¶çŸ©é˜µä¸­æ‰€æœ‰å‡ä¸º0ã€‚æ­¤å¤–è¿˜æä¾›ä¸€ä¸ªæ“ä½œæ•°ç»„opsï¼Œå¯¹äºC++ç¼–ç¨‹è¯­è¨€ï¼Œæä¾›çš„æ˜¯ä¸€ä¸ªäºŒç»´vectoræ•°ç»„vector&lt;vector<int>&gt;ï¼Œé€šè¿‡for (auto&amp; op:ops)å¯ä»¥éå†è¯¥æ•°ç»„ä¸­çš„å…ƒç´ å¯¹ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ å¯¹opä¸ºä¸€å¯¹æ•°å­—(a,b)ï¼Œæ‰§è¡Œå°†(0, 0)~(a-1, b-1)çš„æ‰€æœ‰å…ƒç´ è¿›è¡ŒåŠ 1æ“ä½œã€‚éå†å®Œæ‰€æœ‰å…ƒç´ å¯¹åå³æ‰§è¡Œå®Œäº†æ“ä½œï¼Œè¦æ±‚æ±‚å‡ºçŸ©é˜µä¸­æœ€å¤§çš„æ•´æ•°å‡ºç°çš„æ¬¡æ•°ã€‚</p><p>ä½¿ç”¨æ¨¡æ‹Ÿçš„æ–¹æ³•çš„è¯å³éå†æ“ä½œæ•°ç»„opså¯¹çŸ©é˜µMè¿›è¡Œæ“ä½œåè¿›è¡Œéå†ç»Ÿè®¡ï¼Œä½†è¿™ç§æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(mn)ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(mn)ï¼Œæ•ˆç‡ä¸é«˜ã€‚</p><p>å¯¹äºæ¯æ¬¡æ“ä½œ(a, b)å½±å“çš„åŒºåŸŸä¸º(0, 0)~(a-1, b-1)ï¼Œå› è€Œæ‰€æœ‰çš„æ“ä½œå…±åŒå½±å“çš„åŒºåŸŸä¸ºè¿™äº›åŒºåŸŸçš„äº¤é›†ã€‚åªè¦æ±‚å‡ºæ‰€æœ‰çš„æ“ä½œ(a, b)ä¸­æœ€å°çš„aå’Œæœ€å°çš„bå³å¯ï¼Œè®°ä½œmin_aå’Œmin_bï¼Œmin_aå’Œmin_bå†³å®šäº†æ‰€æœ‰çš„æ“ä½œå…±åŒå½±å“çš„åŒºåŸŸï¼Œæœ€åå¾ˆå®¹æ˜“è”æƒ³åˆ°æœ€å¤§æ•´æ•°å‡ºç°çš„æ¬¡æ•°ä¸º<code>min_a * min_b</code>ã€‚</p><h1>å¤æ‚åº¦åˆ†æ</h1><p>è¿™ç§æ–¹æ³•ä¸»è¦æ˜¯åœ¨éå†æ“ä½œæ•°ç»„opsï¼Œopsä¸ºäºŒç»´æ•°ç»„ï¼Œè®¾å®ƒä¸ºkX2çš„æ•°ç»„ï¼Œé‚£ä¹ˆæ—¶é—´å¤æ‚åº¦ä¸ºO(k)ï¼Œkå³æ“ä½œçš„æ¬¡æ•°ã€‚ä½¿ç”¨äº†å¸¸æ•°ä¸ªå˜é‡ï¼Œç©ºé—´å¤æ‚åº¦å³O(1)ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Leetcode æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode æ¯æ—¥ä¸€é¢˜ </tag>
            
            <tag> çŸ©é˜µ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode æ¯æ—¥ä¸€é¢˜äºŒï¼š81. æœç´¢æ—‹è½¬æ’åºæ•°ç»„ II</title>
      <link href="/2025/02/01/leetcode2/"/>
      <url>/2025/02/01/leetcode2/</url>
      
        <content type="html"><![CDATA[<p>ä»Šæ—¥Leetcodeçš„æ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/search-in-rotated-sorted-array-ii/description/">81. æœç´¢æ—‹è½¬æ’åºæ•°ç»„ II</a>ã€‚</p><h1>æ€è·¯åˆ†æ</h1><p>è¿™é“é¢˜ç›®å¤§æ¦‚æ„æ€æ˜¯ï¼ŒåŸæ¥æœ‰ä¸€ä¸ªæœ‰åºæ•°ç»„ï¼ŒæŒ‰å‡åºæ’åˆ—ï¼Œä½†æ˜¯è¯¥æ•°ç»„ä»¥ä¸€ä¸ªæœªçŸ¥ä¸‹æ ‡è¿›è¡Œäº†ç¿»è½¬ï¼Œå‡å¦‚æœªçŸ¥ä¸‹æ ‡ä¸ºkï¼Œé‚£ä¹ˆæ•°ç»„ä»åŸæ¥çš„ä¸‹æ ‡[0,1,2,3,â€¦,k,â€¦n]å˜æˆäº†[k,k+1,k+2,â€¦,n-1,0,1,2,3,â€¦,k-1]ã€‚ç¬¬ä¸€æƒ³æ³•å…¶å®æ˜¯éå†ï¼Œè™½ç„¶Leetcodeå®˜æ–¹å¹¶ä¸ä¼šå»æ’æŸ¥ä½ ä½¿ç”¨ä½•ç§æ–¹æ³•ï¼Œä½†æ˜¯å’±ä»¬ä¹Ÿä¸èƒ½æ‹˜æ³¥äºæœ€ç®€å•çš„ç®—æ³•^o^ã€‚<br>Leetcodeå®˜æ–¹ç»™è¯¥é¢˜çš„æ ‡ç­¾æ˜¯äºŒåˆ†æŸ¥æ‰¾ï¼Œä¸€ç›´æ²¡æ˜ç™½æ˜¯æ€ä¹ˆä¸ªäºŒåˆ†æŸ¥æ‰¾æ³•ï¼ŸSoæˆ‘ç›´æ¥çœ‹çš„Leetcodeå®˜æ–¹é¢˜è§£ï¼Œä¸‹é¢æ˜¯Leetcodeå®˜æ–¹ç»™çš„C++ä»£ç ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">search</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;nums, <span class="type">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> nums[<span class="number">0</span>] == target;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> l = <span class="number">0</span>, r = n - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (l &lt;= r) &#123;</span><br><span class="line">            <span class="type">int</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (nums[mid] == target) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (nums[l] == nums[mid] &amp;&amp; nums[mid] == nums[r]) &#123;</span><br><span class="line">                ++l;</span><br><span class="line">                --r;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (nums[l] &lt;= nums[mid]) &#123;</span><br><span class="line">                <span class="keyword">if</span> (nums[l] &lt;= target &amp;&amp; target &lt; nums[mid]) &#123;</span><br><span class="line">                    r = mid - <span class="number">1</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    l = mid + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (nums[mid] &lt; target &amp;&amp; target &lt;= nums[n - <span class="number">1</span>]) &#123;</span><br><span class="line">                    l = mid + <span class="number">1</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    r = mid - <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ä½œè€…ï¼šåŠ›æ‰£å®˜æ–¹é¢˜è§£</span><br><span class="line">é“¾æ¥ï¼šhttps:<span class="comment">//leetcode.cn/problems/search-in-rotated-sorted-array-ii/solutions/704686/sou-suo-xuan-zhuan-pai-xu-shu-zu-ii-by-l-0nmp/</span></span><br><span class="line">æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰</span><br><span class="line">è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</span><br></pre></td></tr></table></figure><h2 id="ç‰¹æ®Šæƒ…å†µå¤„ç†">ç‰¹æ®Šæƒ…å†µå¤„ç†</h2><p>é¦–å…ˆæ˜¯å¯¹ç‰¹æ®Šæƒ…å†µçš„å¤„ç†ï¼ŒLeetcodeå®˜æ–¹å°†æ•°ç»„ä¸­æ²¡æœ‰å…ƒç´ å’Œä¸€ä¸ªå…ƒç´ è¿›è¡Œäº†ç‰¹æ®Šå¤„ç†ã€‚å¯¹äºæ•°ç»„ä¸­æ²¡æœ‰å…ƒç´ æ—¶è¿›è¡Œç‰¹æ®Šå¤„ç†æ˜¯åˆç†çš„ï¼Œå› ä¸ºé¿å…äº†å¯¹æ•°ç»„ä¸­å…ƒç´ çš„è®¿é—®ã€‚è€Œå½“æ•°ç»„ä¸­å…ƒç´ åªæœ‰ä¸€ä¸ªæ—¶æ²¡æœ‰å¿…è¦è¿›è¡Œç‰¹æ®ŠåŒ–å¤„ç†ï¼Œç›´æ¥ä¸€èˆ¬åŒ–å¤„ç†å³å¯ã€‚å› ä¸ºåœ¨åˆå§‹åŒ–å·¦æŒ‡é’ˆå’Œå³æŒ‡é’ˆæ—¶ï¼Œå¦å·¦æŒ‡é’ˆä¸º0ï¼Œå³æŒ‡é’ˆä¸ºæ•°ç»„é•¿åº¦-1ï¼Œåœ¨æ•°ç»„ä¸­åªæœ‰ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œå·¦å³æŒ‡é’ˆå‡åˆå§‹åŒ–ä¸ºäº†0ã€‚æ­¤æ—¶ä¸­é—´å…ƒç´ ä¹Ÿå°±æ˜¯æ•°ç»„ä¸­çš„å”¯ä¸€å…ƒç´ ï¼Œåˆ¤æ–­å…¶æ˜¯å¦ä¸ºç›®æ ‡å…ƒç´ å³å¯ã€‚</p><h2 id="ä¸€èˆ¬æƒ…å†µ">ä¸€èˆ¬æƒ…å†µ</h2><p>ä¸€èˆ¬æƒ…å†µä¸‹è¿›å…¥ä¸€ä¸ªwhileå¾ªç¯ï¼Œå¹¶è®¡ç®—ä¸­é—´ä½ç½®</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>i</mi><mi>d</mi><mo>=</mo><mfrac><mrow><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mo>+</mo><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi></mrow><mrow><mn>2</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">mid=\frac{left+right}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.37144em;"></span><span class="strut bottom" style="height:2.05744em;vertical-align:-0.686em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">d</span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathrm">2</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">h</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span></p><p>å¹¶åˆ¤æ–­ä¸­é—´ä½ç½®å¯¹åº”çš„å…ƒç´ æ˜¯å¦ä¸ºtargetã€‚å¦åˆ™åˆåˆ†ä¸ºä¸‰ç§æƒ…å†µï¼š</p><ul><li>æ— æ³•åˆ¤æ–­åˆ¤æ–­å“ªä¸€éƒ¨åˆ†æœ‰åº</li><li>å·¦åŠéƒ¨åˆ†æœ‰åº</li><li>å³åŠéƒ¨åˆ†æœ‰åº</li></ul><h3 id="æ— æ³•åˆ¤æ–­é‚£ä¸€éƒ¨åˆ†æœ‰åº">æ— æ³•åˆ¤æ–­é‚£ä¸€éƒ¨åˆ†æœ‰åº</h3><p>æ— æ³•åˆ¤æ–­åˆ¤æ–­å“ªä¸€éƒ¨åˆ†æœ‰åºå³nums[l] == nums[mid] &amp;&amp; nums[mid] == nums[r]ã€‚æ­¤æ—¶åŒæ—¶ç¼©å°å·¦å³æŒ‡é’ˆå³</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">l++</span><br><span class="line">r--</span><br></pre></td></tr></table></figure><h3 id="å·¦åŠéƒ¨åˆ†æœ‰åº">å·¦åŠéƒ¨åˆ†æœ‰åº</h3><p>å·¦åŠéƒ¨åˆ†æœ‰åºï¼Œå³nums[l] &lt;= nums[mid]ï¼Œå…ˆåˆ¤æ–­targetæ˜¯å¦åœ¨å·¦åŠéƒ¨åˆ†ï¼›æ­¤æ—¶åˆåˆ†ä¸¤ç§æƒ…å†µï¼š</p><ul><li>targetåœ¨å·¦åŠéƒ¨åˆ†</li><li>targetä¸åœ¨å·¦åŠéƒ¨åˆ†</li></ul><p>æ¡ä»¶nums[l] &lt;= target &amp;&amp; target &lt; nums[mid]å³targetåœ¨å·¦åŠéƒ¨åˆ†ï¼Œæ­¤æ—¶ä»¤å³æŒ‡é’ˆr = mid - 1ä»¥ç¼©å°èŒƒå›´ï¼Œå¦åˆ™ä»¤l = mid + 1ã€‚</p><h3 id="å³åŠéƒ¨åˆ†æœ‰åº">å³åŠéƒ¨åˆ†æœ‰åº</h3><p>æ’æŸ¥æ— æ³•åˆ¤æ–­å“ªä¸€éƒ¨åˆ†æœ‰åºå’Œå·¦åŠéƒ¨åˆ†æœ‰åºå³å³åŠéƒ¨åˆ†æœ‰åºï¼Œæ­¤æ—¶ç±»ä¼¼ä¸å·¦åŠéƒ¨åˆ†æœ‰åºï¼Œä¹Ÿåˆ†ä¸¤ç§æƒ…å†µï¼š</p><ul><li>targetåœ¨å³åŠéƒ¨åˆ†</li><li>targetä¸åœ¨å³åŠéƒ¨åˆ†</li></ul><h2 id="å¤æ‚åº¦åˆ†æ">å¤æ‚åº¦åˆ†æ</h2><h3 id="æ—¶é—´å¤æ‚åº¦">æ—¶é—´å¤æ‚åº¦</h3><p>åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒäºŒåˆ†æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">logn</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">n</span></span></span></span>)ã€‚<br>è€Œå½“æ•°ç»„ä¸­å‡ºç°å¤§é‡é‡å¤å…ƒç´ æ—¶ï¼Œå¹¶ä¸”éƒ½ä¸ä¸targetç›¸ç­‰æ—¶ï¼Œé€€åŒ–ä¸ºçº¿æ€§æœç´¢ï¼Œæ¯ä¸€æ¬¡å¾ªç¯éƒ½æ‰§è¡Œ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">l++</span><br><span class="line">r--</span><br></pre></td></tr></table></figure><p>å¾ªç¯æ¬¡æ•°ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>n</mi></mrow><mrow><mn>2</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{n}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.695392em;"></span><span class="strut bottom" style="height:1.040392em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">2</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span>æ¬¡ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚</p><h3 id="ç©ºé—´å¤æ‚åº¦">ç©ºé—´å¤æ‚åº¦</h3><p>ä½¿ç”¨å¸¸æ•°ä¸ªå˜é‡ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Leetcode æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode æ¯æ—¥ä¸€é¢˜ </tag>
            
            <tag> äºŒåˆ†æŸ¥æ‰¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode æ¯æ—¥ä¸€é¢˜ä¸€ï¼š541. åè½¬å­—ç¬¦ä¸² II</title>
      <link href="/2025/01/31/leetcode1/"/>
      <url>/2025/01/31/leetcode1/</url>
      
        <content type="html"><![CDATA[<p>ä»12æœˆä»½å¼€å§‹åˆ°ç°åœ¨é™†é™†ç»­ç»­å‚åŠ äº†å‡ æ¬¡Leetcodeçš„å‘¨èµ›ï¼Œä»å‡ å¤©ä¹Ÿå¼€å§‹å†³å®šå‚åŠ Leetcodeçš„æ¯æ—¥ä¸€é¢˜ã€‚æ€æ¥æƒ³å»ï¼Œæ„Ÿè§‰ä¹Ÿè¿›è¡Œè®°å½•ä¸€ä¸‹æ¯”è¾ƒå¥½ã€‚è™½ç„¶å¤§åŠå¹´å‰ä¹Ÿåœ¨æè¿™ä¸ªä¸œè¥¿ï¼Œä½†æ˜¯å½“æ—¶ä¸ä¼šç”¨hexoï¼Œå½“æ—¶åªæ˜¯ä½¿ç”¨markdownåœ¨æœ¬åœ°è¿›è¡Œè®°å½•ï¼Œæ—¥å¸¸æŸ¥çœ‹ä¸å¦‚hexoæ–¹ä¾¿ã€‚ç°åœ¨å†³å®šå°†Leetcodeçš„æ¯ä¸€é¢˜ã€å‘¨èµ›ä»¥åŠåŒå‘¨èµ›ç­‰ç­‰ï¼Œæ€»ä¹‹å°±æ˜¯å¯¹è‡ªå·±çš„å­¦ä¹ åšä¸€ä¸ªè®°å½•ï¼Œæ–¹ä¾¿æœèŠ±å¤•æ‹¾ã€‚</p><p>ä»Šæ—¥çš„Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/reverse-string-ii/description/">541. åè½¬å­—ç¬¦ä¸² II</a>ã€‚è¿™é‡Œä¹Ÿä½¿ç”¨å®˜æ–¹é¢˜è§£ä½œä¸ºå‚è€ƒï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">string <span class="title">reverseStr</span><span class="params">(string s, <span class="type">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">length</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i += <span class="number">2</span> * k) &#123;</span><br><span class="line">            <span class="built_in">reverse</span>(s.<span class="built_in">begin</span>() + i, s.<span class="built_in">begin</span>() + <span class="built_in">min</span>(i + k, n));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ä½œè€…ï¼šåŠ›æ‰£å®˜æ–¹é¢˜è§£</span><br><span class="line">é“¾æ¥ï¼šhttps:<span class="comment">//leetcode.cn/problems/reverse-string-ii/solutions/946553/fan-zhuan-zi-fu-chuan-ii-by-leetcode-sol-ua7s/</span></span><br><span class="line">æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰</span><br><span class="line">è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</span><br></pre></td></tr></table></figure><h1>æ€è·¯åˆ†æ</h1><p>å®˜æ–¹é¢˜è§£çš„æ ¸å¿ƒæ€æƒ³å¾ˆç®€å•ï¼Œå°±æ˜¯éå†å­—ç¬¦ä¸²ï¼Œæ¯æ¬¡è·³è¿‡2kä¸ªå­—ç¬¦ä¸²ï¼Œç„¶åç¿»è½¬å‰kä¸ª,ç¿»è½¬å­—ç¬¦ä¸²ä½¿ç”¨reverseå‡½æ•°ã€‚ä½¿ç”¨forå¾ªç¯è¿›è¡Œéå†ï¼Œiä»0å¼€å§‹ï¼Œæ¯æ¬¡å¢åŠ 2kå³</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i += <span class="number">2</span>k)</span><br></pre></td></tr></table></figure><p>ç¿»è½¬å‰kä¸ªå­—ç¬¦ï¼Œå³</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">reverse</span> (s.<span class="built_in">begin</span>() + i, s.<span class="built_in">begin</span>() + i + k);</span><br></pre></td></tr></table></figure><p>æ­¤å¤–è¿˜æœ‰ä¸¤ç§ç‰¹æ®Šæƒ…å†µï¼š</p><ul><li>å¦‚æœå‰©ä½™å­—ç¬¦å°‘äºkä¸ªï¼Œå°±å°†è¿™äº›å­—ç¬¦å‰©ä½™å­—ç¬¦å…¨éƒ¨ç¿»è½¬</li><li>å¦‚æœå‰©ä½™å­—ç¬¦å°‘äº2kä¸ªï¼Œä½†æ˜¯å¤§äºkä¸ªï¼Œä»ç„¶å°†å‰kä¸ªå­—ç¬¦è¿›è¡Œç¿»è½¬ï¼Œå…¶ä½™å­—ç¬¦ä¿æŒä¸å˜ã€‚</li></ul><p>æ‰€ä»¥ä¸‹è¿°ä»£ç </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">reverse</span> (s.<span class="built_in">begin</span>() + i, s.<span class="built_in">begin</span>() + i + k);</span><br></pre></td></tr></table></figure><p>è¦ä¿®æ”¹æˆ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">reverse</span> (s.<span class="built_in">begin</span>() + i, s.<span class="built_in">begin</span>() + <span class="built_in">min</span>(i + k, n));</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨min(i + k, n)å°±å¯ä»¥å°†ä¸€èˆ¬æƒ…å†µå’Œä¸¤ç§ç‰¹æ®Šæƒ…å†µåŒ…å«è¿›æ¥ã€‚å…¶å®ä¸€èˆ¬æƒ…å†µå’Œå‰©ä½™å­—ç¬¦å°‘äº2kä¸ªä½†å¤§äºkä¸ªå¯ä»¥å½’ä¸ºä¸€ç§æƒ…å†µï¼Œå› ä¸ºå®ƒä»¬éƒ½éœ€è¦ç¿»è½¬å‰kä¸ªå­—ç¬¦ï¼Œæ­¤æ—¶min(i + k, n) = i + kã€‚è€Œç¬¬äºŒç§ç‰¹æ®Šæƒ…å†µåˆ™ä¸åŒï¼Œæ­¤æ—¶å‰©ä½™å­—ç¬¦ä¸è¶³kä¸ªï¼Œå› æ­¤min (i + k, n) = nã€‚</p><h1>æ—¶é—´å¤æ‚åº¦</h1><p>å­—ç¬¦ä¸²çš„é•¿åº¦ä¸ºnï¼Œå¯¹äºä¸€ä¸ªè¾“å…¥å‚æ•°kï¼Œå¾ªç¯</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i += <span class="number">2</span> * k)</span><br></pre></td></tr></table></figure><p>çš„å¾ªç¯æ¬¡æ•°ï¼š</p><ul><li>å½“nä¸º2kçš„æ•´æ•°å€æ—¶ï¼Œå¾ªç¯æ¬¡æ•°ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>n</mi></mrow><mrow><mn>2</mn><mi>k</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{n}{2k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.695392em;"></span><span class="strut bottom" style="height:1.040392em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">2</span><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></li><li>å½“nä¸æ˜¯2kçš„æ•´æ•°å€æ—¶ï¼Œå¾ªç¯æ¬¡æ•°ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>n</mi></mrow><mrow><mn>2</mn><mi>k</mi></mrow></mfrac><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\frac{n}{2k}+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.695392em;"></span><span class="strut bottom" style="height:1.040392em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">2</span><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span>ï¼ˆå‘ä¸Šå–æ•´ï¼‰</li></ul><p>å› æ­¤å¾ªç¯æ¬¡æ•°å¯ä»¥è¡¨ç¤ºä¸ºO(<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>n</mi></mrow><mrow><mi>k</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{n}{k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.695392em;"></span><span class="strut bottom" style="height:1.040392em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span>)ã€‚åœ¨æ¯æ¬¡å¾ªç¯ä¸­ï¼Œæ‰§è¡Œreverseå‡½æ•°ï¼Œreverseå‡½æ•°çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(k)ï¼Œå› ä¸ºåœ¨æ¯æ¬¡å¾ªç¯ä¸­reverseéœ€è¦äº¤æ¢<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>k</mi></mrow><mrow><mn>2</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{k}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8801079999999999em;"></span><span class="strut bottom" style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">2</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span>å¯¹å­—ç¬¦ã€‚å› æ­¤æ€»çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>n</mi></mrow><mrow><mi>k</mi></mrow></mfrac><mo>Ã—</mo><mi>k</mi></mrow><annotation encoding="application/x-tex">\frac{n}{k} \times k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.695392em;"></span><span class="strut bottom" style="height:1.040392em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mbin">Ã—</span><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span>)å³O(n)ã€‚</p><h1>ç©ºé—´å¤æ‚åº¦</h1><p>ä½¿ç”¨äº†å¸¸æ•°ä¸ªå˜é‡ï¼Œæ•…ç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Leetcode æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leetcode æ¯æ—¥ä¸€é¢˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ”¶æ”¶å¿ƒï¼Œå¼€å§‹å­¦ä¹ ç®—æ³•ï¼šå­é›†å’ŒDP</title>
      <link href="/2025/01/30/algorithm1/"/>
      <url>/2025/01/30/algorithm1/</url>
      
        <content type="html"><![CDATA[<h1>æ”¶å¿ƒå›é¡¾</h1><p>å‡æœŸè¿‡äº†ä¸€åŠäº†ï¼Œä»1æœˆ9æ—¥å¼€å§‹åˆ°ç°åœ¨ï¼Œå·²ç»21å¤©äº†ï¼Œå‡æœŸä½™é¢18å¤©ã€‚å‰é¢21å¤©åŸºæœ¬ä¸Šæ˜¯åœ¨çœ‹ä¹¦ã€å­¦ä¹ stm32ã€ç¼–ç¨‹ä»¥åŠplayã€‚</p><p>çœ‹çš„ä¹¦æœ‰ã€ŠåµŒå…¥å¼Cè¯­è¨€çš„è‡ªæˆ‘ä¿®å…»ã€‹å’Œã€Šç¼–è¯‘åŸç†ã€‹ï¼Œå‰ä¸€æœ¬çœ‹çš„æ¯”è¾ƒå¤šäº†ï¼Œåä¸€æœ¬å°±çœ‹äº†ç¼–è¯‘çš„åŸºæœ¬è¿‡ç¨‹ï¼Œè¿˜å¾—ç»§ç»­æ¨è¿›ã€‚</p><p>å­¦ä¹ stm32æ˜¯ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„è¿‡ç¨‹ï¼Œæ±Ÿç§‘å¤§çš„stm32æ•™ç¨‹å°±å¾ˆé«˜è´¨é‡ï¼Œç›®å‰å·²ç»å­¦ä¹ åˆ°äº†ä½¿ç”¨æŒ‰é”®æ§åˆ¶LEDã€‚çˆ¶äº²æ¯å¤©çœ‹åˆ°æˆ‘çš„stm32å¼€å‘å¥—ä»¶éƒ½å¾ˆå…´å¥‹ï¼Œä»–è‡ªå­¦äº†ç”µå·¥çŸ¥è¯†ï¼Œå¾ˆå‰å®³ã€‚</p><p>è¯´è‡ªå·±ç¼–ç¨‹äº†æ„Ÿè§‰è‡ªå·±å°±æ˜¯åœ¨åˆ·é¢˜ï¼Œleetcodeã€æ´›è°·ã€codeforceç­‰ç­‰ã€‚å…¶å®åœ¨æ”¾å‡å‰çš„ä¸¤å‘¨è‡ªå·±çš„ç¼–ç¨‹çš„çƒ­æƒ…é«˜æ¶¨ï¼Œä¸æ˜¯æŒ‡åˆ·é¢˜ï¼Œæ˜¯å‚ä¸å¼€æºç­‰ç­‰ï¼Œè¿ä¸“ä¸šè¯¾éƒ½ä¸é¡¾ç›´æ¥å»å‚ä¸å¼€æºé¡¹ç›®ã€‚è€ƒç®—æ³•è®¾è®¡æŠ€å·§ä¸åˆ†æçš„å‰ä¸€å¤©åœ¨ç»™æŸä¸ªGithubä»“åº“çš„16ä½æ“ä½œç³»ç»Ÿå†™clearçš„shellå‘½ä»¤ï¼Œç„¶åå¤ä¹ ä¸‰ä¸ªå°æ—¶ï¼Œå…¶å®ä¿ºä¹Ÿä¸æƒ³å¤ä¹ ï¼Œé‚£å¤©èˆå‹å‘ç–¯ï¼Œåµåµé—¹é—¹åˆ°äº†3ç‚¹åŠï¼Œæµæ³ªå¤ä¹ åˆ°4ç‚¹ï¼Œç„¶åå»å‚åŠ 9ç‚¹çš„è€ƒè¯•QVQã€‚11ç‚¹è€ƒå®Œå‡ºæ¥åƒå®Œé¥­å°±å»å¼€å‘freeå‘½ä»¤ï¼Œç„¶åå‚ä¸å…¶ä»–çš„å¼€æºé¡¹ç›®ï¼Œå½“æ—¶ä¸‹ä¸€åœºè€ƒè¯•æ˜¯æœºå™¨å­¦ä¹ ï¼Œåœ¨ä¸‰å¤©åï¼Œç”¨äº†ä¸¤å¤©åŠå»ç¼–ç¨‹ï¼ŒåŠå¤©å¤ä¹ è€ƒè¯•ã€‚æ”¾å‡å›å®¶åæ²¡æœ‰é‚£ä¹ˆé«˜å¾—çƒ­æƒ…äº†ï¼Œä¸»è¦æ˜¯å› ä¸ºç½‘ç»œçš„é—®é¢˜ã€‚Githubçš„ä»“åº“cloneä¸ä¸‹æ¥ä¹Ÿpushä¸ä¸Šå»ï¼Œç›´æ¥downloadä¸‹æ¥ä¹Ÿä¸è¡Œï¼Œå´©æºƒäº†ã€‚ç›®å‰ç¬”è€…å†™çš„è¿™ç¯‡æ–‡ç« ä¼°è®¡ä¹Ÿå¾—åœ¨è¿”æ ¡ä¹‹åæ‰èƒ½æ”¾åˆ°æœåŠ¡å™¨ä¸Šã€‚ç©comfyuiçš„æ—¶å€™ï¼Œéƒ½æ˜¯é æœ‹å‹ä¸‹è½½å†é€šè¿‡wechatä¼ è¿‡æ¥ã€‚ä¸çŸ¥é“ç½‘ç»œæ˜¯å› ä¸ºDNSåŠ«æŒï¼Œè¿˜æ˜¯å› ä¸ºåœ°åŸŸçš„é—®é¢˜ã€‚</p><p>è‡³äºplayå°±ä¸ç”¨å¤šè¯´äº†ã€‚</p><p><img src="/images/zhen_zi_dan.jpg" alt="å˜»å˜»"></p><h1>ä½™ä¸‹å‡æœŸæ‰“ç®—</h1><p>åç»­çš„18å¤©ï¼Œå†³å®šç”¨æ¥å­¦ä¹ ä¸€ä¸‹ç®—æ³•ã€stm32å¹¶ä¸”ç²¾è¿›ä¸€ä¸‹C++ã€‚æˆ‘å‘ç°äº†ä¸€ä¸ªå¾ˆå¥½çš„ç½‘ç«™<a href="https://oi-wiki.org">OI wiki</a>ï¼Œç”¨æ¥å­¦ä¹ ç®—æ³•æ­£åˆé€‚ã€‚stm32è¿˜æ˜¯æ¥ç€çœ‹Bç«™æ±Ÿç§‘å¤§çš„è§†é¢‘ï¼Œå†ä»å˜‰ç«‹åˆ›æ‰¾ç‚¹é¡¹ç›®åšåšæ„Ÿè§‰å°±è¡Œï¼Œä½†æ˜¯ç›®å‰è¿˜æ˜¯å…ˆå­¦å®Œæ±Ÿç§‘å¤§çš„è§†é¢‘ä¸ºå…ˆã€‚ç²¾è¿›C++ä¸çŸ¥é“ç”¨ä»€ä¹ˆåŠæ³•æ¯”è¾ƒå¥½ï¼Œç›®å‰ç”¨Githubæ˜¯ä¸è¡Œäº†ï¼Œçœ‹çœ‹ç½‘ä¸Šæ¸¸æˆå¼€å‘æ˜¯å¦å¯è¡Œã€‚</p><h1>ä»Šæ—¥ç®—æ³•</h1><p>ä»Šå¤©å°±å­¦äº†å­¦å­é›†å’ŒDPï¼ŒDPå°±æ˜¯åŠ¨æ€è§„åˆ’ï¼ˆDynamic programingï¼‰ï¼ŒOI wikiè®²çš„æ¯”è¾ƒæŠ½è±¡ï¼Œå°±çœ‹äº†åšå®¢å›­çš„ä¸€ç¯‡åšå®¢<a href="https://www.cnblogs.com/Tenshi/p/14520614.html">ã€DPã€‘è§£æ SOSdpï¼ˆå­é›†å’Œ dpï¼‰</a>ï¼Œæ„Ÿè§‰æŒºä¸é”™çš„ã€‚</p><p>å­é›†å’ŒDPç”¨äºå¤„ç†å‰ç¼€å’Œé—®é¢˜ã€‚å‰ç¼€å’Œé—®é¢˜ï¼Œåœ¨ä¸€ç»´æ—¶å°±æ˜¯æ•°åˆ—çš„å‰né¡¹å’Œï¼›åœ¨äºŒç»´æˆ–è€…å¤šç»´åº¦æƒ…å†µä¸‹ç»™äº†ä¸¤ç§æ–¹æ³•ï¼š</p><ul><li>å®¹æ–¥åŸç†<br>å®¹æ–¥åŸç†ï¼ˆå¯ä»¥å‚è€ƒOI wikiçš„<a href="https://oi-wiki.org/math/combinatorics/inclusion-exclusion-principle/">å®¹æ–¥åŸç†</a>ï¼‰å°±æ¯”æ–¹è¯´ç­ä¸Šæœ‰30ä¸ªäººå–œæ¬¢è¯­æ–‡ï¼Œ20ä¸ªäººå–œæ¬¢æ•°å­¦ï¼Œ40ä¸ªäººå–œæ¬¢è‹±è¯­ï¼Œé—®è¿™ä¸ªç­ä¸Šæœ‰å¤šå°‘ä¸ªäººã€‚å¦‚æœå•çº¯åœ°å°†è¿™ä¸‰ä¸ªæ•°å­—ç›¸åŠ è‚¯å®šæ˜¯å¤§äºç­ä¸Šçš„æ€»äººæ•°çš„ï¼Œå› ä¸ºç­ä¸Šä¼šæœ‰éƒ¨åˆ†äººå–œæ¬¢å…¶ä¸­çš„ä¸¤é—¨ç”šè‡³ä¸‰é—¨ã€‚è¿™ä¸ªæ„Ÿè§‰è¿˜éœ€è¦å†å»ç†è§£ä¸€ä¸‹ï¼Œé€šè¿‡éŸ¦æ©å›¾å’Œé›†åˆèƒ½å¾ˆå¥½ç†è§£ä¸¤ç±»æˆ–è€…ä¸‰ç±»çš„æƒ…å†µï¼Œä½†æ˜¯å¯¹äºæ›´å¤šç±»æ²¡æœ‰ç†è§£é€å½»ã€‚OI wikiä¸Šè¿˜ç»™äº†ä¸€é“ä¾‹é¢˜<a href="https://www.luogu.com.cn/problem/P1387">æ´›è°· P1387 æœ€å¤§æ­£æ–¹å½¢</a></li><li>é€ç»´æ±‚å’Œ<br>é€ç»´æ±‚å’Œå°±æ˜¯æ¯æ¬¡å›ºå®šä¸€ä¸ªç»´åº¦ï¼Œæ±‚å…¶å®ƒç»´åº¦ï¼Œç›´åˆ°å›ºå®šå®Œæ‰€æœ‰ç»´åº¦ã€‚</li></ul><p>è€Œå­é›†å’ŒDPä¸»è¦æ˜¯ç”¨äºæ±‚é«˜ç»´å‰ç¼€å’Œé—®é¢˜ï¼Œå­é›†å’Œå³Sum Over Subsetsã€‚å­é›†å’Œé—®é¢˜çš„å¤§è‡´æè¿°ä¸ºï¼šä¸€ä¸ªå¤§å°ä¸ºnçš„é›†åˆä¸Šå®šä¹‰äº†ä¸€ä¸ªå‡½æ•°fï¼Œè¦æ±‚å‡ºå­é›†å’Œå‡½æ•°gï¼Œä¸”æœ‰</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>g</mi><mo>(</mo><mi>S</mi><mo>)</mo><mo>=</mo><msub><mo>âˆ‘</mo><mrow><mi>T</mi><mo>âŠ†</mo><mi>S</mi></mrow></msub><mi>f</mi><mo>(</mo><mi>T</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">g(S)=\sum_{T \subseteq S}f(T)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.050005em;"></span><span class="strut bottom" style="height:2.43952em;vertical-align:-1.389515em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mclose">)</span><span class="mrel">=</span><span class="mop op-limits"><span class="vlist"><span style="top:1.194336em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mrel">âŠ†</span><span class="mord mathit" style="margin-right:0.05764em;">S</span></span></span></span><span style="top:-0.000005000000000032756em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span><span class="op-symbol large-op mop">âˆ‘</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mclose">)</span></span></span></span></span></p><p>å…¶ä¸­Tæ˜¯é›†åˆSçš„æ‰€æœ‰å­é›†ã€‚<br>è¿™é‡Œç›´æ¥å¼•ç”¨OI wikiçš„<a href="https://oi-wiki.org/basic/prefix-sum/#%E7%89%B9%E4%BE%8B%E5%AD%90%E9%9B%86%E5%92%8C-dp">ä»£ç </a>å§</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> n;</span><br><span class="line">  std::cin &gt;&gt; n;</span><br><span class="line">  <span class="function">std::vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(<span class="number">1</span> &lt;&lt; n)</span></span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span>&amp; x : a) std::cin &gt;&gt; x;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Copy.</span></span><br><span class="line">  <span class="keyword">auto</span> ps = a;</span><br><span class="line">  <span class="comment">// Loop over dimensions.</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">    <span class="comment">// Loop over i-th dimension.</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> st = <span class="number">0</span>; st &lt; (<span class="number">1</span> &lt;&lt; n); ++st) &#123;</span><br><span class="line">      <span class="comment">// This condition implies that i-th dimension is 1.</span></span><br><span class="line">      <span class="keyword">if</span> ((st &gt;&gt; i) &amp; <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">// ps[... 1 ...] += ps[... 0 ...]. (i-th dimension)</span></span><br><span class="line">        ps[st] += ps[st ^ (<span class="number">1</span> &lt;&lt; i)];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> x : ps) std::cout &lt;&lt; x &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>nè¡¨ç¤ºé›†åˆä¸­æœ‰nä¸ªå…ƒç´ ï¼Œaæ˜¯äºŒè¿›åˆ¶ç¼–ç ï¼Œè¡¨ç¤ºåœ¨è¯¥ç‚¹çš„å–å€¼ã€‚åœ¨ä¸¤å±‚forå¾ªç¯ä¸­ï¼Œå¤–å±‚å¾ªç¯ç”¨äºéå†äºŒè¿›åˆ¶ç¼–ç çš„æ¯ä¸€ä½ï¼Œå†…å±‚å¾ªç¯ç”¨äºéå†æ¯ä¸€ä¸ªçŠ¶æ€ã€‚è²Œä¼¼æœ‰ç‚¹è¯´ä¸æ¸…çš„æ„Ÿè§‰ã€‚ã€‚ã€‚å¦‚æœnä¸º2ï¼Œåˆ™ä½¿ç”¨ä¸¤ä½äºŒè¿›åˆ¶ç¼–ç ï¼Œ1 &lt;&lt; nå³1 &lt;&lt; 2 = 4ï¼Œä¹Ÿå°±æ˜¯aæœ‰å››ä¸ªå…ƒç´ ï¼Œa[0]å°±æ˜¯a[00]ï¼Œa[1]å°±æ˜¯a[01],a[2]å°±æ˜¯a[10]ï¼Œa[3]å°±æ˜¯a[11]ã€‚æŠŠa[00]çœ‹æˆa[0][0]æˆ–è®¸æ›´å¥½ç†è§£ä¸€ç‚¹ã€‚psæ•°ç»„å°±æ˜¯å‰ç¼€å’Œæ•°ç»„ï¼Œps[1][1]å³a[0][0]+a[0][1]+a[1][0]+a[1][1]ã€‚è¿™æ ·æ„Ÿè§‰æ›´å®¹æ˜“ç†è§£ã€‚å†…å±‚å¾ªç¯å°±æ˜¯éå†äºŒè¿›åˆ¶ç¼–ç çš„æ¯ä¸€ä½ï¼Œå†…å±‚å¾ªç¯éå†aä¸­æ¯ä¸€ä¸ªå…ƒç´ å³a[0][0]ã€a[0][1]ã€a[1][0]ã€a[1][1]ï¼Œè™½ç„¶å¾ªç¯é‡Œæ˜¾ç¤ºçš„æ˜¯psï¼Œä½†æ˜¯ä½¿ç”¨äº†</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> ps=a</span><br></pre></td></tr></table></figure><p>å°†aæ‹·è´äº†ä¸€ä»½ç»™psã€‚ä¸¤å±‚å¾ªç¯å®ç°äº†æ¯æ¬¡éå†aä¸­æ¯ä¸€ä¸ªå…ƒç´ çš„æ¯ä¸€ä½ï¼Œæœ€ç»ˆéå†å®Œæ‰€æœ‰ä½ï¼Œä¹Ÿå°±æ˜¯å‰é¢æ‰€è¯´çš„é€ç»´æ±‚å’Œã€‚æ³¨æ„åœ¨éå†æ—¶å°±åƒäºŒè¿›åˆ¶å˜åŒ–ä¸€æ ·ï¼Œä¹Ÿå°±æ˜¯å…ˆa[00]ï¼Œç„¶åa[01]ï¼Œå†ç„¶åa[10]ã€a[11]ã€‚åœ¨å¾ªç¯é‡Œè¿˜æœ‰ä¸€ä¸ªåˆ¤æ–­æ¡ä»¶</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (st &gt;&gt; i &amp; <span class="number">1</span>)</span><br></pre></td></tr></table></figure><p>å…¶å®å°±æ˜¯åœ¨éå†ç¬¬iä½äºŒè¿›åˆ¶ç¼–ç ï¼Œåˆ¤æ–­å…¶æ˜¯å¦ä¸º1ã€‚å¦‚æœå…¶ä¸º1ï¼Œå°±å¯¹å…¶å–åã€‚'^'ç¬¦å·æ˜¯æŒ‰ä½å¼‚æˆ–ç¬¦å·ï¼Œå½“ä¸º1æ—¶ï¼Œä¸1å¼‚æˆ–å¾—0ï¼Œä»è€Œå®ç°ç¬¬iä½å–åã€‚<br>è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯a[00]çš„å­é›†ä¸ºa[00]ï¼Œè€Œa[10]çš„å­é›†æœ‰a[10]å’Œa[00]ã€‚ç®€å•ç‚¹è¯´å°±æ˜¯å¦‚æœæŸä¸€ä½ä¸º1ï¼Œå°±å°†è¯¥ä½ç½®ä¸º0ä½œä¸ºä¸€ä¸ªå­é›†ã€‚å†æ¯”å¦‚è¯´a[101]çš„å­é›†æœ‰a[100]ã€a[001]ã€a[000]å’Œa[101]ã€‚å½“i=0æ—¶ï¼Œä¹Ÿå°±æ˜¯äºŒè¿›åˆ¶çš„æœ€ä½ä½ï¼Œp[11]+=p[10]ã€‚<br>è‡³äºä¸ºä»€ä¹ˆè¦åŠ ä¸‹åˆ—åˆ¤æ–­æ¡ä»¶å‘¢ï¼Ÿ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (st &gt;&gt; i &amp; <span class="number">1</span>)</span><br></pre></td></tr></table></figure><p>å…¶å®æ˜¯ä¸ºäº†æ­£ç¡®æ±‚å’Œã€‚å½“æœ‰æ­¤åˆ¤æ–­æ¡ä»¶æ—¶ï¼Œå¯ä»¥ä½¿å¾—p[10]+=p[00]ï¼Œæ³¨æ„æ˜¯&quot;+=&quot;ï¼Œå‰é¢å·®ç‚¹æŠŠ+å¿˜äº†ï¼Œp[00]=a[00]ï¼Œæœ€ç»ˆå¯å¾—p[10]=a[10]+a[00]ã€‚å¦‚æœæ²¡æœ‰æ­¤åˆ¤æ–­æ¡ä»¶å°±ä¼šä½¿å¾—p[10]+=(p[11]+p[00])ï¼Œä¹Ÿå°±æ˜¯è¯´æŠŠp[11]ä¹Ÿå½“æˆäº†p[10]çš„å­é›†ï¼‹ä¸Šäº†ï¼Œè¿™å°±ä¼šä¸æ±‚ps[1][0]æ—¶ï¼Œæœ¬æ¥ps[1][0]=a[0][0]+a[0][1]+a[1][0]ï¼Œä½†å´é”™è¯¯åœ°æŠŠa[1][1]ä¹ŸåŠ è¿›å»äº†ï¼Œå¹¶ä¸”å…¶ä»–å…ƒç´ ä¹Ÿæœ‰é‡å¤è®¡ç®—ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ›´æ”¹é»˜è®¤æ¸²æŸ“å™¨ï¼ŒåŠ å¿«æ¸²æŸ“é€Ÿåº¦</title>
      <link href="/2025/01/29/hexo1/"/>
      <url>/2025/01/29/hexo1/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©çªç„¶å‘ç°ä¹‹å‰ä½¿ç”¨hexoéƒ¨ç½²çš„åšå®¢åŠ è½½æ…¢å¹¶ä¸æ˜¯å› ä¸ºç½‘é€Ÿæˆ–è€…æœåŠ¡å™¨åœ¨å›½å¤–ã€‚è€Œæ˜¯ä¸æ¸²æŸ“å™¨æœ‰å…³ã€‚å‘ç°è¿™ä¸ªæ˜¯å› ä¸ºå‘ç°markdownæ•°å­¦å…¬å¼åœ¨éƒ¨ç½²åæ²¡æœ‰æ­£ç¡®æ¸²æŸ“ï¼Œå¯»æ‰¾è§£å†³åŠæ³•æ—¶æ„å¤–å‘ç°çš„ã€‚</p><p>é¦–å…ˆåœ¨æ ¹ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo-renderer-marked --save</span><br></pre></td></tr></table></figure><p>ç”¨æ¥åˆ é™¤Hexoé»˜è®¤çš„æ¸²æŸ“å™¨ï¼Œé»˜è®¤çš„æ¸²æŸ“å™¨ä¸æ”¯æŒKaTexï¼Œå› æ­¤éœ€è¦æ›´æ¢ä¸º<code>hexo-renderer-markdown-it</code>ä½œä¸ºæ¸²æŸ“å™¨å¹¶ä¸”å®‰è£…<code>markdown-it-katexæ’ä»¶</code>ï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤å®ç°ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-renderer-markdown-it markdown-it-katex --save</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨Hexoçš„é…ç½®æ–‡ä»¶_config.ymlä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">markdown:</span></span><br><span class="line">  <span class="attr">render:</span></span><br><span class="line">    <span class="attr">html:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">xhtmlOut:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">breaks:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">linkify:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">typographer:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">quotes:</span> <span class="string">&#x27;â€œâ€â€˜â€™&#x27;</span></span><br><span class="line">  <span class="attr">plugins:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">markdown-it-katex</span></span><br></pre></td></tr></table></figure><p>ä»¥é…ç½®<code>markdown-it</code>å’Œ<code>markdown-it-katex</code>ã€‚</p><p>é€šè¿‡ä¸Šè¿°é…ç½®è™½ç„¶æ²¡æœ‰æ­£ç¡®æ¸²æŸ“å…¬å¼ï¼ˆå…¬å¼è™½ç„¶æ¸²æŸ“å‡ºæ¥äº†ï¼Œä½†æ˜¯æœ‰ç‚¹åç§»ï¼‰ï¼Œä½†æ˜¯å‘ç°ç½‘é¡µåŠ è½½çš„å‡ºå¥‡å¾—å¿«ï¼Œæ„Ÿè§‰æ˜¯æ–°çš„æ¸²æŸ“å™¨<code>hexo-renderer-markdown-it</code>æ¸²æŸ“èƒ½åŠ›æ¯”è¾ƒå¼ºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> åšå®¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pomopomo</title>
      <link href="/2024/12/25/Pomopomo/"/>
      <url>/2024/12/25/Pomopomo/</url>
      
        <content type="html"><![CDATA[<h1>ç•ªèŒ„é’Ÿå¼€å‘å­¦ä¹ ç¬”è®°</h1><h2 id="é¡¹ç›®ç®€ä»‹">é¡¹ç›®ç®€ä»‹</h2><p>åœ¨DataWhaleæ´»åŠ¨ä¸­ï¼Œæˆ‘ä½¿ç”¨è±†åŒ…AIç¼–ç¨‹åŠ©æ‰‹åŸºäºHTMLå’ŒJavaScriptå¼€å‘äº†ä¸€ä¸ªç•ªèŒ„é’Ÿåº”ç”¨ã€‚ç•ªèŒ„é’Ÿæ˜¯ä¸€ç§æ—¶é—´ç®¡ç†å·¥å…·ï¼Œé€šè¿‡åˆ†å‰²å·¥ä½œæ—¶é—´å’Œä¼‘æ¯æ—¶é—´ï¼Œæé«˜å·¥ä½œæ•ˆç‡å’Œä¸“æ³¨åº¦ã€‚</p><h2 id="é¡¹ç›®ç›®æ ‡">é¡¹ç›®ç›®æ ‡</h2><ul><li>è®¾è®¡ç®€æ´ï¼šç•Œé¢ç®€æ´ç›´è§‚ï¼Œç”¨æˆ·å‹å¥½ã€‚</li><li>åŠŸèƒ½å®Œå–„ï¼šå®ç°åŸºæœ¬çš„ç•ªèŒ„å·¥ä½œæ³•åŠŸèƒ½ï¼Œè®¡æ—¶ã€æš‚åœã€é‡ç½®å’Œç»Ÿè®¡ã€‚</li><li>è·¨å¹³å°å…¼å®¹ï¼šç¡®ä¿åœ¨ä¸åŒæµè§ˆå™¨å’Œè®¾å¤‡ä¸Šæ­£å¸¸è¿è¡Œã€‚</li><li>ä»£ç ä¼˜åŒ–ï¼šç¼–å†™é«˜æ•ˆã€å¯ç»´æŠ¤çš„ä»£ç ï¼Œéµå¾ªæœ€ä½³å®è·µã€‚</li></ul><h2 id="æŠ€æœ¯æ ˆ">æŠ€æœ¯æ ˆ</h2><ul><li>å‰ç«¯ï¼š<ul><li>HTML5</li><li>CSS3</li><li>JavaScript (ES6)</li></ul></li><li>å¼€å‘å·¥å…·ï¼š<ul><li>Visual Studio Code</li><li>è±†åŒ…AIç¼–ç¨‹åŠ©æ‰‹</li></ul></li></ul><h2 id="å¼€å‘æ­¥éª¤">å¼€å‘æ­¥éª¤</h2><ol><li>é¡¹ç›®åˆå§‹åŒ–<br>åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹ï¼Œåˆå§‹åŒ–Gitä»“åº“ã€‚<br>ç»“æ„å¦‚ä¸‹ï¼š</li><li>è®¾è®¡ç•Œé¢<br>ä½¿ç”¨HTMLæ„å»ºåŸºæœ¬ç»“æ„ï¼ŒåŒ…æ‹¬è®¡æ—¶æ˜¾ç¤ºã€æ§åˆ¶æŒ‰é’®ï¼ˆå¼€å§‹ã€æš‚åœã€é‡ç½®ï¼‰ã€‚<br>ä½¿ç”¨CSSè¿›è¡Œæ ·å¼è®¾è®¡ï¼Œç¡®ä¿ç•Œé¢å“åº”å¼ï¼Œé€‚é…ä¸åŒå±å¹•å°ºå¯¸ã€‚</li><li>å®ç°è®¡æ—¶åŠŸèƒ½<br>ä½¿ç”¨JavaScriptå®ç°å€’è®¡æ—¶é€»è¾‘ã€‚<br>å¤„ç†å¼€å§‹ã€æš‚åœã€é‡ç½®æŒ‰é’®çš„äº‹ä»¶ã€‚</li><li>æ·»åŠ ç»Ÿè®¡åŠŸèƒ½<br>è®°å½•å®Œæˆçš„ç•ªèŒ„é’Ÿæ¬¡æ•°ã€‚<br>ä½¿ç”¨localStorageä¿å­˜æ•°æ®ï¼ŒæŒä¹…åŒ–ç»Ÿè®¡ä¿¡æ¯ã€‚</li><li>ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ<br>æ·»åŠ å£°éŸ³æé†’ã€‚<br>å®ç°æš—æ¨¡å¼å’Œäº®æ¨¡å¼åˆ‡æ¢ã€‚<br>å¢åŠ åŠ¨ç”»æ•ˆæœï¼Œæé«˜äº¤äº’æ€§ã€‚</li></ol><h2 id="é‡åˆ°çš„æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ">é‡åˆ°çš„æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ</h2><ol><li>å®šæ—¶å™¨ç²¾åº¦é—®é¢˜<br>æŒ‘æˆ˜ï¼šä½¿ç”¨setIntervalå¯èƒ½å¯¼è‡´è®¡æ—¶ä¸å¤Ÿç²¾ç¡®ï¼Œç‰¹åˆ«æ˜¯åœ¨æµè§ˆå™¨æ ‡ç­¾é¡µä¸æ´»è·ƒæ—¶ã€‚</li></ol><p>è§£å†³æ–¹æ¡ˆï¼šæ”¹ç”¨åŸºäºDateçš„è®¡ç®—ï¼Œé€šè¿‡è®°å½•å¼€å§‹æ—¶é—´å’Œå½“å‰æ—¶é—´å·®æ¥ç²¾å‡†è®¡ç®—å‰©ä½™æ—¶é—´ã€‚</p><ol start="2"><li>å“åº”å¼è®¾è®¡å®ç°<br>æŒ‘æˆ˜ï¼šç¡®ä¿åº”ç”¨åœ¨ä¸åŒè®¾å¤‡å’Œå±å¹•å°ºå¯¸ä¸‹éƒ½èƒ½è‰¯å¥½æ˜¾ç¤ºã€‚</li></ol><p>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨CSSåª’ä½“æŸ¥è¯¢å’Œå¼¹æ€§å¸ƒå±€ï¼ˆFlexboxï¼‰ä¼˜åŒ–å¸ƒå±€ï¼Œç¡®ä¿å…ƒç´ è‡ªé€‚åº”è°ƒæ•´ã€‚</p><ol start="3"><li>æ•°æ®æŒä¹…åŒ–<br>æŒ‘æˆ˜ï¼šå¦‚ä½•åœ¨ç”¨æˆ·å…³é—­é¡µé¢åä¿ç•™ç»Ÿè®¡æ•°æ®ã€‚</li></ol><p>è§£å†³æ–¹æ¡ˆï¼šåˆ©ç”¨localStorageåœ¨æµè§ˆå™¨ä¸­å­˜å‚¨å®Œæˆçš„ç•ªèŒ„é’Ÿæ¬¡æ•°ï¼Œå®ç°æ•°æ®çš„æŒä¹…åŒ–ã€‚</p><h1>å­¦ä¹ æ”¶è·</h1><ul><li>å‰ç«¯æŠ€èƒ½æå‡ï¼šé€šè¿‡é¡¹ç›®å®è·µï¼Œæ·±å…¥ç†è§£HTMLã€CSSå’ŒJavaScriptçš„åŸºæœ¬ç”¨æ³•å’Œé«˜çº§æŠ€å·§ã€‚</li><li>é¡¹ç›®ç®¡ç†ï¼šå­¦ä¼šä½¿ç”¨Gitè¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œåˆç†åˆ†é…å¼€å‘ä»»åŠ¡ï¼Œä¿æŒä»£ç æ•´æ´ã€‚</li><li>é—®é¢˜è§£å†³èƒ½åŠ›ï¼šåœ¨å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œé€šè¿‡æŸ¥é˜…æ–‡æ¡£ã€å¯»æ±‚ç¤¾åŒºå¸®åŠ©ï¼ŒæŒæ¡äº†æœ‰æ•ˆçš„è§£å†³é—®é¢˜çš„æ–¹æ³•ã€‚</li><li>ç”¨æˆ·ä½“éªŒè®¾è®¡ï¼šäº†è§£ç”¨æˆ·éœ€æ±‚ï¼Œä¼˜åŒ–ç•Œé¢å’Œäº¤äº’ï¼Œæé«˜åº”ç”¨çš„æ˜“ç”¨æ€§å’Œç”¨æˆ·æ»¡æ„åº¦ã€‚</li></ul><h1>æœªæ¥æ”¹è¿›</h1><p>å¤šè¯­è¨€æ”¯æŒï¼šæ·»åŠ å¤šç§è¯­è¨€é€‰æ‹©ï¼Œæå‡å›½é™…ç”¨æˆ·ä½“éªŒã€‚<br>æ•°æ®å¯è§†åŒ–ï¼šä½¿ç”¨å›¾è¡¨å±•ç¤ºå·¥ä½œä¸ä¼‘æ¯æ—¶é—´çš„åˆ†é…æƒ…å†µã€‚<br>ç”¨æˆ·è´¦æˆ·ç³»ç»Ÿï¼šå…è®¸ç”¨æˆ·æ³¨å†Œå’Œç™»å½•ï¼Œä¿å­˜ä¸ªæ€§åŒ–è®¾ç½®å’Œç»Ÿè®¡æ•°æ®ã€‚<br>ç§»åŠ¨åº”ç”¨å¼€å‘ï¼šå°†Webç‰ˆç•ªèŒ„é’Ÿè½¬åŒ–ä¸ºç§»åŠ¨åº”ç”¨ï¼Œæ‰©å±•ä½¿ç”¨åœºæ™¯ã€‚</p><h1>æ€»ç»“</h1><p>é€šè¿‡æœ¬æ¬¡é¡¹ç›®ï¼Œæˆ‘ä¸ä»…å®è·µäº†å‰ç«¯å¼€å‘çš„åŸºæœ¬æŠ€èƒ½ï¼Œè¿˜æé«˜äº†æˆ‘çš„é¡¹ç›®ç®¡ç†å’Œé—®é¢˜è§£å†³èƒ½åŠ›ã€‚é€šè¿‡ä½¿ç”¨è±†åŒ…AIç¼–ç¨‹åŠ©æ‰‹çš„è¾…åŠ©ï¼Œæˆ‘èƒ½å¤Ÿæ›´é«˜æ•ˆåœ°å®Œæˆå¼€å‘ä»»åŠ¡ï¼Œä¸ºæœªæ¥çš„é¡¹ç›®æ‰“ä¸‹äº†åšå®çš„åŸºç¡€ã€‚æœªæ¥ï¼Œæˆ‘è®¡åˆ’åœ¨æ­¤åŸºç¡€ä¸Šæ·»åŠ æ›´å¤šåŠŸèƒ½ï¼Œè¿›ä¸€æ­¥æå‡åº”ç”¨çš„å®ç”¨æ€§å’Œç”¨æˆ·ä½“éªŒã€‚</p><h1>è‡´è°¢</h1><p>æ„Ÿè°¢DataWhaleæä¾›çš„å­¦ä¹ å¹³å°å’Œèµ„æºï¼Œä»¥åŠè±†åŒ…AIç¼–ç¨‹åŠ©æ‰‹åœ¨å¼€å‘è¿‡ç¨‹ä¸­çš„æœ‰åŠ›æ”¯æŒã€‚</p><h1>å‚è€ƒèµ„æ–™</h1><ul><li><a href="https://zh.wikipedia.org/wiki/%E7%95%AA%E8%8C%84%E5%B7%A5%E4%BD%9C%E6%B3%95">ç•ªèŒ„å·¥ä½œæ³•</a></li><li><a href="https://www.datawhale.cn/activity/116/23/94?rankingPage=1">Datawhale</a></li><li><a href="https://www.marscode.cn/home?utm_source=school&amp;utm_medium=datawhalelearn&amp;utm_campaign=camp1">è±†åŒ…AIç¼–ç¨‹åŠ©æ‰‹</a></li></ul><h1>é™„å½•</h1><h2 id="å®Œæ•´ä»£ç ">å®Œæ•´ä»£ç </h2><h3 id="index-html"><code>index.html</code></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ç•ªèŒ„æ—¶é’Ÿ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.tailwindcss.com&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* è‡ªå®šä¹‰æ ·å¼ */</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.timer</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-family</span>: <span class="string">&#x27;Helvetica Neue&#x27;</span>, sans-serif;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">5rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#f5f5f5</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-bottom</span>: <span class="number">24px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.buttons</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">justify-content</span>: space-between;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.button</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">1.2rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">12px</span> <span class="number">24px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: background-color <span class="number">0.3s</span> ease;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.button</span><span class="selector-class">.start</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#4caf50</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.button</span><span class="selector-class">.start</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#45a049</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.button</span><span class="selector-class">.pause</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#ff9800</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.button</span><span class="selector-class">.pause</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#f57c00</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.button</span><span class="selector-class">.reset</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#f44336</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.button</span><span class="selector-class">.reset</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#e53935</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#stats</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-family</span>: <span class="string">&#x27;Arial, sans-serif&#x27;</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">1.2rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">class</span>=<span class="string">&quot;bg-gray-100 flex items-center justify-center h-screen&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bg-white p-8 rounded shadow-md w-96&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;text-2xl font-semibold mb-4&quot;</span>&gt;</span>ç•ªèŒ„æ—¶é’Ÿ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;timer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;timer text-4xl font-bold text-gray-700&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex mt-8 buttons&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;start&quot;</span> <span class="attr">class</span>=<span class="string">&quot;button start&quot;</span>&gt;</span>å¼€å§‹<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;pause&quot;</span> <span class="attr">class</span>=<span class="string">&quot;button pause&quot;</span>&gt;</span>æš‚åœ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;reset&quot;</span> <span class="attr">class</span>=<span class="string">&quot;button reset&quot;</span>&gt;</span>é‡ç½®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;stats&quot;</span>&gt;</span>å·²å®Œæˆç•ªèŒ„é’Ÿæ¬¡æ•°ï¼š0<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;script.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="script-js"><code>script.js</code></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> timer;</span><br><span class="line"><span class="keyword">let</span> isRunning = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">let</span> time = <span class="number">1500</span>; <span class="comment">// 25åˆ†é’Ÿ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> timerDisplay = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;timer&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> startBtn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;start&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> pauseBtn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;pause&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> resetBtn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;reset&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> statsDisplay = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;stats&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">updateDisplay</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> minutes = <span class="title class_">Math</span>.<span class="title function_">floor</span>(time / <span class="number">60</span>);</span><br><span class="line">    <span class="keyword">const</span> seconds = time % <span class="number">60</span>;</span><br><span class="line">    timerDisplay.<span class="property">textContent</span> = <span class="string">`<span class="subst">$&#123;minutes.toString().padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)&#125;</span>:<span class="subst">$&#123;seconds.toString().padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">updateStats</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> count = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;pomodoroCount&#x27;</span>) || <span class="number">0</span>;</span><br><span class="line">    statsDisplay.<span class="property">textContent</span> = <span class="string">`å·²å®Œæˆç•ªèŒ„é’Ÿæ¬¡æ•°ï¼š<span class="subst">$&#123;count&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">startTimer</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (isRunning) <span class="keyword">return</span>;</span><br><span class="line">    isRunning = <span class="literal">true</span>;</span><br><span class="line">    timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (time &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            time--;</span><br><span class="line">            <span class="title function_">updateDisplay</span>();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">clearInterval</span>(timer);</span><br><span class="line">            isRunning = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">let</span> count = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;pomodoroCount&#x27;</span>) || <span class="number">0</span>;</span><br><span class="line">            count++;</span><br><span class="line">            <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;pomodoroCount&#x27;</span>, count);</span><br><span class="line">            <span class="title function_">updateStats</span>();</span><br><span class="line">            <span class="title function_">alert</span>(<span class="string">&#x27;æ—¶é—´åˆ°ï¼&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">pauseTimer</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(timer);</span><br><span class="line">    isRunning = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">resetTimer</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(timer);</span><br><span class="line">    isRunning = <span class="literal">false</span>;</span><br><span class="line">    time = <span class="number">1500</span>;</span><br><span class="line">    <span class="title function_">updateDisplay</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">startBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, startTimer);</span><br><span class="line">pauseBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, pauseTimer);</span><br><span class="line">resetBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, resetTimer);</span><br><span class="line"></span><br><span class="line"><span class="title function_">updateDisplay</span>();</span><br><span class="line"><span class="title function_">updateStats</span>();</span><br></pre></td></tr></table></figure><h3 id="styles-css"><code>styles.css</code></h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: Arial, sans-serif;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#f4f4f4</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#timer</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">48px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">20px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.controls</span> <span class="selector-tag">button</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#stats</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#555</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> AIç¼–ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ç° Shell çš„ clear å‘½ä»¤</title>
      <link href="/2024/12/23/OS-32Bit/"/>
      <url>/2024/12/23/OS-32Bit/</url>
      
        <content type="html"><![CDATA[<h1>ç®€è¿°</h1><p>â€‚åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œæˆ‘å°†åˆ†äº«å¦‚ä½•åœ¨ä¸€ä¸ªæ“ä½œç³»ç»Ÿé¡¹ç›®<a href="https://github.com/IlanVinograd/OS_32Bit">IlanVinograd/OS_32Bit</a>ä¸­å®ç° clear å‘½ä»¤ï¼Œè¿›è¡Œæ¸…å±ï¼Œç„¶åé‡ç½®å…‰æ ‡å®šä½åˆ°å·¦ä¸Šè§’çš„é—®é¢˜ã€‚</p><h2 id="å¼€å§‹é‡åˆ°çš„é—®é¢˜">å¼€å§‹é‡åˆ°çš„é—®é¢˜</h2><p>â€‚ä¸€å¼€å§‹æˆ‘é‡åˆ°çš„é—®é¢˜æ˜¯ Dockerï¼Œè¿™ä¸ªé¡¹ç›®çš„ä½œè€…æä¾›äº† Dockerfile æ–‡ä»¶æ¥å¸®åŠ©é…ç½®ç¯å¢ƒï¼Œä½†æ˜¯å›½å†…å°±è¿ä¸ä¸Š Docker ( QvQ æˆ–è®¸æœ‰ï¼Œä½†æ˜¯æˆ‘æš‚æ—¶ä¸çŸ¥é“æ€ä¹ˆæï¼Œæ”¾åˆ°åç»­å»å­¦å§)ã€‚æ‰€ä»¥æˆ‘å°±æŒ‰ç…§ Dockerfile æ–‡ä»¶åœ¨æœ¬åœ°å®‰è£…äº†ä¾èµ–ï¼Œåœ¨æœ¬åœ°ç¼–è¯‘æ‰€éœ€è¦çš„å·¥å…·ï¼Œåƒ binutils å’Œ gcc-i686-elf ï¼Œå¹¶é…ç½®å¥½ç¯å¢ƒå˜é‡ï¼Œå¾ˆé¡ºåˆ©åœ°åœ¨æœ¬åœ°è¿è¡Œèµ·äº†é¡¹ç›®ï¼Œä¸å¾—ä¸è¯´é¡¹ç›®ä½œè€…å¾ˆæœ‰æ°´å¹³ã€‚</p><p>â€‚åœ¨æ“ä½œç³»ç»Ÿçš„ Shell ä¸­ï¼Œclear å‘½ä»¤ç”¨äºæ¸…ç©ºå±å¹•å¹¶å°†å…‰æ ‡é‡ç½®åˆ°å·¦ä¸Šè§’ã€‚ä¸€å¼€å§‹æˆ‘æ˜¯åœ¨ Code/Kernel/Sources/shell.c æ–‡ä»¶ä¸­çš„ handleBackgroundColor å‡½æ•°ä¸­è¯†åˆ« clear å‘½ä»¤ï¼Œç„¶åè°ƒç”¨ clearScreen å‡½æ•°è¿›è¡Œæ¸…å±ï¼Œåœ¨è°ƒç”¨ setCursorPosition å‡½æ•°å°†å…‰æ ‡é‡ç½®åˆ°å·¦ä¸Šè§’ã€‚ä½†æ˜¯è¿™æ ·è¿›è¡Œå¤„ç†æœ‰ä¸€ç‚¹é—®é¢˜ã€‚ è¾“å…¥ clear å‘½ä»¤åè¦æŒ‰ä¸‹å›è½¦ï¼Œæœ‰ä¸€ä¸ªä¸“é—¨çš„å‡½æ•° handle_enter å‡½æ•°ä¼šè¦†ç›–æ‰æˆ‘å¯¹ setCursorPosition å‡½æ•°çš„è°ƒç”¨ï¼Œ handle_enter å‡½æ•°ä¼šè‡ªåŠ¨å°†å…‰æ ‡å®šä½åˆ°ä¸‹ä¸€è¡Œå¼€å¤´ã€‚æ‰€ä»¥æˆ‘å°±åœ¨è¿™ä¸ªå‡½æ•°é‡Œä¹Ÿå¯¹ clear å‘½ä»¤è¿›è¡Œè¯†åˆ«ï¼Œç„¶ååˆ·æ–°è¾“å…¥ç¼“å†²åŒºï¼Œé€€å‡ºå³å¯ã€‚</p><p>â€‚æ­£å½“æˆ‘å…´è‡´å‹ƒå‹ƒçš„æƒ³è¦å‘é¡¹ç›®ä½œè€…ç”³è¯· issue çš„ assign æ—¶ï¼Œå¹¶å‘èµ· Pull request æ—¶ï¼Œæˆ‘ä¸å°å¿ƒåœ¨æœ¬åœ°åˆå¹¶åˆ†æ”¯åˆ°äº† main åˆ†æ”¯ã€‚è™½ç„¶æˆ‘å­¦ä¹ è¿‡ git çš„ä½¿ç”¨ï¼Œä½†æ˜¯ç¡®å®ç”¨çš„å¤ªå°‘äº†ï¼Œå¯¼è‡´å¾ˆå¤šå‘½ä»¤ä¸ç†Ÿæ‚‰ï¼Œè¿›è¡Œäº†è¯¯æ“ä½œï¼Œåç»­å†™ä¸€ç¯‡åšå®¢æ€»ç»“æ€»ç»“ã€‚æ‰€ä»¥åˆé‡æ–° clone äº†é¡¹ç›®ï¼Œ è¿›è¡Œä¿®æ”¹ã€‚è¿™æ¬¡æˆ‘çªç„¶æƒ³åˆ°ä¸ºä½•è¦åœ¨ handleBackgroundColor å‡½æ•°é‡Œè¯†åˆ« clear å‘½ä»¤å‘¢ï¼Ÿç›´æ¥åœ¨ handle_enter ç»Ÿä¸€å¤„ç†æ‰€æœ‰çš„ shell å‘½ä»¤ä¸å°±è¡Œäº†ã€‚è¿™é‡Œè¡¥å……ä¸€ç‚¹ï¼Œé¡¹ç›®ä½œè€…å®ç°äº†è¿™ä¸ª 32 ä½æ“ä½œç³»ç»Ÿçš„æ•´ä½“æ¡†æ¶ï¼Œå¤§éƒ¨åˆ† shell å‘½ä»¤éƒ½æ²¡æœ‰å®ç°ã€‚åœ¨æˆ‘è¿›è¡Œçš„æ—¶å€™ä»…ä»…åªå®ç°äº†ä¸€ä¸ª test æµ‹è¯•å‘½ä»¤ã€‚å½“ç„¶æ­£æ˜¯è¿™ä¸ªå‘½ä»¤å¯å‘äº†æˆ‘ï¼Œè®©æˆ‘ä½¿ç”¨æœ€å°‘çš„ä»£ç ã€æœ€å°çš„ä¿®æ”¹å®Œæˆäº†è¿™ä¸ªåŠŸèƒ½ã€‚ä¸€å¼€å§‹æˆ‘è¿˜ä½¿ç”¨å…³ä¸­æ–­çš„æ–¹å¼å®ç°åŸå­æ“ä½œæ¥å®ç°æ¸…å±ä¸å…‰æ ‡é‡å®šä½ï¼Œè™½ç„¶æ²¡æˆåŠŸï¼Œä½† exp++ï¼Œå“ˆå“ˆã€‚</p><h2 id="ä¿®æ”¹å†…å®¹">ä¿®æ”¹å†…å®¹</h2><ol><li>æ›´æ–° handle_enter å‡½æ•°<br>â€‚é¦–å…ˆï¼Œæˆ‘åœ¨ handle_enter å‡½æ•°ä¸­æ·»åŠ äº†å¯¹ clear å‘½ä»¤çš„å¤„ç†é€»è¾‘ã€‚å…·ä½“æ¥è¯´ï¼Œå½“æ£€æµ‹åˆ°è¾“å…¥çš„å‘½ä»¤ä¸æ˜¯ clear æ—¶ï¼Œå°†å…‰æ ‡ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œçš„å¼€å¤´ã€‚å¦åˆ™ï¼Œæ¸…ç©ºå±å¹•å¹¶å°†å…‰æ ‡é‡ç½®åˆ°å·¦ä¸Šè§’ã€‚</li></ol><p>ä¿®æ”¹å‰ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">handle_enter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">uint16_t</span> row = keyboard_cursor_position / VGA_COLS;</span><br><span class="line">    <span class="type">uint16_t</span> col = keyboard_cursor_position % VGA_COLS;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Clear the blinking cursor before processing</span></span><br><span class="line">    <span class="built_in">setCursorPosition</span>(row, col);</span><br><span class="line">    <span class="built_in">putc</span>(<span class="string">&#x27; &#x27;</span>, COLOR_BLACK_ON_WHITE);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Shell Functions</span></span><br><span class="line">    <span class="built_in">scrollIfNeeded</span>(row);</span><br><span class="line">    <span class="built_in">handleBackgroundColor</span>(inputBuffer);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//test temp</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">strcmp</span>((<span class="type">uint8_t</span>*)inputBuffer, (<span class="type">uint8_t</span>*)<span class="string">&quot;test&quot;</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">create_task</span>((<span class="type">uintptr_t</span>)test);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// end test temp</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Move cursor to the next line</span></span><br><span class="line">    row++;</span><br><span class="line">    <span class="keyword">if</span> (row &gt;= VGA_ROWS) &#123;</span><br><span class="line">        <span class="comment">// Scroll again if we&#x27;re still at the last row</span></span><br><span class="line">        <span class="built_in">scroll_screen</span>();</span><br><span class="line">        row = VGA_ROWS - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    keyboard_cursor_position = row * VGA_COLS;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">setCursorPosition</span>(row, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Reset input buffer to default size</span></span><br><span class="line">    <span class="built_in">free</span>(inputBuffer); <span class="comment">// Free the current buffer</span></span><br><span class="line">    inputBufferSize = <span class="number">256</span>; <span class="comment">// Reset the buffer size</span></span><br><span class="line">    inputBuffer = (<span class="type">char</span>*)<span class="built_in">malloc</span>(inputBufferSize); <span class="comment">// Allocate a new buffer</span></span><br><span class="line">    <span class="keyword">if</span> (!inputBuffer) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Error: Could not reallocate input buffer.\n&quot;</span>, RED_ON_BLACK_WARNING);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    inputBuffer[<span class="number">0</span>] = <span class="string">&#x27;\0&#x27;</span>; <span class="comment">// Initialize the buffer</span></span><br><span class="line">    inputBufferIndex = <span class="number">0</span>;  <span class="comment">// Reset the index</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">handle_enter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">uint16_t</span> row = keyboard_cursor_position / VGA_COLS;</span><br><span class="line">    <span class="type">uint16_t</span> col = keyboard_cursor_position % VGA_COLS;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Clear the blinking cursor before processing</span></span><br><span class="line">    <span class="built_in">setCursorPosition</span>(row, col);</span><br><span class="line">    <span class="built_in">putc</span>(<span class="string">&#x27; &#x27;</span>, COLOR_BLACK_ON_WHITE);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Shell Functions</span></span><br><span class="line">    <span class="built_in">scrollIfNeeded</span>(row);</span><br><span class="line">    <span class="built_in">handleBackgroundColor</span>(inputBuffer);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//test temp</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">strcmp</span>((<span class="type">uint8_t</span>*)inputBuffer, (<span class="type">uint8_t</span>*)<span class="string">&quot;test&quot;</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">create_task</span>((<span class="type">uintptr_t</span>)test);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// end test temp</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Move cursor to the next line if it is not clear command</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">strcmp</span>((<span class="type">uint8_t</span>*)inputBuffer, (<span class="type">uint8_t</span>*)<span class="string">&quot;clear&quot;</span>) != <span class="number">0</span>) &#123;</span><br><span class="line">        row++;</span><br><span class="line">        <span class="keyword">if</span> (row &gt;= VGA_ROWS) &#123;</span><br><span class="line">            <span class="comment">// Scroll again if we&#x27;re still at the last row</span></span><br><span class="line">            <span class="built_in">scroll_screen</span>();</span><br><span class="line">            row = VGA_ROWS - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        keyboard_cursor_position = row * VGA_COLS;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">setCursorPosition</span>(row, <span class="number">0</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">clearScreen</span>();</span><br><span class="line">        keyboard_cursor_position = <span class="number">2</span> * VGA_COLS;</span><br><span class="line">        <span class="built_in">setCursorPosition</span>(<span class="number">2</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Reset input buffer to default size</span></span><br><span class="line">    <span class="built_in">free</span>(inputBuffer); <span class="comment">// Free the current buffer</span></span><br><span class="line">    inputBufferSize = <span class="number">256</span>; <span class="comment">// Reset the buffer size</span></span><br><span class="line">    inputBuffer = (<span class="type">char</span>*)<span class="built_in">malloc</span>(inputBufferSize); <span class="comment">// Allocate a new buffer</span></span><br><span class="line">    <span class="keyword">if</span> (!inputBuffer) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Error: Could not reallocate input buffer.\n&quot;</span>, RED_ON_BLACK_WARNING);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    inputBuffer[<span class="number">0</span>] = <span class="string">&#x27;\0&#x27;</span>; <span class="comment">// Initialize the buffer</span></span><br><span class="line">    inputBufferIndex = <span class="number">0</span>;  <span class="comment">// Reset the index</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li>ä¿®å¤ clearScreen å‡½æ•°<br>â€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä¿®å¤äº† clearScreen å‡½æ•°ï¼Œä½¿å…¶ä»è¡Œç´¢å¼• 2 å¼€å§‹æ¸…é™¤ï¼Œè€Œä¸æ˜¯åŸå…ˆçš„è¡Œç´¢å¼• 3ã€‚ä»ç´¢å¼• 2 å¼€å§‹æ¸…é™¤æ˜¯å› ä¸ºé¡¹ç›®ä½œè€…åœ¨å‰ä¸¤è¡Œæ‰“å°äº†ç³»ç»Ÿçš„ä¸€äº›ä¿¡æ¯ã€‚è¿™é‡Œä¼°è®¡æ˜¯é¡¹ç›®ä½œè€…ä¸€æ—¶ç–å¿½ã€‚</li></ol><p>â€‚ä¸ºäº†ç¡®ä¿ä¿®æ”¹åçš„ä»£ç æ­£å¸¸å·¥ä½œï¼Œæˆ‘é‡æ–°ç¼–è¯‘ï¼Œä½¿ç”¨ qemu æ¨¡æ‹Ÿå™¨(æœ‰æ²¡æœ‰å¤§ä½¬æ•™æ•™æˆ‘æ€ä¹ˆæŒæ¡è¿™ç©æ„å„¿ï¼Œç½‘ä¸Šæ•™ç¨‹å¥½å°‘)å¯åŠ¨è¿™ä¸ªç³»ç»Ÿï¼Œæ¥ä¸‹æ¥ï¼š</p><ul><li>åœ¨ Shell ä¸­è¾“å…¥ clear å‘½ä»¤å¹¶æŒ‰ä¸‹å›è½¦ã€‚</li><li>éªŒè¯å±å¹•æ˜¯å¦è¢«æ¸…ç©ºï¼Œå¹¶ä¸”å…‰æ ‡æ˜¯å¦æ­£ç¡®å®šä½åˆ°å·¦ä¸Šè§’ã€‚</li></ul><h2 id="æ€»ç»“">æ€»ç»“</h2><p>â€‚é€šè¿‡ä¸Šè¿°ä¿®æ”¹ï¼Œæˆ‘æˆåŠŸå®ç°äº† Shell çš„ clear å‘½ä»¤ã€‚ç°åœ¨ï¼Œè¾“å…¥ clear å‘½ä»¤åï¼Œå±å¹•ä¼šè¢«æ¸…ç©ºï¼Œå…‰æ ‡æ­£ç¡®å®šä½åˆ°å·¦ä¸Šè§’ï¼ŒåŒæ—¶ä¸å½±å“å…¶ä»–å‘½ä»¤çš„æ­£å¸¸è¿è¡Œã€‚<br>â€‚ç®€å•æ€»ç»“ä¸€ä¸‹ git çš„ä½¿ç”¨ã€‚é¦–å…ˆå°†é¡¹ç›®ä»“åº“ fork åˆ°è‡ªå·±çš„ GitHubï¼Œç„¶åä»è‡ªå·±çš„ Github å°†é¡¹ç›® clone åˆ°æœ¬åœ°ã€‚åˆ›å»ºæ–°çš„åˆ†æ”¯ new_branch_nameï¼ˆéšä¾¿å–çš„åå­—ï¼Œåªæ˜¯åšä¸€ä¸ªä¾‹å­ï¼‰ï¼Œåœ¨è¿™ä¸ªåˆ†æ”¯ä¸Šè¿›è¡Œä¿®æ”¹ã€‚ä¿®æ”¹å®Œæ¯•å git add æäº¤ä¿®æ”¹çš„æ–‡ä»¶ï¼Œç„¶å git commit -m å¯¹æ‰€è¿›è¡Œçš„ä¿®æ”¹è¿›è¡Œæè¿°ï¼Œä½¿ç”¨åŒå¼•å· &quot; å¼€å¤´ï¼Œå¯ä»¥å®ç°å¤šè¡Œæè¿°ï¼Œæœ€åä½¿ç”¨åŒå¼•å· &quot; ç»“å°¾å³å¯ã€‚ä¸€èˆ¬ commit çš„ç¬¬ä¸€è¡Œå¯¹å®ç°çš„åŠŸèƒ½æˆ–è€…ä¿®æ”¹è¿›è¡Œå¤§è‡´æè¿°ï¼Œç„¶åç©ºä¸€è¡Œè¯¦ç»†æè¿°åšå‡ºçš„ä¿®æ”¹ï¼Œæ¯”å¦‚ä¿®æ”¹äº†é‚£ä¸ªæ–‡ä»¶çš„é‚£ä¸ªå‡½æ•°ç­‰ç­‰ã€‚ç©ºä¸€è¡Œæ˜¯ä¸ºäº†åœ¨æ‰§è¡Œ git log --oneline æ—¶åªå±•ç¤ºå¤§è‡´æè¿°ï¼Œè€Œä¸å±•ç¤ºè¯¦ç»†æè¿°ã€‚åšå®Œä¸Šè¿°å·¥ä½œåæ‰§è¡Œ git push origin new_branch_name å‘½ä»¤ï¼Œç„¶åç™»é™† Github åˆ°è‡ªå·±çš„ä»“åº“é¡µé¢ï¼Œå°±å¯ä»¥çœ‹åˆ° Create pull request æŒ‰é’®æç¤ºä½ æœ‰ä¸€ä¸ªåˆå¹¶è¯·æ±‚ã€‚ç‚¹å‡»ååƒ commit ä¸€æ ·å¡«å†™ decription å³å¯ã€‚å¦‚æœä½ çš„ commit åªæœ‰ä¸€ä¸ªå®ƒä¼šè‡ªåŠ¨å¸®ä½ å¡«å†™æˆä½ çš„ commit ã€‚å¦åˆ™ä¸ä¼šå¸®ä½ è‡ªåŠ¨å¡«å†™ã€‚è¿™æ ·å°±ç®—æ˜¯ä¸€ä¸ªå®Œæ•´çš„ PR å•¦ï¼<br>â€‚æ€»ç»“ä¸€å¥è¯å°±æ˜¯æ”¶è·æ»¡æ»¡ï¼<br>â€‚å¸Œæœ›è¿™ç¯‡åšå®¢å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ã€‚å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ï¼ˆè¯„è®ºåŒºè¿˜æ²¡æ“å¥½ï¼Œå¾…ç»­å•¦ï¼‰ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cè¯­è¨€ </tag>
            
            <tag> Shellå‘½ä»¤ </tag>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½ å¥½ï¼</title>
      <link href="/2024/12/18/my-feelings1/"/>
      <url>/2024/12/18/my-feelings1/</url>
      
        <content type="html"><![CDATA[<h1>æ¬¢è¿æ¥åˆ°æˆ‘çš„ä¸ªäººåšå®¢</h1><p>å¤§å®¶å¥½ï¼æˆ‘æ˜¯Maloneï¼Œæ¬¢è¿æ¥åˆ°æˆ‘çš„ä¸ªäººåšå®¢ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘å°†åˆ†äº«æˆ‘å¯¹äººå·¥æ™ºèƒ½å’Œç¼–ç¨‹çš„çƒ­æƒ…ä¸æ¢ç´¢ã€‚</p><h1>å…³äºæˆ‘</h1><p>ä»å°æˆ‘å°±å¯¹è®¡ç®—æœºå……æ»¡äº†å¥½å¥‡å¿ƒï¼Œå°¤å…¶æ˜¯AIå’Œç¼–ç¨‹ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæˆ‘ä¸æ–­å­¦ä¹ å’Œå®è·µï¼Œé€æ¸ç§¯ç´¯äº†ä¸€äº›ç»éªŒå’ŒçŸ¥è¯†ã€‚ç°åœ¨ï¼Œæˆ‘å¸Œæœ›é€šè¿‡è¿™ä¸ªåšå®¢ï¼Œä¸å¤§å®¶åˆ†äº«æˆ‘çš„å­¦ä¹ å¿ƒå¾—å’Œé¡¹ç›®ç»éªŒã€‚</p><h1>åšå®¢ç›®æ ‡</h1><p>è¿™ä¸ªåšå®¢çš„ä¸»è¦ç›®æ ‡æ˜¯ï¼š</p><ul><li><strong>åˆ†äº«çŸ¥è¯†</strong>ï¼šæ— è®ºä½ æ˜¯åˆå­¦è€…è¿˜æ˜¯æœ‰ç»éªŒçš„å¼€å‘è€…ï¼Œæˆ‘éƒ½å¸Œæœ›æˆ‘çš„æ–‡ç« èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚</li><li><strong>è®°å½•å­¦ä¹ è¿‡ç¨‹</strong>ï¼šé€šè¿‡è®°å½•æˆ‘çš„å­¦ä¹ è¿‡ç¨‹ï¼Œæˆ‘å¸Œæœ›èƒ½æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡AIå’Œç¼–ç¨‹ç›¸å…³çš„çŸ¥è¯†ã€‚</li><li><strong>äº¤æµäº’åŠ¨</strong>ï¼šæˆ‘éå¸¸æœŸå¾…ä¸å¤§å®¶äº¤æµï¼Œäº’ç›¸å­¦ä¹ ï¼Œå…±åŒè¿›æ­¥ã€‚</li></ul><h1>æœªæ¥è®¡åˆ’</h1><p>åœ¨æ¥ä¸‹æ¥çš„æ—¶é—´é‡Œï¼Œæˆ‘è®¡åˆ’æ’°å†™ä»¥ä¸‹å‡ ä¸ªæ–¹é¢çš„å†…å®¹ï¼š</p><!-- - **AIåŸºç¡€**ï¼šä»‹ç»AIçš„åŸºæœ¬æ¦‚å¿µå’ŒåŸç†ã€‚ --><ul><li><strong>ç¼–ç¨‹æ•™ç¨‹</strong>ï¼šåˆ†äº«ä¸€äº›ç¼–ç¨‹è¯­è¨€ï¼ˆä¸»è¦æ˜¯Pythonã€Cã€C++ï¼‰çš„æ•™ç¨‹å’ŒæŠ€å·§ã€‚</li><li><strong>é¡¹ç›®å®æˆ˜</strong>ï¼šå±•ç¤ºä¸€äº›å®é™…é¡¹ç›®çš„å¼€å‘è¿‡ç¨‹å’Œå¿ƒå¾—ä½“ä¼šã€‚</li><li><strong>æœ€æ–°åŠ¨æ€</strong>ï¼šåˆ†äº«AIå’Œç¼–ç¨‹é¢†åŸŸçš„æœ€æ–°ç ”ç©¶æˆæœå’ŒæŠ€æœ¯åŠ¨æ€ã€‚</li></ul><h1>äº’åŠ¨äº¤æµ</h1><p>æˆ‘éå¸¸æ¬¢è¿å¤§å®¶åœ¨æ–‡ç« ä¸‹æ–¹ç•™è¨€ï¼Œæå‡ºé—®é¢˜æˆ–å»ºè®®ã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡é‚®ç®±favorite.vampire@qq.comä¸æˆ‘å–å¾—è”ç³»ï¼Œè®©æˆ‘ä»¬ä¸€èµ·äº¤æµå’Œæ¢è®¨ã€‚</p><h1>ending</h1><p>æ„Ÿè°¢ä½ è¯»åˆ°è¿™é‡Œï¼å¸Œæœ›æˆ‘çš„åšå®¢èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚ä¸‹ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘å°†ä»‹ç»AIçš„åŸºæœ¬æ¦‚å¿µï¼Œæ•¬è¯·æœŸå¾…ï¼</p>]]></content>
      
      
      <categories>
          
          <category> æ‚è°ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ‚è°ˆ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
