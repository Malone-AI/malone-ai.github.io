<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>é›¶ä¸€ä¸–ç•Œ</title>
  
  
  <link href="http://malone-ai.github.io/atom.xml" rel="self"/>
  
  <link href="http://malone-ai.github.io/"/>
  <updated>2025-02-28T15:49:07.273Z</updated>
  <id>http://malone-ai.github.io/</id>
  
  <author>
    <name>Malone</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>dp3</title>
    <link href="http://malone-ai.github.io/2025/02/28/dp3/"/>
    <id>http://malone-ai.github.io/2025/02/28/dp3/</id>
    <published>2025-02-28T15:49:07.000Z</published>
    <updated>2025-02-28T15:49:07.273Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title>Leetcode äºŒåä¹ï¼š2353. è®¾è®¡é£Ÿç‰©è¯„åˆ†ç³»ç»Ÿ</title>
    <link href="http://malone-ai.github.io/2025/02/28/leetcode29/"/>
    <id>http://malone-ai.github.io/2025/02/28/leetcode29/</id>
    <published>2025-02-28T15:48:53.000Z</published>
    <updated>2025-02-28T15:52:15.571Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šæ—¥Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/design-a-food-rating-system/description/">2353. è®¾è®¡é£Ÿç‰©è¯„åˆ†ç³»ç»Ÿ</a>ã€‚</p><p>è®¾è®¡ä¸€ä¸ªæ”¯æŒä¸‹è¿°æ“ä½œçš„é£Ÿç‰©è¯„åˆ†ç³»ç»Ÿï¼š</p><ul><li>ä¿®æ”¹ ç³»ç»Ÿä¸­åˆ—å‡ºçš„æŸç§é£Ÿç‰©çš„è¯„åˆ†ã€‚</li><li>è¿”å›ç³»ç»Ÿä¸­æŸä¸€ç±»çƒ¹é¥ªæ–¹å¼ä¸‹è¯„åˆ†æœ€é«˜çš„é£Ÿç‰©ã€‚</li></ul><p>å®ç° FoodRatings ç±»ï¼š</p><ul><li>FoodRatings(String[] foods, String[] cuisines, int[] ratings) åˆå§‹åŒ–ç³»ç»Ÿã€‚é£Ÿç‰©ç”± foodsã€cuisines å’Œ ratings æè¿°ï¼Œé•¿åº¦å‡ä¸º n ã€‚<ul><li>foods[i] æ˜¯ç¬¬ i ç§é£Ÿç‰©çš„åå­—ã€‚</li><li>cuisines[i] æ˜¯ç¬¬ i ç§é£Ÿç‰©çš„çƒ¹é¥ªæ–¹å¼ã€‚</li><li>ratings[i] æ˜¯ç¬¬ i ç§é£Ÿç‰©çš„æœ€åˆè¯„åˆ†ã€‚</li></ul></li><li>void changeRating(String food, int newRating) ä¿®æ”¹åå­—ä¸º food çš„é£Ÿç‰©çš„è¯„åˆ†ã€‚</li><li>String highestRated(String cuisine) è¿”å›æŒ‡å®šçƒ¹é¥ªæ–¹å¼ cuisine ä¸‹è¯„åˆ†æœ€é«˜çš„é£Ÿç‰©çš„åå­—ã€‚å¦‚æœå­˜åœ¨å¹¶åˆ—ï¼Œè¿”å›<code>å­—å…¸åºè¾ƒå°</code>çš„åå­—ã€‚</li></ul><p>æ³¨æ„ï¼Œå­—ç¬¦ä¸² x çš„å­—å…¸åºæ¯”å­—ç¬¦ä¸² y æ›´å°çš„å‰ææ˜¯ï¼šx åœ¨å­—å…¸ä¸­å‡ºç°çš„ä½ç½®åœ¨ y ä¹‹å‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¦ä¹ˆ x æ˜¯ y çš„å‰ç¼€ï¼Œæˆ–è€…åœ¨æ»¡è¶³ x[i] != y[i] çš„ç¬¬ä¸€ä¸ªä½ç½® i å¤„ï¼Œx[i] åœ¨å­—æ¯è¡¨ä¸­å‡ºç°çš„ä½ç½®åœ¨ y[i] ä¹‹å‰ã€‚</p><p>è¿™å‡ å¤©è®¾è®¡é¢˜åšå¾—å¤´å¤§ğŸ˜’ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">FoodRatings</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    unordered_map&lt;string, pair&lt;<span class="type">int</span>, string&gt;&gt; foods_map;</span><br><span class="line">    unordered_map&lt;string, set&lt;pair&lt;<span class="type">int</span>, string&gt;&gt;&gt; cuisines_map;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">FoodRatings</span>(vector&lt;string&gt;&amp; foods, vector&lt;string&gt;&amp; cuisines, vector&lt;<span class="type">int</span>&gt;&amp; ratings) &#123;</span><br><span class="line">        <span class="type">int</span> n = foods.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            foods_map[foods[i]] = &#123;ratings[i], cuisines[i]&#125;;</span><br><span class="line">            cuisines_map[cuisines[i]].<span class="built_in">emplace</span>(-ratings[i], foods[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">changeRating</span><span class="params">(string food, <span class="type">int</span> newRating)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">auto</span>&amp; [rating, cuisine] = foods_map[food];</span><br><span class="line">        cuisines_map[cuisine].<span class="built_in">erase</span>(&#123;-rating, food&#125;);</span><br><span class="line">        cuisines_map[cuisine].<span class="built_in">emplace</span>(-newRating, food);</span><br><span class="line">        rating = newRating;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function">string <span class="title">highestRated</span><span class="params">(string cuisine)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> cuisines_map[cuisine].<span class="built_in">begin</span>()-&gt;second;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your FoodRatings object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * FoodRatings* obj = new FoodRatings(foods, cuisines, ratings);</span></span><br><span class="line"><span class="comment"> * obj-&gt;changeRating(food,newRating);</span></span><br><span class="line"><span class="comment"> * string param_2 = obj-&gt;highestRated(cuisine);</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šæ—¥Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º&lt;a href=&quot;https://leetcode.cn/problems/design-a-food-rating-system/description/&quot;&gt;2353. è®¾è®¡é£Ÿç‰©è¯„åˆ†ç³»ç»Ÿ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è®¾è®¡ä¸€ä¸ªæ”¯æŒä¸‹è¿°æ“ä½œçš„é£Ÿç‰©è¯„åˆ†</summary>
      
    
    
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/categories/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    
    <category term="å“ˆå¸Œè¡¨" scheme="http://malone-ai.github.io/tags/%E5%93%88%E5%B8%8C%E8%A1%A8/"/>
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/tags/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    <category term="è®¾è®¡" scheme="http://malone-ai.github.io/tags/%E8%AE%BE%E8%AE%A1/"/>
    
  </entry>
  
  <entry>
    <title>åŠ¨æ€è§„åˆ’äºŒ</title>
    <link href="http://malone-ai.github.io/2025/02/27/dp2/"/>
    <id>http://malone-ai.github.io/2025/02/27/dp2/</id>
    <published>2025-02-27T14:47:25.000Z</published>
    <updated>2025-02-28T17:11:50.663Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šæ—¥ç»§ç»­åŠ¨æ€è§„åˆ’ï¼Œå…ˆæ¥é“ç®€å•é¢˜ç»ƒç»ƒæ‰‹<a href="https://leetcode.cn/problems/fibonacci-number/description/">509. æ–æ³¢é‚£å¥‘æ•°</a>ã€‚</p><p>æ–æ³¢é‚£å¥‘æ•° ï¼ˆé€šå¸¸ç”¨ F(n) è¡¨ç¤ºï¼‰å½¢æˆçš„åºåˆ—ç§°ä¸º æ–æ³¢é‚£å¥‘æ•°åˆ— ã€‚è¯¥æ•°åˆ—ç”± 0 å’Œ 1 å¼€å§‹ï¼Œåé¢çš„æ¯ä¸€é¡¹æ•°å­—éƒ½æ˜¯å‰é¢ä¸¤é¡¹æ•°å­—çš„å’Œã€‚ä¹Ÿå°±æ˜¯ï¼š</p><pre><code>F(0) = 0ï¼ŒF(1) = 1F(n) = F(n - 1) + F(n - 2)ï¼Œå…¶ä¸­ n &gt; 1</code></pre><p>ç»™å®š n ï¼Œè¯·è®¡ç®— F(n) ã€‚</p><p>è¿™é“é¢˜æˆ‘ç§°ä¹‹ä¸ºé€’å½’å…¥é—¨é¢˜ç›®ï¼Œä½†æ˜¯åœ¨DPé‡Œä¹Ÿç®—å…¥é—¨çº§å§ã€‚</p><h1>è·Ÿç€çµèŒ¶å±±è‰¾åºœå­¦DP</h1><p>æ¥ä¸‹æ¥ï¼Œå­¦ä¹ å­¦ä¹ çµèŒ¶å±±è‰¾åºœå‡ºå“çš„<a href="https://www.bilibili.com/video/BV1Xj411K7oF/?vd_source=a0f19e79b7da02f4fa318d91be5bc86a">åŠ¨æ€è§„åˆ’å…¥é—¨ï¼šä»è®°å¿†åŒ–æœç´¢åˆ°é€’æ¨ã€åŸºç¡€ç®—æ³•ç²¾è®² 17ã€‘</a>ï¼ˆè§†é¢‘é“¾æ¥ä¸ºBç«™UPä¸»çµèŒ¶å±±è‰¾åºœå‡ºå“ï¼Œä¾µæƒåˆ ï¼‰ã€‚</p><p>UPä¸»æŒ‡å‡ºï¼ŒåŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒï¼š</p><ul><li>çŠ¶æ€å®šä¹‰</li><li>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</li></ul><p>UPä¸»è¦æ˜¯é€šè¿‡Leetcodeä¸Šçš„ä¸€é“é¢˜ç›®<a href="https://leetcode.cn/problems/house-robber/description/">198. æ‰“å®¶åŠ«èˆ</a>æ¥è¿›è¡Œè®²è§£çš„ã€‚</p><p>ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å°å·ï¼Œè®¡åˆ’å·çªƒæ²¿è¡—çš„æˆ¿å±‹ã€‚æ¯é—´æˆ¿å†…éƒ½è—æœ‰ä¸€å®šçš„ç°é‡‘ï¼Œå½±å“ä½ å·çªƒçš„å”¯ä¸€åˆ¶çº¦å› ç´ å°±æ˜¯ç›¸é‚»çš„æˆ¿å±‹è£…æœ‰ç›¸äº’è¿é€šçš„é˜²ç›—ç³»ç»Ÿï¼Œå¦‚æœä¸¤é—´ç›¸é‚»çš„æˆ¿å±‹åœ¨åŒä¸€æ™šä¸Šè¢«å°å·é—¯å…¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŠ¥è­¦ã€‚</p><p>ç»™å®šä¸€ä¸ªä»£è¡¨æ¯ä¸ªæˆ¿å±‹å­˜æ”¾é‡‘é¢çš„éè´Ÿæ•´æ•°æ•°ç»„ï¼Œè®¡ç®—ä½  ä¸è§¦åŠ¨è­¦æŠ¥è£…ç½®çš„æƒ…å†µä¸‹ ï¼Œä¸€å¤œä¹‹å†…èƒ½å¤Ÿå·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><pre><code>è¾“å…¥ï¼š[1,2,3,1]è¾“å‡ºï¼š4è§£é‡Šï¼šå·çªƒ 1 å·æˆ¿å±‹ (é‡‘é¢ = 1) ï¼Œç„¶åå·çªƒ 3 å·æˆ¿å±‹ (é‡‘é¢ = 3)ã€‚ å·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ = 1 + 3 = 4 ã€‚</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code>è¾“å…¥ï¼š[2,7,9,3,1]è¾“å‡ºï¼š12è§£é‡Šï¼šå·çªƒ 1 å·æˆ¿å±‹ (é‡‘é¢ = 2), å·çªƒ 3 å·æˆ¿å±‹ (é‡‘é¢ = 9)ï¼Œæ¥ç€å·çªƒ 5 å·æˆ¿å±‹ (é‡‘é¢ = 1)ã€‚ å·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ = 2 + 9 + 1 = 12 ã€‚</code></pre><h2 id="çµèŒ¶å±±è‰¾åºœçš„æ€è·¯">çµèŒ¶å±±è‰¾åºœçš„æ€è·¯</h2><h3 id="é€’å½’">é€’å½’</h3><p>å…ˆæŠŠå®ƒçœ‹æˆä¸€é“å›æº¯é¢˜ï¼ŒæŠŠä¸€ä¸ªå¤§é—®é¢˜å˜æˆè§„æ¨¡æ›´å°çš„å­é—®é¢˜ï¼Œä»ç¬¬ä¸€ä¸ªæˆ¿å­æˆ–è€…æœ€åä¸€ä¸ªæˆ¿å­å¼€å§‹æ€è€ƒï¼Œå› ä¸ºä»–ä»¬æ”¶åˆ°çš„çº¦æŸæœ€å°‘ã€‚æ¯”å¦‚è€ƒè™‘æœ€åä¸€ä¸ªæˆ¿å­é€‰è¿˜æ˜¯ä¸é€‰ï¼š</p><ul><li>å¦‚æœä¸é€‰ï¼Œé‚£ä¹ˆé—®é¢˜å°±å˜æˆn-1ä¸ªæˆ¿å­çš„é—®é¢˜</li><li>å¦‚æœé€‰ï¼Œå°±å˜æˆn-2ä¸ªæˆ¿å­çš„é—®é¢˜<br>ä¸æ–­è¿™æ ·æ€è€ƒä¸‹å»å¯ä»¥å¾—åˆ°ä¸€æ£µæœç´¢æ ‘ï¼š</li></ul><p><img src="/images/dp2.png" alt=""></p><p>æ³¨ï¼šå›¾ç‰‡æ¥æºäºä¸Šè¿°æ‰€æBç«™è§†é¢‘ä¸­</p><p>æ³¨æ„ä¸€ç‚¹ï¼Œå›¾ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„æ•°å­—ä»£è¡¨ç¬¬å‡ ä¸ªæˆ¿å­ï¼Œ4å°±æ˜¯ç¬¬å››ä¸ªæˆ¿å­ã€‚</p><p>çµèŒ¶å±±è‰¾åºœæå‡ºäº†å›æº¯ä¸‰é—®ï¼š</p><ol><li>å½“å‰æ“ä½œï¼Ÿæ˜¯æšä¸¾<code>ç¬¬</code>iä¸ªæˆ¿å­é€‰/ä¸é€‰</li><li>å­é—®é¢˜ï¼Ÿæ˜¯<code>å‰</code>iä¸ªæˆ¿å­ä¸­å¾—åˆ°çš„æœ€å¤§é‡‘é¢å’Œ</li><li>ä¸‹ä¸€ä¸ªå­é—®é¢˜ï¼Ÿéœ€è¦åˆ†ç±»è®¨è®ºï¼š<ul><li>ä¸é€‰ï¼šä»<code>å‰</code>i-1ä¸ªæˆ¿å­å¾—åˆ°çš„æœ€å¤§é‡‘é¢å’Œ</li><li>é€‰ï¼šä»<code>å‰</code>i-2ä¸ªæˆ¿å­å¾—åˆ°çš„æœ€å¤§é‡‘é¢å’Œ<br>æœ€ç»ˆå¾—åˆ°ä»¥ä¸‹å®ç°ï¼š</li></ul></li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">rob</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        function&lt;<span class="type">int</span>(<span class="type">int</span>)&gt; dfs = [&amp;](<span class="type">int</span> i)-&gt;<span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; <span class="number">0</span>) </span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            <span class="type">int</span> res = <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>), nums[i] + <span class="built_in">dfs</span>(i<span class="number">-2</span>));</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(nums.<span class="built_in">size</span>()<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="è®°å¿†åŒ–æœç´¢">è®°å¿†åŒ–æœç´¢</h3><p>ä¸Šè¿°ä»£ç ç±»ä¼¼äºå›æº¯ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯æŒ‡æ•°çº§åˆ«çš„ï¼Œä¼šè¶…æ—¶ã€‚å¦‚ä½•ä¼˜åŒ–ï¼ŸçµèŒ¶å±±è‰¾åºœå¼•å¯¼æˆ‘ä»¬å›å»çœ‹ä¹‹å‰çš„é‚£é¢—æœç´¢æ ‘ã€‚è§‚å¯Ÿæœç´¢æ ‘æˆ‘ä»¬ä¼šå‘ç°ï¼Œæœ‰ä¸¤ä¸ªåŒ…å«èŠ‚ç‚¹2çš„å­æ ‘ï¼Œå¹¶ä¸”è¿™ä¸¤ä¸ªå­æ ‘æ˜¯ç›¸åŒçš„ã€‚ä¹Ÿå°±æ˜¯è¯´dfs(2)ç®—äº†ä¸¤æ¬¡ï¼Œä½†å®ƒä»¬çš„ç»“æœæ˜¯ä¸€æ ·ï¼Œå¹²è„†åœ¨ç¬¬ä¸€æ¬¡è®¡ç®—æ—¶å°±æŠŠè®¡ç®—ç»“æœå­˜åˆ°ä¸€ä¸ªcacheæ•°ç»„æˆ–è€…å“ˆå¸Œè¡¨é‡Œã€‚</p><p><img src="/images/dp2_2.png" alt=""></p><p>æ³¨ï¼šå›¾ç‰‡æ¥æºäºä¸Šè¿°æ‰€æBç«™è§†é¢‘ä¸­</p><p>ä¼˜åŒ–åçš„æœç´¢æ ‘å¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°è¿™æ£µæœç´¢æ ‘åªæœ‰O(n)ä¸ªèŠ‚ç‚¹ï¼Œæ—¶é—´å¤æ‚åº¦ä¹Ÿä¼˜åŒ–åˆ°äº†O(n)ã€‚</p><p><img src="/images/dp2_3.png" alt=""></p><p>æ³¨ï¼šå›¾ç‰‡æ¥æºäºä¸Šè¿°æ‰€æBç«™è§†é¢‘ä¸­</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">rob</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">memo</span><span class="params">(n, <span class="number">-1</span>)</span></span>;</span><br><span class="line">        function&lt;<span class="type">int</span>(<span class="type">int</span>)&gt; dfs = [&amp;](<span class="type">int</span> i)-&gt;<span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; <span class="number">0</span>) </span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span> (memo[i] != <span class="number">-1</span>)</span><br><span class="line">                <span class="keyword">return</span> memo[i];</span><br><span class="line">            memo[i] = <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>), nums[i] + <span class="built_in">dfs</span>(i<span class="number">-2</span>));</span><br><span class="line">            <span class="keyword">return</span> memo[i];</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(nums.<span class="built_in">size</span>()<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] nums, memo;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">rob</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.nums = nums;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        memo = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">        Arrays.fill(memo, -<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> dfs(n-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &lt; <span class="number">0</span>) </span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (memo[i] != -<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> memo[i];</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> Math.max(dfs(i-<span class="number">1</span>), dfs(i-<span class="number">2</span>) + nums[i]);</span><br><span class="line">        memo[i] = res;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¤æ‚åº¦å¦‚ä½•è®¡ç®—å‘¢ï¼Ÿæœ‰å…¬å¼ï¼š</p><ul><li>çŠ¶æ€æ•° <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>Ã—</mo></mrow><annotation encoding="application/x-tex">\times</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.58333em;"></span><span class="strut bottom" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord">Ã—</span></span></span></span>å•ä¸ªçŠ¶æ€æ‰€éœ€è¦çš„è®¡ç®—æ—¶é—´<br>æœ¬é¢˜çŠ¶æ€ä¸ªæ•°æ˜¯O(n)ï¼Œå•ä¸ªçŠ¶æ€çš„è®¡ç®—æ—¶é—´æ˜¯O(1)ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚ç©ºé—´å¤æ‚åº¦ä¸ºO(n)ã€‚</li></ul><h3 id="é€’æ¨">é€’æ¨</h3><p>æœ‰æ²¡æœ‰åŠæ³•æŠŠç©ºé—´å¤æ‚åº¦ä¼˜åŒ–åˆ°O(1)å‘¢ï¼Ÿé€’å½’çš„é€’å³è°ƒç”¨å‡½æ•°ï¼Œå½’å³returnã€‚</p><p>å†å›å¤´çœ‹ä¸Šé¢é‚£å¼ å›¾ï¼Œè¿™é‡Œä¸ºäº†é¿å…æ¥å›ç¿»ï¼Œå†åœ¨è¿™é‡Œé™„ä¸Šã€‚</p><p><img src="/images/dp2_3.png" alt=""></p><p>æ³¨ï¼šå›¾ç‰‡æ¥æºäºä¸Šè¿°æ‰€æBç«™è§†é¢‘ä¸­</p><p>è¿™é‡Œè®¡ç®—maxå‘ç”Ÿåœ¨dfsè°ƒç”¨ç»“æŸä¹‹åï¼Œä¹Ÿå°±æ˜¯åœ¨é€’å½’çš„â€œå½’â€çš„è¿‡ç¨‹ä¸­æ‰å‘ç”Ÿäº†å®é™…çš„maxè®¡ç®—ã€‚0å’Œ1å½’åˆ°2ï¼Œ2å’Œ1å½’åˆ°3ï¼Œ3å’Œ2å½’åˆ°4ï¼Œé‚£æ—¢ç„¶æˆ‘ä»¬çŸ¥é“è¦ä»å“ªäº›ç‚¹å½’åˆ°å“ªä¸ªç‚¹ï¼Œé‚£ä¹ˆå¹²è„†å»æ‰é€’å½’ä¸­çš„â€œé€’â€ï¼Œåªç•™ä¸‹â€œå½’â€çš„è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯ä»æœ€ä¸‹é¢å¼€å§‹å¾€ä¸Šè®¡ç®—ã€‚è¿™è¢«çµèŒ¶å±±è‰¾åºœç§°ä½œâ€œé€’æ¨â€ã€‚</p><pre><code>è‡ªé¡¶å‘ä¸‹ç®— = è®°å¿†åŒ–æœç´¢è‡ªåº•å‘ä¸Šç®— = é€’æ¨</code></pre><p>ä¸Šè¿°åº”è¯¥æ˜¯UPä¸»çµèŒ¶å±±è‰¾åºœæå‡ºçš„æ¦‚å¿µäº†ï¼Œä»”ç»†è¯¦ç»†æ„Ÿè§‰å¾ˆæœ‰é“ç†ğŸ˜ã€‚</p><p>å¦‚ä½•å°†è®°å¿†åŒ–æœç´¢æ”¹æˆé€’æ¨ï¼ŸçµèŒ¶å±±è‰¾åºœæ€»ç»“å¦‚ä¸‹ï¼š</p><ol><li>dfs -&gt; fæ•°ç»„</li><li>é€’å½’ -&gt; å¾ªç¯</li><li>é€’å½’è¾¹ç•Œ -&gt; æ•°ç»„åˆå§‹å€¼</li></ol><p>åŸæ¥çš„é€’å½’ä¸º:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dfs</span>(i) = <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>), <span class="built_in">dfs</span>(i<span class="number">-2</span>) + nums[i]);</span><br></pre></td></tr></table></figure><p>åŸºäºä¸Šè¿°æ–¹æ³•å¾ˆå®¹æ˜“å°†é€’å½’ä¿®æ”¹æˆé€’æ¨ï¼Œä½†æ˜¯éœ€è¦å¯¹i = 0å’Œi = 1çš„æƒ…å†µç‰¹æ®Šå¤„ç†ï¼ˆå› ä¸ºä¼šäº§ç”Ÿè´Ÿæ•°ä¸‹æ ‡ï¼‰ã€‚</p><p>ä¸ºäº†é¿å…äº§ç”Ÿè´Ÿæ•°ä¸‹æ ‡ï¼Œå¯ä»¥æŠŠiæ”¹æˆä»2å¼€å§‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f[i] = <span class="built_in">max</span>(f[i<span class="number">-1</span>], f[i<span class="number">-2</span>] + nums[i]);</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥æŠŠä¸‰å¤„iéƒ½+2ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f[i<span class="number">+2</span>] = <span class="built_in">max</span>(f[i<span class="number">+1</span>], f[i] + nums[i]);</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆå¾—åˆ°</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">rob</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">f</span><span class="params">(n + <span class="number">2</span>)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) </span><br><span class="line">            f[i<span class="number">+2</span>] = <span class="built_in">max</span>(f[i<span class="number">+1</span>], f[i] + nums[i]);</span><br><span class="line">        <span class="keyword">return</span> f[n<span class="number">+1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> MAX(a, b) ((a) &gt; (b) ? (a) : (b))</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">rob</span><span class="params">(<span class="type">int</span>* nums, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">int</span> * f = (<span class="type">int</span> *)<span class="built_in">calloc</span>(n + <span class="number">2</span>, <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">        f[i+<span class="number">2</span>] = MAX(f[i+<span class="number">1</span>], f[i] + nums[i]);</span><br><span class="line">    <span class="keyword">return</span> f[n + <span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">rob</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="type">int</span>[] f = <span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) </span><br><span class="line">            f[i+<span class="number">2</span>] = Math.max(f[i+<span class="number">1</span>], f[i] + nums[i]);</span><br><span class="line">        <span class="keyword">return</span> f[n+<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€’æ¨çš„ä»£ç ç©ºé—´å¤æ‚åº¦ä»ç„¶ä¸ºO(n)ï¼Œä½†æ˜¯ç»“åˆä¸€å¼€å§‹çš„<a href="https://leetcode.cn/problems/fibonacci-number/description/">509. æ–æ³¢é‚£å¥‘æ•°</a>ï¼Œåº”è¯¥ä¸éš¾æƒ³åˆ°å¦‚ä½•ç©ºé—´ä¼˜åŒ–ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">rob</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> f1 = <span class="number">0</span>, f2 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="type">int</span> cur = <span class="built_in">max</span>(f1, f2 + nums[i]);</span><br><span class="line">            f2 = f1;</span><br><span class="line">            f1 = cur;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> MAX(a, b) ((a) &gt; (b) ? (a) : (b))</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">rob</span><span class="params">(<span class="type">int</span>* nums, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">int</span> f1 = <span class="number">0</span>, f2 = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> cur = MAX(f1, f2 + nums[i]);</span><br><span class="line">        f2 = f1;</span><br><span class="line">        f1 = cur;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> f1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">rob</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="type">int</span> <span class="variable">f1</span> <span class="operator">=</span> <span class="number">0</span>, f2 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">cur</span> <span class="operator">=</span> Math.max(f1, f2 + nums[i]);</span><br><span class="line">            f2 = f1;</span><br><span class="line">            f1 = cur;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šæ—¥ç»§ç»­åŠ¨æ€è§„åˆ’ï¼Œå…ˆæ¥é“ç®€å•é¢˜ç»ƒç»ƒæ‰‹&lt;a href=&quot;https://leetcode.cn/problems/fibonacci-number/description/&quot;&gt;509. æ–æ³¢é‚£å¥‘æ•°&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æ–æ³¢é‚£å¥‘æ•° ï¼ˆé€šå¸¸ç”¨ F(n) è¡¨ç¤ºï¼‰å½¢æˆçš„åºåˆ—ç§°ä¸º </summary>
      
    
    
    
    <category term="åŠ¨æ€è§„åˆ’" scheme="http://malone-ai.github.io/categories/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
    
    <category term="åŠ¨æ€è§„åˆ’" scheme="http://malone-ai.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
  </entry>
  
  <entry>
    <title>mallocã€free å’Œ newã€delete çš„åŒºåˆ«</title>
    <link href="http://malone-ai.github.io/2025/02/27/cpp-interview1/"/>
    <id>http://malone-ai.github.io/2025/02/27/cpp-interview1/</id>
    <published>2025-02-27T13:51:24.000Z</published>
    <updated>2025-02-27T14:29:52.279Z</updated>
    
    <content type="html"><![CDATA[<p>malloc å’Œ free æ˜¯Cè¯­è¨€çš„åº“å‡½æ•°ï¼Œ new å’Œ delete æ˜¯ C++ é‡Œçš„æ“ä½œç¬¦ã€‚è°ˆåˆ°åŒºåˆ«å°±è¦å»è®¨è®ºå…±åŒç‚¹ä¸ä¸åŒç‚¹ï¼Œå°¤å…¶è¦å…³æ³¨ä»–ä»¬ä¹‹é—´çš„å·®å¼‚ã€‚</p><h1>new å’Œ malloc</h1><ol><li>new è‡ªåŠ¨è®¡ç®—æ‰€éœ€åˆ†é…çš„å†…å­˜å¤§å°ï¼Œmallocéœ€è¦æ‰‹åŠ¨è®¡ç®—ã€‚</li><li>è¿”å›å€¼ä¸åŒï¼Œnewçš„è¿”å›å€¼ä¸ºå¯¹è±¡ç±»å‹çš„æŒ‡é’ˆï¼Œè€Œmallocè¿”å›çš„æ˜¯<code>void*</code>ç±»å‹çš„æŒ‡é’ˆï¼ˆä½¿ç”¨mallocå¾€å¾€éœ€è¦æ‰‹åŠ¨è¿›è¡Œç±»å‹è½¬æ¢ï¼‰ã€‚</li><li>new åˆ†é…å¤±è´¥æ—¶æŠ›å‡ºå¼‚å¸¸std::bad_allocï¼Œè€Œmallocåˆ†é…å¤±è´¥åˆ™è¿”å›NULLã€‚</li><li>new æ˜¯free storeä¸Šåˆ†é…å†…å­˜ï¼Œè€Œmallocæ˜¯åœ¨å †ä¸Šæˆ–è€…æ–‡ä»¶æ˜ å°„åŒºã€‚</li><li>new åˆ†é…çš„å†…å­˜ä¸€èˆ¬æ˜¯åˆå§‹åŒ–è¿‡çš„ï¼Œmallocåˆ†é…çš„å†…å­˜æ²¡æœ‰ç»è¿‡åˆå§‹åŒ–ã€‚</li></ol><h2 id="new-çš„å·¥ä½œè¿‡ç¨‹">new çš„å·¥ä½œè¿‡ç¨‹</h2><ol><li>ä½¿ç”¨newæ“ä½œç¬¦æ—¶ï¼Œå…ˆè°ƒç”¨operator newï¼ˆè¿™ä¸ªå¯ä»¥é‡è½½ï¼‰</li><li>ç„¶åç”³è¯·æ‰€éœ€çš„ç©ºé—´</li><li>æœ€åè°ƒç”¨æ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–æˆå‘˜å˜é‡</li></ol><h2 id="malloc">malloc</h2><ol><li>mallocåˆ†é…çš„è™šæ‹Ÿå†…å­˜</li><li>mallocå½“åˆ†é…çš„å†…å­˜å°äº128Kå­—èŠ‚æ—¶é€šè¿‡brkç³»ç»Ÿè°ƒç”¨åœ¨å †ä¸Šåˆ†é…å†…å­˜ï¼Œå½“è¶…è¿‡128Kå­—èŠ‚æ—¶é€šè¿‡mmapç³»ç»Ÿè°ƒç”¨åœ¨æ–‡ä»¶æ˜ å°„åŒºåˆ†é…å†…å­˜</li></ol><h1>delete å’Œ free</h1><ol><li>delete éœ€è¦å¯¹è±¡ç±»å‹çš„æŒ‡é’ˆï¼Œfree ä¸éœ€è¦å…³æ³¨éœ€è¦é‡Šæ”¾å¯¹è±¡çš„ç±»å‹<ul><li>deleteéœ€è¦è°ƒç”¨å¯¹åº”çš„ææ„å‡½æ•°ï¼Œæ“¦é™¤ç±»å‹deleteå°±ä¸çŸ¥é“è°ƒç”¨ä»€ä¹ˆææ„å‡½æ•°äº†ã€‚</li></ul></li></ol><h2 id="delete-å·¥ä½œè¿‡ç¨‹">delete å·¥ä½œè¿‡ç¨‹</h2><ol><li>å…ˆè°ƒç”¨ææ„å‡½æ•°</li><li>å†è°ƒç”¨operator deleteï¼ˆä¹Ÿå¯ä»¥è¿›è¡Œé‡è½½ï¼‰</li><li>é‡Šæ”¾ç©ºé—´</li></ol><h2 id="freeæ˜¯å¦‚ä½•çŸ¥é“è¦é‡Šæ”¾å¤šå¤§çš„ç©ºé—´">freeæ˜¯å¦‚ä½•çŸ¥é“è¦é‡Šæ”¾å¤šå¤§çš„ç©ºé—´</h2><p>mallocåˆ†é…å†…å­˜çš„æ—¶å€™ï¼Œäº‹å®ä¸Šå¤šåˆ†é…äº†16å­—èŠ‚çš„ç©ºé—´(16 + mem)ï¼Œè¿”å›å€¼è¿”å›memçš„é¦–åœ°å€ã€‚freeçš„æ—¶å€™ï¼Œå°±ä¼šå‘å·¦åç§»16å­—èŠ‚ï¼Œè¿™16å­—èŠ‚çš„ç©ºé—´å­˜å‚¨äº†å†…å­˜å—çš„æè¿°ä¿¡æ¯ï¼ŒåŒ…å«memçš„å¤§å°ã€‚freeå°±æ˜¯é€šè¿‡è¿™ç§æ–¹å¼æ¥è·å–è¦é‡Šæ”¾çš„ç©ºé—´å¤§å°ï¼Œå¹¶ä¸”æ­£å› ä¸ºæ­¤ï¼Œfreeé‡Šæ”¾æ—¶æ— éœ€å…³æ³¨æ‰€éœ€é‡Šæ”¾å¯¹è±¡çš„ç±»å‹ã€‚</p><h2 id="freeé‡Šæ”¾å†…å­˜åï¼Œè¿™å—å†…å­˜è¿˜åœ¨å—">freeé‡Šæ”¾å†…å­˜åï¼Œè¿™å—å†…å­˜è¿˜åœ¨å—</h2><ul><li>å¦‚æœå†…å­˜å—æ˜¯é€šè¿‡brkç³»ç»Ÿè°ƒç”¨è·å¾—çš„ï¼Œå†…å­˜ç®¡ç†å™¨ä¼šå°†è¿™å—å†…å­˜æ’å…¥åˆ°å…¶ç»´æŠ¤çš„<code>ç©ºé—²é“¾è¡¨</code>æˆ–<code>ç©ºé—²å†…å­˜æ± </code>ä¸­ï¼Œä»¥ä¾¿åœ¨åç»­çš„å†…å­˜åˆ†é…è¯·æ±‚ä¸­å¤ç”¨ã€‚</li><li>å¦‚æœæ˜¯é€šè¿‡mmapç³»ç»Ÿè°ƒç”¨è·å¾—çš„ï¼Œè¿™å—å†…å­˜ä¼šå½’è¿˜ç»™æ“ä½œç³»ç»Ÿã€‚</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;malloc å’Œ free æ˜¯Cè¯­è¨€çš„åº“å‡½æ•°ï¼Œ new å’Œ delete æ˜¯ C++ é‡Œçš„æ“ä½œç¬¦ã€‚è°ˆåˆ°åŒºåˆ«å°±è¦å»è®¨è®ºå…±åŒç‚¹ä¸ä¸åŒç‚¹ï¼Œå°¤å…¶è¦å…³æ³¨ä»–ä»¬ä¹‹é—´çš„å·®å¼‚ã€‚&lt;/p&gt;
&lt;h1&gt;new å’Œ malloc&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;new è‡ªåŠ¨è®¡ç®—æ‰€éœ€åˆ†é…çš„å†…å­˜å¤§å°ï¼Œmall</summary>
      
    
    
    
    <category term="C/C++" scheme="http://malone-ai.github.io/categories/C-C/"/>
    
    
    <category term="C/C++" scheme="http://malone-ai.github.io/tags/C-C/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode æ¯æ—¥ä¸€é¢˜äºŒåå…«ï¼š2296. è®¾è®¡ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨</title>
    <link href="http://malone-ai.github.io/2025/02/27/leetcode28/"/>
    <id>http://malone-ai.github.io/2025/02/27/leetcode28/</id>
    <published>2025-02-27T12:08:38.000Z</published>
    <updated>2025-02-27T12:14:07.054Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šæ—¥çš„Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/design-a-text-editor/description/">2296. è®¾è®¡ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨</a>ã€‚</p><p>è¯·ä½ è®¾è®¡ä¸€ä¸ªå¸¦å…‰æ ‡çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå®ƒå¯ä»¥å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ul><li>æ·»åŠ ï¼šåœ¨å…‰æ ‡æ‰€åœ¨å¤„æ·»åŠ æ–‡æœ¬ã€‚</li><li>åˆ é™¤ï¼šåœ¨å…‰æ ‡æ‰€åœ¨å¤„åˆ é™¤æ–‡æœ¬ï¼ˆæ¨¡æ‹Ÿé”®ç›˜çš„åˆ é™¤é”®ï¼‰ã€‚</li><li>ç§»åŠ¨ï¼šå°†å…‰æ ‡å¾€å·¦æˆ–è€…å¾€å³ç§»åŠ¨ã€‚</li></ul><p>å½“åˆ é™¤æ–‡æœ¬æ—¶ï¼Œåªæœ‰å…‰æ ‡å·¦è¾¹çš„å­—ç¬¦ä¼šè¢«åˆ é™¤ã€‚å…‰æ ‡ä¼šç•™åœ¨æ–‡æœ¬å†…ï¼Œä¹Ÿå°±æ˜¯è¯´ä»»æ„æ—¶å€™ 0 &lt;= cursor.position &lt;= currentText.length éƒ½æˆç«‹ã€‚</p><p>è¯·ä½ å®ç° TextEditor ç±»ï¼š</p><ul><li>TextEditor() ç”¨ç©ºæ–‡æœ¬åˆå§‹åŒ–å¯¹è±¡ã€‚</li><li>void addText(string text) å°† text æ·»åŠ åˆ°å…‰æ ‡æ‰€åœ¨ä½ç½®ã€‚æ·»åŠ å®Œåå…‰æ ‡åœ¨ text çš„å³è¾¹ã€‚</li><li>int deleteText(int k) åˆ é™¤å…‰æ ‡å·¦è¾¹ k ä¸ªå­—ç¬¦ã€‚è¿”å›å®é™…åˆ é™¤çš„å­—ç¬¦æ•°ç›®ã€‚</li><li>string cursorLeft(int k) å°†å…‰æ ‡å‘å·¦ç§»åŠ¨ k æ¬¡ã€‚è¿”å›ç§»åŠ¨åå…‰æ ‡å·¦è¾¹ min(10, len) ä¸ªå­—ç¬¦ï¼Œå…¶ä¸­ len æ˜¯å…‰æ ‡å·¦è¾¹çš„å­—ç¬¦æ•°ç›®ã€‚</li><li>string cursorRight(int k) å°†å…‰æ ‡å‘å³ç§»åŠ¨ k æ¬¡ã€‚è¿”å›ç§»åŠ¨åå…‰æ ‡å·¦è¾¹ min(10, len) ä¸ªå­—ç¬¦ï¼Œå…¶ä¸­ len æ˜¯å…‰æ ‡å·¦è¾¹çš„å­—ç¬¦æ•°ç›®ã€‚</li></ul><p>æœ€è¿‘çœŸçš„æ˜¯å¤´å¤§ï¼ŒLeetcodeçš„æ¯æ—¥ä¸€é¢˜æ€ä¹ˆè¿™å‡ å¤©ä¸€ç›´æè¿™ç§è®¾è®¡é¢˜ï¼Œè‹¦ä¸å ªè¨€ã€‚</p><p>è§£æ³•å‚è€ƒLeetcodeå®˜æ–¹çš„è§£æ³•ï¼Œä¸€å¼€å§‹å‡†å¤‡ä½¿ç”¨åŒå‘é“¾è¡¨çš„åšæ³•ï¼Œä½†æ˜¯å‘ç°ç¬¬äºŒç§åšæ³•â€”â€”ä½¿ç”¨æ ˆæ¥å®ç°è²Œä¼¼æ›´åŠ ç®€å•ï¼Œå°±æ˜¯ç”¨äº†æ ˆæ¥å®ç°ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> max_len 1000000</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MIN(a, b) ((a) &gt; (b) ? (b) : (a))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="type">char</span> *left;</span><br><span class="line">    <span class="type">char</span> *right;</span><br><span class="line">    <span class="type">int</span> leftSize;</span><br><span class="line">    <span class="type">int</span> rightSize;</span><br><span class="line">&#125; TextEditor;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">TextEditor* <span class="title function_">textEditorCreate</span><span class="params">()</span> &#123;</span><br><span class="line">    TextEditor *obj = (TextEditor*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(TextEditor));</span><br><span class="line">    obj-&gt;left = (<span class="type">char</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">char</span>) * max_len);</span><br><span class="line">    obj-&gt;right = (<span class="type">char</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">char</span>) * max_len);</span><br><span class="line">    obj-&gt;leftSize = <span class="number">0</span>;</span><br><span class="line">    obj-&gt;rightSize = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">textEditorAddText</span><span class="params">(TextEditor* obj, <span class="type">char</span>* text)</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (*text) &#123;</span><br><span class="line">        obj-&gt;left[obj-&gt;leftSize++] = *text;</span><br><span class="line">        ++text;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">textEditorDeleteText</span><span class="params">(TextEditor* obj, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (obj-&gt;leftSize &gt; <span class="number">0</span> &amp;&amp; k &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        obj-&gt;left[--obj-&gt;leftSize] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">        --k;</span><br><span class="line">        ++res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span>* <span class="title function_">textEditorCursorLeft</span><span class="params">(TextEditor* obj, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (obj-&gt;leftSize &gt; <span class="number">0</span> &amp;&amp; k &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        obj-&gt;right[obj-&gt;rightSize++] = obj-&gt;left[--obj-&gt;leftSize];</span><br><span class="line">        --k;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> retLen = MIN(<span class="number">10</span>, obj-&gt;leftSize);</span><br><span class="line">    <span class="type">char</span> * ret = (<span class="type">char</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">char</span>) * (retLen + <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; retLen; ++i) </span><br><span class="line">        ret[i] = obj-&gt;left[obj-&gt;leftSize-retLen+i];</span><br><span class="line">    ret[retLen] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span>* <span class="title function_">textEditorCursorRight</span><span class="params">(TextEditor* obj, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (obj-&gt;rightSize &gt; <span class="number">0</span> &amp;&amp; k &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        obj-&gt;left[obj-&gt;leftSize++] = obj-&gt;right[--obj-&gt;rightSize];</span><br><span class="line">        --k;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> retLen = MIN(<span class="number">10</span>, obj-&gt;leftSize);</span><br><span class="line">    <span class="type">char</span> * ret = (<span class="type">char</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">char</span>) * (retLen + <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; retLen; ++i) </span><br><span class="line">        ret[i] = obj-&gt;left[obj-&gt;leftSize-retLen+i];</span><br><span class="line">    ret[retLen] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> ret;   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">textEditorFree</span><span class="params">(TextEditor* obj)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj-&gt;left) </span><br><span class="line">        <span class="built_in">free</span>(obj-&gt;left);</span><br><span class="line">    <span class="keyword">if</span> (obj-&gt;right) </span><br><span class="line">        <span class="built_in">free</span>(obj-&gt;right);</span><br><span class="line">    <span class="built_in">free</span>(obj);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your TextEditor struct will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * TextEditor* obj = textEditorCreate();</span></span><br><span class="line"><span class="comment"> * textEditorAddText(obj, text);</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> * int param_2 = textEditorDeleteText(obj, k);</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> * char* param_3 = textEditorCursorLeft(obj, k);</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> * char* param_4 = textEditorCursorRight(obj, k);</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> * textEditorFree(obj);</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šæ—¥çš„Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º&lt;a href=&quot;https://leetcode.cn/problems/design-a-text-editor/description/&quot;&gt;2296. è®¾è®¡ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¯·ä½ è®¾è®¡ä¸€ä¸ªå¸¦å…‰æ ‡çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå®ƒå¯ä»¥å®</summary>
      
    
    
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/categories/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/tags/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    <category term="è®¾è®¡" scheme="http://malone-ai.github.io/tags/%E8%AE%BE%E8%AE%A1/"/>
    
    <category term="æ ˆ" scheme="http://malone-ai.github.io/tags/%E6%A0%88/"/>
    
  </entry>
  
  <entry>
    <title>åŠ¨æ€è§„åˆ’ä¸€</title>
    <link href="http://malone-ai.github.io/2025/02/26/dp1/"/>
    <id>http://malone-ai.github.io/2025/02/26/dp1/</id>
    <published>2025-02-26T13:29:02.000Z</published>
    <updated>2025-02-27T14:47:44.953Z</updated>
    
    <content type="html"><![CDATA[<p>å¼€å¯ä¸€ä¸ªåŠ¨æ€è§„åˆ’ä¸“æ ï¼Œè·Ÿç€çµèŒ¶å±±è‰¾åºœå­¦ä¹ ä¸€ä¸‹åŠ¨æ€è§„åˆ’ï¼Œå°†åŠ¨æ€è§„åˆ’æŒ‰åœ¨åœ°ä¸Šæ‘©æ“¦ã€‚<a href="https://leetcode.cn/circle/discuss/tXLS3i/"><br>åˆ†äº«ä¸¨ã€é¢˜å•ã€‘åŠ¨æ€è§„åˆ’ï¼ˆå…¥é—¨/èƒŒåŒ…/çŠ¶æ€æœº/åˆ’åˆ†/åŒºé—´/çŠ¶å‹/æ•°ä½/æ ‘å½¢/æ•°æ®ç»“æ„ä¼˜åŒ–ï¼‰</a>ã€‚</p><p>é¢˜ç›®ä¸º<a href="https://leetcode.cn/problems/climbing-stairs/description/">70. çˆ¬æ¥¼æ¢¯</a>ã€‚</p><p>å‡è®¾ä½ æ­£åœ¨çˆ¬æ¥¼æ¢¯ã€‚éœ€è¦ n é˜¶ä½ æ‰èƒ½åˆ°è¾¾æ¥¼é¡¶ã€‚</p><p>æ¯æ¬¡ä½ å¯ä»¥çˆ¬ 1 æˆ– 2 ä¸ªå°é˜¶ã€‚ä½ æœ‰å¤šå°‘ç§ä¸åŒçš„æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶å‘¢ï¼Ÿ</p><p>ç¤ºä¾‹ 1ï¼š</p><ul><li>è¾“å…¥ï¼šn = 2</li><li>è¾“å‡ºï¼š2</li><li>è§£é‡Šï¼šæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶ã€‚<ol><li>1 é˜¶ + 1 é˜¶</li><li>2 é˜¶</li></ol></li></ul><p>ç¤ºä¾‹ 2ï¼š</p><ul><li>è¾“å…¥ï¼šn = 3</li><li>è¾“å‡ºï¼š3</li><li>è§£é‡Šï¼šæœ‰ä¸‰ç§æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶ã€‚<ol><li>1 é˜¶ + 1 é˜¶ + 1 é˜¶</li><li>1 é˜¶ + 2 é˜¶</li><li>2 é˜¶ + 1 é˜¶</li></ol></li></ul><h1>åŸºæœ¬æ€è·¯</h1><p>n = 1æ—¶æœ‰1ç§æ–¹æ³•ï¼Œn = 2æ—¶æœ‰2ç§æ–¹æ³•ï¼›ä»ç¬¬ 3 é˜¶å¼€å§‹ï¼Œæ¯ä¸€é˜¶çš„çˆ¬æ³•æ•°ç­‰äºå‰ä¸€é˜¶çš„çˆ¬æ³•æ•°åŠ ä¸Šå‰ä¸¤é˜¶çš„çˆ¬æ³•æ•°ï¼Œå³ arr[i] = arr[i-1] + arr[i-2]ã€‚æœ€ç»ˆè¿”å› arr[n]ï¼Œå³ç¬¬ n é˜¶çš„çˆ¬æ³•æ•°ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">climbStairs</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt; <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">return</span> n == <span class="number">1</span> ? <span class="number">1</span> : <span class="number">2</span>;</span><br><span class="line">    <span class="type">int</span> * arr = (<span class="type">int</span> *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">int</span>) * (n + <span class="number">1</span>));</span><br><span class="line">    arr[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    arr[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    arr[<span class="number">2</span>] = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">3</span>; i &lt;= n; ++i) </span><br><span class="line">        arr[i] = arr[i<span class="number">-1</span>] + arr[i<span class="number">-2</span>];</span><br><span class="line">    <span class="keyword">return</span> arr[n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">climbStairs</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (n &lt;<span class="number">3</span>)</span><br><span class="line">            <span class="keyword">return</span> n == <span class="number">1</span> ? <span class="number">1</span> : <span class="number">2</span>;</span><br><span class="line">        <span class="type">int</span> * arr = <span class="keyword">new</span> <span class="type">int</span>[n + <span class="number">1</span>];</span><br><span class="line">        arr[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        arr[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        arr[<span class="number">2</span>] = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">3</span>; i &lt;= n; ++i) </span><br><span class="line">            arr[i] = arr[i<span class="number">-1</span>] + arr[i<span class="number">-2</span>];</span><br><span class="line">        <span class="keyword">return</span> arr[n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç è™½ç„¶å¯ä»¥æ­£ç¡®æ±‚è§£ï¼Œä½†æ˜¯å­˜åœ¨ä¸€äº›é—®é¢˜ï¼š</p><ol><li>å†…å­˜æ³„æ¼<ul><li>ä½¿ç”¨ malloc åˆ†é…çš„å†…å­˜æ²¡æœ‰é‡Šæ”¾ï¼Œä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</li></ul></li><li>ç©ºé—´å¤æ‚åº¦ä¼˜åŒ–<ul><li>ä½¿ç”¨æ•°ç»„å­˜å‚¨æ‰€æœ‰é˜¶çš„çˆ¬æ³•æ•°ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(n)ï¼Œä½†å®é™…ä¸Šåªéœ€è¦å‰ä¸¤ä¸ªå€¼å³å¯ï¼Œå¯ä»¥ä¼˜åŒ–ä¸º O(1) çš„ç©ºé—´å¤æ‚åº¦ã€‚<br>ç»ä¼˜åŒ–è·å¾—å¦‚ä¸‹å®ç°ï¼š</li></ul></li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">climbStairs</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt; <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> pre1 = <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> pre2 = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">3</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> cur = pre1 + pre2;</span><br><span class="line">        pre1 = pre2;</span><br><span class="line">        pre2 = cur;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> pre2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>å¤æ‚åº¦åˆ†æ</h1><p>æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å¼€å¯ä¸€ä¸ªåŠ¨æ€è§„åˆ’ä¸“æ ï¼Œè·Ÿç€çµèŒ¶å±±è‰¾åºœå­¦ä¹ ä¸€ä¸‹åŠ¨æ€è§„åˆ’ï¼Œå°†åŠ¨æ€è§„åˆ’æŒ‰åœ¨åœ°ä¸Šæ‘©æ“¦ã€‚&lt;a href=&quot;https://leetcode.cn/circle/discuss/tXLS3i/&quot;&gt;&lt;br&gt;
åˆ†äº«ä¸¨ã€é¢˜å•ã€‘åŠ¨æ€è§„åˆ’ï¼ˆå…¥é—¨/èƒŒåŒ…/çŠ¶æ€æœº/åˆ’åˆ†/åŒºé—´/çŠ¶å‹/æ•°ä½/æ ‘å½¢/æ•°æ®ç»“</summary>
      
    
    
    
    <category term="åŠ¨æ€è§„åˆ’" scheme="http://malone-ai.github.io/categories/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
    
    <category term="åŠ¨æ€è§„åˆ’" scheme="http://malone-ai.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode æ¯æ—¥ä¸€é¢˜äºŒåå…­ï¼š2502. è®¾è®¡å†…å­˜åˆ†é…å™¨</title>
    <link href="http://malone-ai.github.io/2025/02/25/leetcode26/"/>
    <id>http://malone-ai.github.io/2025/02/25/leetcode26/</id>
    <published>2025-02-25T07:23:34.000Z</published>
    <updated>2025-02-25T08:59:14.235Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šæ—¥çš„Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/design-memory-allocator/description/">2502. è®¾è®¡å†…å­˜åˆ†é…å™¨</a>ã€‚</p><p>ç»™ä½ ä¸€ä¸ªæ•´æ•° n ï¼Œè¡¨ç¤ºä¸‹æ ‡ä» 0 å¼€å§‹çš„å†…å­˜æ•°ç»„çš„å¤§å°ã€‚æ‰€æœ‰å†…å­˜å•å…ƒå¼€å§‹éƒ½æ˜¯ç©ºé—²çš„ã€‚</p><p>è¯·ä½ è®¾è®¡ä¸€ä¸ªå…·å¤‡ä»¥ä¸‹åŠŸèƒ½çš„å†…å­˜åˆ†é…å™¨ï¼š</p><p>åˆ†é… ä¸€å—å¤§å°ä¸º size çš„è¿ç»­ç©ºé—²å†…å­˜å•å…ƒå¹¶èµ‹ id <code>mID</code> ã€‚<br>é‡Šæ”¾ ç»™å®š id <code>mID</code> å¯¹åº”çš„æ‰€æœ‰å†…å­˜å•å…ƒã€‚<br>æ³¨æ„ï¼š</p><p>å¤šä¸ªå—å¯ä»¥è¢«åˆ†é…åˆ°åŒä¸€ä¸ª mID ã€‚<br>ä½ å¿…é¡»é‡Šæ”¾<code>mID</code>å¯¹åº”çš„æ‰€æœ‰å†…å­˜å•å…ƒï¼Œå³ä¾¿è¿™äº›å†…å­˜å•å…ƒè¢«åˆ†é…åœ¨ä¸åŒçš„å—ä¸­ã€‚<br>å®ç°<code>Allocator</code>ç±»ï¼š</p><p>Allocator(int n) ä½¿ç”¨ä¸€ä¸ªå¤§å°ä¸º n çš„å†…å­˜æ•°ç»„åˆå§‹åŒ– Allocator å¯¹è±¡ã€‚<br>int allocate(int size, int mID) æ‰¾å‡ºå¤§å°ä¸º size ä¸ªè¿ç»­ç©ºé—²å†…å­˜å•å…ƒä¸”ä½äºæœ€å·¦ä¾§çš„å—ï¼Œåˆ†é…å¹¶èµ‹ id <code>mID</code> ã€‚è¿”å›å—çš„ç¬¬ä¸€ä¸ªä¸‹æ ‡ã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„å—ï¼Œè¿”å› -1 ã€‚<br>int freeMemory(int mID) é‡Šæ”¾ id <code>mID</code> å¯¹åº”çš„æ‰€æœ‰å†…å­˜å•å…ƒã€‚è¿”å›é‡Šæ”¾çš„å†…å­˜å•å…ƒæ•°ç›®ã€‚</p><h1>åˆ†æç†è§£</h1><p>é¢˜ç›®è¦æ±‚å®ç°ä¸€ä¸ªå†…å­˜ç®¡ç†å•å…ƒã€‚</p><p>å‡½æ•°allocateæœ‰ä¸¤ä¸ªå‚æ•°ï¼šsizeå’ŒmIDï¼Œsizeå³éœ€è¦æ‰¾åˆ°sizeä¸ªå†…å­˜å—å¹¶ä¸”è¿™äº›å†…å­˜å—å¾—æ˜¯è¿ç»­çš„ï¼ŒmIDå³è¿™äº›å†…å­˜å—å¾—è¢«èµ‹å€¼ä¸ºmIDã€‚è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ä¸ºè¿™äº›å†…å­˜å—çš„é¦–åœ°å€å³ä¸‹æ ‡ç´¢å¼•ã€‚</p><p>å‡½æ•°freeMemoryæœ‰ä¸€ä¸ªå‚æ•°mIDï¼Œå®ç°çš„åŠŸèƒ½ä¸ºå°†æ‰€æœ‰å†…å­˜å•å…ƒä¸­å€¼ä¸ºmIDçš„å•å…ƒé‡Šæ”¾ï¼Œç„¶åè¿”å›é‡Šæ”¾çš„å†…å­˜å•å…ƒçš„ä¸ªæ•°ã€‚</p><h1>åŸºæœ¬æ€è·¯</h1><p>æˆ‘çš„ç¬¬ä¸€æƒ³æ³•æ˜¯é€šè¿‡é“¾è¡¨æ¥è¿›è¡Œç»„ç»‡è¿™äº›å†…å­˜å—ï¼Œç„¶åé€šè¿‡å“ˆå¸Œè¡¨ã€äºŒç»´æ•°ç»„ç­‰è®°å½•æœªä½¿ç”¨çš„å†…å­˜å—çš„æ•°é‡å’Œå¤§å°ç­‰ã€‚ä½†æ˜¯ä¸€ç›´è‹¦äºå°†å†…å­˜å—æŒ‰ç…§å¤§å°è¿›è¡Œæ’åºè¿™ä»¶äº‹å„¿ï¼Œæ„Ÿè§‰è¿™ä¹ˆåšå°†äº‹æƒ…åè€Œå¤æ‚åŒ–äº†ï¼Œå¹¶ä¸”ä½¿ç”¨é“¾è¡¨è²Œä¼¼ä¹Ÿæœ‰ç‚¹å¤šä½™äº†ã€‚</p><p>æœ€åçœ‹äº†çœ‹<a href="https://leetcode.cn/problems/design-memory-allocator/solutions/2016010/bao-li-mo-ni-by-endlesscheng-bqba/?envType=daily-question&amp;envId=2025-02-25">çµèŒ¶å±±è‰¾åºœçš„é¢˜è§£</a>ã€‚ä»–æä¾›äº†ä¸¤ç§æ–¹æ³•ï¼š</p><ul><li>æ¨¡æ‹Ÿ</li><li>çº¿æ®µæ ‘</li></ul><p>çœ‹äº†çœ‹ä¸¤ç§æ–¹æ³•ï¼Œæ„Ÿè§‰ä½¿ç”¨ä»–çš„æ¨¡æ‹Ÿè§£æ³•å°±è¶³å¤Ÿäº†ã€‚</p><p>åŸºæœ¬æ€è·¯æ˜¯ä½¿ç”¨æ•°ç»„æ¥ç»„ç»‡å†…å­˜å—ï¼Œåœ¨åˆ†é…å†…å­˜å—æ—¶ï¼Œå¹¶ä¸”å…¨éƒ¨åˆå§‹åŒ–ä¸º0ï¼Œè¡¨ç¤ºå†…å­˜å—æœªä½¿ç”¨ï¼ˆé¢˜ç›®é™å®šmIDçš„å–å€¼èŒƒå›´ä¸º[1, 1000]ï¼‰ã€‚ç„¶åä»å¤´å¼€å§‹éå†ï¼Œå¯»æ‰¾åˆ°ä¸€å—å¤§å°ä¸ºsizeçš„è¿ç»­å†…å­˜å—ï¼Œæ‰¾ä¸åˆ°åˆ™è¿”å›-1ã€‚å›æ”¶å†…å­˜å—å°±æ›´ç®€å•äº†ï¼Œéå†æ‰€æœ‰å†…å­˜å—ï¼Œå†…å­˜å—å€¼ä¸ºmIDçš„å‡é‡Šæ”¾å¹¶è®¾ä¸º0ï¼Œå¹¶ä½¿ç”¨countè¿›è¡Œè®¡æ•°å³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Allocator</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> *mem;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Allocator</span>(<span class="type">int</span> n) &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;mem = (<span class="type">int</span> *)<span class="built_in">malloc</span>(<span class="built_in">sizeof</span>(<span class="type">int</span> ) * n);</span><br><span class="line">        <span class="keyword">this</span>-&gt;n = n;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) </span><br><span class="line">            <span class="keyword">this</span>-&gt;mem[i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">allocate</span><span class="params">(<span class="type">int</span> size, <span class="type">int</span> mID)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (mem[i] != <span class="number">0</span>) &#123;</span><br><span class="line">                count = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            ++count;</span><br><span class="line">            <span class="keyword">if</span> (count == size) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> j = i - count + <span class="number">1</span>; j &lt; i + <span class="number">1</span>; ++j) &#123;</span><br><span class="line">                    mem[j] = mID;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> i - count + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">freeMemory</span><span class="params">(<span class="type">int</span> mID)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (mem[i] == mID) &#123;</span><br><span class="line">                mem[i] = <span class="number">0</span>;</span><br><span class="line">                ++count;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your Allocator object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * Allocator* obj = new Allocator(n);</span></span><br><span class="line"><span class="comment"> * int param_1 = obj-&gt;allocate(size,mID);</span></span><br><span class="line"><span class="comment"> * int param_2 = obj-&gt;freeMemory(mID);</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="type">int</span> * mem;</span><br><span class="line">    <span class="type">int</span> n;    </span><br><span class="line">&#125; Allocator;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Allocator* <span class="title function_">allocatorCreate</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    Allocator * obj = (Allocator *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Allocator));</span><br><span class="line">    obj-&gt;mem = (<span class="type">int</span> *)<span class="built_in">calloc</span>(n, <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">    obj-&gt;n = n;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">allocatorAllocate</span><span class="params">(Allocator* obj, <span class="type">int</span> size, <span class="type">int</span> mID)</span> &#123;</span><br><span class="line">    <span class="type">int</span> *mem = obj-&gt;mem;</span><br><span class="line">    <span class="type">int</span> n = obj-&gt;n;</span><br><span class="line">    <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (mem[i] != <span class="number">0</span>) &#123;</span><br><span class="line">            count = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ++count;</span><br><span class="line">        <span class="keyword">if</span> (count == size) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = i - count + <span class="number">1</span>; j &lt; i + <span class="number">1</span>; ++j)</span><br><span class="line">                mem[j] = mID;</span><br><span class="line">            <span class="keyword">return</span> i - count + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">allocatorFreeMemory</span><span class="params">(Allocator* obj, <span class="type">int</span> mID)</span> &#123;</span><br><span class="line">    <span class="type">int</span> * mem = obj-&gt;mem;</span><br><span class="line">    <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> n = obj-&gt;n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (mem[i] == mID) &#123;</span><br><span class="line">            mem[i] = <span class="number">0</span>;</span><br><span class="line">            ++count;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">allocatorFree</span><span class="params">(Allocator* obj)</span> &#123;</span><br><span class="line">    <span class="built_in">free</span>(obj-&gt;mem);</span><br><span class="line">    <span class="built_in">free</span>(obj);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your Allocator struct will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * Allocator* obj = allocatorCreate(n);</span></span><br><span class="line"><span class="comment"> * int param_1 = allocatorAllocate(obj, size, mID);</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> * int param_2 = allocatorFreeMemory(obj, mID);</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> * allocatorFree(obj);</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h1>å¤æ‚åº¦åˆ†æ</h1><p>åˆ†é…å’Œé‡Šæ”¾å†…å­˜å‡½æ•°çš„æ—¶é—´å¤æ‚åº¦å‡ä¸ºO(n)ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šæ—¥çš„Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º&lt;a href=&quot;https://leetcode.cn/problems/design-memory-allocator/description/&quot;&gt;2502. è®¾è®¡å†…å­˜åˆ†é…å™¨&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç»™ä½ ä¸€ä¸ªæ•´æ•° n ï¼Œè¡¨ç¤ºä¸‹æ ‡ä» 0 å¼€</summary>
      
    
    
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/categories/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/tags/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    <category term="æ•°ç»„" scheme="http://malone-ai.github.io/tags/%E6%95%B0%E7%BB%84/"/>
    
    <category term="è®¾è®¡" scheme="http://malone-ai.github.io/tags/%E8%AE%BE%E8%AE%A1/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode æ¯æ—¥ä¸€é¢˜äºŒåäº”ï¼š1656. è®¾è®¡æœ‰åºæµ</title>
    <link href="http://malone-ai.github.io/2025/02/24/leetcode25/"/>
    <id>http://malone-ai.github.io/2025/02/24/leetcode25/</id>
    <published>2025-02-24T04:36:06.000Z</published>
    <updated>2025-02-26T13:40:27.210Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šæ—¥çš„ Leetcode æ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/design-an-ordered-stream/description/">1656. è®¾è®¡æœ‰åºæµ</a>ã€‚</p><p>æœ‰ n ä¸ª (id, value) å¯¹ï¼Œå…¶ä¸­ id æ˜¯ 1 åˆ° n ä¹‹é—´çš„ä¸€ä¸ªæ•´æ•°ï¼Œvalue æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ä¸å­˜åœ¨ id ç›¸åŒçš„ä¸¤ä¸ª (id, value) å¯¹ã€‚</p><p>è®¾è®¡ä¸€ä¸ªæµï¼Œä»¥ ä»»æ„ é¡ºåºè·å– n ä¸ª (id, value) å¯¹ï¼Œå¹¶åœ¨å¤šæ¬¡è°ƒç”¨æ—¶ æŒ‰ id é€’å¢çš„é¡ºåº è¿”å›ä¸€äº›å€¼ã€‚</p><p>å®ç° OrderedStream ç±»ï¼š</p><ul><li>OrderedStream(int n) æ„é€ ä¸€ä¸ªèƒ½æ¥æ”¶ n ä¸ªå€¼çš„æµï¼Œå¹¶å°†å½“å‰æŒ‡é’ˆ ptr è®¾ä¸º 1 ã€‚</li><li>String[] insert(int id, String value) å‘æµä¸­å­˜å‚¨æ–°çš„ (id, value) å¯¹ã€‚å­˜å‚¨åï¼š<ul><li>å¦‚æœæµå­˜å‚¨æœ‰ id = ptr çš„ (id, value) å¯¹ï¼Œåˆ™æ‰¾å‡ºä» id = ptr å¼€å§‹çš„ æœ€é•¿ id è¿ç»­é€’å¢åºåˆ— ï¼Œå¹¶ æŒ‰é¡ºåº è¿”å›ä¸è¿™äº› id å…³è”çš„å€¼çš„åˆ—è¡¨ã€‚ç„¶åï¼Œå°† ptr æ›´æ–°ä¸ºæœ€åé‚£ä¸ª  id + 1 ã€‚</li><li>å¦åˆ™ï¼Œè¿”å›ä¸€ä¸ªç©ºåˆ—è¡¨ã€‚</li></ul></li></ul><h1>å®˜æ–¹é¢˜è§£</h1><p>è¿™é“é¢˜é‡‡ç”¨äº†å®˜æ–¹é¢˜è§£ï¼Œè§£é‡Šçš„è¿˜æ˜¯æ¯”è¾ƒæ¸…æ¥šçš„ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="type">char</span> **stream;</span><br><span class="line">    <span class="type">int</span> streamSize;</span><br><span class="line">    <span class="type">int</span> ptr;</span><br><span class="line">&#125; OrderedStream;</span><br><span class="line"></span><br><span class="line">OrderedStream* <span class="title function_">orderedStreamCreate</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    OrderedStream *obj = (OrderedStream *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(OrderedStream));</span><br><span class="line">    obj-&gt;stream = (<span class="type">char</span> **)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">char</span> *) * (n + <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        obj-&gt;stream[i] = <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    obj-&gt;streamSize = n + <span class="number">1</span>;</span><br><span class="line">    obj-&gt;ptr = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> ** <span class="title function_">orderedStreamInsert</span><span class="params">(OrderedStream* obj, <span class="type">int</span> idKey, <span class="type">char</span> * value, <span class="type">int</span>* retSize)</span> &#123;</span><br><span class="line">    obj-&gt;stream[idKey] = value;</span><br><span class="line">    <span class="type">char</span> **res = (<span class="type">char</span> **)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">char</span> *) * obj-&gt;streamSize);</span><br><span class="line">    <span class="type">int</span> pos = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (obj-&gt;ptr &lt; obj-&gt;streamSize &amp;&amp; obj-&gt;stream[obj-&gt;ptr]) &#123;</span><br><span class="line">        res[pos++] = obj-&gt;stream[obj-&gt;ptr];</span><br><span class="line">        obj-&gt;ptr++;</span><br><span class="line">    &#125;</span><br><span class="line">    *retSize = pos;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">orderedStreamFree</span><span class="params">(OrderedStream* obj)</span> &#123;</span><br><span class="line">    <span class="built_in">free</span>(obj-&gt;stream);</span><br><span class="line">    <span class="built_in">free</span>(obj);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ä½œè€…ï¼šåŠ›æ‰£å®˜æ–¹é¢˜è§£</span><br><span class="line">é“¾æ¥ï¼šhttps:<span class="comment">//leetcode.cn/problems/design-an-ordered-stream/solutions/1749068/she-ji-you-xu-liu-by-leetcode-solution-3imb/</span></span><br><span class="line">æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰</span><br><span class="line">è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</span><br></pre></td></tr></table></figure><h1>å¯¹å®˜æ–¹é¢˜è§£è¿›è¡Œæ”¹å–„</h1><p>æ„Ÿè§‰å®˜æ–¹å°†Cè¯­è¨€å®ç°é‡Œçš„insertå‡½æ•°ä¸­çš„reså†…åµŒåˆ°ç»“æ„ä½“é‡Œæ¯”è¾ƒå¥½ï¼Œå¤§å°ä¸æµçš„å¤§å°ç›¸åŒï¼Œè¿™æ ·å°±ä¸å¿…åå¤åˆ†é…å†…å­˜ï¼Œä»¥åŠåç»­å¿˜è®°é‡Šæ”¾äº†ã€‚ä¸€ä¸‹æ˜¯æˆ‘è¿›è¡Œäº†æ”¹è¿›çš„ç‰ˆæœ¬ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="type">char</span> **str;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="type">int</span> ptr;</span><br><span class="line">    <span class="type">char</span> **buffer; </span><br><span class="line">&#125; OrderedStream;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">OrderedStream* <span class="title function_">orderedStreamCreate</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    OrderedStream* obj = (OrderedStream*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(OrderedStream));</span><br><span class="line">    obj-&gt;str = (<span class="type">char</span>**)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">char</span>*) * (n+<span class="number">1</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n + <span class="number">1</span>; ++i)</span><br><span class="line">        obj-&gt;str[i] = <span class="literal">NULL</span>;</span><br><span class="line">    obj-&gt;n = n;</span><br><span class="line">    obj-&gt;ptr = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ†é…ç¼“å†²åŒºå¤§å°</span></span><br><span class="line">    obj-&gt;buffer = (<span class="type">char</span> **)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">char</span> *) * n);</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span>** <span class="title function_">orderedStreamInsert</span><span class="params">(OrderedStream* obj, <span class="type">int</span> idKey, <span class="type">char</span>* value, <span class="type">int</span>* retSize)</span> &#123;</span><br><span class="line">    obj-&gt;str[idKey] = value;</span><br><span class="line">    <span class="type">int</span> pos = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (obj-&gt;ptr &lt;= obj-&gt;n &amp;&amp; obj-&gt;str[obj-&gt;ptr])</span><br><span class="line">        obj-&gt;buffer[pos++] = obj-&gt;str[obj-&gt;ptr++];</span><br><span class="line">    *retSize = pos;</span><br><span class="line">    <span class="keyword">return</span> obj-&gt;buffer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">orderedStreamFree</span><span class="params">(OrderedStream* obj)</span> &#123;</span><br><span class="line">    <span class="built_in">free</span>(obj-&gt;str);</span><br><span class="line">    <span class="built_in">free</span>(obj-&gt;buffer);</span><br><span class="line">    <span class="built_in">free</span>(obj);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your OrderedStream struct will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * OrderedStream* obj = orderedStreamCreate(n);</span></span><br><span class="line"><span class="comment"> * char** param_1 = orderedStreamInsert(obj, idKey, value, retSize);</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> * orderedStreamFree(obj);</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šæ—¥çš„ Leetcode æ¯æ—¥ä¸€é¢˜ä¸º&lt;a href=&quot;https://leetcode.cn/problems/design-an-ordered-stream/description/&quot;&gt;1656. è®¾è®¡æœ‰åºæµ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰ n ä¸ª (id, value) </summary>
      
    
    
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/categories/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/tags/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    <category term="è®¾è®¡" scheme="http://malone-ai.github.io/tags/%E8%AE%BE%E8%AE%A1/"/>
    
    <category term="æ•°æ®æµ" scheme="http://malone-ai.github.io/tags/%E6%95%B0%E6%8D%AE%E6%B5%81/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode æ¯æ—¥ä¸€é¢˜äºŒåå››ï¼š1206. è®¾è®¡è·³è¡¨</title>
    <link href="http://malone-ai.github.io/2025/02/23/leetcode24/"/>
    <id>http://malone-ai.github.io/2025/02/23/leetcode24/</id>
    <published>2025-02-23T02:41:38.000Z</published>
    <updated>2025-02-26T12:46:51.987Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šæ—¥ Leetcode æ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/design-skiplist/description/">1206. è®¾è®¡è·³è¡¨</a>ã€‚</p><p>ä¸ä½¿ç”¨ä»»ä½•åº“å‡½æ•°ï¼Œè®¾è®¡ä¸€ä¸ª è·³è¡¨ ã€‚</p><p>è·³è¡¨æ˜¯åœ¨<code>O(log n)</code>æ—¶é—´å†…å®Œæˆå¢åŠ ã€åˆ é™¤ã€æœç´¢æ“ä½œçš„æ•°æ®ç»“æ„ã€‚è·³è¡¨ç›¸æ¯”äºæ ‘å †ä¸çº¢é»‘æ ‘ï¼Œå…¶åŠŸèƒ½ä¸æ€§èƒ½ç›¸å½“ï¼Œå¹¶ä¸”è·³è¡¨çš„ä»£ç é•¿åº¦ç›¸è¾ƒä¸‹æ›´çŸ­ï¼Œå…¶è®¾è®¡æ€æƒ³ä¸é“¾è¡¨ç›¸ä¼¼ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸€ä¸ªè·³è¡¨åŒ…å« [30, 40, 50, 60, 70, 90] ï¼Œç„¶åå¢åŠ  80ã€45 åˆ°è·³è¡¨ä¸­ï¼Œä»¥ä¸‹å›¾çš„æ–¹å¼æ“ä½œï¼š<br><img src="/images/1702370216-mKQcTt-1506_skiplist.gif" alt=""><br>æ³¨ï¼šå›¾ç‰‡æ¥æºäºLeetcode <a href="https://leetcode.cn/problems/design-skiplist/description/">https://leetcode.cn/problems/design-skiplist/description/</a></p><p>è·³è¡¨ä¸­æœ‰å¾ˆå¤šå±‚ï¼Œæ¯ä¸€å±‚æ˜¯ä¸€ä¸ªçŸ­çš„é“¾è¡¨ã€‚åœ¨ç¬¬ä¸€å±‚çš„ä½œç”¨ä¸‹ï¼Œå¢åŠ ã€åˆ é™¤å’Œæœç´¢æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸è¶…è¿‡ O(n)ã€‚è·³è¡¨çš„æ¯ä¸€ä¸ªæ“ä½œçš„å¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯ O(log(n))ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯ O(n)ã€‚</p><p>äº†è§£æ›´å¤š : <a href="https://oi-wiki.org/ds/skiplist/">https://oi-wiki.org/ds/skiplist/</a></p><p>åœ¨æœ¬é¢˜ä¸­ï¼Œä½ çš„è®¾è®¡åº”è¯¥è¦åŒ…å«è¿™äº›å‡½æ•°ï¼š</p><ul><li>bool search(int target) : è¿”å›targetæ˜¯å¦å­˜åœ¨äºè·³è¡¨ä¸­ã€‚</li><li>void add(int num): æ’å…¥ä¸€ä¸ªå…ƒç´ åˆ°è·³è¡¨ã€‚</li><li>bool erase(int num): åœ¨è·³è¡¨ä¸­åˆ é™¤ä¸€ä¸ªå€¼ï¼Œå¦‚æœ num ä¸å­˜åœ¨ï¼Œç›´æ¥è¿”å›false. å¦‚æœå­˜åœ¨å¤šä¸ª num ï¼Œåˆ é™¤å…¶ä¸­ä»»æ„ä¸€ä¸ªå³å¯ã€‚</li></ul><p>æ³¨æ„ï¼Œè·³è¡¨ä¸­å¯èƒ½å­˜åœ¨å¤šä¸ªç›¸åŒçš„å€¼ï¼Œä½ çš„ä»£ç éœ€è¦å¤„ç†è¿™ç§æƒ…å†µã€‚</p><h1>åˆ†æç†è§£</h1><p>è¿™é“é¢˜ç›®è®©æˆ‘ä»¬è®¾è®¡ä¸€ä¸ªæ•°æ®ç»“æ„â€”â€”è·³è¡¨ã€‚åœ¨è¿™ä¹‹å‰ç¡®å®ä¸æ€ä¹ˆäº†è§£è·³è¡¨ï¼Œä»”ç»†çœ‹äº†ä¸€ä¼šå„¿å‘ç°è·³è¡¨å’Œé“¾è¡¨æœ‰ç‚¹åƒï¼Œä½†æ˜¯è·³è¡¨åº”è¯¥è¯´æ˜¯ä¸€ä¸ªå¤šå±‚é“¾è¡¨ã€‚å…¶ä¸­ç¬¬0å±‚æ˜¯åŒ…å«æ‰€æœ‰å…ƒç´ çš„æœ‰åºé“¾è¡¨ï¼›1å±‚åŠä»¥ä¸Šï¼Œæ¯ä¸€å±‚éƒ½æ˜¯ä¸‹ä¸€å±‚çš„å­é›†ï¼Œä½œä¸ºç´¢å¼•å±‚ï¼Œå¸®åŠ©å¿«é€Ÿè·³è¿‡å¤šä¸ªå…ƒç´ ã€‚æ¯ä¸€å±‚çš„å…ƒç´ é€šè¿‡æŒ‡é’ˆè¿æ¥ï¼Œé«˜å±‚å…ƒç´ ä¼šæŒ‡å‘ä½å±‚çš„ç›¸åŒå…ƒç´ ï¼Œå½¢æˆä¸€ä¸ªâ€œè·³è·ƒâ€çš„ç»“æ„ã€‚</p><p>è·³è¡¨æœ‰ä¸‰ä¸ªæ ¸å¿ƒæ“ä½œï¼š</p><ol><li>æŸ¥æ‰¾</li><li>æ’å…¥</li><li>åˆ é™¤</li></ol><p>è·³è¡¨çš„åº”ç”¨è¿˜æŒºå¹¿æ³›çš„ï¼ŒRedisçš„æœ‰åºé›†åˆï¼ˆSorted Setï¼‰åº•å±‚å°±ä½¿ç”¨äº†è·³è¡¨ã€‚</p><p>è·³è¡¨å¯ä»¥å®ç°æ“ä½œå¤æ‚åº¦ä¸ºO(log n)çš„æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤ï¼Œè¿˜æ˜¯æŒºé«˜æ•ˆçš„ã€‚è°ˆä¸€è°ˆä¸ªäººå¯¹è¿™çš„ç†è§£å§ã€‚ä¸ç®¡è·³è¡¨è¿˜æ˜¯é“¾è¡¨ï¼Œéƒ½ç¦»ä¸å¼€æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤ä¸‰ä¸ªæ ¸å¿ƒæ“ä½œï¼Œè€Œç§ä»¥ä¸ºæ’å…¥å’Œåˆ é™¤éƒ½æ˜¯åŸºäºæŸ¥æ‰¾æ“ä½œçš„ï¼Œåªè¦æŸ¥æ‰¾å¾—å¿«ï¼Œæ’å…¥å’Œåˆ é™¤å¾—ä¹Ÿå°±å¿«ã€‚</p><p>é“¾è¡¨æŸ¥æ‰¾çš„æ—¶å€™ï¼Œæœ€åçš„æƒ…å†µä¸‹æ˜¯O(n)ï¼Œå°±æ˜¯éå†äº†æ•´ä¸ªè¡¨ã€‚è€Œè·³è¡¨ä½œä¸ºå¤šå±‚é“¾è¡¨ï¼Œå¯ä»¥è·³è¿‡éå†æŸäº›å…ƒç´ ï¼Œä»è€ŒåŠ å¿«æŸ¥æ‰¾é€Ÿåº¦ï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ã€‚</p><p>å‡è®¾æˆ‘ä»¬è¦åœ¨è·³è¡¨ä¸­æŸ¥æ‰¾å€¼ 7ï¼Œè·³è¡¨çš„ç»“æ„å¦‚ä¸‹ï¼š</p><ul><li>ç¬¬2å±‚ï¼ˆæœ€é«˜å±‚ï¼‰ï¼š1 -&gt; 9</li><li>ç¬¬1å±‚ï¼š1 -&gt; 5 -&gt; 9</li><li>ç¬¬0å±‚ï¼ˆåº•å±‚ï¼‰ï¼š1 -&gt; 3 -&gt; 5 -&gt; 7 -&gt; 9</li></ul><p>æŸ¥æ‰¾è¿‡ç¨‹ï¼š</p><ol><li>ä»æœ€é«˜å±‚ï¼ˆç¬¬2å±‚ï¼‰å¼€å§‹ï¼š<ul><li>å½“å‰èŠ‚ç‚¹æ˜¯ 1ï¼Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯ 9ã€‚</li><li>9 å¤§äº 7ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥è·³åˆ° 9ï¼Œè€Œæ˜¯å‘ä¸‹ç§»åŠ¨åˆ°ç¬¬1å±‚ã€‚</li></ul></li><li>åœ¨ç¬¬1å±‚ï¼š<ul><li>å½“å‰èŠ‚ç‚¹æ˜¯ 1ï¼Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯ 5ã€‚</li><li>5 å°äº 7ï¼Œæ‰€ä»¥è·³åˆ° 5ã€‚</li><li>ä» 5 å¼€å§‹ï¼Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯ 9ã€‚</li><li>9 å¤§äº 7ï¼Œæ‰€ä»¥å‘ä¸‹ç§»åŠ¨åˆ°ç¬¬0å±‚ã€‚</li></ul></li><li>åœ¨ç¬¬0å±‚ï¼š<ul><li>å½“å‰èŠ‚ç‚¹æ˜¯ 5ï¼Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯ 7ã€‚</li><li>7 ç­‰äºç›®æ ‡å€¼ï¼ŒæŸ¥æ‰¾æˆåŠŸã€‚</li></ul></li></ol><p>åŸºäºä¸Šè¿°è¿‡ç¨‹å¯ä»¥å¤§æ¦‚äº†è§£è·³è¡¨çš„æŸ¥è¯¢è¿‡ç¨‹ï¼Œå¯ä»¥çœ‹åˆ°è·³è¡¨åœ¨æŸ¥è¯¢7çš„æ—¶å€™è·³è¿‡äº†å¯¹3çš„éå†ã€‚è¿™ä¸ªä¾‹å­æˆ–è®¸å¹¶ä¸èƒ½å¾ˆå¥½åœ°ä½“ç°è·³è¡¨çš„é«˜æ•ˆï¼Œä½†æ˜¯åœ¨è§„æ¨¡è¾ƒå¤§æ—¶ï¼Œä¼šè·³è¿‡å¯¹å¾ˆå¤šå…ƒç´ çš„éå†ï¼Œäº§ç”Ÿè¾ƒå¥½çš„æ•ˆæœã€‚</p><p>æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ç‚¹ã€‚è·³è¡¨ä¾èµ–äºéšæœºç®—æ³•ã€‚åœ¨æœ€åçš„æƒ…å†µä¸‹ä¼šé€€åŒ–æˆå•å±‚æœ‰åºé“¾è¡¨ã€‚å› æ­¤éšæœºç®—æ³•çš„é€‰æ‹©å¾ˆé‡è¦ã€‚</p><h1>åŸºæœ¬æ€è·¯</h1><p>è¿™é“é¢˜æˆ‘æ˜¯ä¸€ç‚¹æ€è·¯éƒ½æ²¡æœ‰ï¼Œç ”ç©¶äº†è®¸ä¹…å®˜æ–¹é¢˜è§£ä¸­çš„Cè¯­è¨€å®ç°ã€‚ä¸€ç›´æ„Ÿè§‰Cè¯­è¨€æ˜¯ä¸é”™çš„è¯­è¨€ï¼Œè™½ç„¶æœ‰è¯¸å¤šçš„ä¸ä¾¿ï¼Œæ²¡æœ‰é¢å‘å¯¹è±¡ï¼Œæ²¡æœ‰ç±»ä¼¼äºC++çš„æ¨¡æ¿ã€‚ä½†æ˜¯ä¹Ÿä¸å¯å¦è®¤Cè¯­è¨€çš„ç²¾å¦™ã€‚æ‰€ä»¥ï¼ŒåŸºæœ¬æ€è·¯ï¼šæŠ„ï¼doge</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> MAX_LEVEL = <span class="number">32</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">double</span> P_FACTOR = <span class="number">0.25</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">SkiplistNode</span> &#123;</span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    vector&lt;SkiplistNode *&gt; forward;</span><br><span class="line">    <span class="built_in">SkiplistNode</span>(<span class="type">int</span> _val, <span class="type">int</span> _maxLevel = MAX_LEVEL) : <span class="built_in">val</span>(_val), forward(_maxLevel, <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Skiplist</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    SkiplistNode * head;</span><br><span class="line">    <span class="type">int</span> level;</span><br><span class="line">    mt19937 gen&#123;random_device&#123;&#125;()&#125;;</span><br><span class="line">    uniform_real_distribution&lt;<span class="type">double</span>&gt; dis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Skiplist</span>(): <span class="built_in">head</span>(<span class="keyword">new</span> <span class="built_in">SkiplistNode</span>(<span class="number">-1</span>)), <span class="built_in">level</span>(<span class="number">0</span>), <span class="built_in">dis</span>(<span class="number">0</span>, <span class="number">1</span>) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">search</span><span class="params">(<span class="type">int</span> target)</span> </span>&#123;</span><br><span class="line">        SkiplistNode *curr = <span class="keyword">this</span>-&gt;head;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="comment">/* æ‰¾åˆ°ç¬¬ i å±‚å°äºä¸”æœ€æ¥è¿‘ target çš„å…ƒç´ */</span></span><br><span class="line">            <span class="keyword">while</span> (curr-&gt;forward[i] &amp;&amp; curr-&gt;forward[i]-&gt;val &lt; target) &#123;</span><br><span class="line">                curr = curr-&gt;forward[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        curr = curr-&gt;forward[<span class="number">0</span>];</span><br><span class="line">        <span class="comment">/* æ£€æµ‹å½“å‰å…ƒç´ çš„å€¼æ˜¯å¦ç­‰äº target */</span></span><br><span class="line">        <span class="keyword">if</span> (curr &amp;&amp; curr-&gt;val == target) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> num)</span> </span>&#123;</span><br><span class="line">        <span class="function">vector&lt;SkiplistNode *&gt; <span class="title">update</span><span class="params">(MAX_LEVEL, head)</span></span>;</span><br><span class="line">        SkiplistNode *curr = <span class="keyword">this</span>-&gt;head;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="comment">/* æ‰¾åˆ°ç¬¬ i å±‚å°äºä¸”æœ€æ¥è¿‘ num çš„å…ƒç´ */</span></span><br><span class="line">            <span class="keyword">while</span> (curr-&gt;forward[i] &amp;&amp; curr-&gt;forward[i]-&gt;val &lt; num) &#123;</span><br><span class="line">                curr = curr-&gt;forward[i];</span><br><span class="line">            &#125;</span><br><span class="line">            update[i] = curr;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> lv = <span class="built_in">randomLevel</span>();</span><br><span class="line">        level = <span class="built_in">max</span>(level, lv);</span><br><span class="line">        SkiplistNode *newNode = <span class="keyword">new</span> <span class="built_in">SkiplistNode</span>(num, lv);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; lv; i++) &#123;</span><br><span class="line">            <span class="comment">/* å¯¹ç¬¬ i å±‚çš„çŠ¶æ€è¿›è¡Œæ›´æ–°ï¼Œå°†å½“å‰å…ƒç´ çš„ forward æŒ‡å‘æ–°çš„èŠ‚ç‚¹ */</span></span><br><span class="line">            newNode-&gt;forward[i] = update[i]-&gt;forward[i];</span><br><span class="line">            update[i]-&gt;forward[i] = newNode;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">erase</span><span class="params">(<span class="type">int</span> num)</span> </span>&#123;</span><br><span class="line">        <span class="function">vector&lt;SkiplistNode *&gt; <span class="title">update</span><span class="params">(MAX_LEVEL, <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">        SkiplistNode *curr = <span class="keyword">this</span>-&gt;head;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="comment">/* æ‰¾åˆ°ç¬¬ i å±‚å°äºä¸”æœ€æ¥è¿‘ num çš„å…ƒç´ */</span></span><br><span class="line">            <span class="keyword">while</span> (curr-&gt;forward[i] &amp;&amp; curr-&gt;forward[i]-&gt;val &lt; num) &#123;</span><br><span class="line">                curr = curr-&gt;forward[i];</span><br><span class="line">            &#125;</span><br><span class="line">            update[i] = curr;</span><br><span class="line">        &#125;</span><br><span class="line">        curr = curr-&gt;forward[<span class="number">0</span>];</span><br><span class="line">        <span class="comment">/* å¦‚æœå€¼ä¸å­˜åœ¨åˆ™è¿”å› false */</span></span><br><span class="line">        <span class="keyword">if</span> (!curr || curr-&gt;val != num) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; level; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (update[i]-&gt;forward[i] != curr) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">/* å¯¹ç¬¬ i å±‚çš„çŠ¶æ€è¿›è¡Œæ›´æ–°ï¼Œå°† forward æŒ‡å‘è¢«åˆ é™¤èŠ‚ç‚¹çš„ä¸‹ä¸€è·³ */</span></span><br><span class="line">            update[i]-&gt;forward[i] = curr-&gt;forward[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">delete</span> curr;</span><br><span class="line">        <span class="comment">/* æ›´æ–°å½“å‰çš„ level */</span></span><br><span class="line">        <span class="keyword">while</span> (level &gt; <span class="number">1</span> &amp;&amp; head-&gt;forward[level - <span class="number">1</span>] == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">            level--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">randomLevel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> lv = <span class="number">1</span>;</span><br><span class="line">        <span class="comment">/* éšæœºç”Ÿæˆ lv */</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="built_in">dis</span>(gen) &lt; P_FACTOR &amp;&amp; lv &lt; MAX_LEVEL) &#123;</span><br><span class="line">            lv++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> lv;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ä½œè€…ï¼šåŠ›æ‰£å®˜æ–¹é¢˜è§£</span><br><span class="line">é“¾æ¥ï¼šhttps:<span class="comment">//leetcode.cn/problems/design-skiplist/solutions/1696545/she-ji-tiao-biao-by-leetcode-solution-e8yh/</span></span><br><span class="line">æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰</span><br><span class="line">è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> MAX_LEVEL = <span class="number">32</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> P_FACTOR = RAND_MAX &gt;&gt; <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">SkiplistNode</span> &#123;</span></span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    <span class="type">int</span> maxLevel;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">SkiplistNode</span> **<span class="title">forward</span>;</span></span><br><span class="line">&#125; SkiplistNode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    SkiplistNode *head;</span><br><span class="line">    <span class="type">int</span> level;</span><br><span class="line">&#125; Skiplist;</span><br><span class="line"></span><br><span class="line">SkiplistNode *<span class="title function_">skiplistNodeCreat</span><span class="params">(<span class="type">int</span> val, <span class="type">int</span> maxLevel)</span> &#123;</span><br><span class="line">    SkiplistNode *obj = (SkiplistNode *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(SkiplistNode));</span><br><span class="line">    obj-&gt;val = val;</span><br><span class="line">    obj-&gt;maxLevel = maxLevel;</span><br><span class="line">    obj-&gt;forward = (SkiplistNode **)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(SkiplistNode *) * maxLevel);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; maxLevel; i++) &#123;</span><br><span class="line">        obj-&gt;forward[i] = <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">skiplistNodeFree</span><span class="params">(SkiplistNode* obj)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj-&gt;forward) &#123;</span><br><span class="line">        <span class="built_in">free</span>(obj-&gt;forward);</span><br><span class="line">        obj-&gt;forward = <span class="literal">NULL</span>;</span><br><span class="line">        obj-&gt;maxLevel = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">free</span>(obj);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Skiplist* <span class="title function_">skiplistCreate</span><span class="params">()</span> &#123;</span><br><span class="line">    Skiplist *obj = (Skiplist *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Skiplist));</span><br><span class="line">    obj-&gt;head = skiplistNodeCreat(<span class="number">-1</span>, MAX_LEVEL);</span><br><span class="line">    obj-&gt;level = <span class="number">0</span>;</span><br><span class="line">    srand(time(<span class="literal">NULL</span>));</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">skiplistFree</span><span class="params">(Skiplist* obj)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (SkiplistNode * curr = obj-&gt;head; curr; ) &#123;</span><br><span class="line">        SkiplistNode *prev = curr;</span><br><span class="line">        curr = curr-&gt;forward[<span class="number">0</span>];</span><br><span class="line">        skiplistNodeFree(prev);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">free</span>(obj);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="keyword">inline</span> <span class="type">int</span> <span class="title function_">randomLevel</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> lv = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">/* éšæœºç”Ÿæˆ lv */</span></span><br><span class="line">    <span class="keyword">while</span> (rand() &lt; P_FACTOR &amp;&amp; lv &lt; MAX_LEVEL) &#123;</span><br><span class="line">        lv++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> lv;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="title function_">skiplistSearch</span><span class="params">(Skiplist* obj, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    SkiplistNode *curr = obj-&gt;head;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = obj-&gt;level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="comment">/* æ‰¾åˆ°ç¬¬ i å±‚å°äºä¸”æœ€æ¥è¿‘ target çš„å…ƒç´ */</span></span><br><span class="line">        <span class="keyword">while</span> (curr-&gt;forward[i] &amp;&amp; curr-&gt;forward[i]-&gt;val &lt; target) &#123;</span><br><span class="line">            curr = curr-&gt;forward[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    curr = curr-&gt;forward[<span class="number">0</span>];</span><br><span class="line">    <span class="comment">/* æ£€æµ‹å½“å‰å…ƒç´ çš„å€¼æ˜¯å¦ç­‰äº target */</span></span><br><span class="line">    <span class="keyword">if</span> (curr &amp;&amp; curr-&gt;val == target) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">skiplistAdd</span><span class="params">(Skiplist* obj, <span class="type">int</span> num)</span> &#123;</span><br><span class="line">    SkiplistNode *update[MAX_LEVEL];</span><br><span class="line">    SkiplistNode *curr = obj-&gt;head;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = obj-&gt;level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="comment">/* æ‰¾åˆ°ç¬¬ i å±‚å°äºä¸”æœ€æ¥è¿‘ num çš„å…ƒç´ */</span></span><br><span class="line">        <span class="keyword">while</span> (curr-&gt;forward[i] &amp;&amp; curr-&gt;forward[i]-&gt;val &lt; num) &#123;</span><br><span class="line">            curr = curr-&gt;forward[i];</span><br><span class="line">        &#125;</span><br><span class="line">        update[i] = curr;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> lv = randomLevel();</span><br><span class="line">    <span class="keyword">if</span> (lv &gt; obj-&gt;level) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = obj-&gt;level; i &lt; lv; i++) &#123;</span><br><span class="line">            update[i] = obj-&gt;head;</span><br><span class="line">        &#125;</span><br><span class="line">        obj-&gt;level = lv;</span><br><span class="line">    &#125;</span><br><span class="line">    SkiplistNode *newNode = skiplistNodeCreat(num, lv);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; lv; i++) &#123;</span><br><span class="line">        <span class="comment">/* å¯¹ç¬¬ i å±‚çš„çŠ¶æ€è¿›è¡Œæ›´æ–°ï¼Œå°†å½“å‰å…ƒç´ çš„ forward æŒ‡å‘æ–°çš„èŠ‚ç‚¹ */</span></span><br><span class="line">        newNode-&gt;forward[i] = update[i]-&gt;forward[i];</span><br><span class="line">        update[i]-&gt;forward[i] = newNode;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="title function_">skiplistErase</span><span class="params">(Skiplist* obj, <span class="type">int</span> num)</span> &#123;</span><br><span class="line">    SkiplistNode *update[MAX_LEVEL];</span><br><span class="line">    SkiplistNode *curr = obj-&gt;head;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = obj-&gt;level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="comment">/* æ‰¾åˆ°ç¬¬ i å±‚å°äºä¸”æœ€æ¥è¿‘ num çš„å…ƒç´ */</span></span><br><span class="line">        <span class="keyword">while</span> (curr-&gt;forward[i] &amp;&amp; curr-&gt;forward[i]-&gt;val &lt; num) &#123;</span><br><span class="line">            curr = curr-&gt;forward[i];</span><br><span class="line">        &#125;</span><br><span class="line">        update[i] = curr;</span><br><span class="line">    &#125;</span><br><span class="line">    curr = curr-&gt;forward[<span class="number">0</span>];</span><br><span class="line">    <span class="comment">/* å¦‚æœå€¼ä¸å­˜åœ¨åˆ™è¿”å› false */</span></span><br><span class="line">    <span class="keyword">if</span> (!curr || curr-&gt;val != num) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; obj-&gt;level; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (update[i]-&gt;forward[i] != curr) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="comment">/* å¯¹ç¬¬ i å±‚çš„çŠ¶æ€è¿›è¡Œæ›´æ–°ï¼Œå°† forward æŒ‡å‘è¢«åˆ é™¤èŠ‚ç‚¹çš„ä¸‹ä¸€è·³ */</span></span><br><span class="line">        update[i]-&gt;forward[i] = curr-&gt;forward[i];</span><br><span class="line">    &#125;</span><br><span class="line">    skiplistNodeFree(curr);</span><br><span class="line">    <span class="comment">/* æ›´æ–°å½“å‰çš„ level */</span></span><br><span class="line">    <span class="keyword">while</span> (obj-&gt;level &gt; <span class="number">1</span> &amp;&amp; obj-&gt;head-&gt;forward[obj-&gt;level - <span class="number">1</span>] == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        obj-&gt;level--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ä½œè€…ï¼šåŠ›æ‰£å®˜æ–¹é¢˜è§£</span><br><span class="line">é“¾æ¥ï¼šhttps:<span class="comment">//leetcode.cn/problems/design-skiplist/solutions/1696545/she-ji-tiao-biao-by-leetcode-solution-e8yh/</span></span><br><span class="line">æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰</span><br><span class="line">è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</span><br></pre></td></tr></table></figure><p>æˆ‘ä¸»è¦å›´ç»•ç€Cè¯­è¨€çš„å®ç°è¿›è¡Œä¸€ä¸‹ç†è§£ï¼Œä¾¿äºæ—¥åå¤ä¹ ã€‚ç†è§£äº†Cè¯­è¨€ç‰ˆæœ¬ï¼ŒC++ç‰ˆæœ¬ä¹Ÿå°±ä¸éš¾äº†ã€‚</p><h2 id="ä»£ç ç†è§£">ä»£ç ç†è§£</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> MAX_LEVEL = <span class="number">32</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> P_FACTOR = RAND_MAX &gt;&gt; <span class="number">2</span>;</span><br></pre></td></tr></table></figure><p>é¦–å…ˆå®šä¹‰äº†ä¸¤ä¸ªå¸¸é‡MAX_LEVELå’ŒP_FACTORã€‚MAX_LEVELæ˜¯è·³è¡¨çš„æœ€å¤§å±‚æ•°ï¼Œè€ŒP_FACTORæ˜¯ä¸€ä¸ªæ¦‚ç‡ï¼Œè¿™é‡Œç§°å®ƒä¸ºæ¦‚ç‡æˆ–è®¸æœ‰ç‚¹ç‰µå¼ºï¼Œç»“åˆç€å‡½æ•°randomLevelåº”è¯¥å°±ä¸éš¾ç†è§£äº†ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">static</span> <span class="keyword">inline</span> <span class="type">int</span> <span class="title function_">randomLevel</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> lv = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">/* éšæœºç”Ÿæˆ lv */</span></span><br><span class="line">    <span class="keyword">while</span> (rand() &lt; P_FACTOR &amp;&amp; lv &lt; MAX_LEVEL) </span><br><span class="line">        lv++;</span><br><span class="line">    <span class="keyword">return</span> lv;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡½æ•°randomLevelæ˜¯ä¸€ä¸ªé™æ€çš„å†…è”å‡½æ•°ï¼Œç”±å…³é”®å­—<code>static</code>å’Œ<code>inline</code>æ ‡è¯†ã€‚</p><h3 id="staticå…³é”®å­—"><code>static</code>å…³é”®å­—</h3><p><code>static</code>å°†å‡½æ•°çš„ä½œç”¨åŸŸé™åˆ¶åœ¨å½“å‰æ–‡ä»¶å†…ï¼Œå…¶ä»–æ–‡ä»¶æ— æ³•è®¿é—®è¿™ä¸ªå‡½æ•°ã€‚è¿™é‡Œä½¿ç”¨staticå…³é”®å­—æ ‡è¯†è¿™ä¸ªå‡½æ•°æœ‰ä»¥ä¸‹å¥½å¤„ï¼š</p><ol><li>é¿å…å‘½åå†²çª<ul><li>å¦‚æœå…¶ä»–æ–‡ä»¶ä¸­ä¹Ÿå®šä¹‰äº†åŒåçš„ randomLevel å‡½æ•°ï¼Œé“¾æ¥æ—¶ä¼šå‘ç”Ÿå†²çªã€‚</li><li>ä½¿ç”¨ static å¯ä»¥ç¡®ä¿è¿™ä¸ªå‡½æ•°åªåœ¨å½“å‰æ–‡ä»¶ä¸­å¯è§ï¼Œé¿å…å†²çªã€‚</li></ul></li><li>å°è£…æ€§<ul><li>randomLevel æ˜¯è·³è¡¨å†…éƒ¨ä½¿ç”¨çš„è¾…åŠ©å‡½æ•°ï¼Œä¸éœ€è¦æš´éœ²ç»™å¤–éƒ¨ã€‚</li></ul></li></ol><h3 id="inlineå…³é”®å­—"><code>inline</code>å…³é”®å­—</h3><p><code>inline</code>å…³é”®å­—å°†å‡½æ•°æ ‡è¯†ä¸º<code>å†…è”å‡½æ•°</code>ï¼Œæç¤ºç¼–è¯‘å™¨å°†å‡½æ•°å†…è”å±•å¼€ï¼Œå³å°†å‡½æ•°çš„ä»£ç ç›´æ¥æ’å…¥åˆ°è°ƒç”¨å¤„ï¼Œè€Œä¸æ˜¯é€šè¿‡å‡½æ•°è°ƒç”¨çš„æ–¹å¼æ‰§è¡Œã€‚ä½¿ç”¨<code>inline</code>å…³é”®å­—æœ‰ä»¥ä¸‹å¥½å¤„ï¼š</p><ol><li>å‡å°‘å‡½æ•°è°ƒç”¨å¼€é”€<ul><li>å‡½æ•°è°ƒç”¨éœ€è¦ä¿å­˜ä¸Šä¸‹æ–‡ã€è·³è½¬åˆ°å‡½æ•°åœ°å€ã€æ‰§è¡Œå®Œåå†è¿”å›ï¼Œè¿™äº›æ“ä½œæœ‰ä¸€å®šçš„å¼€é”€ã€‚</li><li>randomLevel æ˜¯ä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Œå†…è”å±•å¼€å¯ä»¥é¿å…è¿™äº›å¼€é”€ï¼Œæé«˜æ€§èƒ½ã€‚</li></ul></li><li>é€‚åˆå°å‹å‡½æ•°<ul><li>randomLevel çš„é€»è¾‘éå¸¸ç®€å•ï¼ˆåªæ˜¯ä¸€ä¸ªå¾ªç¯ï¼‰ï¼Œé€‚åˆå†…è”å±•å¼€ã€‚</li><li>å¦‚æœå‡½æ•°ä½“è¾ƒå¤§ï¼Œå†…è”å¯èƒ½ä¼šå¯¼è‡´ä»£ç è†¨èƒ€ï¼Œåè€Œé™ä½æ€§èƒ½ã€‚æ‰€ä»¥è¯´ä¸æ˜¯æ‰€æœ‰çš„å‡½æ•°éƒ½é€‚åˆä½œå†…è”å£°æ˜ã€‚</li></ul></li><li>ç¼–è¯‘å™¨ä¼˜åŒ–<ul><li>inline æ˜¯å¯¹ç¼–è¯‘å™¨çš„å»ºè®®ï¼Œç¼–è¯‘å™¨å¯ä»¥é€‰æ‹©æ˜¯å¦çœŸæ­£å†…è”å±•å¼€ã€‚</li></ul></li></ol><h3 id="randomLevel-å‡½æ•°">randomLevel å‡½æ•°</h3><p>randomLevelå‡½æ•°çš„ä½œç”¨æ˜¯ç”Ÿæˆä¸€ä¸ªéšæœºæ•°ï¼Œéšæœºæ•°çš„åŒºé—´ä¸º[1, MAX_LEVEL]å³[1, 32]ã€‚lvä»1å¼€å§‹ï¼Œæ¯æ¬¡ä»¥25%çš„æ¦‚ç‡é€’å¢ã€‚ä¸ºä»€ä¹ˆæ˜¯25%å‘¢ï¼Ÿè¿™å°±å¾—çœ‹å¼€å¤´çš„é™æ€å¸¸é‡P_FACTORï¼ŒP_FACTOR = RAND_MAX &gt;&gt; 2ã€‚RAND_MAXä¸ºrandå‡½æ•°èƒ½ç”Ÿæˆçš„éšæœºæ•°çš„æœ€å¤§å€¼ï¼Œç„¶åå³ç§»ä¸¤ä½ï¼Œä¹Ÿå°±æ˜¯é™¤ä»¥4ã€‚randèƒ½ç”Ÿæˆçš„éšæœºæ•°åŒºé—´ä¸º[1, RAND_MAX]ï¼Œå½“ç”Ÿæˆçš„éšæœºæ•°å°äºP_FACTORå³RAND_MAX / 4æ—¶è¿›è¡Œé€’å¢ã€‚ç”Ÿæˆçš„éšæœºæ•°å°äºP_FACTORçš„åŒºé—´å <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mn>1</mn></mrow><mrow><mn>4</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.845108em;"></span><span class="strut bottom" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">4</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span>ï¼Œå¤§äºP_FACTORçš„åŒºé—´å <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mn>3</mn></mrow><mrow><mn>4</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{3}{4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.845108em;"></span><span class="strut bottom" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">4</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">3</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span>ï¼Œè¿™ä¹Ÿä¸éš¾ç†è§£ä¸ºä»€ä¹ˆæ˜¯25%æ¦‚ç‡ã€‚è¿˜æœ‰å°±æ˜¯éšæœºæ•°çš„ç”Ÿæˆéœ€è¦åˆå§‹åŒ–éšæœºæ•°ç§å­ï¼Œè¿™ä¸€æ­¥åœ¨è·³è¡¨çš„åˆ›å»ºä¸­é€šè¿‡<code>srand(time(NULL))</code>å®ç°äº†ã€‚</p><h3 id="è·³è¡¨æœ‰å…³ç»“æ„ä½“">è·³è¡¨æœ‰å…³ç»“æ„ä½“</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">SkiplistNode</span> &#123;</span></span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    <span class="type">int</span> maxLevel;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">SkiplistNode</span> **<span class="title">forward</span>;</span></span><br><span class="line">&#125; SkiplistNode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    SkiplistNode *head;</span><br><span class="line">    <span class="type">int</span> level;</span><br><span class="line">&#125; Skiplist;</span><br></pre></td></tr></table></figure><p>ç±»ä¼¼äºé“¾è¡¨ï¼Œå…¶ä¸­SkiplistNodeæ˜¯è·³è¡¨ä¸­<code>èŠ‚ç‚¹çš„å®šä¹‰</code>ï¼ŒSkiplistæ˜¯<code>è·³è¡¨çš„å®šä¹‰</code>ã€‚</p><p><code>SkiplistNode</code>ç»“æ„ä½“å†…valä»£è¡¨èŠ‚ç‚¹å­˜å‚¨çš„å€¼ï¼ŒmaxLevelä¸ºè¯¥èŠ‚ç‚¹çš„æœ€å¤§å±‚æ•°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯å¦‚æœæŸä¸ªèŠ‚ç‚¹çš„maxLevelå€¼ä¸º4ï¼Œé‚£ä¹ˆè¯´æ˜è¯¥èŠ‚ç‚¹å­˜åœ¨äºç¬¬0ã€1ã€2ã€3å±‚ã€‚ç»“æ„ä½“å†…çš„forwardæ˜¯ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œè€Œforward[i]æŒ‡å‘è¯¥èŠ‚ç‚¹åœ¨ç¬¬iå±‚çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p><p><code>Skiplist</code>ç»“æ„ä½“ï¼Œä¸ªäººæ„Ÿè§‰ä¸ç”¨å®ƒä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯ä½¿ç”¨åæ–¹ä¾¿ç®¡ç†ï¼Œä¸»è¦æ˜¯æ–¹ä¾¿å‚æ•°çš„åœ°å€ä¼ é€’ã€‚è¿™æ ·æ¯æ¬¡åªéœ€è¦å°†Skiplistç±»å‹çš„æŒ‡é’ˆä¼ é€’ç»™å‡½æ•°å³å¯ï¼Œå¦åˆ™æ—¢è¦ä¼ æŒ‡å‘*headçš„æŒ‡é’ˆï¼Œåˆè¦ä¼ æŒ‡å‘levelçš„æŒ‡é’ˆï¼Œå®å±ä¸æ–¹ä¾¿ã€‚è¿˜éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯levelçš„å€¼ï¼Œå®ƒå…¶å®æ˜¯è·³è¡¨ä¸­æ‰€æœ‰èŠ‚ç‚¹ä¸­maxLevelå€¼æœ€å¤§çš„é‚£ä¸€ä¸ªã€‚</p><h3 id="è·³è¡¨èŠ‚ç‚¹çš„åˆ›å»º">è·³è¡¨èŠ‚ç‚¹çš„åˆ›å»º</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SkiplistNode *<span class="title function_">skiplistNodeCreat</span><span class="params">(<span class="type">int</span> val, <span class="type">int</span> maxLevel)</span> &#123;</span><br><span class="line">    SkiplistNode *obj = (SkiplistNode *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(SkiplistNode));</span><br><span class="line">    obj-&gt;val = val;</span><br><span class="line">    obj-&gt;maxLevel = maxLevel;</span><br><span class="line">    obj-&gt;forward = (SkiplistNode **)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(SkiplistNode *) * maxLevel);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; maxLevel; i++) </span><br><span class="line">        obj-&gt;forward[i] = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‡½æ•°å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯ä¸ºè·³è¡¨èŠ‚ç‚¹åˆ†é…å†…å­˜ï¼Œåˆå§‹åŒ–è·³è¡¨èŠ‚ç‚¹ä¸­çš„valã€maxLevelï¼Œä¸ºè·³è¡¨èŠ‚ç‚¹çš„æŒ‡é’ˆæ•°ç»„forwardåˆ†é…å†…å­˜ï¼Œå¹¶å°†æ‰€æœ‰çš„æˆå‘˜æŒ‡å‘NULLã€‚</p><h3 id="è·³è¡¨èŠ‚ç‚¹çš„é‡Šæ”¾">è·³è¡¨èŠ‚ç‚¹çš„é‡Šæ”¾</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">skiplistNodeFree</span><span class="params">(SkiplistNode* obj)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj-&gt;forward) &#123;</span><br><span class="line">        <span class="built_in">free</span>(obj-&gt;forward);</span><br><span class="line">        obj-&gt;forward = <span class="literal">NULL</span>;</span><br><span class="line">        obj-&gt;maxLevel = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">free</span>(obj);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç†è§£äº†è·³è¡¨èŠ‚ç‚¹çš„åˆ›å»ºï¼Œé‚£ä¹ˆé‡Šæ”¾ä¹Ÿä¸éš¾ç†è§£ï¼Œç›¸å½“äºå°†åˆ›å»ºèŠ‚ç‚¹æ—¶æ‰€åšçš„äº‹å„¿åè¿‡æ¥åšä¸€éã€‚é‡Šæ”¾forwardï¼ˆåœ¨é‡Šæ”¾å‰å…ˆæ£€æŸ¥å…¶æ˜¯å¦ä¸ºNULLï¼Œé¿å…åå¤é‡Šæ”¾ï¼‰ï¼Œé‡Šæ”¾è·³è¡¨èŠ‚ç‚¹æ‰€å ç”¨å†…å­˜ã€‚</p><h3 id="è·³è¡¨çš„åˆ›å»ºä¸é‡Šæ”¾">è·³è¡¨çš„åˆ›å»ºä¸é‡Šæ”¾</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Skiplist* <span class="title function_">skiplistCreate</span><span class="params">()</span> &#123;</span><br><span class="line">    Skiplist *obj = (Skiplist *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Skiplist));</span><br><span class="line">    obj-&gt;head = skiplistNodeCreat(<span class="number">-1</span>, MAX_LEVEL);</span><br><span class="line">    obj-&gt;level = <span class="number">0</span>;</span><br><span class="line">    srand(time(<span class="literal">NULL</span>));</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">skiplistFree</span><span class="params">(Skiplist* obj)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (SkiplistNode * curr = obj-&gt;head; curr; ) &#123;</span><br><span class="line">        SkiplistNode *prev = curr;</span><br><span class="line">        curr = curr-&gt;forward[<span class="number">0</span>];</span><br><span class="line">        skiplistNodeFree(prev);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">free</span>(obj);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸€å—ä¹Ÿç±»ä¼¼äºè·³è¡¨èŠ‚ç‚¹çš„åˆ›å»ºä¸é‡Šæ”¾ï¼Œä¸å†èµ˜è¿°ã€‚</p><h3 id="è·³è¡¨çš„æœç´¢">è·³è¡¨çš„æœç´¢</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">bool</span> <span class="title function_">skiplistSearch</span><span class="params">(Skiplist* obj, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    SkiplistNode *curr = obj-&gt;head;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = obj-&gt;level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">        <span class="keyword">while</span> (curr-&gt;forward[i] &amp;&amp; curr-&gt;forward[i]-&gt;val &lt; target)</span><br><span class="line">            curr = curr-&gt;forward[i];</span><br><span class="line">    curr = curr-&gt;forward[<span class="number">0</span>];</span><br><span class="line">    <span class="comment">/* æ£€æµ‹å½“å‰å…ƒç´ çš„å€¼æ˜¯å¦ç­‰äº target */</span></span><br><span class="line">    <span class="keyword">if</span> (curr &amp;&amp; curr-&gt;val == target) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿”å›targetæ˜¯å¦å­˜åœ¨äºè·³è¡¨ä¸­ï¼Œå­˜åœ¨è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚</p><p>æˆ‘å¼€å§‹çœ‹åˆ°è¿™æ®µä»£ç æ˜¯å¤§å†™çš„æ‡µé€¼ï¼Œè°ƒè¯•äº†ä¸€ä¼šå„¿æ‰æ˜ç™½æ˜¯æ€ä¹ˆä¸ªäº‹å„¿ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = obj-&gt;level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">    <span class="keyword">while</span> (curr-&gt;forward[i] &amp;&amp; curr-&gt;forward[i]-&gt;val &lt; target)</span><br><span class="line">        curr = curr-&gt;forward[i];</span><br></pre></td></tr></table></figure><p>ç†è§£äº†è¿™æ®µå¾ªç¯ä½“åº”è¯¥å°±å·®ä¸å¤šäº†ã€‚è¿˜è¦å¼ºè°ƒçš„ä¸€ç‚¹æ˜¯è·³è¡¨çš„å¤´èŠ‚ç‚¹å­˜åœ¨äºæ¯ä¸€å±‚ã€‚</p><p>ä»è·³è¡¨çš„æœ€é«˜å±‚å¼€å§‹éå†ï¼Œåœ¨æ¯å±‚å®šä½åˆ°æœ€åä¸€ä¸ªå°äºtargetçš„èŠ‚ç‚¹ï¼Œå°±å‘ä¸‹ç§»åŠ¨ä¸€å±‚ã€‚å½“éå†åˆ°æœ€åä¸€å±‚æ—¶ï¼Œå°±æ‰¾åˆ°äº†æœ€åº•å±‚æœ€åä¸€ä¸ªå°äºtargetçš„èŠ‚ç‚¹ï¼Œå®ƒçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å¾ˆæœ‰å¯èƒ½å°±æ˜¯ç›®æ ‡èŠ‚ç‚¹ã€‚ä½¿ç”¨<code>cur = cur-&gt;forward[0]</code>è®©curæŒ‡å‘è¯¥èŠ‚ç‚¹ï¼Œæ£€æŸ¥å…¶æ˜¯å¦ä¸ºNULLï¼Œä¸ä¸ºNULLå°±å†æ£€æŸ¥èŠ‚ç‚¹çš„å€¼æ˜¯å¦ä¸ºtargetå³å¯ã€‚</p><p>æŸ¥æ‰¾è¿‡ç¨‹æ˜¯ä»æœ€é«˜å±‚å¼€å§‹ï¼Œé€å±‚å‘ä¸‹æŸ¥æ‰¾ç›®æ ‡å€¼ã€‚</p><ol><li>åˆå§‹åŒ–</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SkiplistNode *curr = obj-&gt;head;</span><br></pre></td></tr></table></figure><ul><li>curr æŒ‡å‘è·³è¡¨çš„å¤´èŠ‚ç‚¹ã€‚</li></ul><ol start="2"><li>ä»æœ€é«˜å±‚å¼€å§‹æŸ¥æ‰¾</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = obj-&gt;level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br></pre></td></tr></table></figure><ul><li>obj-&gt;level æ˜¯è·³è¡¨å½“å‰çš„æœ€å¤§å±‚æ•°ã€‚</li><li>ä»æœ€é«˜å±‚ï¼ˆobj-&gt;level - 1ï¼‰å¼€å§‹ï¼Œé€å±‚å‘ä¸‹æŸ¥æ‰¾ã€‚</li></ul><ol start="3"><li>åœ¨å½“å‰å±‚å‘å³æŸ¥æ‰¾</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (curr-&gt;forward[i] &amp;&amp; curr-&gt;forward[i]-&gt;val &lt; target) </span><br><span class="line">    curr = curr-&gt;forward[i];</span><br></pre></td></tr></table></figure><ul><li>curr-&gt;forward[i] æ˜¯å½“å‰èŠ‚ç‚¹åœ¨ç¬¬ i å±‚çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚</li><li>å¦‚æœä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼å°äº targetï¼Œåˆ™ç»§ç»­å‘å³ç§»åŠ¨ã€‚</li><li>è¿™ä¸ªè¿‡ç¨‹ä¼šè·³è¿‡å¤šä¸ªèŠ‚ç‚¹ï¼Œå¿«é€Ÿæ¥è¿‘ç›®æ ‡å€¼ã€‚</li></ul><ol start="4"><li>ç§»åŠ¨åˆ°ä¸‹ä¸€å±‚</li></ol><ul><li>å½“åœ¨å½“å‰å±‚æ— æ³•ç»§ç»­å‘å³ç§»åŠ¨æ—¶ï¼Œå‘ä¸‹ç§»åŠ¨åˆ°ä¸‹ä¸€å±‚<code>ï¼ˆi--ï¼‰</code>ï¼Œç»§ç»­æŸ¥æ‰¾ã€‚</li></ul><ol start="5"><li>æœ€ç»ˆå®šä½åˆ°ç›®æ ‡èŠ‚ç‚¹</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curr = curr-&gt;forward[<span class="number">0</span>];</span><br></pre></td></tr></table></figure><ul><li>æŸ¥æ‰¾ç»“æŸåï¼Œcurr æŒ‡å‘ç¬¬0å±‚ä¸­æœ€åä¸€ä¸ªå°äº target çš„èŠ‚ç‚¹ã€‚</li><li>curr-&gt;forward[0] æ˜¯ç¬¬0å±‚ä¸­ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¯èƒ½æ˜¯ç›®æ ‡èŠ‚ç‚¹ã€‚</li></ul><ol start="6"><li>æ£€æŸ¥æ˜¯å¦æ‰¾åˆ°ç›®æ ‡å€¼</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (curr &amp;&amp; curr-&gt;val == target) </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœ curr-&gt;forward[0] å­˜åœ¨ä¸”å€¼ç­‰äº targetï¼Œåˆ™è¿”å› trueã€‚</li><li>å¦åˆ™è¿”å› falseã€‚</li></ul><h3 id="è·³è¡¨ä¸­èŠ‚ç‚¹çš„æ·»åŠ ">è·³è¡¨ä¸­èŠ‚ç‚¹çš„æ·»åŠ </h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">skiplistAdd</span><span class="params">(Skiplist* obj, <span class="type">int</span> num)</span> &#123;</span><br><span class="line">    SkiplistNode *update[MAX_LEVEL];</span><br><span class="line">    SkiplistNode *curr = obj-&gt;head;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = obj-&gt;level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="comment">/* æ‰¾åˆ°ç¬¬ i å±‚å°äºä¸”æœ€æ¥è¿‘ num çš„å…ƒç´ */</span></span><br><span class="line">        <span class="keyword">while</span> (curr-&gt;forward[i] &amp;&amp; curr-&gt;forward[i]-&gt;val &lt; num) &#123;</span><br><span class="line">            curr = curr-&gt;forward[i];</span><br><span class="line">        &#125;</span><br><span class="line">        update[i] = curr;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> lv = randomLevel();</span><br><span class="line">    <span class="keyword">if</span> (lv &gt; obj-&gt;level) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = obj-&gt;level; i &lt; lv; i++) &#123;</span><br><span class="line">            update[i] = obj-&gt;head;</span><br><span class="line">        &#125;</span><br><span class="line">        obj-&gt;level = lv;</span><br><span class="line">    &#125;</span><br><span class="line">    SkiplistNode *newNode = skiplistNodeCreat(num, lv);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; lv; i++) &#123;</span><br><span class="line">        <span class="comment">/* å¯¹ç¬¬ i å±‚çš„çŠ¶æ€è¿›è¡Œæ›´æ–°ï¼Œå°†å½“å‰å…ƒç´ çš„ forward æŒ‡å‘æ–°çš„èŠ‚ç‚¹ */</span></span><br><span class="line">        newNode-&gt;forward[i] = update[i]-&gt;forward[i];</span><br><span class="line">        update[i]-&gt;forward[i] = newNode;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>skiplistAdd çš„ä½œç”¨æ˜¯å‘è·³è¡¨ä¸­æ’å…¥ä¸€ä¸ªå€¼ä¸º num çš„èŠ‚ç‚¹ã€‚æ’å…¥æ—¶éœ€è¦ï¼š</p><ol><li>æ‰¾åˆ°æ¯ä¸€å±‚ä¸­æœ€åä¸€ä¸ªå°äº num çš„èŠ‚ç‚¹ã€‚</li><li>éšæœºç”Ÿæˆæ–°èŠ‚ç‚¹çš„å±‚æ•°ã€‚</li><li>å°†æ–°èŠ‚ç‚¹æ’å…¥åˆ°æ¯ä¸€å±‚çš„æ­£ç¡®ä½ç½®ã€‚</li></ol><h4 id="æ’å…¥è¿‡ç¨‹">æ’å…¥è¿‡ç¨‹</h4><ol><li>åˆå§‹åŒ–</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SkiplistNode *update[MAX_LEVEL];</span><br><span class="line">SkiplistNode *cur = obj-&gt;head;</span><br></pre></td></tr></table></figure><ul><li>updateæ˜¯ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œç”¨äºè®°å½•æ¯ä¸€å±‚ä¸­æœ€åä¸€ä¸ªå°äºnumçš„èŠ‚ç‚¹ã€‚</li><li>curæ˜¯å½“å‰èŠ‚ç‚¹ï¼Œåˆå§‹åŒ–ä¸ºè·³è¡¨çš„å¤´èŠ‚ç‚¹ã€‚</li></ul><ol start="2"><li>æŸ¥æ‰¾æ’å…¥ä½ç½®</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = obj-&gt;level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">    <span class="keyword">while</span> (cur-&gt;forward[i] &amp;&amp; cur-&gt;forward[i]-&gt;val &lt; num) </span><br><span class="line">        cur = cur-&gt;forward[i];</span><br><span class="line">    update[i] = cur;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä»æœ€é«˜å¤„(<code>obj-&gt;level-1</code>)å¼€å§‹ï¼Œé€å±‚å‘ä¸‹æŸ¥æ‰¾ã€‚</li><li>åœ¨æ¯ä¸€å±‚ä¸­ï¼Œå‘å³ç§»åŠ¨curï¼Œç›´åˆ°æ‰¾åˆ°æœ€åä¸€ä¸ªå°äºnumçš„èŠ‚ç‚¹ã€‚</li><li>å°†curè®°å½•åˆ°update[i]ï¼Œè¡¨ç¤ºåœ¨ç¬¬iå±‚ï¼Œåº”å°†æ–°èŠ‚ç‚¹æ’å…¥update[i]çš„åé¢ã€‚</li></ul><ol start="3"><li>éšæœºç”Ÿæˆæ–°èŠ‚ç‚¹çš„å±‚æ•°</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> lv = randomLevel();</span><br></pre></td></tr></table></figure><ul><li>è°ƒç”¨ randomLevel å‡½æ•°ï¼Œéšæœºç”Ÿæˆæ–°èŠ‚ç‚¹çš„å±‚æ•° lvã€‚</li></ul><ol start="4"><li>æ›´æ–°è·³è¡¨çš„å±‚æ•°</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (lv &gt; obj-&gt;level) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = obj-&gt;level; i &lt; lv; ++i) </span><br><span class="line">        update[i] = obj-&gt;head;</span><br><span class="line">    obj-&gt;level = lv;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœæ–°èŠ‚ç‚¹çš„å±‚æ•°lvå¤§äºè·³è¡¨çš„å±‚æ•°obj-&gt;levelï¼Œéœ€è¦æ›´æ–°è·³è¡¨çš„å±‚æ•°</li><li>å¯¹äºæ–°å¢çš„å±‚ï¼ˆobj-&gt;level-1åˆ°lv-1ï¼‰ï¼Œå°†update[i]åˆå§‹åŒ–ä¸ºå¤´èŠ‚ç‚¹obj-&gt;headã€‚</li><li>æ›´æ–°è·³è¡¨çš„å±‚æ•°obj-&gt;levelä¸ºlvã€‚</li></ul><ol start="5"><li>åˆ›å»ºæ–°èŠ‚ç‚¹</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SkiplistNode * newNode = skiplistNodeCreate(num, lv);</span><br></pre></td></tr></table></figure><ul><li>è°ƒç”¨ skiplistNodeCreate å‡½æ•°ï¼Œåˆ›å»ºä¸€ä¸ªå€¼ä¸º numã€å±‚æ•°ä¸º lv çš„æ–°èŠ‚ç‚¹ã€‚</li></ul><ol start="6"><li>æ’å…¥æ–°èŠ‚ç‚¹</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; lv; ++i) &#123;</span><br><span class="line">    newNode-&gt;forward[i] = update[i]-&gt;forward[i];</span><br><span class="line">    update[i]-&gt;forward[i] = newNode;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>éå†æ–°èŠ‚ç‚¹çš„æ¯ä¸€å±‚ï¼ˆä»ç¬¬0å±‚åˆ°ç¬¬ lv - 1 å±‚ï¼‰ï¼š<ul><li>å°†æ–°èŠ‚ç‚¹çš„ forward[i] æŒ‡å‘ update[i]-&gt;forward[i]ã€‚</li><li>å°† update[i]-&gt;forward[i] æŒ‡å‘æ–°èŠ‚ç‚¹ã€‚</li></ul></li></ul><p>è¿™æ ·ï¼Œæ–°èŠ‚ç‚¹å°±è¢«æ’å…¥åˆ°æ¯ä¸€å±‚çš„æ­£ç¡®ä½ç½®ã€‚</p><h3 id="è·³è¡¨èŠ‚ç‚¹çš„åˆ é™¤">è·³è¡¨èŠ‚ç‚¹çš„åˆ é™¤</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">bool</span> <span class="title function_">skiplistErase</span><span class="params">(Skiplist* obj, <span class="type">int</span> num)</span> &#123;</span><br><span class="line">    SkiplistNode *update[MAX_LEVEL];</span><br><span class="line">    SkiplistNode *curr = obj-&gt;head;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = obj-&gt;level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">while</span> (curr-&gt;forward[i] &amp;&amp; curr-&gt;forward[i]-&gt;val &lt; num) &#123;</span><br><span class="line">            curr = curr-&gt;forward[i];</span><br><span class="line">        &#125;</span><br><span class="line">        update[i] = curr;</span><br><span class="line">    &#125;</span><br><span class="line">    curr = curr-&gt;forward[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">if</span> (!curr || curr-&gt;val != num) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; obj-&gt;level; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (update[i]-&gt;forward[i] != curr) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125; </span><br><span class="line">        update[i]-&gt;forward[i] = curr-&gt;forward[i];</span><br><span class="line">    &#125;</span><br><span class="line">    skiplistNodeFree(curr);</span><br><span class="line">    <span class="keyword">while</span> (obj-&gt;level &gt; <span class="number">1</span> &amp;&amp; obj-&gt;head-&gt;forward[obj-&gt;level - <span class="number">1</span>] == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        obj-&gt;level--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>skiplistErase çš„ä½œç”¨æ˜¯ä»è·³è¡¨ä¸­åˆ é™¤å€¼ä¸º num çš„èŠ‚ç‚¹ã€‚å¦‚æœèŠ‚ç‚¹å­˜åœ¨å¹¶æˆåŠŸåˆ é™¤ï¼Œè¿”å› trueï¼›å¦åˆ™è¿”å› falseã€‚</p><h4 id="åˆ é™¤è¿‡ç¨‹">åˆ é™¤è¿‡ç¨‹</h4><ol><li>åˆå§‹åŒ–</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SkiplistNode *update[MAX_LEVEL];</span><br><span class="line">SkiplistNode *curr = obj-&gt;head;</span><br></pre></td></tr></table></figure><ul><li>update æ•°ç»„ç”¨äºè®°å½•æ¯ä¸€å±‚ä¸­éœ€è¦æ›´æ–°çš„èŠ‚ç‚¹ã€‚</li><li>curr æŒ‡å‘è·³è¡¨çš„å¤´èŠ‚ç‚¹ï¼ˆheadï¼‰ï¼Œç”¨äºéå†è·³è¡¨</li></ul><ol start="2"><li>æŸ¥æ‰¾å¾…åˆ é™¤èŠ‚ç‚¹çš„ä½ç½®</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = obj-&gt;level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">    <span class="keyword">while</span> (curr-&gt;forward[i] &amp;&amp; curr-&gt;forward[i]-&gt;val &lt; num) </span><br><span class="line">        curr = curr-&gt;forward[i];</span><br><span class="line">    update[i] = curr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä»æœ€é«˜å±‚å¼€å§‹ï¼Œé€å±‚å‘ä¸‹æŸ¥æ‰¾å€¼ä¸º num çš„èŠ‚ç‚¹ã€‚</li><li>åœ¨æ¯ä¸€å±‚ä¸­ï¼Œæ‰¾åˆ°æœ€åä¸€ä¸ªå°äº num çš„èŠ‚ç‚¹ï¼Œå¹¶è®°å½•åˆ° update[i] ä¸­ã€‚</li><li>è¿™ä¸ªè¿‡ç¨‹å’Œ skiplistSearch ç±»ä¼¼ï¼Œç›®çš„æ˜¯å®šä½å¾…åˆ é™¤èŠ‚ç‚¹çš„ä½ç½®ã€‚</li></ul><ol start="3"><li>å®šä½å¾…åˆ é™¤èŠ‚ç‚¹</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curr = curr-&gt;forward[<span class="number">0</span>];</span><br><span class="line">curr ç°åœ¨æŒ‡å‘ç¬¬<span class="number">0</span>å±‚ä¸­æœ€åä¸€ä¸ªå°äº num çš„èŠ‚ç‚¹ã€‚</span><br></pre></td></tr></table></figure><ul><li>curr-&gt;forward[0] æ˜¯ç¬¬0å±‚ä¸­ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¯èƒ½æ˜¯å¾…åˆ é™¤èŠ‚ç‚¹</li></ul><ol start="4"><li>æ£€æŸ¥èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!curr || curr-&gt;val != num) </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœ curr-&gt;forward[0] ä¸å­˜åœ¨ï¼Œæˆ–è€…å®ƒçš„å€¼ä¸ç­‰äº numï¼Œè¯´æ˜èŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œè¿”å› falseã€‚</li></ul><ol start="5"><li>æ›´æ–°æ¯ä¸€å±‚çš„æŒ‡é’ˆ</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; obj-&gt;level; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (update[i]-&gt;forward[i] != curr) </span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    update[i]-&gt;forward[i] = curr-&gt;forward[i];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>éå†æ¯ä¸€å±‚ï¼Œæ›´æ–°æŒ‡å‘å¾…åˆ é™¤èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚</li><li>å¦‚æœ update[i]-&gt;forward[i] ä¸ç­‰äº currï¼Œè¯´æ˜åœ¨è¿™ä¸€å±‚ä¸­ä¸éœ€è¦æ›´æ–°ï¼ˆå› ä¸ºå¾…åˆ é™¤èŠ‚ç‚¹ä¸åœ¨è¿™ä¸€å±‚ï¼‰ï¼Œå¹¶ä¸”æ˜¯ä»åº•å±‚å‘é«˜å±‚éå†çš„ï¼Œæ‰€ä»¥åé¢çš„æ‰€æœ‰å±‚ä¹Ÿä¸éœ€è¦æ›´æ–°ï¼Œbreaké€€å‡ºã€‚</li><li>å¦åˆ™ï¼Œå°† update[i]-&gt;forward[i] æŒ‡å‘ curr-&gt;forward[i]ï¼Œè·³è¿‡å¾…åˆ é™¤èŠ‚ç‚¹ã€‚</li></ul><ol start="6"><li>é‡Šæ”¾å¾…åˆ é™¤èŠ‚ç‚¹</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">skiplistNodeFree(curr);</span><br></pre></td></tr></table></figure><p>è°ƒç”¨ skiplistNodeFree å‡½æ•°é‡Šæ”¾å¾…åˆ é™¤èŠ‚ç‚¹çš„å†…å­˜ã€‚</p><ol start="7"><li>æ›´æ–°è·³è¡¨çš„å±‚æ•°</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (obj-&gt;level &gt; <span class="number">1</span> &amp;&amp; obj-&gt;head-&gt;forward[obj-&gt;level - <span class="number">1</span>] == <span class="literal">NULL</span>) </span><br><span class="line">    obj-&gt;level--;</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœåˆ é™¤èŠ‚ç‚¹åï¼ŒæŸäº›å±‚å˜ä¸ºç©ºï¼ˆå³å¤´èŠ‚ç‚¹åœ¨è¿™ä¸€å±‚çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸º NULLï¼‰ï¼Œåˆ™é™ä½è·³è¡¨çš„å±‚æ•°ã€‚</li><li>è¿™æ˜¯ä¸ºäº†ç¡®ä¿è·³è¡¨çš„å±‚æ•°ä¸ä¼šè¿‡é«˜ï¼Œé¿å…æµªè´¹ç©ºé—´ã€‚</li></ul><ol start="8"><li>è¿”å›ç»“æœ</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><ul><li>åˆ é™¤æˆåŠŸï¼Œè¿”å› trueã€‚</li></ul><p>åˆ°æ­¤æ•´ä¸ªä»£ç å¯ç®—æ˜¯ç†è§£å®Œæ¯•äº†QvQã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šæ—¥ Leetcode æ¯æ—¥ä¸€é¢˜ä¸º&lt;a href=&quot;https://leetcode.cn/problems/design-skiplist/description/&quot;&gt;1206. è®¾è®¡è·³è¡¨&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ä½¿ç”¨ä»»ä½•åº“å‡½æ•°ï¼Œè®¾è®¡ä¸€ä¸ª è·³è¡¨ ã€‚&lt;/p&gt;
&lt;p&gt;è·³è¡¨æ˜¯</summary>
      
    
    
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/categories/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/tags/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    <category term="è®¾è®¡" scheme="http://malone-ai.github.io/tags/%E8%AE%BE%E8%AE%A1/"/>
    
    <category term="é“¾è¡¨" scheme="http://malone-ai.github.io/tags/%E9%93%BE%E8%A1%A8/"/>
    
    <category term="è·³è¡¨" scheme="http://malone-ai.github.io/tags/%E8%B7%B3%E8%A1%A8/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode æ¯æ—¥ä¸€é¢˜äºŒåä¸‰ï¼š2506. ç»Ÿè®¡ç›¸ä¼¼å­—ç¬¦ä¸²å¯¹çš„æ•°ç›®</title>
    <link href="http://malone-ai.github.io/2025/02/22/leetcode23/"/>
    <id>http://malone-ai.github.io/2025/02/22/leetcode23/</id>
    <published>2025-02-22T11:22:26.000Z</published>
    <updated>2025-02-25T12:36:16.745Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šæ—¥ Leetcode æ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/count-pairs-of-similar-strings/description/">2506. ç»Ÿè®¡ç›¸ä¼¼å­—ç¬¦ä¸²å¯¹çš„æ•°ç›®</a>ã€‚</p><p>ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„å­—ç¬¦ä¸²æ•°ç»„ words ã€‚</p><p>å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²ç”±ç›¸åŒçš„å­—ç¬¦ç»„æˆï¼Œåˆ™è®¤ä¸ºè¿™ä¸¤ä¸ªå­—ç¬¦ä¸² ç›¸ä¼¼ ã€‚</p><ul><li>ä¾‹å¦‚ï¼Œâ€œabcaâ€ å’Œ â€œcbaâ€ ç›¸ä¼¼ï¼Œå› ä¸ºå®ƒä»¬éƒ½ç”±å­—ç¬¦ â€˜aâ€™ã€â€˜bâ€™ã€â€˜câ€™ ç»„æˆã€‚</li><li>ç„¶è€Œï¼Œâ€œabacbaâ€ å’Œ â€œbcfdâ€ ä¸ç›¸ä¼¼ï¼Œå› ä¸ºå®ƒä»¬ä¸æ˜¯ç›¸åŒå­—ç¬¦ç»„æˆçš„ã€‚</li></ul><p>è¯·ä½ æ‰¾å‡ºæ»¡è¶³å­—ç¬¦ä¸² words[i] å’Œ words[j] ç›¸ä¼¼çš„ä¸‹æ ‡å¯¹ (i, j) ï¼Œå¹¶è¿”å›ä¸‹æ ‡å¯¹çš„æ•°ç›®ï¼Œå…¶ä¸­ 0 &lt;= i &lt; j &lt;= words.length - 1 ã€‚</p><h1>åˆ†æç†è§£</h1><p>é¢˜ç›®ç»™äº†ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„å­˜æ”¾çš„æ˜¯å­—ç¬¦ä¸²ï¼Œç„¶åè¦æ±‚æˆ‘ä»¬ç»Ÿè®¡ç›¸ä¼¼å­—ç¬¦ä¸²çš„å¯¹æ•°ã€‚è€Œç›¸ä¼¼å­—ç¬¦ä¸²å°±æ˜¯å‡ºç°çš„å­—æ¯ç›¸åŒçš„å­—ç¬¦ä¸²ï¼Œæ— è®ºå­—æ¯çš„ä¸ªæ•°ï¼Œçœ‹ä¾‹å­å°±èƒ½å¾ˆå¥½çš„æ˜ç™½ã€‚</p><h1>åŸºæœ¬æ€è·¯</h1><p>æšä¸¾æ¯ä¸ªå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦æ˜¯å¦å‡ºç°ï¼Œç„¶åæ¯”è¾ƒé€ä¸ªæ¯”è¾ƒæ¯å¯¹å­—ç¬¦ä¸²å³å¯ã€‚</p><p>æŒ‰ç…§ä¸Šè¿°æ€è·¯åº”ä½¿ç”¨çš„æ•°æ®ç»“æ„æ˜¯å“ˆå¸Œè¡¨ï¼Œä½†æ˜¯å…¶å®ä½¿ç”¨ä¸€ä¸ªintå‹å˜é‡å³å¯ã€‚å› ä¸ºé¢˜ç›®é™å®šäº†æ¯ä¸ªå­—ç¬¦ä¸²ä¸­å‡ºç°çš„å­—æ¯å‡ä¸ºå°å†™å­—æ¯ï¼Œè€Œå°å†™å­—æ¯ä¸º26ä¸ªï¼Œintå‹å˜é‡ä¸º4å­—èŠ‚ä¸º32ä½ï¼Œåˆšå¥½æ»¡è¶³éœ€è¦ã€‚åˆå§‹æ—¶ç½®ä¸º0ï¼Œä»æœ€ä½ä½ä¾æ¬¡å¼€å§‹è®°å½•å­—æ¯aã€bã€cã€dâ€¦â€¦æ˜¯å¦å‡ºç°å³å¯ï¼Œå‡ºç°å°±å°†è¯¥ä½ç½®ä¸º1ã€‚é€šè¿‡ç§»ä½å’Œæˆ–æ“ä½œï¼Œ<code>bitNum[i] = bitNum[i] | (1 &lt;&lt; (words[i][j] - 'a'))</code>å³å¯ã€‚è¿™é‡Œå‡æ‰â€™aâ€™æ˜¯å› ä¸ºå°å†™å­—æ¯å¯¹åº”çš„ASCIIç å€¼ä¸º97~122ã€‚å¦‚æœç›´æ¥å·¦ç§»çš„è¯å°±å·¦ç§»97~122ä½äº†ï¼Œå‡å»â€™aâ€™åå°±æ˜¯å·¦ç§»0~25.</p><p>ä½¿ç”¨intå˜é‡è®°å½•æ¯ä¸ªå­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—æ¯æ˜¯å¦å‡ºç°ä¹‹åï¼Œæ¯ä¸ªå­—ç¬¦ä¸²å°±å¯¹åº”ä¸€ä¸ªå€¼ã€‚å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯ç›¸ä¼¼å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆä»–ä»¬å¯¹åº”çš„å€¼ç›¸ç­‰ã€‚å°†æ¯ä¸ªå­—ç¬¦ä¸²å¯¹åº”çš„å€¼ä½¿ç”¨æ•°ç»„å­˜å‚¨åï¼Œä½¿ç”¨ä¸¤å±‚å¾ªç¯æšä¸¾å³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">similarPairs</span><span class="params">(vector&lt;string&gt;&amp; words)</span> </span>&#123;</span><br><span class="line">     <span class="type">int</span> n = words.<span class="built_in">size</span>();</span><br><span class="line">     <span class="type">int</span>* bitNum = <span class="keyword">new</span> <span class="type">int</span>[n]&#123;&#125;;</span><br><span class="line">     <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">         <span class="type">int</span>&amp; cur = bitNum[i];</span><br><span class="line">         <span class="keyword">for</span> (<span class="keyword">auto</span>&amp; str: words[i])</span><br><span class="line">             cur = cur | (<span class="number">1</span> &lt;&lt; (str - <span class="string">&#x27;a&#x27;</span>));</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">         <span class="keyword">for</span> (<span class="type">int</span> j = i + <span class="number">1</span>; j &lt; n; ++j)        </span><br><span class="line">         res += (bitNum[i] == bitNum[j]);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">similarPairs</span><span class="params">(<span class="type">char</span>** words, <span class="type">int</span> wordsSize)</span> &#123;</span><br><span class="line">    <span class="type">int</span> * bitNum = (<span class="type">int</span> *)<span class="built_in">calloc</span>(wordsSize, <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; wordsSize; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="built_in">strlen</span>(words[i]); ++j) &#123;</span><br><span class="line">            bitNum[i] = bitNum[i] | (<span class="number">1</span> &lt;&lt; (words[i][j] - <span class="string">&#x27;a&#x27;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; wordsSize; ++i)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = i + <span class="number">1</span>; j &lt; wordsSize; ++j) </span><br><span class="line">            <span class="keyword">if</span> (bitNum[i] == bitNum[j])</span><br><span class="line">                ++res;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>å¤æ‚åº¦åˆ†æ</h1><p>æ—¶é—´å¤æ‚åº¦ä¸ºO(n * min(m, n))ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„ words çš„é•¿åº¦ï¼Œm æ˜¯æ•°ç»„ words ä¸­å•ä¸ªå­—ç¬¦ä¸²çš„å¹³å‡é•¿åº¦ã€‚<br>ç©ºé—´å¤æ‚åº¦ä¸ºO(n)ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šæ—¥ Leetcode æ¯æ—¥ä¸€é¢˜ä¸º&lt;a href=&quot;https://leetcode.cn/problems/count-pairs-of-similar-strings/description/&quot;&gt;2506. ç»Ÿè®¡ç›¸ä¼¼å­—ç¬¦ä¸²å¯¹çš„æ•°ç›®&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä»</summary>
      
    
    
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/categories/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/tags/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    <category term="ä½è¿ç®—" scheme="http://malone-ai.github.io/tags/%E4%BD%8D%E8%BF%90%E7%AE%97/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode æ¯æ—¥ä¸€é¢˜äºŒåäºŒï¼š2209. ç”¨åœ°æ¯¯è¦†ç›–åçš„æœ€å°‘ç™½è‰²ç –å—</title>
    <link href="http://malone-ai.github.io/2025/02/21/leetcode22/"/>
    <id>http://malone-ai.github.io/2025/02/21/leetcode22/</id>
    <published>2025-02-21T04:43:08.000Z</published>
    <updated>2025-02-23T04:49:54.764Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šæ—¥Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/minimum-white-tiles-after-covering-with-carpets/description/">2209. ç”¨åœ°æ¯¯è¦†ç›–åçš„æœ€å°‘ç™½è‰²ç –å—</a>ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šæ—¥Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º&lt;a href=&quot;https://leetcode.cn/problems/minimum-white-tiles-after-covering-with-carpets/description/&quot;&gt;2209. ç”¨åœ°æ¯¯è¦†ç›–åçš„æœ€å°‘ç™½è‰²ç –å—&lt;/a</summary>
      
    
    
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/categories/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/tags/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode æ¯æ—¥ä¸€é¢˜äºŒåä¸€ï¼š2595. å¥‡å¶ä½æ•°</title>
    <link href="http://malone-ai.github.io/2025/02/20/leetcode21/"/>
    <id>http://malone-ai.github.io/2025/02/20/leetcode21/</id>
    <published>2025-02-20T02:26:29.000Z</published>
    <updated>2025-02-23T04:43:43.908Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šæ—¥Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/number-of-even-and-odd-bits/description/">2595. å¥‡å¶ä½æ•°</a>ã€‚</p><p>ç»™ä½ ä¸€ä¸ªæ­£æ•´æ•° n ã€‚</p><p>ç”¨ even è¡¨ç¤ºåœ¨ n çš„äºŒè¿›åˆ¶å½¢å¼ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ä¸­å€¼ä¸º 1 çš„å¶æ•°ä¸‹æ ‡çš„ä¸ªæ•°ã€‚</p><p>ç”¨ odd è¡¨ç¤ºåœ¨ n çš„äºŒè¿›åˆ¶å½¢å¼ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ä¸­å€¼ä¸º 1 çš„å¥‡æ•°ä¸‹æ ‡çš„ä¸ªæ•°ã€‚</p><p>è¯·æ³¨æ„ï¼Œåœ¨æ•°å­—çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­ï¼Œä½ä¸‹æ ‡çš„é¡ºåº ä»å³åˆ°å·¦ã€‚</p><p>è¿”å›æ•´æ•°æ•°ç»„ answer ï¼Œå…¶ä¸­ answer = [even, odd] ã€‚</p><h1>æ€è·¯åˆ†æ</h1><p>ä½¿ç”¨intå‹å˜é‡evenå’Œoddåˆ†åˆ«è®°å½•ï¼Œå¯¹nè¿›è¡Œç§»ä½æ“ä½œï¼Œå› ä¸ºè®°å½•çš„æ˜¯1çš„ä¸ªæ•°ï¼Œå› æ­¤ç›´æ¥åœ¨ç§»ä½æ“ä½œåç›´æ¥åŠ åœ¨evenæˆ–è€…oddä¸Šå³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">evenOddBit</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> even = <span class="number">0</span>, odd = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> pos = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (n &gt;&gt; pos != <span class="number">0</span>) &#123;</span><br><span class="line">            even += (n &gt;&gt; pos++ &amp; <span class="number">1</span>);</span><br><span class="line">            odd += (n &gt;&gt; pos++ &amp; <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> &#123;even, odd&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Note: The returned array must be malloced, assume caller calls free().</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">int</span>* <span class="title function_">evenOddBit</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span>* returnSize)</span> &#123;</span><br><span class="line">    <span class="type">int</span>* res = (<span class="type">int</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">int</span>) * <span class="number">2</span>);</span><br><span class="line">    <span class="built_in">memset</span>(res, <span class="number">0</span>, <span class="keyword">sizeof</span>(<span class="type">int</span>) * <span class="number">2</span>);</span><br><span class="line">    *returnSize = <span class="number">2</span>;</span><br><span class="line">    <span class="type">int</span> pos = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (n &gt;&gt; pos != <span class="number">0</span>) &#123;</span><br><span class="line">        res[<span class="number">0</span>] += (n &gt;&gt; pos++ &amp; <span class="number">1</span>);</span><br><span class="line">        res[<span class="number">1</span>] += (n &gt;&gt; pos++ &amp; <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>å¤æ‚åº¦åˆ†æ</h1><p>æ—¶é—´å¤æ‚åº¦ä¸ºO(log n)ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚çµèŒ¶å±±è‰¾åºœå°±æ¯”è¾ƒå‰å®³äº†ï¼Œä½¿ç”¨äº†ä½æ©ç çš„åŠæ³•ï¼Œå®ç°äº†O(1)å¤æ‚åº¦çš„ç®—æ³•ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šæ—¥Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º&lt;a href=&quot;https://leetcode.cn/problems/number-of-even-and-odd-bits/description/&quot;&gt;2595. å¥‡å¶ä½æ•°&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç»™ä½ ä¸€ä¸ªæ­£æ•´æ•° n ã€‚&lt;/p&gt;
&lt;p&gt;</summary>
      
    
    
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/categories/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/tags/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    <category term="ä½è¿ç®—" scheme="http://malone-ai.github.io/tags/%E4%BD%8D%E8%BF%90%E7%AE%97/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode æ¯æ—¥ä¸€é¢˜äºŒåï¼š624. æ•°ç»„åˆ—è¡¨ä¸­çš„æœ€å¤§è·ç¦»</title>
    <link href="http://malone-ai.github.io/2025/02/19/leetcode20/"/>
    <id>http://malone-ai.github.io/2025/02/19/leetcode20/</id>
    <published>2025-02-19T12:31:32.000Z</published>
    <updated>2025-02-19T16:21:08.640Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šæ—¥Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/maximum-distance-in-arrays/description/">624. æ•°ç»„åˆ—è¡¨ä¸­çš„æœ€å¤§è·ç¦»</a>ã€‚</p><p>ç»™å®š m ä¸ªæ•°ç»„ï¼Œæ¯ä¸ªæ•°ç»„éƒ½å·²ç»æŒ‰ç…§å‡åºæ’å¥½åºäº†ã€‚</p><p>ç°åœ¨ä½ éœ€è¦ä»ä¸¤ä¸ªä¸åŒçš„æ•°ç»„ä¸­é€‰æ‹©ä¸¤ä¸ªæ•´æ•°ï¼ˆæ¯ä¸ªæ•°ç»„é€‰ä¸€ä¸ªï¼‰å¹¶ä¸”è®¡ç®—å®ƒä»¬çš„è·ç¦»ã€‚ä¸¤ä¸ªæ•´æ•° a å’Œ b ä¹‹é—´çš„è·ç¦»å®šä¹‰ä¸ºå®ƒä»¬å·®çš„ç»å¯¹å€¼ |a-b| ã€‚</p><h1>åˆ†æç†è§£</h1><p>é¢˜ç›®æ„æ€å¾ˆæ˜ç¡®ï¼Œå¹¶ä¸”æ¯ä¸ªæ•°ç»„ä¸­çš„æ•°æ˜¯æŒ‰å‡åºæ’åˆ—çš„ï¼Œæˆ‘ä»¬éœ€è¦è¿”å›ä¸åŒæ•°ç»„ä¸­çš„ä¸¤ä¸ªæ•°çš„å·®å€¼çš„ç»å¯¹å€¼ï¼Œå¹¶ä¸”è¿™ä¸ªå·®å€¼çš„ç»å¯¹å€¼å¾—æ˜¯æœ€å¤§çš„é‚£ä¸ªã€‚</p><h1>æ€è·¯åˆ†æ</h1><p>æš´åŠ›çš„åšæ³•æ˜¯æšä¸¾æ‰€æœ‰çš„å·®å€¼çš„ç»å¯¹å€¼è¿›è¡Œæ¯”è¾ƒï¼Œè¿”å›ç»å¯¹å€¼æœ€å¤§çš„é‚£ä¸ªå³å¯ï¼Œä½†æ˜¯è¿™ç§åšæ³•æ˜¾ç„¶æœ‰æå‡ç©ºé—´ï¼Œå¹¶ä¸”æ•ˆç‡ä¸é«˜ï¼Œå¤æ‚åº¦ä¸ºäºŒé˜¶ã€‚</p><p>ç„¶åæˆ‘ä¸€å¼€å§‹çš„æƒ³æ³•æ˜¯æ¯”è¾ƒæ‰€æœ‰æ•°ç»„çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œç„¶åå–å‡ºè¿™äº›æœ€å¤§å€¼ä¸­çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ä¸­çš„æœ€å°å€¼ï¼Œè¿”å›ä»–ä»¬çš„å·®å€¼å³å¯ï¼Œä½†æ˜¯æ— æ³•æ’é™¤ä»–ä»¬åœ¨åŒä¸€ä¸ªæ•°ç»„ä¸­çš„æƒ…å†µã€‚</p><p>ç´§æ¥ç€ï¼Œæˆ‘å…ˆæ‰¾å‡ºæœ€å°å€¼ä¸­çš„æœ€å°å€¼ï¼Œç„¶åè®°å½•ä¸‹å…¶ä¸‹æ ‡ï¼›ç„¶ååœ¨å¯»æ‰¾æœ€å¤§å€¼ä¸­çš„æœ€å¤§å€¼æ—¶ï¼Œæ’é™¤è¿™ä¸ªä¸‹æ ‡å³å¯ã€‚ä½†æ˜¯ä¾ç„¶æ— æ³•æ’é™¤æŸäº›ç‰¹æ®Šæƒ…å†µï¼Œå¦‚å¯¹äº[[-2],[-3,-2,1]]ï¼Œä¼šè®°å½•æ•°ç»„â‘¡ä¸­çš„-3ä¸ºæœ€å°å€¼ï¼Œè®°å½•æ•°ç»„â‘ ä¸­çš„-2ä¸ºæœ€å¤§å€¼ï¼Œå¾—åˆ°ç»“æœ1ã€‚ä½†åº”è¯¥æ˜¯1-(-2)=3ã€‚</p><p>äºæ˜¯ä¹æˆ‘åˆå¼€å§‹å…ˆæ‰¾å‡ºæœ€å¤§å€¼ä¸­çš„æœ€å¤§å€¼ï¼Œç„¶åæœ€å°å€¼ä¸­çš„æœ€å°å€¼ï¼Œä½†æ˜¯ä¾ç„¶æ— æ³•æ’é™¤æŸäº›ç‰¹æ®Šæƒ…å†µã€‚</p><p>å†äºæ˜¯ä¹ï¼Œæˆ‘è½¬å‘äº†çµèŒ¶å±±è‰¾åºœçš„é¢˜è§£ã€‚ä»–çš„æ€è·¯å¾ˆæ¸…æ™°ï¼Œè§£é‡Šå¾—ä¹Ÿæ¯”è¾ƒæ¸…æ¥šã€‚åŸºæœ¬æ€è·¯æ˜¯éå†æ¯ä¸ªæ•°ç»„ï¼Œå…ˆè®¡ç®—å½“å‰æ•°ç»„ä¸è®°å½•çš„æœ€å°å€¼å’Œè®°å½•çš„æœ€å¤§å€¼ä¹‹é—´çš„æœ€å¤§è·ç¦»ã€‚è®°å½•çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ä¸ºmin_aå’Œmax_bï¼Œç„¶åå½“å‰æ•°ç»„çš„æœ€å¤§å€¼æ˜¯æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå®ƒå‡å»min_aå¯èƒ½æ˜¯ä¸€ä¸ªå€™é€‰ç»“æœï¼›æœ€å°å€¼æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œmax_bå‡å»å®ƒæ˜¯ä¸€ä¸ªå€™é€‰ç»“æœã€‚ç„¶åæ›´æ–°min_aå’Œmax_bã€‚æœ€ç»ˆå³å¯å¾—åˆ°ç»“æœã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxDistance</span><span class="params">(vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&amp; arrays)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> m = arrays.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> min_a = arrays[<span class="number">0</span>][<span class="number">0</span>], max_b = arrays[<span class="number">0</span>].<span class="built_in">back</span>();</span><br><span class="line">        <span class="type">int</span> ans = INT_MIN;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; m; ++i) &#123;</span><br><span class="line">            ans = <span class="built_in">max</span>(<span class="built_in">max</span>(max_b - arrays[i].<span class="built_in">front</span>(), arrays[i].<span class="built_in">back</span>() - min_a), ans);</span><br><span class="line">            min_a = <span class="built_in">min</span>(min_a, arrays[i].<span class="built_in">front</span>());</span><br><span class="line">            max_b = <span class="built_in">max</span>(max_b, arrays[i].<span class="built_in">back</span>());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> max(a, b) ((a) &gt; (b) ? (a) : (b))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> min(a, b) ((a) &gt; (b) ? (b) : (a))</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">maxDistance</span><span class="params">(<span class="type">int</span>** arrays, <span class="type">int</span> arraysSize, <span class="type">int</span>* arraysColSize)</span> &#123;</span><br><span class="line">    <span class="type">int</span> min_a = arrays[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">    <span class="type">int</span> max_b = arrays[<span class="number">0</span>][arraysColSize[<span class="number">0</span>]<span class="number">-1</span>];</span><br><span class="line">    <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; arraysSize; ++i) &#123;</span><br><span class="line">        ans = max(max(max_b - arrays[i][<span class="number">0</span>], arrays[i][arraysColSize[i]<span class="number">-1</span>] - min_a), ans);</span><br><span class="line">        min_a = min(min_a, arrays[i][<span class="number">0</span>]);</span><br><span class="line">        max_b = max(max_b, arrays[i][arraysColSize[i]<span class="number">-1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šæ—¥Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º&lt;a href=&quot;https://leetcode.cn/problems/maximum-distance-in-arrays/description/&quot;&gt;624. æ•°ç»„åˆ—è¡¨ä¸­çš„æœ€å¤§è·ç¦»&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç»™å®š m ä¸ªæ•°ç»„ï¼Œæ¯ä¸ªæ•°ç»„éƒ½å·²</summary>
      
    
    
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/categories/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/tags/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    <category term="æ•°ç»„" scheme="http://malone-ai.github.io/tags/%E6%95%B0%E7%BB%84/"/>
    
    <category term="è´ªå¿ƒ" scheme="http://malone-ai.github.io/tags/%E8%B4%AA%E5%BF%83/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode æ¯æ—¥ä¸€é¢˜åä¹ï¼š2080. åŒºé—´å†…æŸ¥è¯¢æ•°å­—çš„é¢‘ç‡</title>
    <link href="http://malone-ai.github.io/2025/02/18/leetcode19/"/>
    <id>http://malone-ai.github.io/2025/02/18/leetcode19/</id>
    <published>2025-02-18T12:31:16.000Z</published>
    <updated>2025-02-23T02:16:44.843Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šæ—¥Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/range-frequency-queries/description/">2080. åŒºé—´å†…æŸ¥è¯¢æ•°å­—çš„é¢‘ç‡</a>ã€‚</p><p>è¯·ä½ è®¾è®¡ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œå®ƒèƒ½æ±‚å‡ºç»™å®šå­æ•°ç»„å†…ä¸€ä¸ªç»™å®šå€¼çš„ é¢‘ç‡ ã€‚</p><p>å­æ•°ç»„ä¸­ä¸€ä¸ªå€¼çš„ é¢‘ç‡ æŒ‡çš„æ˜¯è¿™ä¸ªå­æ•°ç»„ä¸­è¿™ä¸ªå€¼çš„å‡ºç°æ¬¡æ•°ã€‚</p><p>è¯·ä½ å®ç°<code>RangeFreqQuery</code>ç±»ï¼š</p><ul><li>RangeFreqQuery(int[] arr) ç”¨ä¸‹æ ‡ä» 0 å¼€å§‹çš„æ•´æ•°æ•°ç»„ arr æ„é€ ä¸€ä¸ªç±»çš„å®ä¾‹ã€‚</li><li>int query(int left, int right, int value) è¿”å›å­æ•°ç»„ arr[leftâ€¦right] ä¸­ value çš„ é¢‘ç‡ ã€‚</li></ul><p>ä¸€ä¸ª å­æ•°ç»„ æŒ‡çš„æ˜¯æ•°ç»„ä¸­ä¸€æ®µè¿ç»­çš„å…ƒç´ ã€‚arr[leftâ€¦right] æŒ‡çš„æ˜¯ nums ä¸­åŒ…å«ä¸‹æ ‡ left å’Œ right åœ¨å†… çš„ä¸­é—´ä¸€æ®µè¿ç»­å…ƒç´ ã€‚</p><h1>åˆ†æç†è§£</h1><p>ç›®æ ‡æ˜¯å®ç°ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œè¯¥æ•°æ®ç»“æ„èƒ½å¤Ÿåœ¨ç»™å®šä¸€ä¸ªæ•°ç»„çš„æƒ…å†µä¸‹ï¼Œè¿”å›åœ¨æŒ‡å®šä¸‹æ ‡èŒƒå›´å†…ç‰¹å®šå€¼çš„é¢‘ç‡ã€‚æŒ‡å®šä¸‹æ ‡èŒƒå›´è®°ä½œ[left, right]ã€‚</p><h1>åŸºæœ¬æ€è·¯</h1><p>åŸºæœ¬æ€è·¯æ˜¯ä½¿ç”¨å“ˆå¸Œè¡¨å°†æ•°ç»„ä¸­çš„æ•°å€¼ä¸å…¶å‡ºç°çš„ä¸‹æ ‡ä½ç½®å»ºç«‹æ˜ å°„å…³ç³»ï¼Œä¸‹æ ‡ä½ç½®ä½¿ç”¨æ•°ç»„å°±å¯ä»¥å­˜å‚¨ã€‚ç„¶åå†ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œå¹¶ä¸”æ˜¯ä¸¤æ¬¡äºŒåˆ†æŸ¥æ‰¾ï¼š</p><ul><li>ç¬¬ä¸€æ¬¡äºŒåˆ†æŸ¥æ‰¾ç”¨äºæŸ¥æ‰¾ä¸‹æ ‡ä½ç½®æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå¤§äºrightçš„å€¼ã€‚</li><li>ç¬¬äºŒæ¬¡äºŒåˆ†æŸ¥æ‰¾ç”¨äºæŸ¥æ‰¾ä¸‹æ ‡ä½ç½®æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå°äºç­‰äºleftçš„å€¼ã€‚</li></ul><p>äºŒè€…è¿›è¡Œç›¸å‡å³ä¸ºæ‰€æ±‚ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">RangeFreqQuery</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    unordered_map&lt;<span class="type">int</span>, vector&lt;<span class="type">int</span>&gt;&gt; hash;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">RangeFreqQuery</span>(vector&lt;<span class="type">int</span>&gt;&amp; arr) &#123;</span><br><span class="line">        <span class="type">int</span> n = arr.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">            hash[arr[i]].<span class="built_in">emplace_back</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">query</span><span class="params">(<span class="type">int</span> left, <span class="type">int</span> right, <span class="type">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">auto</span> it = hash.<span class="built_in">find</span>(value);</span><br><span class="line">        <span class="keyword">if</span> (it == hash.<span class="built_in">end</span>())</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt;&amp; nums = hash[value];</span><br><span class="line">        <span class="comment">// return ranges::upper_bound(nums, right) - ranges::lower_bound(nums, left);</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">upper_bound</span>(nums, right) - <span class="built_in">lower_bound</span>(nums, left);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">upper_bound</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> left = <span class="number">0</span>, right = nums.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">            <span class="type">int</span> mid = (left + right) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (nums[mid] &gt; value)</span><br><span class="line">                right = mid - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                left = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> left;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">lower_bound</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> left = <span class="number">0</span>, right = nums.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">            <span class="type">int</span> mid = (left + right) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (nums[mid] &gt;= value)</span><br><span class="line">                right = mid - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                left = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> left;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your RangeFreqQuery object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * RangeFreqQuery* obj = new RangeFreqQuery(arr);</span></span><br><span class="line"><span class="comment"> * int param_1 = obj-&gt;query(left,right,value);</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure> <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><p>Cè¯­è¨€å“ˆå¸Œè¡¨åº“çš„ä½¿ç”¨è¯·æŸ¥çœ‹è¿™ç¯‡æ–‡ç« <a href="https://malone-ai.github.io/2025/02/18/c1">Cè¯­è¨€å“ˆå¸Œè¡¨åº“ä½¿ç”¨</a>ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šæ—¥Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º&lt;a href=&quot;https://leetcode.cn/problems/range-frequency-queries/description/&quot;&gt;2080. åŒºé—´å†…æŸ¥è¯¢æ•°å­—çš„é¢‘ç‡&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¯·ä½ è®¾è®¡ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œå®ƒèƒ½æ±‚å‡ºç»™å®š</summary>
      
    
    
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/categories/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    
    <category term="å“ˆå¸Œè¡¨" scheme="http://malone-ai.github.io/tags/%E5%93%88%E5%B8%8C%E8%A1%A8/"/>
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/tags/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    <category term="äºŒåˆ†æŸ¥æ‰¾" scheme="http://malone-ai.github.io/tags/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/"/>
    
  </entry>
  
  <entry>
    <title>Cè¯­è¨€å“ˆå¸Œè¡¨åº“ä½¿ç”¨</title>
    <link href="http://malone-ai.github.io/2025/02/18/c1/"/>
    <id>http://malone-ai.github.io/2025/02/18/c1/</id>
    <published>2025-02-18T03:27:33.000Z</published>
    <updated>2025-02-19T17:12:43.909Z</updated>
    
    <content type="html"><![CDATA[<p>å†™ä¸€ç¯‡åšå®¢è®°å½•ä¸€ä¸‹Cè¯­è¨€çš„å“ˆå¸Œè¡¨åº“çš„ä½¿ç”¨ã€‚å“ˆå¸Œè¡¨è¯´ç™½äº†å°±æ˜¯Pythonçš„å­—å…¸ï¼Œæˆ‘è®¤ä¸ºäºŒè€…å‡ ä¹æ— å¼‚ã€‚æœ¬æ–‡ä¸»è¦è®¨è®ºçš„æ˜¯uthashåº“ã€‚</p><h1>ä½¿ç”¨æ­¥éª¤</h1><ol><li>å®‰è£…ä¸åŒ…å«<br>uthashæ˜¯ä¸€ä¸ªå•æ–‡ä»¶å¤´åº“ï¼Œåªéœ€è¦ä¸‹è½½<code>uthash.h</code>åº“å¹¶å°†å…¶åŒ…å«åœ¨é¡¹ç›®ä¸­å³å¯ã€‚</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;uthash.h&quot;</span></span></span><br></pre></td></tr></table></figure><ol start="2"><li>å®šä¹‰ç»“æ„ä½“<br>å®šä¹‰ä¸€ä¸ªç»“æ„ä½“æ¥è¡¨ç¤ºå“ˆå¸Œè¡¨ä¸­çš„å…ƒç´ ï¼Œå¹¶ä¸”ç»“æ„ä½“ä¸­å¿…é¡»åŒ…å«<code>UT_hash_handle</code>ç±»å‹çš„å­—æ®µã€‚</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="type">int</span> key;    <span class="comment">// é”®</span></span><br><span class="line">    <span class="type">int</span> value;  <span class="comment">// å€¼</span></span><br><span class="line">    UT_hash_handle hh; <span class="comment">// å£°æ˜ä¸€ä¸ªUT_hash_handleç±»å‹çš„å˜é‡</span></span><br><span class="line">&#125;Hash;</span><br></pre></td></tr></table></figure><ol start="3"><li>åˆå§‹åŒ–å“ˆå¸Œè¡¨<br>å“ˆå¸Œè¡¨æ˜¯ä¸€ä¸ªæŒ‡å‘Hashç±»å‹çš„æŒ‡é’ˆï¼Œåˆå§‹æ—¶è®¾ä¸º<code>NULL</code>ã€‚</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hash* hash = <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure><ol start="4"><li>æ’å…¥å…ƒç´ <br>ä½¿ç”¨<code>HASH_ADD_INT</code>å®å°†å…ƒç´ æ’å…¥å“ˆå¸Œè¡¨ã€‚</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Hash* item = (Hash*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Hash));</span><br><span class="line">item-&gt;key = key;    <span class="comment">// æ­¤å¤„çš„keyä½ å¯ä»¥ä»»æ„æŒ‡å®š</span></span><br><span class="line">item-&gt;value = value;    <span class="comment">// æ­¤å¤„çš„valueä½ å¯ä»¥ä»»æ„æŒ‡å®š</span></span><br><span class="line">HASH_ADD_INT(hash, key, item);</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å†™ä¸€ç¯‡åšå®¢è®°å½•ä¸€ä¸‹Cè¯­è¨€çš„å“ˆå¸Œè¡¨åº“çš„ä½¿ç”¨ã€‚å“ˆå¸Œè¡¨è¯´ç™½äº†å°±æ˜¯Pythonçš„å­—å…¸ï¼Œæˆ‘è®¤ä¸ºäºŒè€…å‡ ä¹æ— å¼‚ã€‚æœ¬æ–‡ä¸»è¦è®¨è®ºçš„æ˜¯uthashåº“ã€‚&lt;/p&gt;
&lt;h1&gt;ä½¿ç”¨æ­¥éª¤&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;å®‰è£…ä¸åŒ…å«&lt;br&gt;
uthashæ˜¯ä¸€ä¸ªå•æ–‡ä»¶å¤´åº“ï¼Œåªéœ€è¦ä¸‹è½½&lt;code&gt;uthash.h</summary>
      
    
    
    
    <category term="Cè¯­è¨€" scheme="http://malone-ai.github.io/categories/C%E8%AF%AD%E8%A8%80/"/>
    
    
    <category term="Cè¯­è¨€" scheme="http://malone-ai.github.io/tags/C%E8%AF%AD%E8%A8%80/"/>
    
    <category term="å“ˆå¸Œè¡¨" scheme="http://malone-ai.github.io/tags/%E5%93%88%E5%B8%8C%E8%A1%A8/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode æ¯æ—¥ä¸€é¢˜åå…«ï¼š1287. æœ‰åºæ•°ç»„ä¸­å‡ºç°æ¬¡æ•°è¶…è¿‡25%çš„å…ƒç´ </title>
    <link href="http://malone-ai.github.io/2025/02/17/leetcode18/"/>
    <id>http://malone-ai.github.io/2025/02/17/leetcode18/</id>
    <published>2025-02-17T07:54:06.000Z</published>
    <updated>2025-02-19T12:31:56.377Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šæ—¥Leecodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/element-appearing-more-than-25-in-sorted-array/description/">1287. æœ‰åºæ•°ç»„ä¸­å‡ºç°æ¬¡æ•°è¶…è¿‡25%çš„å…ƒç´ </a>ã€‚</p><p>ç»™ä½ ä¸€ä¸ªéé€’å‡çš„ æœ‰åº æ•´æ•°æ•°ç»„ï¼Œå·²çŸ¥è¿™ä¸ªæ•°ç»„ä¸­æ°å¥½æœ‰ä¸€ä¸ªæ•´æ•°ï¼Œå®ƒçš„å‡ºç°æ¬¡æ•°è¶…è¿‡æ•°ç»„å…ƒç´ æ€»æ•°çš„ 25%ã€‚</p><p>è¯·ä½ æ‰¾åˆ°å¹¶è¿”å›è¿™ä¸ªæ•´æ•°</p><h1>åŸºæœ¬æ€è·¯</h1><p>æ•°ç»„æ˜¯<code>éé€’å‡</code>é¡ºåºçš„ï¼Œé‚£å°±å¥½åŠäº†ï¼Œç›´æ¥éå†</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">findSpecialInteger</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; arr)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = arr.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> res = arr[<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> count = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[i] == res) &#123;</span><br><span class="line">                ++count;</span><br><span class="line">                <span class="keyword">if</span> (count &gt;= (n / <span class="number">4</span> + <span class="number">1</span>))</span><br><span class="line">                    <span class="keyword">return</span> arr[i];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                res = arr[i];</span><br><span class="line">                count = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">findSpecialInteger</span><span class="params">(<span class="type">int</span>* arr, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">int</span> res = arr[<span class="number">0</span>];</span><br><span class="line">    <span class="type">int</span> count = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[i] == res) &#123;</span><br><span class="line">            ++count;</span><br><span class="line">            <span class="keyword">if</span> (count &gt;= n / <span class="number">4</span> + <span class="number">1</span>)</span><br><span class="line">                <span class="keyword">return</span> arr[i];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            res = arr[i];</span><br><span class="line">            count = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>å¤æ‚åº¦</h1><p>æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šæ—¥Leecodeæ¯æ—¥ä¸€é¢˜ä¸º&lt;a href=&quot;https://leetcode.cn/problems/element-appearing-more-than-25-in-sorted-array/description/&quot;&gt;1287. æœ‰åºæ•°ç»„ä¸­å‡ºç°æ¬¡æ•°è¶…è¿‡25%çš„å…ƒç´ &lt;</summary>
      
    
    
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/categories/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/tags/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    <category term="æ•°ç»„" scheme="http://malone-ai.github.io/tags/%E6%95%B0%E7%BB%84/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode æ¯æ—¥ä¸€é¢˜åä¸ƒï¼š1299. å°†æ¯ä¸ªå…ƒç´ æ›¿æ¢ä¸ºå³ä¾§æœ€å¤§å…ƒç´ </title>
    <link href="http://malone-ai.github.io/2025/02/16/leetcode17/"/>
    <id>http://malone-ai.github.io/2025/02/16/leetcode17/</id>
    <published>2025-02-15T16:34:04.000Z</published>
    <updated>2025-02-15T17:10:27.215Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šæ—¥Leecodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/replace-elements-with-greatest-element-on-right-side/description/">1299. å°†æ¯ä¸ªå…ƒç´ æ›¿æ¢ä¸ºå³ä¾§æœ€å¤§å…ƒç´ </a>ã€‚</p><p>ç»™ä½ ä¸€ä¸ªæ•°ç»„ arr ï¼Œè¯·ä½ å°†æ¯ä¸ªå…ƒç´ ç”¨å®ƒå³è¾¹æœ€å¤§çš„å…ƒç´ æ›¿æ¢ï¼Œå¦‚æœæ˜¯æœ€åä¸€ä¸ªå…ƒç´ ï¼Œç”¨ -1 æ›¿æ¢ã€‚</p><p>å®Œæˆæ‰€æœ‰æ›¿æ¢æ“ä½œåï¼Œè¯·ä½ è¿”å›è¿™ä¸ªæ•°ç»„ã€‚</p><h1>åˆ†æç†è§£</h1><p>é¢˜ç›®å¾ˆå¥½ç†è§£ï¼Œæ— éœ€å¤šè¨€ã€‚</p><h1>åŸºæœ¬æ€è·¯</h1><p>ä»æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹å‘å‰éå†ï¼Œç„¶åç»´æŠ¤ä¸€ä¸ªä»å½“å‰å…ƒç´ å¾€åçš„æœ€å¤§å€¼å³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">replaceElements</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; arr)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = arr.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> cur_max = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">            <span class="type">int</span> tmp = arr[i];</span><br><span class="line">            arr[i] = cur_max;</span><br><span class="line">            cur_max = <span class="built_in">max</span>(cur_max, tmp);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> arr;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Note: The returned array must be malloced, assume caller calls free().</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Max(a, b) ((a) &gt; (b) ? (a) : (b))</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span>* <span class="title function_">replaceElements</span><span class="params">(<span class="type">int</span>* arr, <span class="type">int</span> arrSize, <span class="type">int</span>* returnSize)</span> &#123;</span><br><span class="line">    <span class="type">int</span> cur_max = <span class="number">-1</span>;</span><br><span class="line">    *returnSize = arrSize;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = arrSize - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">        <span class="type">int</span> tmp = arr[i];</span><br><span class="line">        arr[i] = cur_max;</span><br><span class="line">        cur_max = Max(cur_max, tmp);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>å¤æ‚åº¦</h1><p>æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šæ—¥Leecodeæ¯æ—¥ä¸€é¢˜ä¸º&lt;a href=&quot;https://leetcode.cn/problems/replace-elements-with-greatest-element-on-right-side/description/&quot;&gt;1299. å°†æ¯ä¸ªå…ƒç´ æ›¿æ¢ä¸ºå³ä¾§æœ€å¤§</summary>
      
    
    
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/categories/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/tags/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    <category term="æ•°ç»„" scheme="http://malone-ai.github.io/tags/%E6%95%B0%E7%BB%84/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode æ¯æ—¥ä¸€é¢˜åå…­ï¼š1706. çƒä¼šè½ä½•å¤„</title>
    <link href="http://malone-ai.github.io/2025/02/15/leetcode16/"/>
    <id>http://malone-ai.github.io/2025/02/15/leetcode16/</id>
    <published>2025-02-15T14:14:45.000Z</published>
    <updated>2025-02-15T16:25:07.888Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šæ—¥çš„Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/where-will-the-ball-fall/description/">1706. çƒä¼šè½ä½•å¤„</a>ã€‚</p><p>ç”¨ä¸€ä¸ªå¤§å°ä¸º m x n çš„äºŒç»´ç½‘æ ¼ grid è¡¨ç¤ºä¸€ä¸ªç®±å­ã€‚ä½ æœ‰ n é¢—çƒã€‚ç®±å­çš„é¡¶éƒ¨å’Œåº•éƒ¨éƒ½æ˜¯å¼€ç€çš„ã€‚</p><p>ç®±å­ä¸­çš„æ¯ä¸ªå•å…ƒæ ¼éƒ½æœ‰ä¸€ä¸ªå¯¹è§’çº¿æŒ¡æ¿ï¼Œè·¨è¿‡å•å…ƒæ ¼çš„ä¸¤ä¸ªè§’ï¼Œå¯ä»¥å°†çƒå¯¼å‘å·¦ä¾§æˆ–è€…å³ä¾§ã€‚</p><ul><li>å°†çƒå¯¼å‘å³ä¾§çš„æŒ¡æ¿è·¨è¿‡å·¦ä¸Šè§’å’Œå³ä¸‹è§’ï¼Œåœ¨ç½‘æ ¼ä¸­ç”¨ 1 è¡¨ç¤ºã€‚</li><li>å°†çƒå¯¼å‘å·¦ä¾§çš„æŒ¡æ¿è·¨è¿‡å³ä¸Šè§’å’Œå·¦ä¸‹è§’ï¼Œåœ¨ç½‘æ ¼ä¸­ç”¨ -1 è¡¨ç¤ºã€‚</li></ul><p>åœ¨ç®±å­æ¯ä¸€åˆ—çš„é¡¶ç«¯å„æ”¾ä¸€é¢—çƒã€‚æ¯é¢—çƒéƒ½å¯èƒ½å¡åœ¨ç®±å­é‡Œæˆ–ä»åº•éƒ¨æ‰å‡ºæ¥ã€‚å¦‚æœçƒæ°å¥½å¡åœ¨ä¸¤å—æŒ¡æ¿ä¹‹é—´çš„ â€œVâ€ å½¢å›¾æ¡ˆï¼Œæˆ–è€…è¢«ä¸€å—æŒ¡å¯¼å‘åˆ°ç®±å­çš„ä»»æ„ä¸€ä¾§è¾¹ä¸Šï¼Œå°±ä¼šå¡ä½ã€‚</p><p>è¿”å›ä¸€ä¸ªå¤§å°ä¸º n çš„æ•°ç»„ answer ï¼Œå…¶ä¸­ answer[i] æ˜¯çƒæ”¾åœ¨é¡¶éƒ¨çš„ç¬¬ i åˆ—åä»åº•éƒ¨æ‰å‡ºæ¥çš„é‚£ä¸€åˆ—å¯¹åº”çš„ä¸‹æ ‡ï¼Œå¦‚æœçƒå¡åœ¨ç›’å­é‡Œï¼Œåˆ™è¿”å› -1 ã€‚</p><h1>åˆ†æç†è§£</h1><p>ç»™äº†ä¸€ä¸ªçŸ©é˜µï¼ŒçŸ©é˜µä¸­æ¯ä¸ªå…ƒç´ è¦ä¹ˆä¸º1è¦ä¹ˆä¸º-1ï¼Œä¸º1ä»£è¡¨æŒ¡æ¿è¿æ¥å·¦ä¸Šè§’å’Œå³ä¸‹è§’ï¼›ä¸º-1ä»£è¡¨æŒ¡æ¿è¿æ¥å³ä¸Šè§’å’Œå·¦ä¸‹è§’ã€‚ç„¶åä»æœ€ä¸Šå±‚å‡ºå‘çš„æ¯ä¸ªå°çƒæœ€ç»ˆè½ç‚¹çš„ä½ç½®ï¼Œä½¿ç”¨ä¸‹æ ‡è¡¨ç¤ºï¼Œå…¶ä¸­å¦‚æœå°çƒä¸èƒ½è¾¾åˆ°åº•éƒ¨å°±è¿”å›-1ã€‚</p><h1>åŸºæœ¬æ€è·¯</h1><p>çœ‹åˆ°é¢˜ç›®æ˜¯ä¸€è„¸æ‡µé€¼ï¼Œç›´æ¥çœ‹çµèŒ¶å±±è‰¾åºœçš„è§£é¢˜æ€è·¯ï¼Œä¸€çœ‹å¤§å®¶åŸºæœ¬ä¸Šéƒ½æ˜¯çµèŒ¶å±±è‰¾åºœçš„æ€è·¯ï¼ˆdogeï¼‰ã€‚</p><p>ä»–çš„æ€è·¯æ˜¯ï¼Œä»åˆ—å¼€å§‹éå†ï¼Œä¸€åˆ—ä¸€åˆ—åœ°éå†ã€‚è€Œåœ¨å¯¹æ¯åˆ—çš„éå†ä¸­ï¼Œè¿›è¡Œé€è¡Œéå†ã€‚å¼€å§‹è¡Œéå†ä¹‹å‰ï¼Œè®°å½•ä¸‹å½“å‰éå†çš„åˆ—å·ï¼Œç„¶åè¿›å…¥è¡Œéå†ï¼Œåœ¨åˆ—å·ä¸ŠåŠ ä¸Šå½“å‰ä½ç½®æ‰€å¯¹åº”ä½ç½®çš„å€¼ï¼Œç›¸å½“äºå·¦å³ç§»åŠ¨ã€‚ç„¶åæ¯æ¬¡è®°å½•è¿›è¡ŒåŠ æ³•åçš„åˆ—å·æ˜¯å¦å°äº0æˆ–è€…å¤§äºåˆ—å°ºå¯¸æœ€å¤§å€¼ï¼ˆæ­¤æ—¶å‡ºç•Œï¼Œå¯¹åº”äºå¡åœ¨è¾¹ç•Œï¼‰ï¼Œæ˜¯å¦æ­¤æ—¶çš„åˆ—å·æ‰€å¯¹åº”çš„çŸ©é˜µå…ƒç´ å€¼æ˜¯å¦ä¸ä¸Šä¸€æ¬¡åˆ—å·æ‰€å¯¹åº”çš„çŸ©é˜µå…ƒç´ å€¼ç›¸ç­‰ï¼ˆæ­¤æ—¶å¦‚æœä¸ç›¸ç­‰ï¼Œåˆ™å½¢æˆäº†â€œVâ€å½¢ï¼‰ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">findBall</span><span class="params">(vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&amp; grid)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = grid[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">res</span><span class="params">(n)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; ++j) &#123;</span><br><span class="line">            <span class="type">int</span> cur = j;</span><br><span class="line">            <span class="keyword">for</span> (vector&lt;<span class="type">int</span>&gt; &amp;row: grid) &#123;</span><br><span class="line">                <span class="type">int</span> d = row[cur];</span><br><span class="line">                cur += d;</span><br><span class="line">                <span class="keyword">if</span> (cur &lt; <span class="number">0</span> || cur &gt;= n || row[cur] != d) &#123;</span><br><span class="line">                    cur = <span class="number">-1</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            res[j] = cur;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Note: The returned array must be malloced, assume caller calls free().</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">int</span>* <span class="title function_">findBall</span><span class="params">(<span class="type">int</span>** grid, <span class="type">int</span> gridSize, <span class="type">int</span>* gridColSize, <span class="type">int</span>* returnSize)</span></span><br><span class="line">&#123;</span><br><span class="line">    *returnSize = *gridColSize;</span><br><span class="line">    <span class="type">int</span>* res = (<span class="type">int</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">int</span>) * (*returnSize));</span><br><span class="line">    <span class="type">int</span>* p = res;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; *gridColSize; ++j) &#123;</span><br><span class="line">        <span class="type">int</span> cur = j;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; gridSize; ++i) &#123;</span><br><span class="line">            <span class="type">int</span> d = grid[i][cur];</span><br><span class="line">            cur += d;</span><br><span class="line">            <span class="keyword">if</span> (cur &lt; <span class="number">0</span> || cur &gt;= *gridColSize || grid[i][cur] != d) &#123;</span><br><span class="line">                cur = <span class="number">-1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        *p = cur;</span><br><span class="line">        ++p;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>å¤æ‚åº¦</h1><p>æ—¶é—´å¤æ‚åº¦ä¸ºO(<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>n</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">n^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">n</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>)ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šæ—¥çš„Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º&lt;a href=&quot;https://leetcode.cn/problems/where-will-the-ball-fall/description/&quot;&gt;1706. çƒä¼šè½ä½•å¤„&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç”¨ä¸€ä¸ªå¤§å°ä¸º m x n çš„äºŒç»´ç½‘æ ¼ g</summary>
      
    
    
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/categories/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/tags/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    <category term="æ•°ç»„" scheme="http://malone-ai.github.io/tags/%E6%95%B0%E7%BB%84/"/>
    
    <category term="çŸ©é˜µ" scheme="http://malone-ai.github.io/tags/%E7%9F%A9%E9%98%B5/"/>
    
    <category term="æ¨¡æ‹Ÿ" scheme="http://malone-ai.github.io/tags/%E6%A8%A1%E6%8B%9F/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode æ¯æ—¥ä¸€é¢˜åäº”ï¼š1552. ä¸¤çƒä¹‹é—´çš„ç£åŠ›</title>
    <link href="http://malone-ai.github.io/2025/02/14/leetcode15/"/>
    <id>http://malone-ai.github.io/2025/02/14/leetcode15/</id>
    <published>2025-02-14T10:34:12.000Z</published>
    <updated>2025-02-15T14:13:59.971Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šæ—¥Leetcode æ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/magnetic-force-between-two-balls/description/">1552. ä¸¤çƒä¹‹é—´çš„ç£åŠ›</a>ï¼š</p><p>åœ¨ä»£å·ä¸º C-137 çš„åœ°çƒä¸Šï¼ŒRick å‘ç°å¦‚æœä»–å°†ä¸¤ä¸ªçƒæ”¾åœ¨ä»–æ–°å‘æ˜çš„ç¯®å­é‡Œï¼Œå®ƒä»¬ä¹‹é—´ä¼šå½¢æˆç‰¹æ®Šå½¢å¼çš„ç£åŠ›ã€‚Rick æœ‰ n ä¸ªç©ºçš„ç¯®å­ï¼Œç¬¬ i ä¸ªç¯®å­çš„ä½ç½®åœ¨ position[i] ï¼ŒMorty æƒ³æŠŠ m ä¸ªçƒæ”¾åˆ°è¿™äº›ç¯®å­é‡Œï¼Œä½¿å¾—ä»»æ„ä¸¤çƒé—´ æœ€å°ç£åŠ› æœ€å¤§ã€‚</p><p>å·²çŸ¥ä¸¤ä¸ªçƒå¦‚æœåˆ†åˆ«ä½äº x å’Œ y ï¼Œé‚£ä¹ˆå®ƒä»¬ä¹‹é—´çš„ç£åŠ›ä¸º |x - y| ã€‚</p><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ position å’Œä¸€ä¸ªæ•´æ•° m ï¼Œè¯·ä½ è¿”å›æœ€å¤§åŒ–çš„æœ€å°ç£åŠ›ã€‚</p><h1>åˆ†æç†è§£</h1><p>positionæ•°ç»„çš„æ¯ä¸ªå…ƒç´ position[i]ä»£è¡¨ä¸€ä¸ªä½ç½®ï¼Œç„¶åä»ä¸­æŒ‘é€‰å‡ºmä¸ªä½ç½®ï¼Œæ±‚å¾—è¿™mä¸ªä½ç½®ä¹‹é—´çš„è·ç¦»çš„ç»å¯¹å€¼ï¼ˆè¿™ä¸ªç»å¯¹å€¼å³ç£åŠ›å€¼ï¼‰ä¸­çš„æœ€å°å€¼ï¼Œå¹¶ä¸”è¿˜è¦ä½¿è¿™ä¸ªæœ€å°å€¼æœ€å¤§ã€‚</p><h1>åŸºæœ¬æ€è·¯</h1><p>è¿™é“é¢˜å‘ˆç°å‡ºæ˜æ˜¾çš„<code>å•è°ƒæ€§</code>ï¼š</p><ul><li>å¦‚æœæˆ‘ä»¬èƒ½æ‰¾åˆ°ä¸€ä¸ªç£åŠ›å€¼dï¼Œä½¿å¾—å¯ä»¥æ”¾ç½®mä¸ªçƒï¼Œé‚£ä¹ˆæ‰€æœ‰æ¯”då°çš„å€¼ä¹Ÿä¸€å®šå¯ä»¥æ»¡è¶³æ¡ä»¶ã€‚å› ä¸ºå¦‚æœdå¯ä»¥ï¼Œé‚£ä¹ˆæ›´å°çš„dæ›´å®¹æ˜“æ»¡è¶³ã€‚</li><li>å¦‚æœdä¸èƒ½æ»¡è¶³æ¡ä»¶ï¼Œé‚£ä¹ˆæ‰€æœ‰æ¯”då¤§çš„å€¼ä¹Ÿä¸€å®šä¸èƒ½æ»¡è¶³æ¡ä»¶ã€‚å› ä¸ºå¦‚æœdä¸å¯ä»¥ï¼Œé‚£ä¹ˆæ›´å¤§çš„å€¼åªä¼šæ›´éš¾æ»¡è¶³ã€‚</li></ul><p>å› æ­¤æ­¤é¢˜ç›®æœ‰æ˜æ˜¾çš„å•è°ƒæ€§ï¼Œè€ƒè™‘<code>äºŒåˆ†æŸ¥æ‰¾</code>ã€‚ä½¿ç”¨äºŒåˆ†æ³•éå†dçš„å¯èƒ½å€¼ï¼Œå¹¶ä¸”ä¸æ–­æ£€æŸ¥å½“å‰çš„då€¼æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œæ»¡è¶³å°±å°è¯•æ›´å¤§çš„dï¼Œä¸æ»¡è¶³å°±å°è¯•æ›´å°çš„då€¼ã€‚dçš„éå†åŒºé—´ä¸ºpositionä¸­çš„ä¸¤ä¸¤å…ƒç´ ä¹‹é—´çš„æœ€å°å€¼mä¸æœ€å¤§å€¼Mç»„æˆçš„åŒºé—´[m, M]ã€‚positionæ•°ç»„æ˜¯æœªç»æ’åºçš„ï¼Œç»è¿‡æ’åºåå¾ˆå®¹æ˜“æ±‚å¾—Mä¸ºæœ€åä¸€ä¸ªå…ƒç´ å‡å»ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œè€Œmä¸å®¹æ˜“æ±‚å¾—ã€‚ä½†æ˜¯æˆ‘ä»¬æ³¨æ„åˆ°æœ‰æ¡ä»¶1â‰¤position[i]â‰¤10^9ï¼Œå› æ­¤å¯ä»¥å¾—åˆ°mçš„ä¸‹ç•Œä¸º1ã€‚</p><p>ç°åœ¨åªéœ€è¦ç¡®å®šæ£€æŸ¥å½“å‰då€¼æ˜¯å¦æ»¡è¶³æ¡ä»¶çš„é€»è¾‘å°±å¯ä»¥äº†ã€‚åŸºæœ¬æƒ³æ³•æ˜¯è®¾ç½®ä¸€ä¸ªpreä»£è¡¨ä¸Šä¸€ä¸ªæ”¾å°çƒçš„ä½ç½®ï¼Œåˆå§‹åŒ–ä¸ºposition[0]ï¼Œå¹¶è®¾å®šä¸€ä¸ªè®¡æ•°å™¨count=1ï¼Œç„¶åä»position[1]å¼€å§‹é€æ¸å‘åéå†ï¼Œæ¯å½“position[i]-preçš„å€¼â‰¥dæ—¶ï¼Œå°±ä½¿è®¡æ•°å™¨è‡ªå¢ï¼Œå¹¶ä¿®æ­£preä¸ºposition[i]å³å¯</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxDistance</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; position, <span class="type">int</span> m)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = position.<span class="built_in">size</span>();</span><br><span class="line">        <span class="built_in">sort</span>(position.<span class="built_in">begin</span>(), position.<span class="built_in">end</span>());</span><br><span class="line">        <span class="type">int</span> left = <span class="number">1</span>, right = position.<span class="built_in">back</span>() - position[<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">            <span class="type">int</span> mid = (left + right) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">check</span>(mid, position, m)) &#123;</span><br><span class="line">                left = mid + <span class="number">1</span>;</span><br><span class="line">                res = mid;</span><br><span class="line">            &#125;<span class="keyword">else</span></span><br><span class="line">                right = mid - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> right;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(<span class="type">int</span> d, <span class="type">const</span> vector&lt;<span class="type">int</span>&gt;&amp; pos, <span class="type">int</span> m)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="type">int</span> count = <span class="number">1</span>; <span class="comment">// ç¬¬ä¸€ä¸ªçƒå·²æ”¾ç½®</span></span><br><span class="line">        <span class="type">int</span> prev = pos[<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> n = pos.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (pos[i] - prev &gt;= d) &#123;</span><br><span class="line">                ++count;</span><br><span class="line">                prev = pos[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count &gt;= m ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// typedef enum &#123;</span></span><br><span class="line"><span class="comment">//     false, </span></span><br><span class="line"><span class="comment">//     true</span></span><br><span class="line"><span class="comment">// &#125;bool;</span></span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="title function_">check</span><span class="params">(<span class="type">int</span> d, <span class="type">int</span> *pos, <span class="type">int</span> n, <span class="type">int</span> m)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> count = <span class="number">1</span>; <span class="comment">// ç¬¬ä¸€ä¸ªçƒå·²æ”¾ç½®</span></span><br><span class="line">    <span class="type">int</span> pre = pos[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (pos[i] - pre &gt;= d) &#123;</span><br><span class="line">            ++count;</span><br><span class="line">            pre = pos[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count &gt;= m ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">cmpFunc</span><span class="params">(<span class="type">const</span> <span class="type">void</span> *a, <span class="type">const</span> <span class="type">void</span> *b)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> *(<span class="type">int</span> *)a - *(<span class="type">int</span> *)b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">maxDistance</span><span class="params">(<span class="type">int</span>* pos, <span class="type">int</span> n, <span class="type">int</span> m)</span></span><br><span class="line">&#123;</span><br><span class="line">    qsort(pos, n, <span class="keyword">sizeof</span>(*pos), cmpFunc);</span><br><span class="line">    <span class="type">int</span> left = <span class="number">1</span>, right = pos[n<span class="number">-1</span>] - pos[<span class="number">0</span>];</span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">        <span class="type">int</span> mid = (left + right) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (check(mid, pos, n, m)) &#123;</span><br><span class="line">            res = mid;</span><br><span class="line">            left = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span></span><br><span class="line">            right = mid - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>å¤æ‚åº¦åˆ†æ</h1><h1>æ—¶é—´å¤æ‚åº¦</h1><p>é¦–å…ˆå¿«æ’çš„å¤æ‚åº¦ä¸ºO(n log n)ï¼Œç„¶åäºŒåˆ†æŸ¥æ‰¾çš„å¤æ‚åº¦ä¸ºO(log M)ï¼ˆMä¸ºpositionæ•°ç»„ä¸­ä»»æ„ä¸¤ä¸¤å…ƒç´ å·®çš„ç»å¯¹å€¼ä¸­çš„æœ€å¤§å€¼ï¼Œcheckå‡½æ•°çš„å¤æ‚åº¦ä¸ºO(n)ï¼Œæ€»ä½“å¤æ‚åº¦ä¸ºO(n log n + n log M)ã€‚</p><h1>ç©ºé—´å¤æ‚åº¦</h1><p>ä½¿ç”¨å¸¸æ•°ä¸ªå˜é‡ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(1)ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šæ—¥Leetcode æ¯æ—¥ä¸€é¢˜ä¸º&lt;a href=&quot;https://leetcode.cn/problems/magnetic-force-between-two-balls/description/&quot;&gt;1552. ä¸¤çƒä¹‹é—´çš„ç£åŠ›&lt;/a&gt;ï¼š&lt;/p&gt;
&lt;p&gt;åœ¨ä»£å·ä¸º C-137</summary>
      
    
    
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/categories/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/tags/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    <category term="äºŒåˆ†æŸ¥æ‰¾" scheme="http://malone-ai.github.io/tags/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode æ¯æ—¥ä¸€é¢˜åå››ï¼š1742. ç›’å­ä¸­å°çƒçš„æœ€å¤§æ•°é‡</title>
    <link href="http://malone-ai.github.io/2025/02/13/leetcode14/"/>
    <id>http://malone-ai.github.io/2025/02/13/leetcode14/</id>
    <published>2025-02-13T10:31:36.000Z</published>
    <updated>2025-02-15T14:14:07.531Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šæ—¥çš„Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º<a href="https://leetcode.cn/problems/maximum-number-of-balls-in-a-box/description/">1742. ç›’å­ä¸­å°çƒçš„æœ€å¤§æ•°é‡</a>ã€‚</p><p>ä½ åœ¨ä¸€å®¶ç”Ÿäº§å°çƒçš„ç©å…·å‚å·¥ä½œï¼Œæœ‰ n ä¸ªå°çƒï¼Œç¼–å·ä» lowLimit å¼€å§‹ï¼Œåˆ° highLimit ç»“æŸï¼ˆåŒ…æ‹¬ lowLimit å’Œ highLimit ï¼Œå³ n == highLimit - lowLimit + 1ï¼‰ã€‚å¦æœ‰æ— é™æ•°é‡çš„ç›’å­ï¼Œç¼–å·ä» 1 åˆ° infinity ã€‚</p><p>ä½ çš„å·¥ä½œæ˜¯å°†æ¯ä¸ªå°çƒæ”¾å…¥ç›’å­ä¸­ï¼Œå…¶ä¸­ç›’å­çš„ç¼–å·åº”å½“ç­‰äºå°çƒç¼–å·ä¸Šæ¯ä½æ•°å­—çš„å’Œã€‚ä¾‹å¦‚ï¼Œç¼–å· 321 çš„å°çƒåº”å½“æ”¾å…¥ç¼–å· 3 + 2 + 1 = 6 çš„ç›’å­ï¼Œè€Œç¼–å· 10 çš„å°çƒåº”å½“æ”¾å…¥ç¼–å· 1 + 0 = 1 çš„ç›’å­ã€‚</p><p>ç»™ä½ ä¸¤ä¸ªæ•´æ•° lowLimit å’Œ highLimit ï¼Œè¿”å›æ”¾æœ‰æœ€å¤šå°çƒçš„ç›’å­ä¸­çš„å°çƒæ•°é‡ã€‚å¦‚æœæœ‰å¤šä¸ªç›’å­éƒ½æ»¡è¶³æ”¾æœ‰æœ€å¤šå°çƒï¼Œåªéœ€è¿”å›å…¶ä¸­ä»»ä¸€ç›’å­çš„å°çƒæ•°é‡ã€‚</p><h1>æ€è·¯åˆ†æ</h1><p>éå†[lowLimit, highLimit]ï¼Œå¹¶ä¸”è®¡ç®—æ¯ä½æ•°å­—ä¹‹å’Œï¼Œç„¶åè®°å½•åˆ°å“ˆå¸Œè¡¨ä¸­ï¼Œè¿”å›æœ€å¤§çš„ä¸€ä¸ªï¼Œè¿™æ˜¯æˆ‘çš„ç¬¬ä¸€æƒ³æ³•ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">countBalls</span><span class="params">(<span class="type">int</span> lowLimit, <span class="type">int</span> highLimit)</span> </span>&#123;</span><br><span class="line">        unordered_map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; hash;</span><br><span class="line">        <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = lowLimit; i &lt;= highLimit; ++i) &#123;</span><br><span class="line">            <span class="type">int</span> cur = <span class="built_in">bitSum</span>(i);</span><br><span class="line">            hash[cur]++;</span><br><span class="line">            <span class="keyword">if</span> (hash[cur] &gt; res)</span><br><span class="line">                res = hash[cur];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">bitSum</span><span class="params">(<span class="type">int</span> num)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (num != <span class="number">0</span>) &#123;</span><br><span class="line">            res += num % <span class="number">10</span>;</span><br><span class="line">            num /= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>çµèŒ¶å±±è‰¾åºœçš„è§£æ³•</h1><p>ä¸‹åˆçš„æ—¶å€™çœ‹è§äº†çµç¥å†™çš„é¢˜è§£ï¼Œçµç¥å°±æ˜¯çµç¥ï¼Œç›´æ¥ç»™å‡ºäº†ä¸‰ç§æ–¹æ³•ï¼š</p><ol><li>æš´åŠ›æšä¸¾</li><li>å‰ç¼€å’Œ</li><li>æ•°ä½DP</li></ol><h2 id="æš´åŠ›æšä¸¾">æš´åŠ›æšä¸¾</h2><p>æš´åŠ›æšä¸¾çš„æ€è·¯å’Œæˆ‘ç›¸åŒï¼Œä½†çµç¥æ›´ç‰›çš„æ˜¯ä½¿ç”¨äº†ä¸€ä¸ªæ•°ç»„æ¥å­˜å‚¨å„ä¸ªæ•°ä½å’Œçš„ä¸ªæ•°ï¼Œä»–æ³¨æ„åˆ°äº†æ¡ä»¶1 &lt;= lowLimit &lt;= highLimit &lt;= <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>5</mn></msup></mrow><annotation encoding="application/x-tex">10^5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">1</span><span class="mord"><span class="mord mathrm">0</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">5</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ï¼Œæ•°ä½å’Œæœ€å¤§å€¼ä¸ºæ•°å­—99999è®¡ç®—æ‰€å¾—çš„45ï¼Œæœ€å°ä¸º1ï¼Œç›´æ¥ç”¨ç»„å­˜å‚¨ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">countBalls</span><span class="params">(<span class="type">int</span> lowLimit, <span class="type">int</span> highLimit)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> cnt[<span class="number">46</span>]&#123;&#125;; <span class="comment">// 99999 çš„æ•°ä½å’Œ = 45</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = lowLimit; i &lt;= highLimit; i++) &#123;</span><br><span class="line">            <span class="type">int</span> s = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> x = i; x &gt; <span class="number">0</span>; x /= <span class="number">10</span>) &#123;</span><br><span class="line">                s += x % <span class="number">10</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            cnt[s]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ranges::<span class="built_in">max</span>(cnt);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ä½œè€…ï¼šçµèŒ¶å±±è‰¾åºœ</span><br><span class="line">é“¾æ¥ï¼šhttps:<span class="comment">//leetcode.cn/problems/maximum-number-of-balls-in-a-box/solutions/3073112/san-chong-fang-fa-bao-li-mei-ju-qian-zhu-kze9/</span></span><br><span class="line">æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰</span><br><span class="line">è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</span><br></pre></td></tr></table></figure><h2 id="å‰ç¼€å’Œ">å‰ç¼€å’Œ</h2><h2 id="æ•°ä½DP">æ•°ä½DP</h2>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šæ—¥çš„Leetcodeæ¯æ—¥ä¸€é¢˜ä¸º&lt;a href=&quot;https://leetcode.cn/problems/maximum-number-of-balls-in-a-box/description/&quot;&gt;1742. ç›’å­ä¸­å°çƒçš„æœ€å¤§æ•°é‡&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä½ åœ¨ä¸€å®¶ç”Ÿäº§å°</summary>
      
    
    
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/categories/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    
    <category term="åŠ¨æ€è§„åˆ’" scheme="http://malone-ai.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
    <category term="å“ˆå¸Œè¡¨" scheme="http://malone-ai.github.io/tags/%E5%93%88%E5%B8%8C%E8%A1%A8/"/>
    
    <category term="Leetcode æ¯æ—¥ä¸€é¢˜" scheme="http://malone-ai.github.io/tags/Leetcode-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    
    <category term="æš´åŠ›" scheme="http://malone-ai.github.io/tags/%E6%9A%B4%E5%8A%9B/"/>
    
    <category term="æšä¸¾" scheme="http://malone-ai.github.io/tags/%E6%9E%9A%E4%B8%BE/"/>
    
    <category term="è®°å¿†åŒ–æœç´¢" scheme="http://malone-ai.github.io/tags/%E8%AE%B0%E5%BF%86%E5%8C%96%E6%90%9C%E7%B4%A2/"/>
    
    <category term="å‰ç¼€å’Œ" scheme="http://malone-ai.github.io/tags/%E5%89%8D%E7%BC%80%E5%92%8C/"/>
    
  </entry>
  
</feed>
