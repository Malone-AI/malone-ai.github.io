<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>YOLO</title>
  
  
  <link href="http://malone-ai.github.io/atom.xml" rel="self"/>
  
  <link href="http://malone-ai.github.io/"/>
  <updated>2025-04-09T15:53:50.878Z</updated>
  <id>http://malone-ai.github.io/</id>
  
  <author>
    <name>Malone</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>çº¢é»‘æ ‘å³æ—‹</title>
    <link href="http://malone-ai.github.io/2025/04/09/red-black-tree3/"/>
    <id>http://malone-ai.github.io/2025/04/09/red-black-tree3/</id>
    <published>2025-04-09T15:19:27.000Z</published>
    <updated>2025-04-09T15:53:50.878Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©ç»§ç»­å­¦ä¹ çº¢é»‘æ ‘ã€‚</p><p>å¦‚æœ‰é”™è¯¯æœ›å¤§å®¶æŒ‡æ­£ğŸ§ã€‚</p><hr><p>çº¢é»‘æ ‘æœ‰å‡ ä¸ª<strong>å…³é”®æ€§è´¨</strong>ï¼š</p><ol><li>æ¯ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²æˆ–é»‘è‰²ï¼›</li><li>æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²ï¼›</li><li>å¶å­èŠ‚ç‚¹ï¼ˆNILï¼‰æ˜¯é»‘è‰²ï¼›</li><li>çº¢è‰²èŠ‚ç‚¹çš„å­èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²ï¼›</li><li>ä»ä»»ä¸€èŠ‚ç‚¹åˆ°å…¶æ‰€æœ‰å¶å­èŠ‚ç‚¹çš„è·¯å¾„åŒ…å«ç›¸åŒæ•°é‡çš„é»‘è‰²èŠ‚ç‚¹ã€‚</li></ol><p>è¿™äº›æ€§è´¨ä¿è¯äº†çº¢é»‘æ ‘çš„å¹³è¡¡æ€§ï¼Œè¿™äº›æ€§è´¨å¾ˆé‡è¦ï¼Œæ¯å›éƒ½æ¥é‡æ¸©ä¸€ä¸‹ã€‚</p><hr><p>ä¸Šå›å·²ç»å­¦ä¹ äº†çº¢é»‘æ ‘çš„å·¦æ—‹æ“ä½œï¼Œè¿™å›æ¥å­¦ä¹ çº¢é»‘æ ‘çš„å³æ—‹æ“ä½œã€‚å³æ—‹æ“ä½œå…¶å®ä¸å·¦æ—‹æ“ä½œæ˜¯å¯¹ç§°ï¼Œæ ¹æœ¬ä¸éœ€è¦è®²ã€‚ä½†æ˜¯è¿™ç§æ°´æ–‡ç« çš„å¤§å¥½æœºä¼šæˆ‘æ€ä¹ˆèƒ½è½»æ˜“æ”¾è¿‡ï¼Ÿ</p><hr><p>æœ¬å›ä¸»è¦å…³æ³¨<strong>å³æ—‹</strong>æ“ä½œã€‚</p><p>å³æ—‹çš„ç›®çš„æ˜¯<strong>å°†èŠ‚ç‚¹ y ä¸å…¶å·¦å­èŠ‚ç‚¹ x çš„ä½ç½®è¿›è¡Œæ—‹è½¬ï¼Œä½¿ x æˆä¸ºæ–°çš„çˆ¶èŠ‚ç‚¹ï¼Œy æˆä¸º x çš„å³å­èŠ‚ç‚¹</strong>ã€‚</p><p>ä¼ªä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">RIGHT-ROTATE(T, x)</span><br><span class="line">    y = x.left              // å°†xçš„å·¦å­©å­ä¿å­˜ä¸ºy</span><br><span class="line">    x.left = y.right        // å°†yçš„å³å­©å­è®¾ä¸ºxçš„æ–°å·¦å­©å­</span><br><span class="line">    <span class="keyword">if</span> y.right != T.nil     // å¦‚æœyçš„å³å­©å­å­˜åœ¨</span><br><span class="line">        y.right.p = x       // æ›´æ–°è¯¥å³å­©å­çš„çˆ¶æŒ‡é’ˆæŒ‡å‘x</span><br><span class="line">    y.p = x.p               // å°†yçš„çˆ¶æŒ‡é’ˆè®¾ä¸ºxçš„çˆ¶èŠ‚ç‚¹ï¼Œyå–ä»£xçš„ä½ç½®</span><br><span class="line">    <span class="keyword">if</span> x.p == T.nil         // å¦‚æœxæ˜¯æ ¹èŠ‚ç‚¹</span><br><span class="line">        T.root = y          // æ›´æ–°æ ¹èŠ‚ç‚¹ä¸ºy</span><br><span class="line">    <span class="keyword">elif</span> x == x.p.left      // å¦‚æœxæ˜¯å…¶çˆ¶èŠ‚ç‚¹çš„å·¦å­©å­</span><br><span class="line">        x.p.left = y        // çˆ¶èŠ‚ç‚¹çš„å·¦å­©å­æŒ‡å‘y</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        x.p.right = y       // çˆ¶èŠ‚ç‚¹çš„å³å­©å­æŒ‡å‘y</span><br><span class="line">    y.right = x             // å°†yçš„å³å­©å­è®¾ä¸ºx</span><br><span class="line">    x.p = y                 // æ›´æ–°xçš„çˆ¶èŠ‚ç‚¹ä¸ºy</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šå¤©ç»§ç»­å­¦ä¹ çº¢é»‘æ ‘ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœ‰é”™è¯¯æœ›å¤§å®¶æŒ‡æ­£ğŸ§ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;çº¢é»‘æ ‘æœ‰å‡ ä¸ª&lt;strong&gt;å…³é”®æ€§è´¨&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ¯ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²æˆ–é»‘è‰²ï¼›&lt;/li&gt;
&lt;li&gt;æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²ï¼›&lt;/li&gt;
&lt;li&gt;å¶å­èŠ‚ç‚¹ï¼ˆNILï¼‰æ˜¯é»‘è‰²ï¼›&lt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>çº¢é»‘æ ‘çš„å·¦æ—‹</title>
    <link href="http://malone-ai.github.io/2025/04/08/red-black-tree2/"/>
    <id>http://malone-ai.github.io/2025/04/08/red-black-tree2/</id>
    <published>2025-04-08T15:21:30.000Z</published>
    <updated>2025-04-09T15:42:42.960Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©ç»§ç»­å­¦ä¹ çº¢é»‘æ ‘ã€‚</p><p>å¦‚æœ‰é”™è¯¯æœ›å¤§å®¶æŒ‡æ­£ğŸ§ã€‚</p><hr><p>ä¸Šå›è¯´åˆ°çº¢é»‘æ ‘æœ‰å‡ ä¸ª<strong>å…³é”®æ€§è´¨</strong>ï¼š</p><ol><li>æ¯ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²æˆ–é»‘è‰²ï¼›</li><li>æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²ï¼›</li><li>å¶å­èŠ‚ç‚¹ï¼ˆNILï¼‰æ˜¯é»‘è‰²ï¼›</li><li>çº¢è‰²èŠ‚ç‚¹çš„å­èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²ï¼›</li><li>ä»ä»»ä¸€èŠ‚ç‚¹åˆ°å…¶æ‰€æœ‰å¶å­èŠ‚ç‚¹çš„è·¯å¾„åŒ…å«ç›¸åŒæ•°é‡çš„é»‘è‰²èŠ‚ç‚¹ã€‚</li></ol><p>è¿™äº›æ€§è´¨ä¿è¯äº†çº¢é»‘æ ‘çš„å¹³è¡¡æ€§ã€‚</p><p>å¹¶ä¸”è¯´åˆ°äº†ä¸€ä¸ªå…·æœ‰nä¸ªå†…éƒ¨èŠ‚ç‚¹çš„çº¢é»‘æ ‘çš„é«˜åº¦hâ‰¤2log(n + 1)ï¼Œä¹Ÿå°±æ˜¯O(log n)ã€‚å› æ­¤çº¢é»‘æ ‘çš„æ’å…¥å’Œåˆ é™¤éƒ½å¯ä»¥åœ¨O(log n)çš„æ—¶é—´å†…å®Œæˆã€‚</p><p>ä½†æ˜¯æ’å…¥å’Œåˆ é™¤æ“ä½œå¿…ç„¶ä¼šç ´åçº¢é»‘æ ‘çš„ç»“æ„ï¼Œä½¿å…¶ä¸æ»¡è¶³ä¸Šè¿°5æ¡æ€§è´¨ã€‚</p><p>ä¸ºäº†ç»´æŠ¤è¿™äº›æ€§è´¨ï¼Œå°±éœ€è¦ä¿®æ”¹çº¢é»‘æ ‘ä¸­æŸäº›èŠ‚ç‚¹çš„é¢œè‰²ä»¥åŠæŒ‡é’ˆçš„ç»“æ„ã€‚</p><p>å…¶ä¸­ï¼ŒæŒ‡é’ˆç»“æ„çš„ä¿®æ”¹æ¶‰åŠåˆ°ä¸¤ç§æ“ä½œï¼š<strong>å·¦æ—‹</strong>å’Œ<strong>å³æ—‹</strong>ã€‚</p><hr><p>æœ¬å›ä¸»è¦å…³æ³¨<strong>å·¦æ—‹</strong>æ“ä½œã€‚</p><p>å·¦æ—‹çš„ç›®çš„æ˜¯<strong>å°†èŠ‚ç‚¹ x ä¸å…¶å³å­èŠ‚ç‚¹ y çš„ä½ç½®è¿›è¡Œæ—‹è½¬ï¼Œä½¿ y æˆä¸ºæ–°çš„çˆ¶èŠ‚ç‚¹ï¼Œx æˆä¸º y çš„å·¦å­èŠ‚ç‚¹</strong>ã€‚</p><p>ä¼ªä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">LEFT-ROTATE(T, x)</span><br><span class="line">    y = x.right             // å°†xçš„å³å­©å­ä¿å­˜ä¸ºy</span><br><span class="line">    x.right = y.left        // å°†yçš„å·¦å­©å­è®¾ä¸ºxçš„æ–°å³å­©å­ã€‚è¿™æ­¥å°†yåŸæ¥çš„å·¦å­æ ‘è½¬ç§»åˆ°xçš„å³è¾¹ã€‚</span><br><span class="line">    <span class="keyword">if</span> y.left != T.nil      // å¦‚æœyçš„å·¦å­©å­ä¸æ˜¯T.nil</span><br><span class="line">        y.left.p = x        // æ›´æ–°è¿™ä¸ªå·¦å­©å­çš„çˆ¶æŒ‡é’ˆæŒ‡å‘x</span><br><span class="line">    y.p = x.p               // æ›´æ–°yçš„çˆ¶æŒ‡é’ˆä¸ºxçš„çˆ¶æŒ‡é’ˆï¼Œå³yç°åœ¨è¦å–ä»£xçš„ä½ç½®</span><br><span class="line">    <span class="keyword">if</span> x.p == T.nil         // å¦‚æœxçš„çˆ¶èŠ‚ç‚¹æ˜¯nilï¼Œè¯´æ˜xæ˜¯æ ¹èŠ‚ç‚¹</span><br><span class="line">        T.root = y          // æ‰€ä»¥æ—‹è½¬åyæˆä¸ºæ–°çš„æ ¹</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> x == x.p.left   // åˆ¤æ–­xæ˜¯å…¶çˆ¶èŠ‚ç‚¹çš„å·¦å­©å­</span><br><span class="line">        x.p.left = y        // çˆ¶èŠ‚ç‚¹çš„å·¦å­©å­æŒ‡å‘y</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        x.p.right = y       // xæ˜¯å…¶çˆ¶èŠ‚ç‚¹çš„å³å­©å­ï¼Œçˆ¶èŠ‚ç‚¹çš„å³å­©å­æŒ‡å‘y</span><br><span class="line">    y.left = x              // yçš„å·¦å­©å­è®¾ä¸ºx</span><br><span class="line">    x.p = y                 // æ›´æ–°xçš„çˆ¶èŠ‚ç‚¹ä¸ºyã€‚è¿™ä¸€æ­¥ä¸ä¸Šä¸€æ­¥å…±åŒå®Œæˆxå’Œyä¹‹é—´çš„çˆ¶å­å…³ç³»äº¤æ¢</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šå¤©ç»§ç»­å­¦ä¹ çº¢é»‘æ ‘ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœ‰é”™è¯¯æœ›å¤§å®¶æŒ‡æ­£ğŸ§ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;ä¸Šå›è¯´åˆ°çº¢é»‘æ ‘æœ‰å‡ ä¸ª&lt;strong&gt;å…³é”®æ€§è´¨&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ¯ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²æˆ–é»‘è‰²ï¼›&lt;/li&gt;
&lt;li&gt;æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²ï¼›&lt;/li&gt;
&lt;li&gt;å¶å­èŠ‚ç‚¹ï¼ˆNILï¼‰æ˜¯</summary>
      
    
    
    
    <category term="æ•°æ®ç»“æ„" scheme="http://malone-ai.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
    <category term="çº¢é»‘æ ‘" scheme="http://malone-ai.github.io/tags/%E7%BA%A2%E9%BB%91%E6%A0%91/"/>
    
  </entry>
  
  <entry>
    <title>ä¸ºä»€ä¹ˆä¸€æ£µæœ‰nä¸ªå†…éƒ¨èŠ‚ç‚¹çš„çº¢é»‘æ ‘çš„é«˜åº¦è‡³å¤šä¸º2log(n + 1)</title>
    <link href="http://malone-ai.github.io/2025/04/07/red-black-tree1/"/>
    <id>http://malone-ai.github.io/2025/04/07/red-black-tree1/</id>
    <published>2025-04-07T04:45:31.000Z</published>
    <updated>2025-04-07T05:14:10.781Z</updated>
    
    <content type="html"><![CDATA[<p>å¥½ä¹…æ²¡æ›´æ–°åšå®¢äº†ï¼Œå¤§æ¦‚æœ‰17å¤©å·¦å³ã€‚ä»Šå¤©å°æ›´ä¸€æ³¢ã€‚</p><p>è¦è®¨è®ºçš„å†…å®¹æ˜¯<strong>ä¸ºä»€ä¹ˆä¸€æ£µæœ‰nä¸ªå†…éƒ¨èŠ‚ç‚¹çš„çº¢é»‘æ ‘çš„é«˜åº¦è‡³å¤šä¸º2log(n + 1)</strong>ï¼Ÿï¼ˆè¿™é‡Œçš„logæ˜¯ä»¥2ä¸ºåº•æ•°çš„ï¼‰ã€‚</p><p>å¦‚æœ‰é”™è¯¯æœ›å¤§å®¶æŒ‡æ­£ğŸ§ã€‚</p><hr><p>çº¢é»‘æ ‘æœ‰å‡ ä¸ª<strong>å…³é”®æ€§è´¨</strong>ï¼š</p><ol><li>æ¯ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²æˆ–é»‘è‰²ï¼›</li><li>æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²ï¼›</li><li>å¶å­èŠ‚ç‚¹ï¼ˆNILï¼‰æ˜¯é»‘è‰²ï¼›</li><li>çº¢è‰²èŠ‚ç‚¹çš„å­èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²ï¼›</li><li>ä»ä»»ä¸€èŠ‚ç‚¹åˆ°å…¶æ‰€æœ‰å¶å­èŠ‚ç‚¹çš„è·¯å¾„åŒ…å«ç›¸åŒæ•°é‡çš„é»‘è‰²èŠ‚ç‚¹ã€‚</li></ol><p>è¿™äº›æ€§è´¨ä¿è¯äº†çº¢é»‘æ ‘çš„å¹³è¡¡æ€§ã€‚</p><hr><p><strong>çº¢é»‘æ ‘çš„é«˜åº¦</strong>æŒ‡çš„æ˜¯ä»æ ¹åˆ°å¶å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„çš„<strong>è¾¹æ•°</strong>ï¼ˆæ³¨æ„ä¸æ˜¯èŠ‚ç‚¹ä¸ªæ•°ã€‚è¿™é‡Œæä¸€å˜´æ˜¯å› ä¸ºè¿™å‡ ä¸ªæœˆåˆ·leetcodeé¢˜æœ‰äº›é¢˜ç›®ä¼šä»¥èŠ‚ç‚¹ä¸ªæ•°æ¥ç®—è·¯å¾„é•¿åº¦ï¼Œæˆ‘å®¹æ˜“æ··æ·†ğŸ˜‚ï¼‰ã€‚æ ¹æ®çº¢é»‘æ ‘çš„æ€§è´¨ï¼Œç‰¹åˆ«æ˜¯ç¬¬å››æ¡å’Œç¬¬äº”æ¡ï¼Œå¯ä»¥æ¨æ–­å‡ºæ ‘çš„é«˜åº¦ä¸ä¼šå¤ªé«˜ã€‚</p><hr><p><strong>é»‘é«˜</strong>æ˜¯æŒ‡ä»èŠ‚ç‚¹å‡ºå‘åˆ°å¶å­èŠ‚ç‚¹è·¯å¾„ä¸Šçš„é»‘è‰²èŠ‚ç‚¹æ•°é‡ã€‚æ ¹æ®æ€§è´¨4ï¼ˆçº¢è‰²èŠ‚ç‚¹çš„å­èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²ï¼‰å’Œæ€§è´¨5ï¼ˆä»ä»»ä¸€èŠ‚ç‚¹åˆ°å…¶æ‰€æœ‰å¶å­èŠ‚ç‚¹çš„è·¯å¾„åŒ…å«ç›¸åŒæ•°é‡çš„é»‘è‰²èŠ‚ç‚¹ï¼‰ï¼Œçº¢é»‘æ ‘çš„é»‘é«˜è‡³å°‘æ˜¯h/2ï¼Œå…¶ä¸­hæ˜¯æ ‘çš„é«˜åº¦ã€‚ä¸€å¼€å§‹æˆ‘éå¸¸æ€€ç–‘è¿™ä¸ªç»“è®ºï¼Œå› ä¸ºå¦‚æœä¸€æ¡è·¯å¾„ä¸Šæ˜¯å…¨é»‘èŠ‚ç‚¹ï¼ˆæ ¹æ®æ€§è´¨4è¿™å®Œå…¨æˆç«‹ï¼‰å‘¢ï¼Ÿ</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™æ¡è·¯å¾„çš„é»‘é«˜ç­‰äºæ ‘çš„é«˜åº¦hï¼Œå› ä¸ºæ‰€æœ‰çš„èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²ï¼Œæ‰€ä»¥é»‘é«˜h_b = hã€‚è€Œå¯¹äºç»“è®ºçº¢é»‘æ ‘çš„é»‘é«˜è‡³å°‘æ˜¯æ ‘é«˜hçš„ä¸€åŠï¼Œå³h_b â‰¥ h/2ã€‚å¦‚æœè·¯å¾„å…¨é»‘ï¼Œé‚£ä¹ˆh_b = hï¼Œæ˜¾ç„¶æ»¡è¶³h_b â‰¥ h/2ã€‚å¦å¤–å› ä¸ºçº¢è‰²èŠ‚ç‚¹ä¸èƒ½è¿ç»­ï¼Œæ‰€ä»¥æ¯å‡ºç°ä¸€ä¸ªçº¢è‰²èŠ‚ç‚¹ï¼Œå¿…é¡»æœ‰ä¸€ä¸ªé»‘è‰²èŠ‚ç‚¹è·Ÿéšï¼Œæ‰€ä»¥æ˜¯h/2ã€‚</p><hr><p>å‡è®¾çº¢é»‘æ ‘çš„é«˜åº¦ä¸ºhï¼Œå†…éƒ¨èŠ‚ç‚¹æ•°ä¸ºnã€‚ç”±äºçº¢é»‘æ ‘çš„é»‘é«˜è‡³å°‘æ˜¯h/2ï¼Œé‚£ä¹ˆæ ¹æ®æ™®é€šäºŒå‰æœç´¢æ ‘çš„æ€§è´¨ï¼Œä»¥é»‘é«˜ä¸ºåŸºå‡†ï¼Œæœ€å°‘èŠ‚ç‚¹æ•°çš„æƒ…å†µæ˜¯å®Œå…¨äºŒå‰æ ‘ï¼Œå³n &gt;= 2^(bh) -1ï¼Œå…¶ä¸­bhæ˜¯é»‘é«˜ã€‚è¿™é‡Œbh &gt;= h/2ï¼Œæ‰€ä»¥ä»£å…¥å¾—åˆ°n &gt;= 2^(h/2) -1ï¼Œè§£è¿™ä¸ªä¸ç­‰å¼å¯ä»¥å¾—åˆ°h &lt;= 2log(n+1)ã€‚</p><p>æœ€ç»ˆå¾—åˆ°ç»“è®º<strong>ä¸€æ£µæœ‰nä¸ªå†…éƒ¨èŠ‚ç‚¹çš„çº¢é»‘æ ‘çš„é«˜åº¦è‡³å¤šä¸º2log(n + 1)</strong>ã€‚</p><hr>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å¥½ä¹…æ²¡æ›´æ–°åšå®¢äº†ï¼Œå¤§æ¦‚æœ‰17å¤©å·¦å³ã€‚ä»Šå¤©å°æ›´ä¸€æ³¢ã€‚&lt;/p&gt;
&lt;p&gt;è¦è®¨è®ºçš„å†…å®¹æ˜¯&lt;strong&gt;ä¸ºä»€ä¹ˆä¸€æ£µæœ‰nä¸ªå†…éƒ¨èŠ‚ç‚¹çš„çº¢é»‘æ ‘çš„é«˜åº¦è‡³å¤šä¸º2log(n + 1)&lt;/strong&gt;ï¼Ÿï¼ˆè¿™é‡Œçš„logæ˜¯ä»¥2ä¸ºåº•æ•°çš„ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœ‰é”™è¯¯æœ›å¤§å®¶æŒ‡æ­£ğŸ§ã€‚&lt;/p&gt;
&lt;hr&gt;
</summary>
      
    
    
    
    <category term="æ•°æ®ç»“æ„" scheme="http://malone-ai.github.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
    <category term="çº¢é»‘æ ‘" scheme="http://malone-ai.github.io/tags/%E7%BA%A2%E9%BB%91%E6%A0%91/"/>
    
  </entry>
  
  <entry>
    <title>å¤±çœ </title>
    <link href="http://malone-ai.github.io/2025/03/19/my-feelings5/"/>
    <id>http://malone-ai.github.io/2025/03/19/my-feelings5/</id>
    <published>2025-03-19T04:18:44.000Z</published>
    <updated>2025-03-19T04:25:07.286Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘å¤±çœ æ¯”è¾ƒä¸¥é‡ï¼Œæ˜¨æ™šç¡ç€æ˜¯åœ¨1ç‚¹å·¦å³ï¼Œé†’æ¥æ˜¯åœ¨5ç‚¹å·¦å³ï¼Œç„¶åèººäº†ä¸€ä¸ªå¤šå°æ—¶ï¼Œå®¿èˆå¼€ç¯äº†ï¼Œæ•²ä»£ç åˆ°å…«ç‚¹åŠå»ä¸Šæ—©å…«ã€‚ç„¶åä¸Šä½“è‚²è¯¾ï¼Œä¸€ç›´åˆ°12ç‚¹ã€‚è¿‘ä¸€ä¸ªæœˆæ—¥å‡ç¡çœ ä¸è¶³6ä¸ªå°æ—¶ï¼Œå¹¶ä¸æ˜¯ä¸æƒ³ç¡ï¼Œæ˜¯çœŸå¾—ç¡ä¸ç€QvQã€‚</p><p>æ¥ä¸‹æ¥çš„æ—¥å­æ„Ÿè§‰æœ‰ç‚¹éš¾è¿‡å‘€ï¼Œç›®å‰è®¡åˆ’ä½¿åŠ²å„¿å†™ä»£ç ï¼Œä½¿åŠ²å„¿æ”¹ç®€å†ï¼Œæ€»æœ‰å›°å¾—æ—¶å€™ï¼ˆä½†æ„¿å¦‚æ­¤ï¼‰ã€‚</p><p>æ˜¨å¤©å¼€å§‹å†³å®šæç®€å†™åšå®¢ï¼Œä¸€ä¸‹å­æ„Ÿè§‰æ•ˆç‡æé«˜äº†ä¸å°‘ã€‚é€šè¿‡gitç®¡ç†ä»£ç çš„æ–¹å¼æ¥è¿›è¡Œå¤ç›˜çš„æ–¹å¼æ•ˆç‡è¿˜æ˜¯éå¸¸å¾—å¯è§‚çš„ã€‚</p><p>å¤šåšåšé¡¹ç›®å§ï¼Œä¸‹ä¸€ä¸ªé¡¹ç›®è¯¥åšä»€ä¹ˆå‘¢ï¼Ÿ</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æœ€è¿‘å¤±çœ æ¯”è¾ƒä¸¥é‡ï¼Œæ˜¨æ™šç¡ç€æ˜¯åœ¨1ç‚¹å·¦å³ï¼Œé†’æ¥æ˜¯åœ¨5ç‚¹å·¦å³ï¼Œç„¶åèººäº†ä¸€ä¸ªå¤šå°æ—¶ï¼Œå®¿èˆå¼€ç¯äº†ï¼Œæ•²ä»£ç åˆ°å…«ç‚¹åŠå»ä¸Šæ—©å…«ã€‚ç„¶åä¸Šä½“è‚²è¯¾ï¼Œä¸€ç›´åˆ°12ç‚¹ã€‚è¿‘ä¸€ä¸ªæœˆæ—¥å‡ç¡çœ ä¸è¶³6ä¸ªå°æ—¶ï¼Œå¹¶ä¸æ˜¯ä¸æƒ³ç¡ï¼Œæ˜¯çœŸå¾—ç¡ä¸ç€QvQã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥çš„æ—¥å­æ„Ÿè§‰æœ‰ç‚¹éš¾è¿‡å‘€ï¼Œç›®å‰è®¡åˆ’ä½¿åŠ²å„¿å†™ä»£ç ï¼Œä½¿</summary>
      
    
    
    
    <category term="æ‚è°ˆ" scheme="http://malone-ai.github.io/categories/%E6%9D%82%E8%B0%88/"/>
    
    
  </entry>
  
  <entry>
    <title>å¤ç›˜ä¸€ä¸‹æœ€è¿‘ï¼ˆ3æœˆ18æ—¥ï¼‰</title>
    <link href="http://malone-ai.github.io/2025/03/18/my-feelings4/"/>
    <id>http://malone-ai.github.io/2025/03/18/my-feelings4/</id>
    <published>2025-03-18T07:52:46.000Z</published>
    <updated>2025-03-18T08:13:31.995Z</updated>
    
    <content type="html"><![CDATA[<p>è‡ªä¸Šä¸Šå‘¨å¬äº†å…¥èŒç¾å›¢çš„å­¦é•¿çš„å»ºè®®ï¼Œå·²ç»ç®—æ˜¯å…¨é¢è½¬Javaäº†ã€‚JavaEEç®—æ˜¯åŸºæœ¬å›äº†ï¼Œå’ŒC++åŸºæœ¬å·®ä¸äº†å¤šå°‘ï¼Œå°±æ˜¯ä¸€äº›åŸºæœ¬çš„æ•°æ®ç»“æ„å’Œç‰¹æ€§ä¸ä¸€æ ·ï¼Œè¿™å‡ å¤©ä¸€ç›´åœ¨é€šè¿‡Leetcodeç®—æ³•é¢˜çš„æ–¹å¼æ¥ç†Ÿç»ƒã€‚</p><p>å­¦äº†å¾ˆé•¿ä¸€æ®µæ—¶é—´çš„Springbootå’ŒVueï¼Œä¸»è¦æ˜¯è·Ÿç€Bç«™è§†é¢‘åšä¸€ä¸ªç®€å•é¡¹ç›®ã€‚å¤ç›˜äº†ä¸€ä¸‹ï¼Œå‘ç°è‡ªå·±åŸºæœ¬ä¸Šä¸€ä¸ª1å°æ—¶çš„è§†é¢‘èƒ½çœ‹ä¸€ä¸‹åˆï¼Œç©¶å…¶åŸå› ï¼Œæˆ‘å½’ç»“ä¸ºâ€œé’»ç‰›è§’å°–â€ï¼ŒèŠ±äº†å¾ˆå¤§åŠŸå¤«åœ¨å†™åšå®¢è®°å½•ä¸Šäº†ï¼Œæƒ³ç€æ–¹ä¾¿å¤ä¹ ã€‚ä½†æ˜¯ç¡®å®æ˜¯å¤ä¹ æ¯”è¾ƒæ–¹ä¾¿ï¼Œä½†æ˜¯æ•ˆç‡å¹¶ä¸æ˜¯å¾ˆé«˜ã€‚</p><p>ç›®å‰å†³å®šå¼€å§‹ä¸€ä¸‹æç®€å†™åšå®¢æ–¹å¼ï¼Œä¸å¤ªä½œè¿‡å¤šè§£é‡Šï¼Œä»…ä»…æˆªå›¾+ä¸‰è¨€ä¸¤è¯­ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è‡ªä¸Šä¸Šå‘¨å¬äº†å…¥èŒç¾å›¢çš„å­¦é•¿çš„å»ºè®®ï¼Œå·²ç»ç®—æ˜¯å…¨é¢è½¬Javaäº†ã€‚JavaEEç®—æ˜¯åŸºæœ¬å›äº†ï¼Œå’ŒC++åŸºæœ¬å·®ä¸äº†å¤šå°‘ï¼Œå°±æ˜¯ä¸€äº›åŸºæœ¬çš„æ•°æ®ç»“æ„å’Œç‰¹æ€§ä¸ä¸€æ ·ï¼Œè¿™å‡ å¤©ä¸€ç›´åœ¨é€šè¿‡Leetcodeç®—æ³•é¢˜çš„æ–¹å¼æ¥ç†Ÿç»ƒã€‚&lt;/p&gt;
&lt;p&gt;å­¦äº†å¾ˆé•¿ä¸€æ®µæ—¶é—´çš„Springbootå’ŒVueï¼Œä¸»è¦æ˜¯è·Ÿç€B</summary>
      
    
    
    
    <category term="æ‚è°ˆ" scheme="http://malone-ai.github.io/categories/%E6%9D%82%E8%B0%88/"/>
    
    
  </entry>
  
  <entry>
    <title>Springboot3 + Vue3 å®ç°ç™»é™†æ³¨å†Œ</title>
    <link href="http://malone-ai.github.io/2025/03/17/project-test9/"/>
    <id>http://malone-ai.github.io/2025/03/17/project-test9/</id>
    <published>2025-03-17T12:47:06.000Z</published>
    <updated>2025-03-18T13:03:47.764Z</updated>
    
    <content type="html"><![CDATA[<h1>1. å‰ç«¯æ­å»º</h1><p>åœ¨vue/src/viewsç›®å½•ä¸‹æ–°å»ºlogin.vueã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;align-items: center;justify-content: center;background-color: aquamarine;height: 100vh;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;width: 50%;background-color: white;border-radius: 5px;overflow: hidden;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;@/assets/imgs/login.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1;display: flex;align-items: center;justify-content: center;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span> <span class="attr">:model</span>=<span class="string">&quot;data.form&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 80%&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;data.rules&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-weight: bold; font-size: 20px;margin-bottom: 20px;text-align: center;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            æ¬¢ è¿ ç™» é™†</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥ç”¨æˆ·å&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.username&quot;</span> <span class="attr">:prefix-icon</span>=<span class="string">&quot;User&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥å¯†ç &quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.password&quot;</span> <span class="attr">show-password</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;role&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-select</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.role&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">label</span>=<span class="string">&quot;ç®¡ç†å‘˜&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ADMIN&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">label</span>=<span class="string">&quot;ç”¨æˆ·&quot;</span> <span class="attr">value</span>=<span class="string">&quot;USER&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!--          &lt;el-form-item prop=&quot;vaildCode&quot;&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!--            &lt;div style=&quot;display: flex;&quot;&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!--              &lt;el-input&gt;&lt;/el-input&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!--              &lt;div style=&quot;flex: 1;&quot;&gt;1313&lt;/div&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!--            &lt;/div&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!--          &lt;/el-form-item&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;login&quot;</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1;&quot;</span>&gt;</span>è¿˜æ²¡æœ‰è´¦å·ï¼Ÿå»<span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">&quot;color: aquamarine&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/register&quot;</span>&gt;</span>æ³¨å†Œ<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1;text-align: right;cursor: pointer;color: aquamarine;&quot;</span>&gt;</span>å¿˜è®°å¯†ç <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123;<span class="title class_">User</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;@element-plus/icons-vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123;reactive, ref&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123;<span class="title class_">ElMessage</span>&#125; <span class="keyword">from</span> <span class="string">&quot;element-plus&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;@/router/index.js&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&quot;@/utils/request.js&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> formRef = <span class="title function_">ref</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> data = <span class="title function_">reactive</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">form</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">role</span>: <span class="string">&#x27;ADMIN&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">rules</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">username</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#123;<span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;è¯·è¾“å…¥è´¦å·&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#123;<span class="attr">min</span>: <span class="number">3</span>, <span class="attr">message</span>: <span class="string">&#x27;è´¦å·æœ€å°‘3ä½&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">password</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#123;<span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;è¯·è¾“å…¥å¯†ç &#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">login</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  formRef.<span class="property">value</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">if</span> (valid) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      request.<span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>, data.<span class="property">form</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="string">&#x27;200&#x27;</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="comment">// å­˜å‚¨ç”¨æˆ·ä¿¡æ¯</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;code_user&quot;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(res.<span class="property">data</span> || &#123;&#125;))</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(<span class="string">&quot;ç™»é™†æˆåŠŸ&quot;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          router.<span class="title function_">push</span>(<span class="string">&quot;/&quot;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h1>2. ç™»é™†</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// com/example/controller/AdminController.java</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/login&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">login</span><span class="params">(<span class="meta">@RequestBody</span> Admin admin)</span> &#123;</span><br><span class="line">    <span class="type">Admin</span> <span class="variable">dbAdmin</span> <span class="operator">=</span> adminService.login(admin);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// com/example/service/AdminService.java</span></span><br><span class="line"><span class="keyword">public</span> Admin <span class="title function_">login</span><span class="params">(Admin admin)</span> &#123;</span><br><span class="line">    <span class="comment">// 1. éªŒè¯è´¦å·æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">    <span class="type">Admin</span> <span class="variable">dbAdmin</span> <span class="operator">=</span> adminMapper.selectByUsername(admin.getUsername());</span><br><span class="line">    <span class="keyword">if</span> (dbAdmin == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomerException</span>(<span class="string">&quot;è´¦å·ä¸å­˜åœ¨&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. éªŒè¯å¯†ç </span></span><br><span class="line">    <span class="keyword">if</span> (!dbAdmin.getPassword().equals(admin.getPassword())) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomerException</span>(<span class="string">&quot;è´¦å·æˆ–å¯†ç é”™è¯¯&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dbAdmin;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç™»é™†æŒ‰é’®ç»‘å®šäº‹ä»¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button type=<span class="string">&quot;primary&quot;</span> style=<span class="string">&quot;width: 100%;&quot;</span> @click=<span class="string">&quot;login&quot;</span>&gt;ç™»å½•&lt;/el-button&gt;</span><br></pre></td></tr></table></figure><p>login:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue/src/views/login.vue</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">login</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  formRef.<span class="property">value</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (valid) &#123;</span><br><span class="line">      request.<span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>, data.<span class="property">form</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="string">&#x27;200&#x27;</span>) &#123;</span><br><span class="line">          <span class="comment">// å­˜å‚¨ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">          <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;code_user&quot;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(res.<span class="property">data</span> || &#123;&#125;))</span><br><span class="line">          <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(<span class="string">&quot;ç™»é™†æˆåŠŸ&quot;</span>)</span><br><span class="line">          router.<span class="title function_">push</span>(<span class="string">&quot;/&quot;</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åˆ«å¿˜è®°è¿è¡Œspringbootå·¥ç¨‹ï¼Œå†å»æµ‹è¯•loginã€‚</p><p>å­˜å‚¨çš„ç”¨æˆ·ä¿¡æ¯ï¼š<br><img src="image.png" alt="alt text"></p><h1>3. é€€å‡ºç™»é™†</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue/src/views/Manager.vue</span></span><br><span class="line">&lt;el-dropdown-item @click=<span class="string">&quot;logout&quot;</span>&gt;é€€å‡ºç™»é™†&lt;/el-dropdown-item&gt;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue/src/views/Manager.vue</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">logout</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;code_user&#x27;</span>) <span class="comment">// æ¸…é™¤ç¼“å­˜</span></span><br><span class="line">  location.<span class="property">href</span> = <span class="string">&#x27;/login&#x27;</span> <span class="comment">// é‡å®šå‘åˆ°loginè·¯ç”±</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>4. ä¿æŠ¤</h1><p>åœ¨<code>&lt;script&gt;&lt;/script&gt;</code>ä¹‹é—´æ·»åŠ ä¸€ä¸‹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue/src/views/Manager.vue</span></span><br><span class="line"><span class="keyword">let</span> userStr = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;code_user&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> (userStr) &#123;</span><br><span class="line">  <span class="keyword">let</span> user = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(userStr)</span><br><span class="line">  <span class="keyword">if</span> (!user.<span class="property">id</span>) &#123;</span><br><span class="line">    location.<span class="property">href</span> = <span class="string">&#x27;/login&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  location.<span class="property">href</span> = <span class="string">&#x27;/login&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”¨äºéªŒè¯ç”¨æˆ·æ˜¯å¦ç™»é™†</p><h1>5. å¢åŠ ç”¨æˆ·</h1><p>æ–°å»ºæ•°æ®åº“è¡¨userï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span> `<span class="keyword">user</span>` (</span><br><span class="line">  `id` <span class="type">int</span> <span class="keyword">NOT NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ID&#x27;</span>,</span><br><span class="line">  `username` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è´¦å·&#x27;</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¯†ç &#x27;</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åç§°&#x27;</span>,</span><br><span class="line">  `phone` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ‰‹æœº&#x27;</span>,</span><br><span class="line">  `email` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;é‚®ç®±&#x27;</span>,</span><br><span class="line">  `role` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è§’è‰²&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY KEY</span> (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `username_index` (`username`) COMMENT <span class="string">&#x27;è´¦å·&#x27;</span></span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">36</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8mb4_unicode_ci COMMENT<span class="operator">=</span><span class="string">&#x27;ç”¨æˆ·ä¿¡æ¯&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="image-2.png" alt="alt text"></p><p>roleé¡¹ç”¨äºåŒºåˆ†ç”¨æˆ·å’Œç®¡ç†å‘˜ã€‚</p><p>ç®¡ç†å‘˜è¡¨ä¹Ÿæ–°å¢ä¸€é¡¹roleï¼š</p><p><img src="image-1.png" alt="alt text"></p><p>å¤åˆ¶com/example/entity/Admin.javaç²˜è´´é‡å‘½åä¸ºUserã€‚</p><p>å¹¶ç»™Admin.javaå’ŒUser.javaæ–°å¢private String roleå±æ€§ï¼Œé…ç½®getterå’Œsetterã€‚</p><p>å¤åˆ¶com/example/controller/AdminController.javaç²˜è´´é‡å‘½åä¸ºUserControllerï¼Œå¹¶æŠŠï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/admin&quot;)</span></span><br></pre></td></tr></table></figure><p>æ”¹æˆ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br></pre></td></tr></table></figure><p>å¹¶æŠŠé‡Œé¢æ‰€æœ‰çš„Adminæ”¹æˆUserã€‚</p><p>å¤åˆ¶com/example/service/AdminService.javaç²˜è´´é‡å‘½åä¸ºUserServiceï¼Œå¹¶æŠŠAdminæ¢æˆUserã€‚</p><p>å¤åˆ¶com/example/mapper/AdminMapper.javaå¹¶ç²˜è´´é‡å‘½åä¸ºUserMapperï¼Œå¹¶æŠŠAdminæ¢æˆUserã€‚</p><p>å¤åˆ¶src/main/resources/mapper/AdminMapper.xmlï¼Œå¹¶ç²˜è´´é‡å‘½åä¸ºUserMapper.xmlï¼Œå¹¶æŠŠAdminæ¢æˆUserã€‚</p><p>æŠŠvue/src/views/Admin.vueç²˜è´´ä¸ºUser.vueã€‚</p><p>æ–°å¢è·¯ç”±ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue/src/router/index.js</span></span><br><span class="line">&#123;<span class="attr">path</span>: <span class="string">&#x27;admin&#x27;</span>, <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/Admin.vue&#x27;</span>)&#125;,</span><br><span class="line">&#123;<span class="attr">path</span>: <span class="string">&#x27;user&#x27;</span>, <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/User.vue&#x27;</span>)&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue/src/views/Manager.vue</span></span><br><span class="line">&lt;el-menu-item index=<span class="string">&quot;/manager/admin&quot;</span>&gt;ç®¡ç†å‘˜ä¿¡æ¯&lt;/el-menu-item&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">&quot;/manager/user&quot;</span>&gt;</span>ç”¨æˆ·ä¿¡æ¯<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼š<br><img src="image-3.png" alt=""></p><p>é‡å¯åç«¯å³å¯ã€‚</p><h1>6. æ³¨å†Œ</h1><p>æŠŠlogin.vueå¤åˆ¶ç²˜è´´ä¸ºregister.vueã€‚</p><p>æ–°å¢è·¯ç”±ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue/src/router/index.js</span></span><br><span class="line">&#123; <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>, <span class="attr">component</span>: <span class="keyword">import</span>(<span class="string">&#x27;../views/login.vue&#x27;</span>),&#125;,</span><br><span class="line">&#123; <span class="attr">path</span>: <span class="string">&#x27;/register&#x27;</span>, <span class="attr">component</span>: <span class="keyword">import</span>(<span class="string">&#x27;../views/register.vue&#x27;</span>),&#125;,</span><br></pre></td></tr></table></figure><p>register.vueï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;align-items: center;justify-content: center;background-color: aquamarine;height: 100vh;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;width: 50%;background-color: white;border-radius: 5px;overflow: hidden;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;@/assets/imgs/register.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1;display: flex;align-items: center;justify-content: center;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">status-icon</span> <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span> <span class="attr">:model</span>=<span class="string">&quot;data.form&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 80%&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;data.rules&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-weight: bold; font-size: 20px;margin-bottom: 20px;text-align: center;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            æ¬¢ è¿ æ³¨ å†Œ</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥ç”¨æˆ·å&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.username&quot;</span> <span class="attr">:prefix-icon</span>=<span class="string">&quot;User&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥å¯†ç &quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.password&quot;</span> <span class="attr">show-password</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;confirmPassword&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·å†æ¬¡è¾“å…¥å¯†ç &quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.confirmPassword&quot;</span> <span class="attr">show-password</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!--          &lt;el-form-item prop=&quot;vaildCode&quot;&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!--            &lt;div style=&quot;display: flex;&quot;&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!--              &lt;el-input&gt;&lt;/el-input&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!--              &lt;div style=&quot;flex: 1;&quot;&gt;1313&lt;/div&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!--            &lt;/div&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!--          &lt;/el-form-item&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;success&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;register&quot;</span>&gt;</span>æ³¨å†Œ<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;flex: 1;&quot;</span>&gt;</span>å·²æœ‰è´¦å·ï¼Ÿè¯·<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/login&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color: #248243;cursor: pointer;&quot;</span>&gt;</span>ç™»é™†<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123;<span class="title class_">User</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;@element-plus/icons-vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123;reactive, ref&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123;<span class="title class_">ElMessage</span>&#125; <span class="keyword">from</span> <span class="string">&quot;element-plus&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;@/router/index.js&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&quot;@/utils/request.js&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">validatePass</span> = (<span class="params">rule, value, callback</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// valueè¡¨ç¤ºç”¨æˆ·è¾“å…¥çš„confirmPassword</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">if</span> (value !== data.<span class="property">form</span>.<span class="property">password</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸åŒ¹é…&#x27;</span>))</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">callback</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> formRef = <span class="title function_">ref</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> data = <span class="title function_">reactive</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">form</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">validCode</span>: <span class="string">&#x27;&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">rules</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">username</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#123;<span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;è¯·è¾“å…¥è´¦å·&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#123;<span class="attr">min</span>: <span class="number">3</span>, <span class="attr">message</span>: <span class="string">&#x27;è´¦å·æœ€å°‘3ä½&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">password</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#123;<span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;è¯·è¾“å…¥å¯†ç &#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">confirmPassword</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#123;<span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;è¯·å†æ¬¡è¾“å…¥å¯†ç &#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#123;<span class="attr">validator</span>: validatePass, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> <span class="title function_">register</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  formRef.<span class="property">value</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">if</span> (valid) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      request.<span class="title function_">post</span>(<span class="string">&#x27;/register&#x27;</span>, data.<span class="property">form</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="string">&#x27;200&#x27;</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(<span class="string">&quot;æ³¨å†ŒæˆåŠŸ&quot;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          router.<span class="title function_">push</span>(<span class="string">&quot;/login&quot;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>æ¯”loginå¤šäº†ä¸€ä¸ªconfirmPasswordã€‚</p><ul><li>æ–°å¢æ³¨å†Œæ¥å£</li></ul><p>controllerå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// com/example/controller/WebController.java</span></span><br><span class="line"><span class="meta">@Resource</span></span><br><span class="line">UserService userService; <span class="comment">// æ³¨å…¥UserService</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@PostMapping(&quot;/register&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">register</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">    userService.register(user);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Serviceå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UserService.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">register</span><span class="params">(User user)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.add(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;1. å‰ç«¯æ­å»º&lt;/h1&gt;
&lt;p&gt;åœ¨vue/src/viewsç›®å½•ä¸‹æ–°å»ºlogin.vueã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;l</summary>
      
    
    
    
    <category term="Java é¡¹ç›®" scheme="http://malone-ai.github.io/categories/Java-%E9%A1%B9%E7%9B%AE/"/>
    
    
    <category term="Java" scheme="http://malone-ai.github.io/tags/Java/"/>
    
    <category term="Springboot" scheme="http://malone-ai.github.io/tags/Springboot/"/>
    
  </entry>
  
  <entry>
    <title>Springboot3 + Vue3 å®ç° Excel æ‰¹é‡å¯¼å‡ºå¯¼å…¥</title>
    <link href="http://malone-ai.github.io/2025/03/17/project-test8/"/>
    <id>http://malone-ai.github.io/2025/03/17/project-test8/</id>
    <published>2025-03-17T05:16:46.000Z</published>
    <updated>2025-03-17T10:21:55.338Z</updated>
    
    <content type="html"><![CDATA[<h1>å‰è¨€</h1><p>ä¸»è¦ä½¿ç”¨Javaå·¥å…·ç±»Hutoolæ¥å®ç°ï¼Œ<a href="https://doc.hutool.cn/pages/index/">Hutoolå®˜ç½‘</a>ã€‚</p><h1>1. æ‰¹é‡å¯¼å‡º</h1><h2 id="1-1-æµç¨‹">1.1 æµç¨‹</h2><p>å¯¼å‡ºæ•°æ®æµç¨‹</p><ol><li>æ‹¿åˆ°æ‰€æœ‰æ•°æ®</li><li>æ„å»º ExcelWriter å¯¹è±¡</li><li>è®¾ç½®ä¸­æ–‡è¡¨å¤´</li><li>å†™å‡ºæ•°æ®åˆ°writer</li><li>è®¾ç½®è¾“å‡ºçš„æ–‡ä»¶çš„åç§°ä»¥åŠè¾“å‡ºæµçš„å¤´ä¿¡æ¯</li><li>å†™å‡ºåˆ°è¾“å‡ºæµ å¹¶å…³é—­ writer</li></ol><h2 id="1-2-æä¾›åç«¯æ¥å£">1.2 æä¾›åç«¯æ¥å£</h2><p>å…ˆéœ€è¦æä¾›åç«¯çš„æ‰¹é‡å¯¼å‡ºæ¥å£ï¼Œç”±å‰ç«¯è°ƒç”¨ã€‚</p><p>Controllerå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/export&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">exportData</span><span class="params">(HttpServletResponse response)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">    <span class="comment">// 1. æ‹¿åˆ°æ‰€æœ‰æ•°æ®</span></span><br><span class="line">    List&lt;Admin&gt; admins = adminService.selectAll();</span><br><span class="line">    <span class="comment">// 2. æ„å»ºExcelWriterå¯¹è±¡</span></span><br><span class="line">    <span class="type">ExcelWriter</span> <span class="variable">writer</span> <span class="operator">=</span> ExcelUtil.getWriter(<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">// 3. è®¾ç½®ä¸­æ–‡è¡¨å¤´</span></span><br><span class="line">    writer.addHeaderAlias(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;è´¦å·&quot;</span>);</span><br><span class="line">    writer.addHeaderAlias(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;åç§°&quot;</span>);</span><br><span class="line">    writer.addHeaderAlias(<span class="string">&quot;phone&quot;</span>, <span class="string">&quot;ç”µè¯&quot;</span>);</span><br><span class="line">    writer.addHeaderAlias(<span class="string">&quot;email&quot;</span>, <span class="string">&quot;é‚®ç®±&quot;</span>);</span><br><span class="line">    <span class="comment">// 4. å†™å‡ºæ•°æ®åˆ°writer</span></span><br><span class="line">    writer.write(admins);</span><br><span class="line">    <span class="comment">// 5. è®¾ç½®è¾“å‡ºçš„æ–‡ä»¶çš„åç§°ä»¥åŠè¾“å‡ºæµçš„å¤´ä¿¡æ¯</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> URLEncoder.encode(<span class="string">&quot;ç®¡ç†å‘˜ä¿¡æ¯&quot;</span>, StandardCharsets.UTF_8);</span><br><span class="line">    response.setContentType(<span class="string">&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8&quot;</span>);</span><br><span class="line">    response.setHeader(<span class="string">&quot;Content-disposition&quot;</span>, <span class="string">&quot;attachment;filename=&quot;</span> + fileName + <span class="string">&quot;.xlsx&quot;</span>);</span><br><span class="line">    <span class="comment">// 6. å†™å‡ºåˆ°è¾“å‡ºæµ å¹¶å…³é—­ writer</span></span><br><span class="line">    <span class="type">ServletOutputStream</span> <span class="variable">os</span> <span class="operator">=</span> response.getOutputStream();</span><br><span class="line">    writer.flush(os);</span><br><span class="line">    writer.close();</span><br><span class="line">    os.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡è¾“å‡ºæµçš„æ–¹å¼å¯¼å‡ºã€‚</p><ol><li>è°ƒç”¨åå°æœåŠ¡æŸ¥è¯¢æ‰€æœ‰ç®¡ç†å‘˜æ•°æ®ï¼ˆ<code>adminService.selectAll()</code>ï¼‰ã€‚</li><li>ä½¿ç”¨ Hutool çš„ <code>ExcelUtil</code> åˆ›å»ºä¸€ä¸ª ExcelWriter å¯¹è±¡ã€‚</li><li>é€šè¿‡ <code>writer.addHeaderAlias</code> è®¾ç½®è¡¨å¤´åˆ«åï¼Œå°†æ•°æ®åº“å­—æ®µåæ˜ å°„ä¸ºä¸­æ–‡è¡¨å¤´ã€‚</li><li>è°ƒç”¨ <code>writer.write(admins)</code> å°†æŸ¥è¯¢å¾—åˆ°çš„æ•°æ®å†™å…¥ Excel æ–‡ä»¶ã€‚</li><li>è®¾ç½®å“åº”å¤´ï¼ŒæŒ‡å®šæ–‡ä»¶åå’Œ MIME ç±»å‹ï¼Œä½¿æµè§ˆå™¨è¯†åˆ«ä¸ºæ–‡ä»¶ä¸‹è½½ã€‚</li><li>è·å–å“åº”è¾“å‡ºæµï¼Œå¹¶å°† Excel æ–‡ä»¶æ•°æ®å†™å…¥è¾“å‡ºæµï¼Œæœ€ååˆ·æ–°å¹¶å…³é—­æµã€‚</li></ol><p>è¿™ç§è®¾è®¡ä½¿å¾—å‰ç«¯é€šè¿‡è®¿é—® <code>/admin/export</code> æ¥å£å³å¯è§¦å‘æ–‡ä»¶ä¸‹è½½ã€‚</p><ul><li><code>exportData</code> ä¸ºä»€ä¹ˆæ·»åŠ  <code>throws Exception</code>ï¼š</li></ul><p><code>exportData</code> æ–¹æ³•æ¶‰åŠåˆ°æ–‡ä»¶è¾“å‡ºã€URLç¼–ç ã€æµæ“ä½œç­‰ï¼Œå¾ˆå¯èƒ½æŠ›å‡º IO æˆ–ç¼–ç ç›¸å…³å¼‚å¸¸ã€‚å¦‚æœä¸åœ¨æ–¹æ³•ç­¾åä¸Šå£°æ˜ <code>throws Exception</code>ï¼Œå°±å¿…é¡»åœ¨æ–¹æ³•å†…éƒ¨æ•è·å¹¶å¤„ç†è¿™äº›å¼‚å¸¸ã€‚æ·»åŠ  <code>throws Exception</code> å¯è®©å¼‚å¸¸ç”±å…¨å±€å¼‚å¸¸å¤„ç†å™¨ç»Ÿä¸€ç®¡ç†ï¼ŒåŒæ—¶ç®€åŒ–æ–¹æ³•å†…éƒ¨çš„å¼‚å¸¸å¤„ç†é€»è¾‘ã€‚</p><h2 id="1-3-è¿è¡ŒæŠ¥é”™">1.3 è¿è¡ŒæŠ¥é”™</h2><p>è¿è¡Œåæç¤ºç¼ºå°‘ä¾èµ–ï¼Œæ·»åŠ ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.poi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>poi-ooxml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="1-4-è¿è¡Œå‡ºç°çš„é—®é¢˜">1.4 è¿è¡Œå‡ºç°çš„é—®é¢˜</h2><p>å†æ¬¡è¿è¡Œåä¼šè‡ªåŠ¨ä¸‹è½½ä¸€ä¸ªexcelæ–‡ä»¶ï¼Œæ‰“å¼€ä¸€çœ‹ï¼Œå‘ç°è¡¨å¤´ç«Ÿç„¶åŒ…å«passwordã€‚</p><p>å› ä¸ºé»˜è®¤çš„å¯¼å‡ºæ˜¯åŒ…å«æ‰€æœ‰çš„å­—æ®µã€‚</p><p>æ·»åŠ ä¸‹é¢è¿™è¡Œä»£ç å³å¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">writer.setOnlyAlias(<span class="literal">true</span>);</span><br></pre></td></tr></table></figure><h2 id="1-5-å‰ç«¯æŒ‰é’®ç»‘å®š">1.5 å‰ç«¯æŒ‰é’®ç»‘å®š</h2><p>ç»™æ‰¹é‡å¯¼å‡ºæŒ‰é’®ç»‘å®šäº‹ä»¶exportDataï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button type=<span class="string">&quot;info&quot;</span> <span class="meta">@click</span>=<span class="string">&quot;exportData&quot;</span>&gt;æ‰¹é‡å¯¼å‡º&lt;/el-button&gt;</span><br></pre></td></tr></table></figure><p>ç„¶åå®šä¹‰è¿™ä¸ªæ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">exportData</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">open</span>(<span class="string">&quot;http://localhost:9999/admin/export&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶æ‰¹é‡å¯¼å‡ºåŠŸèƒ½å°±æ˜¯å®ç°äº†ã€‚</p><h1>2. æ¡ä»¶å¯¼å‡º</h1><p>æŠŠexportDataæ–¹æ³•æ”¹æˆï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="variable">exportData</span> <span class="operator">=</span> () =&gt; &#123;</span><br><span class="line">  <span class="type">let</span> <span class="variable">url</span> <span class="operator">=</span> `http:<span class="comment">//localhost:9999/admin/export?username=$&#123;data.username&#125;&amp;name=$&#123;data.name&#125;`</span></span><br><span class="line">  window.open(url)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œç»™åç«¯çš„exportæ¥å£ä¼ é€’äº†ä¸¤ä¸ªå‚æ•°ï¼Œä½†æ˜¯æˆ‘ä»¬è®¾ç½®çš„æ¥å£å¹¶ä¸æ¥æ”¶è¿™ä¸¤ä¸ªå‚æ•°ï¼Œå› æ­¤åç«¯exportæ¥å£è¦ä¿®æ”¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/export&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">exportData</span><span class="params">(Admin admin, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">    <span class="comment">// 1. æ‹¿åˆ°æ‰€æœ‰æ•°æ®</span></span><br><span class="line">    List&lt;Admin&gt; admins = adminService.selectAll(admin);</span><br><span class="line">    <span class="comment">// ... </span></span><br><span class="line">    <span class="comment">// ä¿æŒä¸å˜</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œè®©controllerå±‚æ¥æ”¶ä¸€ä¸ªAdminå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™Serviceå±‚å‚æ•°ä¼ é€’ã€‚</p><p>Serviceå±‚æ¥å£selectAllåŸæ¥æ˜¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Admin&gt; <span class="title function_">selectAll</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> adminMapper.selectAll(<span class="literal">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å› æ­¤ä¹Ÿè¦ä¿®æ”¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Admin&gt; <span class="title function_">selectAll</span><span class="params">(Admin admin)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> adminMapper.selectAll(admin);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>mapperå±‚çš„æ¥å£ä¸ç”¨å†åšä¿®æ”¹ã€‚</p><p>ä½†æ˜¯è¿™æ ·æœ‰ä¸ªé—®é¢˜ã€‚</p><p>åœ¨Admin.vueä¸­ï¼Œdataçš„å®šä¹‰ä¸ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">  <span class="attr">username</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">pageNum</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">pageSize</span>: <span class="number">5</span>,</span><br><span class="line">  <span class="attr">total</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">tableData</span>: [],</span><br><span class="line">  <span class="attr">formVisible</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">form</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="attr">username</span>: [</span><br><span class="line">      &#123;<span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&quot;è¯·å¡«å†™è´¦å·&quot;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">name</span>: [</span><br><span class="line">      &#123;<span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&quot;è¯·å¡«å†™åç§°&quot;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">phone</span>: [</span><br><span class="line">      &#123;<span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&quot;è¯·å¡«å†™ç”µè¯&quot;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">email</span>: [</span><br><span class="line">      &#123;<span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&quot;è¯·å¡«å†™é‚®ç®±&quot;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>&#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">rows</span>: []</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><code>username</code> å’Œ <code>name</code> éƒ½é»˜è®¤ä¸º nullï¼Œå³ä¸ºç©ºã€‚ä½†æ˜¯ä¼ åˆ°åç«¯ï¼Œè¿™ä¸¤ä¸ªå±æ€§å°±ä¸æ˜¯ nullï¼Œå˜æˆå­—ç¬¦ä¸² â€œnullâ€ äº†ã€‚</p><p>ç»™controllerå±‚çš„<code>exportData</code>æ¥å£æ‰“ä¸Šæ–­ç‚¹ï¼Œå¯åŠ¨springbootå·¥ç¨‹çš„è°ƒè¯•ï¼Œå†å»å‰ç«¯ç‚¹å‡»<code>æ‰¹é‡å¯¼å‡º</code>æŒ‰é’®ï¼Œå°±å¯ä»¥å‘ç°å‰ç«¯å‘å‡ºçš„è¯·æ±‚ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:9999/admin/export?username=null&amp;name=null</span><br></pre></td></tr></table></figure><p>å¹¶ä¸”å¯ä»¥çœ‹åˆ°ä¼ é€’ç»™åç«¯controllerå±‚çš„adminçš„å±æ€§ï¼š<br><img src="image.png" alt="alt text"><br><img src="/images/project-test8_1.png" alt=""></p><p>å¯ä»¥çœ‹åˆ°ç¡®å®æ˜¯&quot;null&quot;å­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯nullã€‚</p><p>è¿™æ ·å»åç«¯æŸ¥è¯¢è‚¯å®šæ˜¯ä»€ä¹ˆä¹ŸæŸ¥ä¸åˆ°ã€‚</p><p>æˆ‘ä»¬æœŸæœ›çš„æ˜¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:9999/admin/export?username=&amp;name=</span><br></pre></td></tr></table></figure><p>å› æ­¤å‰ç«¯çš„exportDataæ–¹æ³•è¦è¿›è¡Œä¿®æ”¹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">exportData</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> url = <span class="string">`http://localhost:9999/admin/export?username=<span class="subst">$&#123;data.username === <span class="literal">null</span> ? <span class="string">&#x27;&#x27;</span> : data.username&#125;</span>&amp;name=<span class="subst">$&#123;data.name === <span class="literal">null</span> ? <span class="string">&#x27;&#x27;</span> : data.name&#125;</span>`</span></span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">open</span>(url)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä¸‰ç›®è¿ç®—ç¬¦æ¥åˆ¤æ–­usernameå’Œnameæ˜¯å¦ä¸ºnullï¼Œä¸ºnullå°±ä¼ é€’â€™'å³ç©ºå­—ç¬¦ä¸²ï¼›ä¸ä¸ºnullå°±ç›´æ¥ä¼ é€’ã€‚</p><p>æ­¤æ—¶å†å»ç‚¹å‡»æ‰¹é‡å¯¼å‡ºæŒ‰é’®ä¼šå‘ç°å‰ç«¯å‘é€çš„è¯·æ±‚ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:9999/admin/export?username=&amp;name=</span><br></pre></td></tr></table></figure><p>å¹¶ä¸”ä¼ é€’ç»™åç«¯Controllerå±‚ä¸­adminçš„usernameå’Œnameå±æ€§å‡ä¸º&quot;&quot;ç©ºå­—ç¬¦ä¸²ã€‚ç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸã€‚</p><p>ä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ã€‚</p><p>åœ¨å‰ç«¯é¡µé¢æˆ‘ä»¬ä¸è¿›è¡ŒæŸ¥è¯¢ï¼Œç„¶åç‚¹å‡»æ‰¹é‡å¯¼å‡ºæ—¶å¯¼å‡ºçš„excelåŒ…å«æ‰€æœ‰çš„æ•°æ®ã€‚</p><p>ä½†æ˜¯ï¼Œæˆ‘ä»¬è¿›è¡ŒæŸ¥è¯¢ï¼Œç„¶åç‚¹å‡»æ‰¹é‡å¯¼å‡ºæ—¶å¯¼å‡ºçš„excelä¾ç„¶åŒ…å«æ‰€æœ‰çš„æ•°æ®ã€‚</p><p>è¿™æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨XMLæ˜ å°„é‡Œåªåˆ¤æ–­äº†usernameå’Œnameæ˜¯å¦ä¸ºnullï¼Œè€Œæ²¡æœ‰åˆ¤æ–­å®ƒä»¬æ˜¯å¦ä¸ºç©ºå­—ç¬¦ä¸²ã€‚</p><p>å› æ­¤ä¿®æ”¹XMLæ˜ å°„ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.example.entity.Admin&quot;</span>&gt;</span></span><br><span class="line">    select * from `admin`</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;username != null and username != &#x27;&#x27;&quot;</span>&gt;</span>username like concat(&#x27;%&#x27;, #&#123;username&#125;, &#x27;%&#x27;)<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null and name != &#x27;&#x27;&quot;</span>&gt;</span>and name like concat(&#x27;%&#x27;, #&#123;name&#125;, &#x27;%&#x27;)<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    order by id desc</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ¥åˆ¤æ–­æ˜¯å¦ä¸ºç©ºå­—ç¬¦ä¸²ã€‚</p><h1>3. é€‰æ‹©å¯¼å‡º</h1><p>å³æˆ‘ä»¬é€šè¿‡å‰ç«¯é€‰æ‹©éƒ¨åˆ†è¡Œæ•°æ®è¿›è¡Œå¯¼å‡ºã€‚</p><p>è§†é¢‘é‡Œè®²å¾—å¤ªç¹çå¤ªéº»çƒ¦äº†ï¼Œè‡ªå·±å®ç°äº†ä¸€ä¸ªã€‚</p><h2 id="3-1-å‰ç«¯äº‹ä»¶">3.1 å‰ç«¯äº‹ä»¶</h2><p>ä¿®æ”¹ä¸€ä¸‹<code>exportData</code>æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">exportData</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (data.<span class="property">rows</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> ids = data.<span class="property">rows</span>.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">id</span>)</span><br><span class="line">    <span class="keyword">let</span> url = <span class="string">`http://localhost:9999/admin/exportBatch?ids=<span class="subst">$&#123;ids&#125;</span>`</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">open</span>(url)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> url = <span class="string">`http://localhost:9999/admin/export?username=<span class="subst">$&#123;data.username === <span class="literal">null</span> ? <span class="string">&#x27;&#x27;</span> : data.username&#125;</span>&amp;name=<span class="subst">$&#123;data.name === <span class="literal">null</span> ? <span class="string">&#x27;&#x27;</span> : data.name&#125;</span>`</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">open</span>(url)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®©å®ƒæ ¹æ®<code>data.rows.length</code>çš„é•¿åº¦åˆ¤æ–­è°ƒç”¨å“ªä¸ªåç«¯æ¥å£ã€‚</p><p><code>data.rows</code>é»˜è®¤æ˜¯nullï¼Œä½†æ˜¯é€‰æ‹©æ•°æ®åï¼Œé€šè¿‡äº‹ä»¶handleSelectionChange å¯ä»¥ä½¿ data.rows ä¸é€‰æ‹©çš„æ•°æ®è¿›è¡Œç»‘å®šã€‚</p><p>å› æ­¤<code>data.rows.length</code>å¤§äº0æ—¶è°ƒç”¨Controllerå±‚<code>exportBatch</code>æ¥å£ï¼Œå¦åˆ™è°ƒç”¨<code>export</code>æ¥å£ã€‚</p><p>åœ¨<code>exportBatch</code>ä¸­ï¼Œå°†é€‰æ‹©çš„æ•°æ®çš„idæ˜ å°„ä¸ºç±»ä¼¼[1, 2, 3]ï¼Œç„¶åä¼ é€’ç»™åç«¯æ¥å£ã€‚</p><h2 id="3-2-å®šä¹‰åç«¯æ¥å£">3.2 å®šä¹‰åç«¯æ¥å£</h2><p>å…ˆæ˜¯Controllerå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/exportBatch&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">exportBatch</span><span class="params">(<span class="meta">@RequestParam</span> String ids, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">// å°†å­—ç¬¦ä¸²idsè½¬ä¸ºæ•´æ•°åˆ—è¡¨</span></span><br><span class="line">    String[] idArray = ids.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">    List&lt;Integer&gt; idList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (String id : idArray) &#123;</span><br><span class="line">        idList.add(Integer.parseInt(id));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ ¹æ®idåˆ—è¡¨æŸ¥è¯¢æ•°æ®</span></span><br><span class="line">    List&lt;Admin&gt; list = adminService.SelectByIds(idList);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. æ„å»ºExcelWriterå¯¹è±¡</span></span><br><span class="line">    <span class="type">ExcelWriter</span> <span class="variable">writer</span> <span class="operator">=</span> ExcelUtil.getWriter(<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">// 3. è®¾ç½®ä¸­æ–‡è¡¨å¤´</span></span><br><span class="line">    writer.addHeaderAlias(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;è´¦å·&quot;</span>);</span><br><span class="line">    writer.addHeaderAlias(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;åç§°&quot;</span>);</span><br><span class="line">    writer.addHeaderAlias(<span class="string">&quot;phone&quot;</span>, <span class="string">&quot;ç”µè¯&quot;</span>);</span><br><span class="line">    writer.addHeaderAlias(<span class="string">&quot;email&quot;</span>, <span class="string">&quot;é‚®ç®±&quot;</span>);</span><br><span class="line">    writer.setOnlyAlias(<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">// 4. å†™å‡ºæ•°æ®åˆ°writer</span></span><br><span class="line">    writer.write(list);</span><br><span class="line">    <span class="comment">// 5. è®¾ç½®è¾“å‡ºçš„æ–‡ä»¶çš„åç§°ä»¥åŠè¾“å‡ºæµçš„å¤´ä¿¡æ¯</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> URLEncoder.encode(<span class="string">&quot;ç®¡ç†å‘˜ä¿¡æ¯&quot;</span>, StandardCharsets.UTF_8);</span><br><span class="line">    response.setContentType(<span class="string">&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8&quot;</span>);</span><br><span class="line">    response.setHeader(<span class="string">&quot;Content-disposition&quot;</span>, <span class="string">&quot;attachment;filename=&quot;</span> + fileName + <span class="string">&quot;.xlsx&quot;</span>);</span><br><span class="line">    <span class="comment">// 6. å†™å‡ºåˆ°è¾“å‡ºæµ å¹¶å…³é—­ writer</span></span><br><span class="line">    <span class="type">ServletOutputStream</span> <span class="variable">os</span> <span class="operator">=</span> response.getOutputStream();</span><br><span class="line">    writer.flush(os);</span><br><span class="line">    writer.close();</span><br><span class="line">    os.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥æ”¶å‰ç«¯ä¼ æ¥çš„idså‚æ•°ï¼Œå…ˆå°†æ¯ä¸ªidè½¬æ¢ä¸ºStringå­˜å‚¨åœ¨ä¸€ä¸ªString[]ä¸­ï¼Œç„¶åè½¬æˆIntegerå¯¹è±¡å­˜å‚¨åœ¨<code>List&lt;Integer&gt;</code>ä¸­ï¼Œç„¶åè°ƒç”¨Serviceå±‚æ¥å£ï¼Œå¹¶å°†è¿™ä¸ª<code>List&lt;Integer&gt;</code>ä¼ é€’ã€‚åé¢å’Œ<code>export</code>æ¥å£ä¸€è‡´ã€‚</p><p>ç„¶åæ˜¯Serviceå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Admin&gt; <span class="title function_">SelectByIds</span><span class="params">(List&lt;Integer&gt; ids)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> adminMapper.selectByIds(ids);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€æ˜¯Mapperå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Admin&gt; <span class="title function_">selectByIds</span><span class="params">(List&lt;Integer&gt; ids)</span>;</span><br></pre></td></tr></table></figure><p>XMLæ˜ å°„ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByIds&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.example.entity.Admin&quot;</span>&gt;</span></span><br><span class="line">    select * from `admin` where id in</span><br><span class="line">        <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span></span><br><span class="line">            #&#123;id&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span>ï¼š</span><br></pre></td></tr></table></figure><p>æ˜¯ MyBatis æä¾›çš„ä¸€ä¸ªåŠ¨æ€ SQL æ ‡ç­¾ï¼Œç”¨äºéå†é›†åˆã€‚</p><ul><li>collection=â€œlistâ€ï¼šæŒ‡å®šè¦éå†çš„é›†åˆï¼Œé€šå¸¸æ˜¯æ–¹æ³•å‚æ•°ä¼ é€’çš„ Listã€‚</li><li>item=â€œidâ€ï¼šæŒ‡å®šéå†æ—¶çš„æ¯ä¸ªå…ƒç´ çš„å˜é‡åã€‚</li><li>open=â€œ(â€ï¼šåœ¨éå†å¼€å§‹å‰æ·»åŠ çš„å­—ç¬¦ä¸²ï¼Œè¿™é‡Œæ˜¯å·¦æ‹¬å· (ã€‚</li><li>separator=â€œ,â€ï¼šæ¯ä¸ªå…ƒç´ ä¹‹é—´çš„åˆ†éš”ç¬¦ï¼Œè¿™é‡Œæ˜¯é€—å· ,ã€‚</li><li>close=â€œ)â€ï¼šåœ¨éå†ç»“æŸåæ·»åŠ çš„å­—ç¬¦ä¸²ï¼Œè¿™é‡Œæ˜¯å³æ‹¬å· )ã€‚</li><li>#{id}ï¼šè¿™æ˜¯ MyBatis çš„å ä½ç¬¦ï¼Œç”¨äºå°† id çš„å€¼æ’å…¥åˆ° SQL è¯­å¥ä¸­ã€‚</li></ul><p>è¿™ä¸ªæ˜ å°„çš„ä½œç”¨æ˜¯ç”Ÿæˆä¸€ä¸ª SQL æŸ¥è¯¢ï¼Œç”¨äºæ ¹æ®ä¸€ç»„ ID æ‰¹é‡æŸ¥è¯¢ admin è¡¨ä¸­çš„è®°å½•ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¼ å…¥çš„ list æ˜¯ [1, 2, 3]ï¼Œç”Ÿæˆçš„ SQL è¯­å¥å°†æ˜¯ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> `admin` <span class="keyword">where</span> id <span class="keyword">in</span> (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±èƒ½æ ¹æ®ä¼ å…¥çš„ ID åˆ—è¡¨æŸ¥è¯¢å¯¹åº”çš„è®°å½•ã€‚</p><p>è¿™æ ·å°±å®ç°è¿™ä¸ªé€‰æ‹©å¯¼å‡ºçš„åŠŸèƒ½äº†ã€‚</p><h1>4. æ‰¹é‡å¯¼å…¥</h1><h2 id="4-1-æµç¨‹">4.1 æµç¨‹</h2><ol><li>è·å–è¾“å…¥æµï¼Œæ„å»º Reader å¯¹è±¡</li><li>é€šè¿‡Reader è¯»å– excel é‡Œé¢çš„æ•°æ®</li><li>å°†æ•°æ®å†™åˆ°æ•°æ®åº“</li></ol><h2 id="4-2-å®šä¹‰åç«¯æ¥å£">4.2 å®šä¹‰åç«¯æ¥å£</h2><p>Controllerå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/import&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">importData</span><span class="params">(<span class="meta">@RequestParam(&quot;file&quot;)</span> MultipartFile file)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">// 1. è·å–è¾“å…¥æµï¼Œæ„å»º Reader å¯¹è±¡</span></span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> file.getInputStream();</span><br><span class="line">    <span class="type">ExcelReader</span> <span class="variable">reader</span> <span class="operator">=</span> ExcelUtil.getReader(inputStream);</span><br><span class="line">    <span class="comment">// 2. é€šè¿‡Reader è¯»å– excel é‡Œé¢çš„æ•°æ®</span></span><br><span class="line">    reader.addHeaderAlias(<span class="string">&quot;è´¦å·&quot;</span>, <span class="string">&quot;username&quot;</span>);</span><br><span class="line">    reader.addHeaderAlias(<span class="string">&quot;åç§°&quot;</span>, <span class="string">&quot;name&quot;</span>);</span><br><span class="line">    reader.addHeaderAlias(<span class="string">&quot;ç”µè¯&quot;</span>, <span class="string">&quot;phone&quot;</span>);</span><br><span class="line">    reader.addHeaderAlias( <span class="string">&quot;é‚®ç®±&quot;</span>, <span class="string">&quot;email&quot;</span>);</span><br><span class="line">    List&lt;Admin&gt; list = reader.readAll(Admin.class); <span class="comment">// å°†è¡¨æ ¼æ•°æ®è½¬æ¢ä¸ºList&lt;Admin&gt;</span></span><br><span class="line">    <span class="comment">// 3. å°†æ•°æ®å†™åˆ°æ•°æ®åº“</span></span><br><span class="line">    <span class="keyword">for</span> (Admin admin : list) &#123;</span><br><span class="line">        adminService.add(admin);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„Controllerå±‚ä¹‹é—´é€šè¿‡forå¾ªç¯ä¾æ¬¡è°ƒç”¨Serviceå±‚æ¥å£addæ¥å®ç°æ‰¹é‡å¯¼å…¥ã€‚</p><h2 id="4-3-å‰ç«¯ç»‘å®šäº‹ä»¶">4.3 å‰ç«¯ç»‘å®šäº‹ä»¶</h2><p>æŠŠæ‰¹é‡å¯¼å‡ºæŒ‰é’®æ”¹ä¸ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button type=<span class="string">&quot;primary&quot;</span> @click=<span class="string">&quot;handlerAdd&quot;</span>&gt;æ–°å¢&lt;/el-button&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;deleteBatch&quot;</span>&gt;</span>æ‰¹é‡åˆ é™¤<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">el-upload</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">action</span>=<span class="string">&quot;http://localhost:9999/admin/import&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">style</span>=<span class="string">&quot;display: inline-block; margin-left: 10px&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">:on-success</span>=<span class="string">&quot;handlerImport&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  :show-file-list=&quot;false&quot;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;success&quot;</span>&gt;</span>æ‰¹é‡å¯¼å…¥<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;info&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;exportData&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-left: 10px&quot;</span>&gt;</span>æ‰¹é‡å¯¼å‡º<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>ç„¶åå®šä¹‰handlerImportäº‹ä»¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handlerImport</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(<span class="string">&quot;æ‰¹é‡å¯¼å…¥æˆåŠŸ&quot;</span>)</span><br><span class="line">  <span class="title function_">load</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å®ç°äº†æ‰¹é‡å¯¼å…¥ã€‚</p><h1>å£°æ˜</h1><p>æœ¬æ–‡æ˜¯å¯¹Bç«™è§†é¢‘<a href="https://www.bilibili.com/video/BV1FBAmePEJS?spm_id_from=333.788.videopod.sections&amp;vd_source=a0f19e79b7da02f4fa318d91be5bc86a">ã€å¸¦å°ç™½åšæ¯•è®¾ã€‘07. Springboot3+Vue3å®ç°excelæ‰¹é‡å¯¼å…¥å¯¼å‡º</a>çš„å­¦ä¹ è®°å½•ï¼Œä¾µæƒè”ç³»åˆ ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;å‰è¨€&lt;/h1&gt;
&lt;p&gt;ä¸»è¦ä½¿ç”¨Javaå·¥å…·ç±»Hutoolæ¥å®ç°ï¼Œ&lt;a href=&quot;https://doc.hutool.cn/pages/index/&quot;&gt;Hutoolå®˜ç½‘&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h1&gt;1. æ‰¹é‡å¯¼å‡º&lt;/h1&gt;
&lt;h2 id=&quot;1-1-æµç¨‹&quot;&gt;1.1 æµç¨‹&lt;/</summary>
      
    
    
    
    <category term="Java é¡¹ç›®" scheme="http://malone-ai.github.io/categories/Java-%E9%A1%B9%E7%9B%AE/"/>
    
    
    <category term="Java" scheme="http://malone-ai.github.io/tags/Java/"/>
    
    <category term="Springboot" scheme="http://malone-ai.github.io/tags/Springboot/"/>
    
  </entry>
  
  <entry>
    <title>Springboot3 + Vue3 å®ç°æ•°æ®çš„ç¼–è¾‘ä¸åˆ é™¤</title>
    <link href="http://malone-ai.github.io/2025/03/16/project-test7/"/>
    <id>http://malone-ai.github.io/2025/03/16/project-test7/</id>
    <published>2025-03-16T06:45:40.000Z</published>
    <updated>2025-03-16T10:10:47.808Z</updated>
    
    <content type="html"><![CDATA[<h1>1. ç¼–è¾‘æ•°æ®</h1><h2 id="1-1-æµç¨‹">1.1 æµç¨‹</h2><ol><li>åœ¨ç¼–è¾‘çš„æŒ‰é’®ä¸Šé¢åŠ ä¸Šç‚¹å‡»äº‹ä»¶</li><li>å®šä¹‰å¼¹çª—å’Œè¡¨å•çš„é¡µé¢ä»£ç </li><li>ç‚¹å‡»è§¦å‘å¼¹çª—æ‰“å¼€(å°†è¡Œå¯¹è±¡çš„æ•°æ® row æ·±åº¦æ‹·è´ç»™ form å¯¹è±¡)</li><li>è¡¨å•åšä¸€ä¸‹æ•°æ®ç»‘å®šä»¥åŠè¡¨å•éªŒè¯</li><li>åå°è¦æœ‰å¯¹åº”çš„ä¿®æ”¹çš„æ¥å£æ¥æ¥å—æ•°æ®</li><li>ä¿®æ”¹çš„æ¥å£è´Ÿè´£æŠŠæ•°æ®æ›´æ–°åˆ°æ•°æ®åº“é‡Œé¢</li><li>è¡¨å•è¾“å…¥æ•°æ®åç‚¹å‡»ç¡®è®¤æŒ‰é’®ï¼ŒæŠŠè¡¨å•çš„æ•°æ®ä¼ ç»™åå°æ¥å£</li><li>åœ¨ä¿®æ”¹æˆåŠŸä¹‹åå†æ¬¡åŠ è½½è¡¨æ ¼çš„æ•°æ®ï¼Œå…³é—­å¼¹çª—</li></ol><h2 id="1-2-å‰ç«¯æ·»åŠ æŒ‰é’®å¹¶ç»‘å®šäº‹ä»¶">1.2 å‰ç«¯æ·»åŠ æŒ‰é’®å¹¶ç»‘å®šäº‹ä»¶</h2><p>åœ¨å‰ç«¯çš„è¡¨å•ä¸­æ·»åŠ ç¼–è¾‘å’Œåˆ é™¤æŒ‰é’®ï¼Œç¼–è¾‘è¯¥è¡¨å•é¡¹æˆ–è€…ç›´æ¥åˆ é™¤ã€‚</p><p>å…ˆåœ¨å‰ç«¯æ·»åŠ æŒ‰é’®ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table :data=<span class="string">&quot;data.tableData&quot;</span> style=<span class="string">&quot;width: 100%&quot;</span> :header-cell-style=<span class="string">&quot;&#123;color: &#x27;#333&#x27;, backgroundColor: &#x27;#eaf4FF&#x27;&#125;&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span> <span class="attr">width</span>=<span class="string">&quot;55&quot;</span>/&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span> <span class="attr">label</span>=<span class="string">&quot;è´¦å·&quot;</span>/&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span> <span class="attr">label</span>=<span class="string">&quot;åç§°&quot;</span>/&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;phone&quot;</span> <span class="attr">label</span>=<span class="string">&quot;ç”µè¯&quot;</span>/&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;email&quot;</span> <span class="attr">label</span>=<span class="string">&quot;é‚®ç®±&quot;</span>/&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;æ“ä½œ&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">icon</span>=<span class="string">&quot;Edit&quot;</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">icon</span>=<span class="string">&quot;Delete&quot;</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line">&lt;/el-table&gt;</span><br></pre></td></tr></table></figure><p>ä¸­çš„è¿™ä¸¤è¡Œï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button type=<span class="string">&quot;primary&quot;</span> icon=<span class="string">&quot;Edit&quot;</span> circle&gt;&lt;/el-button&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">icon</span>=<span class="string">&quot;Delete&quot;</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>ç„¶åå‰ç«¯ï¼š<br><img src="image.png" alt="alt text"><br><img src="/images/project-test7_1.png" alt=""></p><p>ç»™ç¼–è¾‘æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶<code>@click=&quot;handlerEdit()&quot;</code>ï¼Œå¹¶ä¸”éœ€è¦å°†é‚£ä¸€è¡Œçš„æ•°æ®æ‹¿è¿‡æ¥ã€‚</p><p>Element Plus çš„ el-table åœ¨æ¯ä¸€è¡Œéƒ½ä¼šä¸ºå…¶ slot æä¾›ä¸€ä¸ªä½œç”¨åŸŸå¯¹è±¡ï¼ˆscopeï¼‰ï¼Œè¯¥å¯¹è±¡åŒ…å«äº†å½“å‰è¡Œçš„æ•°æ®ï¼ˆå³ scope.rowï¼‰ï¼Œä»¥åŠå½“å‰åˆ—ä¿¡æ¯ã€‚ä½¿ç”¨ &lt;template #default=â€œscopeâ€&gt; å°±èƒ½æ‹¿åˆ°åŒ…å«ä¸€è¡Œæ•°æ®çš„ scope å¯¹è±¡ï¼Œç„¶åé€šè¿‡ scope.row è·å–è¯¥è¡Œçš„å®Œæ•´æ•°æ®ä¿¡æ¯</p><p>å› æ­¤ä¿®æ”¹ä¸ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;template #<span class="keyword">default</span>=<span class="string">&quot;scope&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">icon</span>=<span class="string">&quot;Edit&quot;</span> <span class="attr">circle</span> @<span class="attr">click</span>=<span class="string">&quot;handlerEdit(scope.row)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">icon</span>=<span class="string">&quot;Delete&quot;</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>å¹¶å°† scope.row ä¹Ÿå°±æ˜¯å°†é‚£è¡Œæ•°æ®ä¼ é€’ç»™ handlerEdit ã€‚</p><p>ç„¶åå®šä¹‰ handlerEdit æ–¹æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const handlerEdit = (row) =&gt; &#123;</span><br><span class="line">  data.form = row</span><br><span class="line">  data.formVisible = true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŠŠè¡Œå¯¹è±¡rowèµ‹å€¼ç»™dataçš„formå¯¹è±¡ï¼Œç„¶åé€šè¿‡formå¯¹è±¡ä¼ é€’ç»™åç«¯æ¥å£ã€‚ä½†æ˜¯å­˜åœ¨é—®é¢˜ã€‚</p><p>å½“ç‚¹ä¸‹ç¼–è¾‘æŒ‰é’®æ—¶ï¼Œå»ç¼–è¾‘åï¼Œæ²¡æŒ‰ä¸‹ä¿å­˜ï¼Œå‰ç«¯æ¸²æŸ“çš„æ•°æ®å°±å‘ç”Ÿå˜åŒ–äº†ã€‚è¿™æ˜¯å› ä¸º<strong>æµ…æ‹·è´</strong>çš„é—®é¢˜ã€‚</p><p>ç‚¹å‡»ç¼–è¾‘æŒ‰é’®æ—¶ç›´æ¥å°† tableData ä¸­æŸä¸€è¡Œå¯¹è±¡çš„å¼•ç”¨èµ‹å€¼ç»™äº† data.formï¼Œè€Œå¯¹è±¡æ˜¯<strong>å¼•ç”¨ç±»å‹</strong>ã€‚å¦‚æœåœ¨æœªä¿å­˜å‰ä¿®æ”¹äº†è¡¨å•æ•°æ®ï¼Œç”±äºå®ƒä»¬<strong>å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡</strong>ï¼Œè¡¨æ ¼ä¸­çš„æ•°æ®ä¹Ÿä¼šéšä¹‹å˜åŒ–ã€‚ä¸ºé¿å…è¿™ç§æƒ…å†µï¼Œå› ä½¿ç”¨<strong>æ·±æ‹·è´</strong>ï¼Œåœ¨èµ‹å€¼æ—¶åˆ›å»ºä¸€ä¸ªå‰¯æœ¬ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handlerEdit</span> = (<span class="params">row</span>) =&gt; &#123;</span><br><span class="line">  data.<span class="property">form</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(row))</span><br><span class="line">  data.<span class="property">formVisible</span> = <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>JSON.parse(JSON.stringify(row))</code>é€šè¿‡ JSON çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–åˆ›å»ºäº†ä¸€ä¸ª<strong>æ·±æ‹·è´</strong>ï¼Œç”Ÿæˆäº†ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸åŸå§‹å¯¹è±¡å®Œå…¨ç‹¬ç«‹ã€‚</p><h2 id="1-3-æ·»åŠ åç«¯æ¥å£">1.3 æ·»åŠ åç«¯æ¥å£</h2><p>ç°åœ¨å¦‚æœç‚¹å‡»ç¼–è¾‘æŒ‰é’®ï¼Œç¼–è¾‘åç‚¹å‡»ä¿å­˜æŒ‰é’®æ—¶è§¦å‘çš„åç«¯æ¥å£æ˜¯<code>add</code>æ¥å£ã€‚ä¹Ÿå°±æ˜¯æ–°å¢äº†ä¸€ä¸ªæ•°æ®ï¼Œè€Œä¸æ˜¯æ›´æ–°ã€‚å› æ­¤åç«¯æ·»åŠ ä¸€ä¸ª<code>update</code>æ¥å£ã€‚</p><p>controllerå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/update&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> Admin admin)</span> &#123;</span><br><span class="line">    adminService.update(admin);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>serviceå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Admin admin)</span> &#123;</span><br><span class="line">    adminMapper.updateById(admin);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>mapperå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">updateById</span><span class="params">(Admin admin)</span>;</span><br></pre></td></tr></table></figure><p>XMLæ˜ å°„ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateById&quot;</span>&gt;</span></span><br><span class="line">    update `admin` set username = #&#123;username&#125;, password = #&#123;password&#125;, name = #&#123;name&#125;, phone = #&#123;phone&#125;, email = #&#123;email&#125;</span><br><span class="line">    where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure><p>XMLæ˜ å°„é‡Œæœ€åçš„<code>where id = #&#123;id&#125;</code>å¾ˆå…³é”®ï¼Œå› ä¸ºä¿®æ”¹ä¸€å®šä¼šæœ‰ä¸€ä¸ªä¸»é”®IDï¼Œæ²¡æœ‰å°±ä¸èƒ½ä¿®æ”¹æ•°æ®ã€‚</p><h2 id="1-4-å‰ç«¯æ·»åŠ ç»‘å®šçš„äº‹ä»¶">1.4 å‰ç«¯æ·»åŠ ç»‘å®šçš„äº‹ä»¶</h2><p>æ–°å¢æ•°æ®æ—¶ç‚¹å‡»ä¿å­˜æŒ‰é’®åï¼Œè°ƒç”¨äº†å‰ç«¯ä¸­å®šä¹‰çš„<code>add</code>æ–¹æ³•å»å‘åç«¯å‘é€è¯·æ±‚ã€‚</p><p>å’Œæ–°å¢æ•°æ®ç±»ä¼¼ï¼Œä¿®æ”¹æ—¶ä¹Ÿå¦‚æ­¤ã€‚å‰ç«¯æ·»åŠ ä¸€ä¸ªupdateæ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">update</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  formRef.<span class="property">value</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (valid) &#123; <span class="comment">// éªŒè¯é€šè¿‡æ—¶</span></span><br><span class="line">      request.<span class="title function_">put</span>(<span class="string">&quot;/admin/update&quot;</span>, data.<span class="property">form</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="string">&#x27;200&#x27;</span>) &#123;</span><br><span class="line">          data.<span class="property">formVisible</span> = <span class="literal">false</span></span><br><span class="line">          <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(<span class="string">&#x27;ä¿®æ”¹æˆåŠŸ&#x27;</span>)</span><br><span class="line">          <span class="title function_">load</span>()</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          data.<span class="property">formVisible</span> = <span class="literal">false</span></span><br><span class="line">          <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™é‡Œå‘åç«¯æäº¤è¯·æ±‚ä½¿ç”¨çš„æ˜¯<code>put</code>è€Œä¸æ˜¯<code>post</code>ï¼Œè¿™æ˜¯å› ä¸ºï¼š<br>åœ¨ RESTful é£æ ¼ä¸­ï¼Œå‘åå°æäº¤è¯·æ±‚æ—¶é€šå¸¸ä½¿ç”¨ä¸åŒçš„ HTTP æ–¹æ³•æ¥è¡¨è¾¾ä¸åŒçš„æ“ä½œè¯­ä¹‰ï¼š</p><ul><li>POST ç”¨äºæ–°å¢æ•°æ®ï¼Œå› ä¸ºæ–°å¢æ“ä½œæ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„èµ„æºã€‚</li><li>PUT ç”¨äºä¿®æ”¹æ•°æ®ï¼Œå› ä¸ºä¿®æ”¹æ“ä½œæ˜¯æ›´æ–°å·²å­˜åœ¨çš„èµ„æºã€‚<br>è¿™ç§åŒºåˆ†ä¸ä»…è®©æ¥å£è®¾è®¡æ›´ç¬¦åˆ HTTP æ ‡å‡†ï¼Œä¹Ÿè®©ä»£ç æ›´å…·å¯è¯»æ€§ã€‚</li></ul><p>æ¥ä¸‹æ¥è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œç‚¹å‡»ç¼–è¾‘æŒ‰é’®åè¿›è¡Œä¿®æ”¹ï¼Œç„¶åç‚¹å‡»ä¿å­˜æŒ‰é’®ã€‚è¿™ä¸ªä¿å­˜æŒ‰é’®ç»‘å®šçš„äº‹ä»¶æ˜¯<code>add</code>ï¼Œæ€ä¹ˆè®©æ–°å¢çš„ä¿å­˜æŒ‰é’®å’Œç¼–è¾‘çš„ä¿å­˜æŒ‰é’®ç»‘å®šä¸åŒçš„äº‹ä»¶ã€‚</p><p>è®©ä¿å­˜æŒ‰é’®<strong>ç»‘å®šsaveäº‹ä»¶</strong>ï¼Œç„¶åé‡æ–°å®šä¹‰ä¸€ä¸ªsaveæ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">save</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  data.<span class="property">form</span>.<span class="property">id</span> ? <span class="title function_">update</span>() : <span class="title function_">add</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>saveæ–¹æ³•åˆ¤æ–­formå¯¹è±¡é‡Œçš„idå±æ€§æ¥åˆ¤æ–­ï¼Œå¦‚æœidä¸ä¸ºç©ºå°±æ‰§è¡Œupdateå¦åˆ™æ‰§è¡Œaddã€‚è¿™æ ·å°±è®©ä¿å­˜æŒ‰é’®åŒæ—¶å…¼å®¹äº†updateå’Œaddã€‚</p><p>æ­¤æ—¶å†å»ç¼–è¾‘æ•°æ®åä¿å­˜ï¼Œæç¤º<code>æœªæ‰¾åˆ°æ¥å£</code>ï¼ŒçŠ¶æ€ç ä¸º404ã€‚</p><p>åŸå› æ˜¯å‰ç«¯è°ƒç”¨çš„æ˜¯ PUT è¯·æ±‚ï¼Œè€Œåç«¯çš„ <code>AdminController.update</code> æ¥å£ä½¿ç”¨çš„æ˜¯ @PostMappingã€‚HTTP æ–¹æ³•ä¸åŒ¹é…å¯¼è‡´è·¯ç”±æ‰¾ä¸åˆ°ï¼Œä»è€Œè¿”å› 404ã€‚ä¿®æ”¹åç«¯æ˜ å°„ä¸º @PutMapping å³å¯ã€‚</p><h1>2. åˆ é™¤æ•°æ®</h1><h2 id="2-1-ç»‘å®šäº‹ä»¶å¹¶å®šä¹‰å‰ç«¯æ¥å£">2.1 ç»‘å®šäº‹ä»¶å¹¶å®šä¹‰å‰ç«¯æ¥å£</h2><p>å°†åˆ é™¤æŒ‰é’®ç»‘å®šäº‹ä»¶ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button type=<span class="string">&quot;danger&quot;</span> icon=<span class="string">&quot;Delete&quot;</span> circle <span class="meta">@click</span>=<span class="string">&quot;del(scope.row.id)&quot;</span>&gt;&lt;/el-button&gt;</span><br></pre></td></tr></table></figure><p>ç»‘å®š<code>del</code>äº‹ä»¶ï¼Œæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯é‚£è¡Œæ•°æ®çš„idã€‚</p><p>ç„¶åå®šä¹‰delæ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">del</span> = (<span class="params">id</span>) =&gt; &#123;</span><br><span class="line">  <span class="title class_">ElMessageBox</span>.<span class="title function_">confirm</span>(<span class="string">&quot;è¯¥æ“ä½œä¸å¯é€†ï¼Œæ‚¨ç¡®è®¤åˆ é™¤æ”¹è¡Œæ•°æ®å—ï¼Ÿ&quot;</span>, <span class="string">&#x27;åˆ é™¤ç¡®è®¤&#x27;</span>, &#123;<span class="attr">type</span>: <span class="string">&#x27;warning&#x27;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    request.<span class="title function_">delete</span>(<span class="string">&#x27;/admin/delete/&#x27;</span> + id).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="string">&#x27;200&#x27;</span>) &#123;</span><br><span class="line">        <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(<span class="string">&#x27;åˆ é™¤æˆåŠŸ&#x27;</span>)</span><br><span class="line">        <span class="title function_">load</span>()</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-2-å®šä¹‰åç«¯æ¥å£">2.2 å®šä¹‰åç«¯æ¥å£</h2><p>å…ˆæ˜¯controllerå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DeleteMapping(&quot;/delete/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span> &#123;</span><br><span class="line">    adminService.delete(admin);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ·»åŠ <code>@DeleteMapping</code>æ³¨è§£ï¼Œè¡¨ç¤ºè¯¥æ–¹æ³•ä¸“é—¨å¤„ç† HTTP DELETE è¯·æ±‚ï¼›åé¢çš„<code>/&#123;id&#125;</code>æ˜¯è·¯å¾„å‚æ•°çš„å ä½ç¬¦ï¼Œå®ƒå…è®¸å®¢æˆ·ç«¯é€šè¿‡ URL ä¼ é€’ä¸€ä¸ªå…·ä½“çš„ id å€¼ã€‚</p><p>æ–¹æ³•å‚æ•°ä¸Šçš„ <code>@PathVariable Integer id</code> è¡¨ç¤ºå°† URL ä¸­å¯¹åº”ä½ç½®çš„å‚æ•°è§£æå¹¶èµ‹å€¼ç»™ <code>id</code> å‚æ•°ï¼Œä»è€Œåœ¨æ–¹æ³•å†…éƒ¨ä½¿ç”¨ã€‚</p><p>ä¾‹å¦‚ï¼Œå½“è¯·æ±‚ DELETE <code>/admin/delete/5</code> æ—¶ï¼ŒSpring ä¼šå°† 5 èµ‹å€¼ç»™å‚æ•° <code>id</code>ã€‚</p><p>ç„¶åserviceå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">    adminMapper.deleteById(id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åmapperå±‚ï¼Œç›´æ¥ç”¨<strong>æ³¨è§£å¼SQL</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Delete(&quot;delete from `admin` where id = #&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Integer id)</span>;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å®ç°äº†å•è¡Œåˆ é™¤ã€‚</p><h1>3. æ‰¹é‡åˆ é™¤</h1><h2 id="3-1-ç»‘å®šäº‹ä»¶">3.1 ç»‘å®šäº‹ä»¶</h2><p>el-tableæœ‰ä¸€ä¸ªäº‹ä»¶<code>@selection-change</code>ï¼Œè¿™ä¸ªå°±æ˜¯å¤šé€‰äº‹ä»¶ã€‚</p><p>å› æ­¤ç»™el-tableæ·»åŠ <code>@selection-change=&quot;handlerSelectionChange(rows)&quot;</code>ï¼Œç„¶åå®šä¹‰handlerSelectionChangeæ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handlerSelectionChange</span> = (<span class="params">rows</span>) =&gt; &#123;</span><br><span class="line">    data.<span class="property">rows</span> = rows</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å®ç°äº†é€‰ä¸­å¤šè¡Œï¼Œç„¶åå°±æ˜¯ç‚¹å‡»<code>æ‰¹é‡åˆ é™¤</code>æŒ‰é’®åˆ é™¤ã€‚</p><p>å› æ­¤<code>æ‰¹é‡åˆ é™¤</code>æŒ‰é’®ä¹Ÿè¦ç»‘å®šäº‹ä»¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button type=<span class="string">&quot;danger&quot;</span> @click=<span class="string">&quot;deleteBatch&quot;</span>&gt;æ‰¹é‡åˆ é™¤&lt;/el-button&gt;</span><br></pre></td></tr></table></figure><p>ç„¶åå®šä¹‰deleteBatchæ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">deleteBatch</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (data.<span class="property">rows</span>.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="title class_">ElMessage</span>.<span class="title function_">warning</span>(<span class="string">&#x27;è¯·é€‰æ‹©åå†è¿›è¡Œæ­¤æ“ä½œ&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title class_">ElMessageBox</span>.<span class="title function_">confirm</span>(<span class="string">&quot;è¯¥æ“ä½œä¸å¯é€†ï¼Œæ‚¨ç¡®è®¤åˆ é™¤å—ï¼Ÿ&quot;</span>, <span class="string">&#x27;åˆ é™¤ç¡®è®¤&#x27;</span>, &#123;<span class="attr">type</span>: <span class="string">&#x27;warning&#x27;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    request.<span class="title function_">delete</span>(<span class="string">&#x27;/admin/deleteBatch/&#x27;</span>, &#123;<span class="attr">data</span>: data.<span class="property">rows</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="string">&#x27;200&#x27;</span>) &#123;</span><br><span class="line">        <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(<span class="string">&#x27;æ‰¹é‡åˆ é™¤æˆåŠŸ&#x27;</span>)</span><br><span class="line">        <span class="title function_">load</span>()</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–¹æ³•ä¸€å¼€å§‹å…ˆæ˜¯åˆ¤æ–­æœ‰æ²¡æœ‰è¿›è¡Œé€‰æ‹©ã€‚å¦åˆ™ï¼Œä¸é€‰æ‹©ä»»ä½•è¡Œæ•°æ®ä¹Ÿèƒ½è¿›è¡Œæ“ä½œï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸åˆé€‚çš„ã€‚</p><p>å‘é€è¯·æ±‚æ—¶å°±ä¸èƒ½åƒå•ä¸ªåˆ é™¤ä¸€æ ·å‘é€ä¸€ä¸ªidäº†ï¼Œå¾—å‘é€æˆæ‰¹çš„idã€‚è¿™é‡Œå…¶å®æ˜¯å°†è¦åˆ é™¤çš„æ•°æ®å¯¹è±¡çš„æ‰€æœ‰å±æ€§éƒ½å‘è¿‡å»äº†ã€‚</p><p>Axios çš„ delete æ–¹æ³•å…è®¸åœ¨é…ç½®å¯¹è±¡ä¸­é€šè¿‡ data å±æ€§ä¼ é€’è¯·æ±‚ä½“ï¼Œä»è€Œå®ç°å°†å¤šä¸ª id ä½œä¸º JSON æ•°æ®å‘é€åˆ°åç«¯ï¼Œä»è€Œå®Œæˆæ‰¹é‡åˆ é™¤æ“ä½œ</p><p>deleteBatch é€šè¿‡ Axios çš„ delete æ–¹æ³•ä¼ é€’äº†ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œå…¶ä¸­é…ç½®é¡¹ data åŒ…å«äº†æ‰€æœ‰é€‰ä¸­çš„æ•°æ®ã€‚Axios ä¼šå°† { data: data.rows } ä¸­çš„ data ä½œä¸ºè¯·æ±‚ä½“å‘é€å‡ºå»ï¼Œä¸”æŒ‰ç…§ JSON æ ¼å¼ä¼ è¾“ã€‚åç«¯å°±å¯ä»¥é€šè¿‡<code>@RequestBody List&lt;Admin&gt; admin</code>æ¥æ¥æ”¶è¿™ä¸€æ‰¹è¦åˆ é™¤çš„æ•°æ®å¯¹è±¡ã€‚</p><h2 id="3-2-å®šä¹‰åç«¯æ¥å£">3.2 å®šä¹‰åç«¯æ¥å£</h2><p>controllerå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DeleteMapping(&quot;/deleteBatch&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">deleteBatch</span><span class="params">(<span class="meta">@RequestBody</span> List&lt;Admin&gt; list)</span> &#123;</span><br><span class="line">    adminService.deleteBatch(list);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>serviceå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteBatch</span><span class="params">(List&lt;Admin&gt; list)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (Admin admin : list) &#123;</span><br><span class="line">        adminMapper.deleteById(admin.getId());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œç›´æ¥è°ƒç”¨mapperå±‚å®šä¹‰å¥½çš„å•ä¸ªåˆ é™¤çš„æ¥å£ã€‚</p><p>è¿™æ ·å°±å®ç°äº†æ‰¹é‡åˆ é™¤äº†ã€‚</p><p>å¦å¤–ï¼Œå¿…é¡»ç»™Admin.vueçš„dataå¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ª<code>rows: []</code>å±æ€§ï¼Œæ³¨æ„æ˜¯æ–¹æ‹¬å·ï¼Œä¸æ˜¯èŠ±æ‹¬å·ã€‚</p><p><code>data.rows</code> ç”¨äºå­˜å‚¨é€‰ä¸­çš„å¤šè¡Œæ•°æ®ï¼Œè¿™äº›æ•°æ®éœ€è¦ä½œä¸ºä¸€ä¸ªé›†åˆå¤„ç†ã€‚æ•°ç»„ (<code>[]</code>) æ˜¯ä¸€ç§é€‚åˆå­˜å‚¨å¤šä¸ªå…ƒç´ çš„æ•°æ®ç»“æ„ï¼Œå¹¶ä¸”å…·æœ‰ <code>length</code> å±æ€§å’Œå¸¸ç”¨çš„æ•°ç»„æ–¹æ³•ï¼ˆå¦‚ <code>push</code>, <code>splice</code> ç­‰ï¼‰ï¼Œä¾¿äºåˆ¤æ–­æ•°æ®æ•°é‡å’Œæ“ä½œæ•°æ®é›†åˆã€‚è€Œ <code>&#123;&#125;</code> è¡¨ç¤ºä¸€ä¸ªå¯¹è±¡ï¼Œä¸å…·å¤‡è¿™äº›ç‰¹æ€§ï¼Œæ‰€ä»¥ä¸èƒ½æ­£ç¡®åˆ¤æ–­é€‰ä¸­è¡Œçš„æ•°é‡ï¼Œä¹Ÿæ— æ³•ä½œä¸ºä¸€ä¸ªåˆ—è¡¨è¿›è¡Œè¿­ä»£å’Œåˆ é™¤æ“ä½œã€‚å› æ­¤ï¼Œå¿…é¡»ä½¿ç”¨æ•°ç»„ <code>[]</code> æ¥å­˜å‚¨å¤šä¸ªé€‰ä¸­è¡Œçš„æ•°æ®ã€‚</p><h1>å£°æ˜</h1><p>æœ¬æ–‡æ˜¯å¯¹Bç«™è§†é¢‘<a href="https://www.bilibili.com/video/BV1w3PuewEfk?spm_id_from=333.788.videopod.sections&amp;vd_source=a0f19e79b7da02f4fa318d91be5bc86a">ã€å¸¦å°ç™½åšæ¯•è®¾ã€‘06. Springboot3+vue3å®ç°å¢åˆ æ”¹æŸ¥ã€åˆ†é¡µæŸ¥è¯¢ã€æ‰¹é‡åˆ é™¤ï¼ˆä¸‹ï¼‰</a>çš„å­¦ä¹ è®°å½•ï¼Œä¾µæƒè”ç³»åˆ ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;1. ç¼–è¾‘æ•°æ®&lt;/h1&gt;
&lt;h2 id=&quot;1-1-æµç¨‹&quot;&gt;1.1 æµç¨‹&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨ç¼–è¾‘çš„æŒ‰é’®ä¸Šé¢åŠ ä¸Šç‚¹å‡»äº‹ä»¶&lt;/li&gt;
&lt;li&gt;å®šä¹‰å¼¹çª—å’Œè¡¨å•çš„é¡µé¢ä»£ç &lt;/li&gt;
&lt;li&gt;ç‚¹å‡»è§¦å‘å¼¹çª—æ‰“å¼€(å°†è¡Œå¯¹è±¡çš„æ•°æ® row æ·±åº¦æ‹·è´ç»™ form å¯¹è±¡)&lt;/li&gt;</summary>
      
    
    
    
    <category term="Java é¡¹ç›®" scheme="http://malone-ai.github.io/categories/Java-%E9%A1%B9%E7%9B%AE/"/>
    
    
    <category term="Java" scheme="http://malone-ai.github.io/tags/Java/"/>
    
    <category term="Springboot" scheme="http://malone-ai.github.io/tags/Springboot/"/>
    
  </entry>
  
  <entry>
    <title>Springboot3 + Vue3 å®ç°è¡¨å•éªŒè¯</title>
    <link href="http://malone-ai.github.io/2025/03/15/project-test6/"/>
    <id>http://malone-ai.github.io/2025/03/15/project-test6/</id>
    <published>2025-03-15T12:00:54.000Z</published>
    <updated>2025-03-16T06:44:06.458Z</updated>
    
    <content type="html"><![CDATA[<h1>1. æ–°å¢æ•°æ®</h1><ul><li>åŸºæœ¬æ­¥éª¤ï¼š<ol><li>åœ¨æ–°å¢çš„æŒ‰é’®ä¸Šé¢åŠ ä¸Šç‚¹å‡»äº‹ä»¶</li><li>å®šä¹‰å¼¹çª—å’Œè¡¨å•</li><li>ç‚¹å‡»è§¦å‘å¼¹çª—æ‰“å¼€</li><li>è¡¨å•åšä¸€ä¸‹æ•°æ®ç»‘å®šä»¥åŠè¡¨å•éªŒè¯</li><li>åå°è¦æœ‰å¯¹åº”çš„æ–°å¢çš„æ¥å£æ¥æ¥å—æ•°æ®</li><li>æ–°å¢çš„æ¥å£è´Ÿè´£æŠŠæ•°æ®æ’å…¥åˆ°æ•°æ®åº“é‡Œé¢</li><li>è¡¨å•è¾“å…¥æ•°æ®åç‚¹å‡»ç¡®è®¤æŒ‰é’®ï¼ŒæŠŠè¡¨å•çš„æ•°æ®ä¼ ç»™åå°æ¥å£</li><li>åœ¨æ–°å¢æˆåŠŸåé‡æ–°åŠ è½½è¡¨æ ¼</li></ol></li></ul><hr><h1>2. æŒ‰é’®ç»‘å®šäº‹ä»¶</h1><p>ä¸€å…±æœ‰ä¸‰ä¸ªæŒ‰é’®éœ€è¦ç»‘å®šäº‹ä»¶ï¼š</p><ul><li>æ–°å¢æŒ‰é’®<ul><li>ç‚¹å‡»å¼¹å‡ºè¡¨å•</li></ul></li><li>ç‚¹å‡»æ–°å¢æŒ‰é’®åçš„å¼¹çª—ä¸­çš„ä¿å­˜å’Œå–æ¶ˆæŒ‰é’®<ul><li>ä¿å­˜æŒ‰é’®<ul><li>ç‚¹å‡»ä¿å­˜è°ƒç”¨åå°æ¥å£æ’å…¥æ•°æ®</li><li>æ¸…ç©ºå‰ç«¯ç”¨äºæ¥æ”¶æ•°æ®çš„å¯¹è±¡</li><li>åˆ·æ–°åŠ è½½</li></ul></li><li>å–æ¶ˆæŒ‰é’®<ul><li>ç‚¹å‡»å–æ¶ˆ</li><li>æ¸…ç©ºå‰ç«¯ç”¨äºæ¥æ”¶æ•°æ®çš„å¯¹è±¡</li></ul></li></ul></li></ul><p>åœ¨Admin.vueä¸­çš„â€œæ–°å¢â€æŒ‰é’®ä¸­æ·»åŠ <code>@click=&quot;handlerAdd&quot;</code>ï¼ŒhanleAddå‡½æ•°æ˜¯éœ€è¦æˆ‘ä»¬å®ç°çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºæ–°å¢ã€‚</p><hr><h1>3. å®šä¹‰å¼¹çª—å’Œè¡¨å•</h1><p>ä»Element-Pluså®˜ç½‘ç›´æ¥æ‰¾ä¸€ä¸ªæ”¹ä¸€æ”¹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-dialog title=<span class="string">&quot;æ–°å¢ç®¡ç†å‘˜ä¿¡æ¯&quot;</span> v-model=<span class="string">&quot;data.formVisible&quot;</span> width=<span class="string">&quot;500&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;data.form&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;è´¦å·&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.username&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;åç§°&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.name&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;ç”µè¯&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.phone&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;é‚®ç®±&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.email&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> #<span class="attr">footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;data.formVisible = false&quot;</span>&gt;</span>å– æ¶ˆ<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;data.formVisible = false&quot;</span>&gt;</span>ä¿ å­˜<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">&lt;/el-dialog&gt;</span><br></pre></td></tr></table></figure><p>ç›´æ¥ç²˜è´´åˆ°Admin.vueä¸­æœ€åä¸€ä¸ª<code>&lt;/div&gt;</code>çš„å‰é¢ï¼Œå¹¶å°†<code>v-model</code>è®¾ç½®ä¸º<code>data.formVisible</code>ï¼ˆåœ¨ Vue ä¸­ï¼Œv-model æ˜¯ä¸€ç§ç”¨äºå®ç°è¡¨å•å…ƒç´ å’Œç»„ä»¶æ•°æ®çš„åŒå‘ç»‘å®šçš„è¯­æ³•ç³–ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä½ åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ v-model æ—¶ï¼ŒVueä¼šè‡ªåŠ¨å°†ç»„ä»¶çš„å€¼ä¸ä½ çš„å“åº”å¼æ•°æ®è¿›è¡Œç»‘å®šï¼Œå¹¶åœ¨æ•°æ®æˆ–è§†å›¾å˜åŒ–æ—¶è‡ªåŠ¨åŒæ­¥æ›´æ–°ã€‚ä¾‹å¦‚ï¼Œåœ¨ Admin.vue ä¸­ï¼š</p><p>åœ¨<code>&lt;el-input v-model=&quot;data.username&quot;&gt;</code>ä¸­ï¼Œè¾“å…¥æ¡†çš„å†…å®¹ä¼šå’Œ data.username ç»‘å®šã€‚<br>åœ¨<code>&lt;el-pagination v-model:current-page=&quot;data.pageNum&quot;&gt;</code>ä¸­ï¼Œå½“å‰é¡µç ä¼šå’Œ data.pageNum åŒæ­¥ï¼Œå½“ç”¨æˆ·ç¿»é¡µæ—¶ï¼Œdata.pageNum è‡ªåŠ¨æ›´æ–°ã€‚<br>è¿™ç§åŒå‘ç»‘å®šå¯ä»¥å‡å°‘æ‰‹åŠ¨ç›‘å¬äº‹ä»¶å’Œæ›´æ–°æ•°æ®çš„ä»£ç é‡ï¼Œä½¿å¾—æ•°æ®ä¸è§†å›¾çš„åŒæ­¥æ›´åŠ ç®€æ´å’Œé«˜æ•ˆï¼‰ã€‚</p><p>ç„¶ååœ¨dataä¸­æ–°å¢ä¸€ä¸ª<code>formVisible</code>å±æ€§ï¼Œå¹¶è®¾ç½®é»˜è®¤å€¼ä¸ºfalseï¼Œä»¥åŠä¸€ä¸ªformç©ºå¯¹è±¡ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">pageNum</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">pageSize</span>: <span class="number">5</span>,</span><br><span class="line">  <span class="attr">total</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">tableData</span>: [],</span><br><span class="line">  <span class="attr">formVisible</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">form</span>: &#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>formVisibleè®¾ç½®ä¸ºfalseæ„ä¸ºå¼¹çª—é»˜è®¤ä¸å¯è§ã€‚å› æ­¤è¦æ˜¾ç¤ºå¼¹å‡ºåªéœ€åœ¨handlerAddå‡½æ•°é‡Œè®¾ç½®formVisibleä¸ºtrueå³å¯ã€‚</p><p>formå¯¹è±¡æ˜¯ç”¨æ¥ç»‘å®šæ•°æ®çš„ï¼Œå®ƒå¯ä»¥åœ¨å¼¹çª—æ‰“å¼€æ—¶æ¥æ”¶æ•°æ®ã€‚<code>el-form-item</code>ç»„ä»¶é‡Œçš„<code>v-model</code>å±æ€§å°±æ˜¯ç”¨æ¥ç»‘å®šå¯¹åº”çš„å±æ€§çš„ã€‚</p><p>åœ¨å¼¹çª—å…³é—­åè¦æ‰‹åŠ¨æ¸…ç©ºformå¯¹è±¡ï¼Œä¸ç„¶ä¸‹ä¸€æ¬¡åœ¨æ‰“å¼€å¼¹çª—æ—¶ä¼šæœ‰ä¸Šä¸€æ¬¡çš„ä¿¡æ¯çš„æ®‹ç•™ã€‚</p><p>å› æ­¤<code>handlerAdd</code>å‡½æ•°ä¸ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handlerAdd</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  data.<span class="property">formVisible</span> = <span class="literal">true</span></span><br><span class="line">  data.<span class="property">form</span> = &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨å†å»ç‚¹å‡»æ–°å¢æŒ‰é’®ä¼šå¼¹å‡ºï¼š<br><img src="image.png" alt="alt text"><br><img src="/images/project-test6_1.png" alt=""></p><hr><h1>4. æ–°å¢æ¥å£</h1><h2 id="4-1-controllerå±‚">4.1 controllerå±‚</h2><p>åœ¨controlleræ¥å£å±‚src/main/java/com/example/controller/AdminController.javaä¸­å®šä¹‰æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/add&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">add</span><span class="params">(<span class="meta">@RequestBody</span> Admin admin)</span> &#123;</span><br><span class="line">    adminService.add(admin);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>@PostMapping</code>æ³¨è§£å‘Šè¯‰springè¿™æ˜¯ä¸€ä¸ªPOSTè¯·æ±‚ã€‚POST è¯·æ±‚ä¸€èˆ¬ç”¨äºå‘æœåŠ¡å™¨æäº¤æ•°æ®ï¼Œåˆ›å»ºèµ„æºã€‚è€Œ GET è¯·æ±‚é€šå¸¸ç”¨äºæŸ¥è¯¢æ•°æ®ï¼Œä¸é€‚åˆç”¨äºæ•°æ®æ–°å¢ã€‚ä½¿ç”¨ POST æ›´ç¬¦åˆ HTTP åè®®è®¾è®¡åŸåˆ™ã€‚</p><p><code>@RequestBody</code>æ³¨è§£å‘Šè¯‰ Spring ä»è¯·æ±‚ä½“ä¸­è§£æ JSON æ•°æ®ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸º Admin å¯¹è±¡ã€‚ï¼ˆå› ä¸ºåœ¨ POST è¯·æ±‚ä¸­ï¼Œæ–°å¢çš„èµ„æºæ•°æ®é€šå¸¸è¾ƒå¤šä¸”ç»“æ„å¤æ‚ï¼Œå°†æ•°æ®æ”¾åœ¨è¯·æ±‚ä½“ä¸­ä»¥ JSON æ ¼å¼ä¼ é€’æ›´ä¸ºåˆç†ã€‚ä½¿ç”¨ @RequestBody æ³¨è§£ï¼ŒSpring ä¼šè‡ªåŠ¨å°†è¯·æ±‚ä½“ä¸­çš„ JSON æ•°æ®<strong>ååºåˆ—åŒ–</strong>ä¸º Admin å¯¹è±¡ï¼Œä»è€Œæ›´æ–¹ä¾¿åœ°å¤„ç†å¤æ‚å¯¹è±¡ï¼‰</p><h2 id="4-2-serviceå±‚">4.2 serviceå±‚</h2><p>æ¥ä¸‹æ¥åœ¨src/main/java/com/example/service/AdminService.javaä¸­æ·»åŠ serviceå±‚æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Admin admin)</span> &#123;</span><br><span class="line">    adminMapper.insert(admin);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-3-mapperå±‚">4.3 mapperå±‚</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/main/java/com/example/mapper/AdminMapper.java</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Admin admin)</span> &#123;</span><br><span class="line">        adminMapper.insert(admin);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>ç„¶åXMLæ˜ å°„ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// src/main/resources/mapper/AdminMapper.xml</span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span>&gt;</span></span><br><span class="line">    insert into `admin` (username,  password, name, phone, email)</span><br><span class="line">    values(#&#123;username&#125;, #&#123;password&#125;, #&#123;name&#125;, #&#123;phone&#125;, #&#123;email&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h1>5. ä¿å­˜æŒ‰é’®ç»‘å®šäº‹ä»¶</h1><p>å°†ä¿å­˜æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶<code>@click=&quot;add&quot;</code>ï¼Œç„¶åå»åˆ›å»ºaddæ–¹æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">add</span>= (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  request.<span class="title function_">post</span>(<span class="string">&quot;/admin/add&quot;</span>, data.<span class="property">form</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="string">&#x27;200&#x27;</span>) &#123;</span><br><span class="line">      data.<span class="property">formVisible</span> = <span class="literal">false</span></span><br><span class="line">      <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(<span class="string">&#x27;æ–°å¢æˆåŠŸ&#x27;</span>)</span><br><span class="line">      <span class="title function_">load</span>()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      data.<span class="property">formVisible</span> = <span class="literal">false</span></span><br><span class="line">      <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡½æ•°é‡Œé€šè¿‡requestå¯¹è±¡ä¸­çš„postè¯·æ±‚å°†æ•°æ®å‘ç»™åç«¯ï¼Œç„¶ååç«¯å°†è¯·æ±‚æˆåŠŸä¸å¦çš„ç»“æœä¼ å›æ¥ä½œè¿”å›å€¼ã€‚å‰ç«¯æ ¹æ®è¿™ä¸ªç»“æœæ¥åˆ¤æ–­è¯·æ±‚æ˜¯å¦æˆåŠŸï¼š</p><ul><li>è¿”å›çš„çŠ¶æ€ç ä¸º200ï¼Œè¯·æ±‚æˆåŠŸ<ul><li>å…³é—­å¼¹çª—</li><li>å¼¹å‡ºæ–°çª—å£æç¤ºæˆåŠŸ</li><li>é‡æ–°åŠ è½½è¡¨æ ¼</li></ul></li><li>ä¸ä¸º200ï¼Œè¯·æ±‚å¤±è´¥<ul><li>å…³é—­å¼¹çª—</li><li>å¼¹çª—æç¤ºå¤±è´¥</li></ul></li></ul><hr><h1>6. è¡¨å•éªŒè¯</h1><p>åšè¡¨å•éªŒè¯æ˜¯å› ä¸ºåœ¨å‰ç«¯æ’å…¥æ•°æ®æ—¶éœ€è¦å¡«å››æ¡ä¿¡æ¯ï¼Œä½†æ˜¯å‘ç°å¡«ä¸€æ¡ä¿¡æ¯ä¹Ÿèƒ½æ–°å¢æ•°æ®ã€‚</p><p>dialogå¼¹çª—ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-dialog title=<span class="string">&quot;æ–°å¢ç®¡ç†å‘˜ä¿¡æ¯&quot;</span> v-model=<span class="string">&quot;data.formVisible&quot;</span> width=<span class="string">&quot;500&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> #<span class="attr">footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;data.formVisible = false&quot;</span>&gt;</span>å– æ¶ˆ<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;add&quot;</span>&gt;</span>ä¿ å­˜<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">&lt;/el-dialog&gt;</span><br></pre></td></tr></table></figure><p>è¡¨å•é¡¹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-dialog title=<span class="string">&quot;æ–°å¢ç®¡ç†å‘˜ä¿¡æ¯&quot;</span> v-model=<span class="string">&quot;data.formVisible&quot;</span> width=<span class="string">&quot;500&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;data.form&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding: 20px 30px 10px 0&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;è´¦å·&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.username&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;åç§°&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.name&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;ç”µè¯&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.phone&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;é‚®ç®±&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;data.form.email&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> #<span class="attr">footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;data.formVisible = false&quot;</span>&gt;</span>å– æ¶ˆ<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;add&quot;</span>&gt;</span>ä¿ å­˜<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">&lt;/el-dialog&gt;</span><br></pre></td></tr></table></figure><p>è¡¨å•éªŒè¯æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>el-form ä¸Šå¿…é¡»æœ‰ä¸‰ä¸ªå±æ€§</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ref=&quot;formRef&quot; :model=&quot;data.form&quot; :rules=&quot;data.rules&quot;</span><br></pre></td></tr></table></figure><p>rulesæ˜¯dataä¸­çš„ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨æ¥æè¿°è¡¨å•è§„åˆ™</p><ol start="2"><li><p>åœ¨el-form-itemä¸Šå†™ä¸Šè¡¨å•é¡¹çš„propå±æ€§<br>propå±æ€§è¦ä¸æ•°æ®çš„å±æ€§åç§°ä¸€è‡´</p></li><li><p>åœ¨dataçš„rulesé‡Œå®šä¹‰éªŒè¯è§„åˆ™<br>æ¯”å¦‚ï¼š</p></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rules</span>: &#123;</span><br><span class="line">  <span class="attr">username</span>: [</span><br><span class="line">    &#123;<span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;è¯·å¡«å†™è´¦å·`, trigger: &#x27;</span>blur<span class="string">&#x27;&#125;</span></span><br><span class="line"><span class="string">  ]</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><p><code>required: true</code>è¡¨ç¤ºusernameé¡¹ä¸ºå¿…å¡«é¡¹ï¼Œ<code>message: 'è¯·å¡«å†™è´¦å·'</code>è¡¨ç¤ºæ²¡å¡«è¿™ä¸€é¡¹æ—¶çš„æç¤ºä¿¡æ¯ï¼Œ<code>trigger</code>æ˜¯éªŒè¯çš„æ—¶æœºï¼Œ<code>trigger: blur</code>è¡¨ç¤ºåœ¨è¡¨å•å¤±ç„¦æ—¶éªŒè¯ã€‚</p><p>å…¶ä»–å››ä¸ªå±æ€§ä¹Ÿå¦‚æ³•ç‚®åˆ¶å³å¯ã€‚</p><p>è¿›è¡ŒéªŒè¯å‘ç°ï¼Œè™½ç„¶åšäº†è¡¨å•éªŒè¯ä½†æ˜¯å³ä½¿ä¸å¡«å†™ä¾ç„¶å¯ä»¥æäº¤ã€‚</p><p>åˆšåˆšåªæ˜¯åšäº†<strong>è¡¨å•éªŒè¯</strong>ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰<strong>æ‹¦æˆª</strong>ã€‚</p><ol start="4"><li>å®šä¹‰formRefå¯¹è±¡</li></ol><p>è¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ°el-formä¸­ç»‘å®šçš„<code>ref=formRef</code>ã€‚</p><p>ç°åœ¨å®šä¹‰è¿™ä¸ªformRefå¯¹è±¡ï¼Œå…ˆå¯¼å…¥refã€‚refæ˜¯ä»vueä¸­å¼•ç”¨çš„ï¼ŒæŠŠåŸæ¥çš„ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br></pre></td></tr></table></figure><p>æ”¹æˆï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive, ref&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br></pre></td></tr></table></figure><p>ç„¶åå®šä¹‰formRefå¯¹è±¡ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> formRef = <span class="title function_">ref</span>()</span><br></pre></td></tr></table></figure><ol start="5"><li>é€šè¿‡formRefå¯¹è±¡éªŒè¯<br>ç„¶ååœ¨addæ–¹æ³•ä¸­ä½¿ç”¨formRefæ¥è¿›è¡ŒéªŒè¯ï¼š</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">add</span>= (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  formRef.<span class="property">value</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (valid) &#123; <span class="comment">// éªŒè¯é€šè¿‡æ—¶</span></span><br><span class="line">      request.<span class="title function_">post</span>(<span class="string">&quot;/admin/add&quot;</span>, data.<span class="property">form</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="string">&#x27;200&#x27;</span>) &#123;</span><br><span class="line">          data.<span class="property">formVisible</span> = <span class="literal">false</span></span><br><span class="line">          <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(<span class="string">&#x27;æ–°å¢æˆåŠŸ&#x27;</span>)</span><br><span class="line">          <span class="title function_">load</span>()</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          data.<span class="property">formVisible</span> = <span class="literal">false</span></span><br><span class="line">          <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å†å»éªŒè¯å‘ç°æˆåŠŸã€‚</p><ol start="6"><li>å…¶ä»–é—®é¢˜1</li></ol><p>å½“ç‚¹å‡»æ–°å¢æŒ‰é’®å‡ºå‘è¡¨å•éªŒè¯åæœ‰ä¿¡æ¯æç¤ºï¼Œä½†æ˜¯æŒ‰ä¸‹å–æ¶ˆæŒ‰é’®å†ç‚¹å‡»æ–°å¢æŒ‰é’®å‘ç°<strong>å‰ä¸€æ¬¡è¡¨å•éªŒè¯ä¿¡æ¯è¿˜åœ¨</strong>ã€‚</p><p>åªéœ€è¦ç»™el-dialogæ·»åŠ <strong>destroy-on-close</strong>å³å¯ï¼Œå®ƒå¯ä»¥é‡ç½®dialogã€‚</p><ol start="7"><li>å…¶ä»–é—®é¢˜2</li></ol><p>ç°åœ¨æ–°å¢ä¸€ä¸ªæ•°æ®ï¼Œå»æ•°æ®åº“æŸ¥çœ‹å‘ç°è¿™ä¸€é¡¹çš„passwordé¡¹æ˜¯nullã€‚å› æ­¤å¯ä»¥åœ¨åç«¯è¿›ä¸€æ­¥è¿›è¡ŒéªŒè¯ã€‚</p><p>åœ¨serviceå±‚ä¿®æ”¹addæ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Admin admin)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (admin.getPassword() == <span class="literal">null</span> || <span class="string">&quot;&quot;</span>.equals(admin.getPassword())) &#123;</span><br><span class="line">        admin.setPassword(<span class="string">&quot;admin&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    adminMapper.insert(admin);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹äºåˆ¤æ–­<code>if (admin.getPassword() == null || &quot;&quot;.equals(admin.getPassword()))</code>å¯ä»¥é€šè¿‡Javaçš„å·¥å…·ç±»Hutoolæ¥ç®€åŒ–ã€‚</p><p>åœ¨springbootä¸‹çš„pom.xmlä¸­æ·»åŠ ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Java å·¥å…·ç±» Hutool --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.hutool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hutool-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>5.8.25<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åaddæ–¹æ³•å¯ä»¥å†™æˆï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Admin admin)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (StrUtil.isBlank(admin.getPassword())) &#123;</span><br><span class="line">        admin.setPassword(<span class="string">&quot;admin&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    adminMapper.insert(admin);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å¯ä»¥è®¾ç½®é»˜è®¤å¯†ç ä¸º<code>admin</code>ã€‚</p><p>è¿˜å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œå°±æ˜¯åœ¨æ’å…¥ä¹‹å‰æŸ¥è¯¢ä¸€ä¸‹è´¦å·æ˜¯å¦é‡å¤ï¼Œå†è¿›è¡Œæ’å…¥ã€‚</p><p>åœ¨mapperå±‚å®šä¹‰æ–°çš„æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Admin <span class="title function_">selectByUsername</span><span class="params">(String username)</span>;</span><br></pre></td></tr></table></figure><p>ä¹‹å‰éƒ½æ˜¯åœ¨mapperå±‚å®šä¹‰æ¥å£åè¿›è¡Œ<strong>XMLæ˜ å°„</strong>ã€‚</p><p>è¿™ä¸€æ¬¡ä½¿ç”¨<strong>æ³¨è§£å¼SQL</strong>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;select * from `admin` where username = #&#123;username&#125;&quot;)</span></span><br><span class="line">Admin <span class="title function_">selectByUsername</span><span class="params">(String username)</span>;</span><br></pre></td></tr></table></figure><p>æ³¨è§£å¼SQLä¸XMLæ˜ å°„å®ç°çš„åŠŸèƒ½æ˜¯ä¸€æ ·çš„ï¼ŒäºŒè€…åªéœ€è¦å®ç°ä¸€ä¸ªå°±å¯ä»¥äº†ã€‚</p><p>ç°åœ¨mapperå±‚çš„addæ–¹æ³•å¯ä»¥ä¼˜åŒ–ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Admin admin)</span> &#123;</span><br><span class="line">    <span class="type">Admin</span> <span class="variable">dbAdmin</span> <span class="operator">=</span> adminMapper.selectByUsername(admin.getUsername());</span><br><span class="line">    <span class="keyword">if</span> (dbAdmin != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomerException</span>(<span class="string">&quot;è´¦å·é‡å¤&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (StrUtil.isBlank(admin.getPassword())) &#123;</span><br><span class="line">        admin.setPassword(<span class="string">&quot;admin&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    adminMapper.insert(admin);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>7. å£°æ˜</h1><p>æœ¬æ–‡æ˜¯å¯¹Bç«™è§†é¢‘<a href="https://www.bilibili.com/video/BV1w3PuewEfk?spm_id_from=333.788.videopod.sections&amp;vd_source=a0f19e79b7da02f4fa318d91be5bc86a">ã€å¸¦å°ç™½åšæ¯•è®¾ã€‘06. Springboot3+vue3å®ç°å¢åˆ æ”¹æŸ¥ã€åˆ†é¡µæŸ¥è¯¢ã€æ‰¹é‡åˆ é™¤ï¼ˆä¸‹ï¼‰</a>çš„å­¦ä¹ è®°å½•ï¼Œä¾µæƒè”ç³»åˆ ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;1. æ–°å¢æ•°æ®&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;åŸºæœ¬æ­¥éª¤ï¼š
&lt;ol&gt;
&lt;li&gt;åœ¨æ–°å¢çš„æŒ‰é’®ä¸Šé¢åŠ ä¸Šç‚¹å‡»äº‹ä»¶&lt;/li&gt;
&lt;li&gt;å®šä¹‰å¼¹çª—å’Œè¡¨å•&lt;/li&gt;
&lt;li&gt;ç‚¹å‡»è§¦å‘å¼¹çª—æ‰“å¼€&lt;/li&gt;
&lt;li&gt;è¡¨å•åšä¸€ä¸‹æ•°æ®ç»‘å®šä»¥åŠè¡¨å•éªŒè¯&lt;/li&gt;
&lt;li&gt;åå°è¦æœ‰å¯¹åº”çš„æ–°å¢çš„æ¥å£æ¥æ¥å—</summary>
      
    
    
    
    <category term="Java é¡¹ç›®" scheme="http://malone-ai.github.io/categories/Java-%E9%A1%B9%E7%9B%AE/"/>
    
    
    <category term="Java" scheme="http://malone-ai.github.io/tags/Java/"/>
    
    <category term="Springboot" scheme="http://malone-ai.github.io/tags/Springboot/"/>
    
  </entry>
  
  <entry>
    <title>Cè¯­è¨€è¿›ç¨‹ä¸çº¿ç¨‹çš„åˆ›å»º</title>
    <link href="http://malone-ai.github.io/2025/03/14/embedded2/"/>
    <id>http://malone-ai.github.io/2025/03/14/embedded2/</id>
    <published>2025-03-14T03:44:38.000Z</published>
    <updated>2025-03-14T16:59:48.160Z</updated>
    
    <content type="html"><![CDATA[<p><strong>è¿›ç¨‹</strong>æ˜¯æ“ä½œç³»ç»Ÿèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œæ¯ä¸ªè¿›ç¨‹æœ‰ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼Œè¿›ç¨‹é—´é€šä¿¡éœ€è¦é¢å¤–çš„æœºåˆ¶ã€‚</p><p><strong>çº¿ç¨‹</strong>æ˜¯CPUè°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œçº¿ç¨‹å…±äº«è¿›ç¨‹çš„å†…å­˜ç©ºé—´ï¼Œçº¿ç¨‹é—´é€šä¿¡æ›´é«˜æ•ˆï¼Œä½†éœ€è¦å¤„ç†åŒæ­¥é—®é¢˜ã€‚</p><hr><h1>1. åˆ›å»ºæ–°è¿›ç¨‹</h1><p>Linux ä½¿ç”¨ fork ç³»ç»Ÿè°ƒç”¨æ¥åˆ›å»ºä¸€ä¸ªè¿›ç¨‹ï¼Œå‡½æ•°åŸå‹ä¸ºï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="type">pid_t</span> <span class="title function_">fork</span><span class="params">(<span class="type">void</span>)</span>;</span><br></pre></td></tr></table></figure><p>fork é€šè¿‡å¤åˆ¶è°ƒç”¨è¿›ç¨‹ï¼ˆçˆ¶è¿›ç¨‹ï¼‰æ¥åˆ›å»ºä¸€ä¸ªæ–°è¿›ç¨‹ï¼ˆå­è¿›ç¨‹ï¼‰ã€‚æ–°è¿›ç¨‹ç§°ä¸º<strong>å­è¿›ç¨‹</strong>ï¼ŒåŸè°ƒç”¨è¿›ç¨‹ç§°ä¸º<strong>çˆ¶è¿›ç¨‹</strong>ã€‚</p><p>å­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹è¿è¡Œåœ¨ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ä¸­ã€‚åœ¨ fork() æ‰§è¡Œæ—¶ï¼Œä¸¤è€…çš„å†…å­˜ç©ºé—´å†…å®¹å®Œå…¨ä¸€è‡´ã€‚ä½†åç»­ä»»ä¸€è¿›ç¨‹å¯¹å†…å­˜çš„ä¿®æ”¹ï¼ˆå†™å…¥ï¼‰ã€æ–‡ä»¶æ˜ å°„ï¼ˆmmap(2)ï¼‰æˆ–è§£é™¤æ˜ å°„ï¼ˆmunmap(2)ï¼‰æ“ä½œï¼Œå‡ä¸ä¼šå½±å“å¦ä¸€ä¸ªè¿›ç¨‹ã€‚</p><p>fork() æ‰§è¡Œä¹‹åï¼Œæ•´ä¸ªç¨‹åºå°±åˆ†æˆäº†ä¸¤è·¯æ‰§è¡Œã€‚</p><p>å¯ä»¥é€šè¿‡æ£€æŸ¥ fork() çš„è¿”å›å€¼ï¼Œå¯ä»¥æ§åˆ¶çˆ¶å­è¿›ç¨‹çš„è¡Œä¸ºï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">pid_t</span> pid = fork();</span><br><span class="line"><span class="keyword">if</span> (pid == <span class="number">-1</span>) &#123;</span><br><span class="line">    <span class="comment">// é”™è¯¯å¤„ç†ï¼ˆå¦‚å†…å­˜ä¸è¶³æˆ–è¿›ç¨‹æ•°è¶…é™ï¼‰</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (pid == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// å­è¿›ç¨‹ä»£ç </span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// çˆ¶è¿›ç¨‹ä»£ç ï¼ˆpid ä¸ºå­è¿›ç¨‹çš„PIDï¼‰</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦å¤–ï¼Œçˆ¶è¿›ç¨‹éœ€é€šè¿‡ wait() æˆ– waitpid() å›æ”¶å­è¿›ç¨‹èµ„æºï¼Œé˜²æ­¢åƒµå°¸è¿›ç¨‹ã€‚</p><p>fork() å¸¸ä¸ exec() ç³»åˆ—å‡½æ•°é…åˆä½¿ç”¨ï¼Œå®ç°â€œåˆ›å»ºå­è¿›ç¨‹ â†’ æ›¿æ¢å­è¿›ç¨‹ç¨‹åºâ€çš„ç»å…¸æ¨¡å¼ï¼ˆå¦‚Shellæ‰§è¡Œå‘½ä»¤ï¼‰ã€‚</p><!-- # 2. åˆ›å»ºæ–°çº¿ç¨‹åˆ›å»ºæ–°çº¿ç¨‹ä½¿ç”¨pthread_createï¼Œå‡½æ•°åŸå‹ä¸ºï¼š<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;pthread.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">pthread_create</span><span class="params">(<span class="type">pthread_t</span> *thread, <span class="type">const</span> <span class="type">pthread_attr_t</span> *attr, <span class="type">void</span> *(*start_routine) (<span class="type">void</span> *), <span class="type">void</span> *arg)</span>;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è¯¥å‡½æ•°æ—¶éœ€è¦ --&gt;</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;strong&gt;è¿›ç¨‹&lt;/strong&gt;æ˜¯æ“ä½œç³»ç»Ÿèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œæ¯ä¸ªè¿›ç¨‹æœ‰ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼Œè¿›ç¨‹é—´é€šä¿¡éœ€è¦é¢å¤–çš„æœºåˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;çº¿ç¨‹&lt;/strong&gt;æ˜¯CPUè°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œçº¿ç¨‹å…±äº«è¿›ç¨‹çš„å†…å­˜ç©ºé—´ï¼Œçº¿ç¨‹é—´é€šä¿¡æ›´é«˜æ•ˆï¼Œä½†éœ€è¦å¤„ç†åŒæ­¥é—®é¢˜ã€‚&lt;/p&gt;
&lt;h</summary>
      
    
    
    
    <category term="åµŒå…¥å¼" scheme="http://malone-ai.github.io/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/"/>
    
    
    <category term="åµŒå…¥å¼" scheme="http://malone-ai.github.io/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/"/>
    
    <category term="è¿›ç¨‹ä¸çº¿ç¨‹çš„åˆ›å»º" scheme="http://malone-ai.github.io/tags/%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%88%9B%E5%BB%BA/"/>
    
  </entry>
  
  <entry>
    <title>Cè¯­è¨€æ–‡ä»¶IOå¸¸ç”¨å‡½æ•°</title>
    <link href="http://malone-ai.github.io/2025/03/14/embedded1/"/>
    <id>http://malone-ai.github.io/2025/03/14/embedded1/</id>
    <published>2025-03-14T02:31:23.000Z</published>
    <updated>2025-03-14T08:06:39.178Z</updated>
    
    <content type="html"><![CDATA[<p>ç³»ç»Ÿè°ƒç”¨IOå‡½æ•°éƒ½æ˜¯å›´ç»•ç€æ–‡ä»¶æè¿°ç¬¦fdè¿›è¡Œç›¸å…³æ“ä½œçš„</p><hr><h1>1. fopenæ‰“å¼€æµ</h1><p>FILE *streamï¼Œ æ–‡ä»¶æŒ‡é’ˆï¼ŒFILEç»“æ„ä½“åˆè¢«ç§°ä½œæµã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function">FILE *<span class="title">fopen</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *path, <span class="type">const</span> <span class="type">char</span> *mode)</span></span>;</span><br></pre></td></tr></table></figure><ul><li>å‚æ•°<ul><li>pathï¼šæŒ‡å®šæ–‡ä»¶è·¯å¾„,å¦‚ï¼šâ€œ./test.txtâ€</li><li>modeï¼šæŒ‡å®šæ–‡ä»¶çš„æ‰“å¼€æ–¹å¼</li></ul></li><li>è¿”å›å€¼<ul><li>æˆåŠŸï¼Œè¿”å›æŒ‡å‘è¯¥æ–‡ä»¶çš„æ–‡ä»¶æŒ‡é’ˆ</li><li>è‹¥å¤±è´¥ï¼Œè¿”å›NULL</li></ul></li></ul><p>modeå‚æ•°ï¼š</p><table><thead><tr><th>æ¨¡å¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>â€œrâ€</td><td>æ‰“å¼€æ–‡æœ¬æ–‡ä»¶ç”¨äºè¯»</td></tr><tr><td>â€œwâ€</td><td>åˆ›å»ºæ–‡æœ¬æ–‡ä»¶ç”¨äºå†™ï¼Œå¹¶åˆ é™¤å·²å­˜åœ¨çš„å†…å®¹(å¦‚æœæœ‰çš„è¯)</td></tr><tr><td>â€œaâ€</td><td>æ·»åŠ ï¼›æ‰“å¼€æˆ–åˆ›å»ºæ–‡æœ¬æ–‡ä»¶ç”¨äºåœ¨æ–‡ä»¶æœ«å°¾å†™</td></tr><tr><td>â€œrbâ€</td><td>æ‰“å¼€äºŒè¿›åˆ¶æ–‡ä»¶ç”¨äºè¯»</td></tr><tr><td>â€œwbâ€</td><td>åˆ›å»ºäºŒè¿›åˆ¶æ–‡ä»¶ç”¨äºå†™ï¼Œå¹¶åˆ é™¤å·²å­˜åœ¨çš„å†…å®¹(å¦‚æœæœ‰çš„è¯)</td></tr><tr><td>â€œabâ€</td><td>æ·»åŠ ï¼›æ‰“å¼€æˆ–åˆ›å»ºäºŒè¿›åˆ¶æ–‡ä»¶ç”¨äºåœ¨æ–‡ä»¶æœ«å°¾å†™</td></tr><tr><td>â€œr+â€</td><td>æ‰“å¼€æ–‡æœ¬æ–‡ä»¶ç”¨äºæ›´æ–°(å³è¯»å’Œå†™)</td></tr><tr><td>â€œw+â€</td><td>åˆ›å»ºæ–‡æœ¬æ–‡ä»¶ç”¨äºæ›´æ–°ï¼Œå¹¶åˆ é™¤å·²å­˜åœ¨çš„å†…å®¹(å¦‚æœæœ‰çš„è¯)</td></tr><tr><td>â€œa+â€</td><td>æ·»åŠ ï¼›æ‰“å¼€æˆ–åˆ›å»ºæ–‡æœ¬æ–‡ä»¶ç”¨äºæ›´æ–°å’Œåœ¨æ–‡ä»¶æœ«å°¾å†™</td></tr><tr><td>â€œrb+â€</td><td>æ‰“å¼€äºŒè¿›åˆ¶æ–‡ä»¶ç”¨äºæ›´æ–°(å³è¯»å’Œå†™)</td></tr><tr><td>â€œr+bâ€</td><td>æ‰“å¼€äºŒè¿›åˆ¶æ–‡ä»¶ç”¨äºæ›´æ–°(å³è¯»å’Œå†™)</td></tr><tr><td>â€œwb+â€</td><td>åˆ›å»ºäºŒè¿›åˆ¶æ–‡ä»¶ç”¨äºæ›´æ–°ï¼Œå¹¶åˆ é™¤å·²å­˜åœ¨çš„å†…å®¹(å¦‚æœæœ‰çš„è¯)</td></tr><tr><td>â€œw+bâ€</td><td>åˆ›å»ºäºŒè¿›åˆ¶æ–‡ä»¶ç”¨äºæ›´æ–°ï¼Œå¹¶åˆ é™¤å·²å­˜åœ¨çš„å†…å®¹(å¦‚æœæœ‰çš„è¯)</td></tr><tr><td>â€œab+â€</td><td>æ·»åŠ ï¼›æ‰“å¼€æˆ–åˆ›å»ºäºŒè¿›åˆ¶æ–‡ä»¶ç”¨äºæ›´æ–°å’Œåœ¨æ–‡ä»¶æœ«å°¾å†™</td></tr><tr><td>â€œa+bâ€</td><td>æ·»åŠ ï¼›æ‰“å¼€æˆ–åˆ›å»ºäºŒè¿›åˆ¶æ–‡ä»¶ç”¨äºæ›´æ–°å’Œåœ¨æ–‡ä»¶æœ«å°¾å†™</td></tr></tbody></table><hr><h1>2. fcloseå…³é—­æµ</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fclose</span><span class="params">(FILE *stream)</span></span>;</span><br></pre></td></tr></table></figure><ul><li>å‚æ•°<ul><li>streamï¼šæ–‡ä»¶æŒ‡é’ˆï¼ˆæµï¼‰</li></ul></li><li>è¿”å›å€¼<ul><li>æˆåŠŸï¼Œè¿”å›0</li><li>è‹¥å¤±è´¥ï¼Œè¿”å›EOF</li></ul></li></ul><p>åœ¨è¯¥æ–‡ä»¶è¢«å…³é—­ä¹‹å‰ï¼Œå†²æ´—ç¼“å†²ä¸­çš„è¾“å‡ºæ•°æ®ã€‚<br>ç¼“å†²åŒºä¸­çš„ä»»ä½•è¾“å…¥æ•°æ®è¢«ä¸¢å¼ƒã€‚å¦‚æœæ ‡å‡†I/Oåº“å·²ç»ä¸ºè¯¥æµè‡ªåŠ¨åˆ†é…äº†ä¸€ä¸ªç¼“å†²åŒºï¼Œåˆ™é‡Šæ”¾æ­¤ç¼“å†²åŒºã€‚<br>å½“ä¸€ä¸ªè¿›ç¨‹æ­£å¸¸ç»ˆæ­¢æ—¶ï¼ˆç›´æ¥è°ƒç”¨exitå‡½æ•°ï¼Œæˆ–ä»mainå‡½æ•°è¿”å›ï¼‰ï¼Œåˆ™æ‰€æœ‰å¸¦æœªå†™ç¼“å†²æ•°æ®çš„æ ‡å‡†IOæµéƒ½è¢«å†²æ´—ï¼Œæ‰€æœ‰æ‰“å¼€çš„æ ‡å‡†IOæµéƒ½è¢«å…³é—­</p><hr><h1>3. fwriteå¯¹æ‰“å¼€çš„æµå†™å…¥</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">fwrite</span><span class="params">(<span class="type">const</span> <span class="type">void</span> *ptr, <span class="type">size_t</span> size, <span class="type">size_t</span> nmemb, FILE *stream)</span></span>;</span><br></pre></td></tr></table></figure><ul><li>å‚æ•°<ul><li>ptrï¼šæŒ‡å‘è¦å†™å…¥æ•°æ®çš„æŒ‡é’ˆ</li><li>sizeï¼šæŒ‡å®šå†™å…¥çš„æ¯ä¸ªæ•°æ®é¡¹çš„å­—èŠ‚æ•°ï¼Œå¦‚è°ƒç”¨sizeof(char)</li><li>nmembï¼šæŒ‡å®šå†™å…¥çš„æ•°æ®é¡¹çš„ä¸ªæ•°</li><li>streamï¼šè¦å†™å…¥çš„æ–‡ä»¶æµ</li></ul></li><li>è¿”å›å€¼<ul><li>è¿”å›å®é™…å†™å…¥çš„æ•°æ®é¡¹çš„ä¸ªæ•°</li></ul></li></ul><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåŒ…å«å­¦ç”Ÿä¿¡æ¯çš„ç»“æ„ä½“æ•°ç»„ï¼Œæˆ‘ä»¬æƒ³å°†è¿™äº›ä¿¡æ¯å†™å…¥ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> &#123;</span><br><span class="line">    <span class="type">char</span> name[<span class="number">50</span>];</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="type">float</span> grade;</span><br><span class="line">&#125; Student;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    FILE *file;</span><br><span class="line">    Student students[<span class="number">3</span>] = &#123;</span><br><span class="line">        &#123;<span class="string">&quot;Alice&quot;</span>, <span class="number">20</span>, <span class="number">88.5</span>&#125;,</span><br><span class="line">        &#123;<span class="string">&quot;Bob&quot;</span>, <span class="number">21</span>, <span class="number">92.0</span>&#125;,</span><br><span class="line">        &#123;<span class="string">&quot;Charlie&quot;</span>, <span class="number">19</span>, <span class="number">85.5</span>&#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰“å¼€æ–‡ä»¶ä»¥å†™å…¥äºŒè¿›åˆ¶æ•°æ®</span></span><br><span class="line">    file = <span class="built_in">fopen</span>(<span class="string">&quot;students.dat&quot;</span>, <span class="string">&quot;wb&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (file == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;æ— æ³•æ‰“å¼€æ–‡ä»¶&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†å­¦ç”Ÿä¿¡æ¯å†™å…¥æ–‡ä»¶</span></span><br><span class="line">    <span class="type">size_t</span> num_written = <span class="built_in">fwrite</span>(students, <span class="built_in">sizeof</span>(Student), <span class="number">3</span>, file);</span><br><span class="line">    <span class="keyword">if</span> (num_written != <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;å†™å…¥æ–‡ä»¶æ—¶å‡ºé”™&quot;</span>);</span><br><span class="line">        <span class="built_in">fclose</span>(file);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…³é—­æ–‡ä»¶</span></span><br><span class="line">    <span class="built_in">fclose</span>(file);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æ•°æ®æˆåŠŸå†™å…¥æ–‡ä»¶ã€‚\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><p>æ‰“å¼€æ–‡ä»¶ï¼šä½¿ç”¨ <code>fopen</code> å‡½æ•°ä»¥äºŒè¿›åˆ¶å†™å…¥æ¨¡å¼ (<code>&quot;wb&quot;</code>) æ‰“å¼€æ–‡ä»¶ <code>students.dat</code>ã€‚å¦‚æœæ–‡ä»¶æ‰“å¼€å¤±è´¥ï¼Œç¨‹åºä¼šè¾“å‡ºé”™è¯¯ä¿¡æ¯å¹¶é€€å‡ºã€‚</p></li><li><p>å†™å…¥æ•°æ®ï¼šä½¿ç”¨ <code>fwrite</code> å‡½æ•°å°† <code>students</code> æ•°ç»„ä¸­çš„æ•°æ®å†™å…¥æ–‡ä»¶ã€‚<code>sizeof(Student)</code> è¡¨ç¤ºæ¯ä¸ªå­¦ç”Ÿä¿¡æ¯çš„å¤§å°ï¼Œ<code>3</code> è¡¨ç¤ºè¦å†™å…¥çš„å­¦ç”Ÿæ•°é‡ã€‚</p></li><li><p>æ£€æŸ¥å†™å…¥ç»“æœï¼š<code>fwrite</code> è¿”å›æˆåŠŸå†™å…¥çš„æ•°æ®é¡¹æ•°é‡ã€‚å¦‚æœè¿”å›å€¼ä¸ç­‰äºé¢„æœŸçš„æ•°é‡ï¼ˆè¿™é‡Œæ˜¯ 3ï¼‰ï¼Œåˆ™è¯´æ˜å†™å…¥è¿‡ç¨‹ä¸­å‡ºç°äº†é”™è¯¯ã€‚</p></li><li><p>è¾“å‡ºç»“æœï¼šå¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œç¨‹åºä¼šè¾“å‡ºâ€œæ•°æ®æˆåŠŸå†™å…¥æ–‡ä»¶â€ã€‚</p></li></ol><hr><h1>4. freadå¯¹æ‰“å¼€çš„æµè¿›è¡Œè¯»å–</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">fread</span><span class="params">(<span class="type">void</span> *ptr, <span class="type">size_t</span> size, <span class="type">size_t</span> nmemb, FILE *stream)</span></span>;</span><br></pre></td></tr></table></figure><ul><li>å‚æ•°<ul><li>ptrï¼šæŒ‡å‘è¦å­˜å‚¨æ•°æ®å†…å­˜çš„æŒ‡é’ˆ</li><li>sizeï¼šæŒ‡å®šè¯»å–çš„æ¯ä¸ªæ•°æ®é¡¹çš„å­—èŠ‚æ•°</li><li>nmembï¼šæŒ‡å®šè¦è¯»å–çš„æ•°æ®é¡¹çš„ä¸ªæ•°</li><li>streamï¼šè¦è¯»å–çš„æ–‡ä»¶æµ</li></ul></li><li>è¿”å›å€¼<ul><li>è¿”å›å®é™…è¯»å–æ•°æ®é¡¹çš„ä¸ªæ•°</li></ul></li></ul><p>ç°åœ¨ä½¿ç”¨ç°åœ¨ç”¨ fread è¯»å–ç”± fwrite ç”Ÿæˆçš„ student.dat äºŒè¿›åˆ¶æ–‡ä»¶çš„å­¦ç”Ÿä¿¡æ¯ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> &#123;</span><br><span class="line">    <span class="type">char</span> name[<span class="number">50</span>];</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="type">float</span> grade;</span><br><span class="line">&#125; Student;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    FILE *file;</span><br><span class="line">    Student students[<span class="number">3</span>]; <span class="comment">// ç”¨äºå­˜å‚¨è¯»å–çš„æ•°æ®</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»¥äºŒè¿›åˆ¶è¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">    file = <span class="built_in">fopen</span>(<span class="string">&quot;students.dat&quot;</span>, <span class="string">&quot;rb&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (file == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;æ— æ³•æ‰“å¼€æ–‡ä»¶&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®åˆ° students æ•°ç»„</span></span><br><span class="line">    <span class="type">size_t</span> num_read = <span class="built_in">fread</span>(students, <span class="built_in">sizeof</span>(Student), <span class="number">3</span>, file);</span><br><span class="line">    <span class="keyword">if</span> (num_read != <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;è¯»å–æ–‡ä»¶æ—¶å‡ºé”™&quot;</span>);</span><br><span class="line">        <span class="built_in">fclose</span>(file);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…³é—­æ–‡ä»¶</span></span><br><span class="line">    <span class="built_in">fclose</span>(file);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰“å°è¯»å–çš„æ•°æ®</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æˆåŠŸè¯»å–çš„å­¦ç”Ÿä¿¡æ¯ï¼š\n&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;å­¦ç”Ÿ %d:\n&quot;</span>, i + <span class="number">1</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;å§“å: %s\n&quot;</span>, students[i].name);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;å¹´é¾„: %d\n&quot;</span>, students[i].age);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;æˆç»©: %.1f\n\n&quot;</span>, students[i].grade);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>æ‰“å¼€æ–‡ä»¶ï¼š</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file = <span class="built_in">fopen</span>(<span class="string">&quot;students.dat&quot;</span>, <span class="string">&quot;rb&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>â€œrbâ€ è¡¨ç¤ºä»¥äºŒè¿›åˆ¶è¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶ã€‚</li><li>å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨æˆ–æƒé™ä¸è¶³ï¼Œfopen ä¼šè¿”å› NULLï¼Œæ­¤æ—¶éœ€è¦å¤„ç†é”™è¯¯ã€‚</li></ul><ol start="2"><li>è¯»å–æ•°æ®ï¼š</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">size_t</span> num_read = <span class="built_in">fread</span>(students, <span class="built_in">sizeof</span>(Student), <span class="number">3</span>, file);</span><br></pre></td></tr></table></figure><ul><li>students æ˜¯å­˜å‚¨æ•°æ®çš„æ•°ç»„ã€‚</li><li>sizeof(Student) æ˜¯æ¯ä¸ªå­¦ç”Ÿç»“æ„ä½“çš„å¤§å°ï¼ˆ58 å­—èŠ‚ï¼‰ã€‚</li><li>3 è¡¨ç¤ºè¦è¯»å– 3 ä¸ªå­¦ç”Ÿæ•°æ®ã€‚</li><li>num_read æ˜¯å®é™…æˆåŠŸè¯»å–çš„æ•°æ®é¡¹æ•°é‡ã€‚å¦‚æœ num_read &lt; 3ï¼Œè¯´æ˜æ–‡ä»¶å¯èƒ½å·²æŸåæˆ–è¯»å–å¤±è´¥ã€‚</li></ul><ol start="3"><li>æ‰“å°ä¿¡æ¯</li></ol><ul><li>è¯»å–å®Œæˆåï¼Œéå†æ•°ç»„å¹¶æ‰“å°æ¯ä¸ªå­¦ç”Ÿçš„ä¿¡æ¯ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">æˆåŠŸè¯»å–çš„å­¦ç”Ÿä¿¡æ¯ï¼š</span><br><span class="line">å­¦ç”Ÿ 1:</span><br><span class="line">å§“å: Alice</span><br><span class="line">å¹´é¾„: 20</span><br><span class="line">æˆç»©: 88.5</span><br><span class="line"></span><br><span class="line">å­¦ç”Ÿ 2:</span><br><span class="line">å§“å: Bob</span><br><span class="line">å¹´é¾„: 21</span><br><span class="line">æˆç»©: 92.0</span><br><span class="line"></span><br><span class="line">å­¦ç”Ÿ 3:</span><br><span class="line">å§“å: Charlie</span><br><span class="line">å¹´é¾„: 19</span><br><span class="line">æˆç»©: 85.5</span><br></pre></td></tr></table></figure><hr><h1>5. fseekå®šä½æµ</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fseek</span><span class="params">(FILE *stream, <span class="type">long</span> offset, <span class="type">int</span> whence)</span></span>;</span><br></pre></td></tr></table></figure><ul><li>å‚æ•°<ul><li>streamï¼šæŒ‡å®šé‡å®šä½æ–‡ä»¶æŒ‡é’ˆ</li><li>offsetï¼šæŒ‡å®šåç§»é‡ï¼Œæ•´æ•°è¡¨ç¤ºæ­£å‘åç§»ï¼Œè´Ÿæ•°è¡¨ç¤ºè´Ÿå‘åç§»</li><li>whenceï¼šæŒ‡å®šåç§»åŸºå‡†ä½ç½®<ul><li>å®SEEK_CURï¼ˆå½“å‰ä½ç½®ï¼‰</li><li>SEEK_ENDï¼ˆæ–‡ä»¶ç»“å°¾ï¼‰</li><li>SEEK_SETï¼ˆæ–‡ä»¶å¼€å¤´ï¼‰</li></ul></li></ul></li><li>è¿”å›å€¼<ul><li>æˆåŠŸï¼Œè¿”å›0</li><li>è‹¥å¤±è´¥ï¼Œè¿”å›-1ï¼Œä¸”ä¸æ”¹å˜æŒ‡é’ˆä½ç½®ã€‚</li></ul></li></ul><p>å‡å¦‚æˆ‘ä»¬æƒ³é€šè¿‡ fseek ç›´æ¥å®šä½åˆ° student.dat ä¸­æŸä¸ªå­¦ç”Ÿçš„è®°å½•å¹¶è¯»å–ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> &#123;</span><br><span class="line">    <span class="type">char</span> name[<span class="number">50</span>];</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="type">float</span> grade;</span><br><span class="line">&#125; Student;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    FILE *file;</span><br><span class="line">    Student student;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»¥äºŒè¿›åˆ¶è¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">    file = <span class="built_in">fopen</span>(<span class="string">&quot;students.dat&quot;</span>, <span class="string">&quot;rb&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (file == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;æ— æ³•æ‰“å¼€æ–‡ä»¶&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä½åˆ°ç¬¬ 2 ä¸ªå­¦ç”Ÿçš„è®°å½•ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰</span></span><br><span class="line">    <span class="type">int</span> student_index = <span class="number">1</span>; <span class="comment">// ç¬¬ 2 ä¸ªå­¦ç”Ÿ</span></span><br><span class="line">    <span class="type">long</span> offset = student_index * <span class="built_in">sizeof</span>(Student);</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">fseek</span>(file, offset, SEEK_SET) != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;fseek å¤±è´¥&quot;</span>);</span><br><span class="line">        <span class="built_in">fclose</span>(file);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¯»å–ç¬¬ 2 ä¸ªå­¦ç”Ÿçš„æ•°æ®</span></span><br><span class="line">    <span class="type">size_t</span> num_read = <span class="built_in">fread</span>(&amp;student, <span class="built_in">sizeof</span>(Student), <span class="number">1</span>, file);</span><br><span class="line">    <span class="keyword">if</span> (num_read != <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;è¯»å–æ–‡ä»¶æ—¶å‡ºé”™&quot;</span>);</span><br><span class="line">        <span class="built_in">fclose</span>(file);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…³é—­æ–‡ä»¶</span></span><br><span class="line">    <span class="built_in">fclose</span>(file);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰“å°è¯»å–çš„æ•°æ®</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;ç¬¬ %d ä¸ªå­¦ç”Ÿçš„ä¿¡æ¯ï¼š\n&quot;</span>, student_index + <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;å§“å: %s\n&quot;</span>, student.name);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;å¹´é¾„: %d\n&quot;</span>, student.age);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æˆç»©: %.1f\n&quot;</span>, student.grade);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><p>æ‰“å¼€æ–‡ä»¶<br>ä»¥äºŒè¿›åˆ¶è¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶ students.datã€‚</p></li><li><p>è®¡ç®—åç§»é‡</p></li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">long</span> offset = student_index * <span class="keyword">sizeof</span>(Student);</span><br></pre></td></tr></table></figure><ul><li>student_index æ˜¯è¦è®¿é—®çš„å­¦ç”Ÿçš„ç´¢å¼•ï¼ˆä» 0 å¼€å§‹ï¼‰ã€‚</li><li>sizeof(Student) æ˜¯æ¯ä¸ªå­¦ç”Ÿç»“æ„ä½“çš„å¤§å°ï¼ˆ58 å­—èŠ‚ï¼‰ã€‚</li><li>åç§»é‡ offset æ˜¯ä»æ–‡ä»¶å¼€å¤´åˆ°ç›®æ ‡å­¦ç”Ÿè®°å½•çš„å­—èŠ‚æ•°ã€‚</li></ul><ol start="3"><li>å®šä½æ–‡ä»¶æŒ‡é’ˆ</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (fseek(file, offset, SEEK_SET) != <span class="number">0</span>) &#123;</span><br><span class="line">    perror(<span class="string">&quot;fseek å¤±è´¥&quot;</span>);</span><br><span class="line">    fclose(file);</span><br><span class="line">    <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨ fseek å°†æ–‡ä»¶æŒ‡é’ˆç§»åŠ¨åˆ°ç›®æ ‡å­¦ç”Ÿçš„èµ·å§‹ä½ç½®ã€‚</li><li>SEEK_SET è¡¨ç¤ºä»æ–‡ä»¶å¼€å¤´è®¡ç®—åç§»é‡ã€‚</li></ul><ol start="4"><li>è¯»å–æ•°æ®</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">size_t</span> num_read = fread(&amp;student, <span class="keyword">sizeof</span>(Student), <span class="number">1</span>, file);</span><br></pre></td></tr></table></figure><ul><li>ä»å½“å‰ä½ç½®è¯»å–ä¸€ä¸ª Student ç»“æ„ä½“åˆ° student å˜é‡ä¸­ã€‚</li></ul><ol start="5"><li>æ‰“å°æ•°æ®ï¼š</li></ol><ul><li>æ‰“å°è¯»å–çš„å­¦ç”Ÿä¿¡æ¯ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ç¬¬ 2 ä¸ªå­¦ç”Ÿçš„ä¿¡æ¯ï¼š</span><br><span class="line">å§“å: Bob</span><br><span class="line">å¹´é¾„: 21</span><br><span class="line">æˆç»©: 92.0</span><br></pre></td></tr></table></figure><hr><h1>6. fputcå†™ä¸€ä¸ªå­—ç¬¦åˆ°æ–‡ä»¶</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fputc</span><span class="params">(<span class="type">int</span> ch, FILE *stream)</span></span>;</span><br></pre></td></tr></table></figure><ul><li><p>å‚æ•°</p><ul><li>chï¼šè¦å†™å…¥çš„å­—ç¬¦ï¼ˆä»¥ int å½¢å¼ä¼ é€’ï¼Œä½†å®é™…å†™å…¥çš„æ˜¯å…¶ä½ 8 ä½ï¼‰ã€‚</li><li>streamï¼šæŒ‡å‘æ–‡ä»¶æµçš„æŒ‡é’ˆï¼ˆç”± fopen æ‰“å¼€çš„æ–‡ä»¶ï¼‰ã€‚</li></ul></li><li><p>è¿”å›å€¼</p></li><li><p>æˆåŠŸæ—¶è¿”å›å†™å…¥çš„å­—ç¬¦ã€‚</p></li><li><p>å¤±è´¥æ—¶è¿”å› EOFã€‚</p></li></ul><p>ä½¿ç”¨ fputc å°†ä¸€ä¸ªå­—ç¬¦ä¸²é€å­—ç¬¦å†™å…¥æ–‡ä»¶ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    FILE *file;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *text = <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">    <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»¥å†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">    file = <span class="built_in">fopen</span>(<span class="string">&quot;output.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (file == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;æ— æ³•æ‰“å¼€æ–‡ä»¶&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†å­—ç¬¦ä¸²é€å­—ç¬¦å†™å…¥æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">while</span> (text[i] != <span class="string">&#x27;\0&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">fputc</span>(text[i], file) == EOF) &#123;</span><br><span class="line">            <span class="built_in">perror</span>(<span class="string">&quot;å†™å…¥æ–‡ä»¶æ—¶å‡ºé”™&quot;</span>);</span><br><span class="line">            <span class="built_in">fclose</span>(file);</span><br><span class="line">            <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">        &#125;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…³é—­æ–‡ä»¶</span></span><br><span class="line">    <span class="built_in">fclose</span>(file);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;å­—ç¬¦æˆåŠŸå†™å…¥æ–‡ä»¶ã€‚\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>æ‰“å¼€æ–‡ä»¶</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file = fopen(<span class="string">&quot;output.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>ä»¥å†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶ output.txtã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºå®ƒï¼›å¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œåˆ™æ¸…ç©ºå…¶å†…å®¹ã€‚</li></ul><ol start="2"><li>é€å­—ç¬¦å†™å…¥æ–‡ä»¶</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (text[i] != <span class="string">&#x27;\0&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (fputc(text[i], file) == EOF) &#123;</span><br><span class="line">        perror(<span class="string">&quot;å†™å…¥æ–‡ä»¶æ—¶å‡ºé”™&quot;</span>);</span><br><span class="line">        fclose(file);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line">    i++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨ fputc å°†å­—ç¬¦ä¸² text ä¸­çš„æ¯ä¸ªå­—ç¬¦å†™å…¥æ–‡ä»¶ã€‚</li><li>å¦‚æœ fputc è¿”å› EOFï¼Œè¯´æ˜å†™å…¥å¤±è´¥ï¼Œç¨‹åºä¼šè¾“å‡ºé”™è¯¯ä¿¡æ¯å¹¶é€€å‡ºã€‚</li></ul><ol start="3"><li>å…³é—­æ–‡ä»¶ï¼š</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fclose(file);</span><br></pre></td></tr></table></figure><ul><li>å…³é—­æ–‡ä»¶ã€‚</li></ul><ol start="4"><li>è¿è¡Œç»“æœ</li></ol><ul><li>å¦‚æœç¨‹åºè¿è¡ŒæˆåŠŸï¼Œæ–‡ä»¶ output.txt ä¸­å°†åŒ…å«å­—ç¬¦ä¸² â€œHello, World!â€ã€‚</li></ul><hr><h1>7. fputså†™ä¸€ä¸ªå­—ç¬¦ä¸²åˆ°æ–‡ä»¶ä¸­å»</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fputs</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *str,FILE *stream)</span></span>;</span><br></pre></td></tr></table></figure><ul><li>å‚æ•°<ul><li>strï¼šè¦å†™å…¥çš„å­—ç¬¦ä¸²ï¼ˆä»¥ \0 ç»“å°¾çš„ C å­—ç¬¦ä¸²ï¼‰ã€‚</li><li>streamï¼šæŒ‡å‘æ–‡ä»¶æµçš„æŒ‡é’ˆï¼ˆç”± fopen æ‰“å¼€çš„æ–‡ä»¶ï¼‰ã€‚</li></ul></li><li>è¿”å›å€¼<ul><li>æˆåŠŸæ—¶è¿”å›éè´Ÿå€¼ã€‚</li><li>å¤±è´¥æ—¶è¿”å› EOFã€‚</li></ul></li></ul><p>ä½¿ç”¨ fputs å°†ä¸€ä¸ªå­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    FILE *file;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *text = <span class="string">&quot;Hello, World!\nThis is a test file.\n&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»¥å†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">    file = <span class="built_in">fopen</span>(<span class="string">&quot;output.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (file == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;æ— æ³•æ‰“å¼€æ–‡ä»¶&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†å­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">fputs</span>(text, file) == EOF) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;å†™å…¥æ–‡ä»¶æ—¶å‡ºé”™&quot;</span>);</span><br><span class="line">        <span class="built_in">fclose</span>(file);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…³é—­æ–‡ä»¶</span></span><br><span class="line">    <span class="built_in">fclose</span>(file);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;å­—ç¬¦ä¸²æˆåŠŸå†™å…¥æ–‡ä»¶ã€‚\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>æ‰“å¼€æ–‡ä»¶</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file = fopen(<span class="string">&quot;output.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>ä»¥å†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶ output.txtã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºå®ƒï¼›å¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œåˆ™æ¸…ç©ºå…¶å†…å®¹ã€‚</li></ul><ol start="2"><li>å†™å…¥å­—ç¬¦ä¸²</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">fputs</span>(text, file) == EOF) &#123;</span><br><span class="line">    perror(<span class="string">&quot;å†™å…¥æ–‡ä»¶æ—¶å‡ºé”™&quot;</span>);</span><br><span class="line">    fclose(file);</span><br><span class="line">    <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨ fputs å°†å­—ç¬¦ä¸² text å†™å…¥æ–‡ä»¶ã€‚</li><li>å¦‚æœ fputs è¿”å› EOFï¼Œè¯´æ˜å†™å…¥å¤±è´¥ï¼Œç¨‹åºä¼šè¾“å‡ºé”™è¯¯ä¿¡æ¯å¹¶é€€å‡ºã€‚</li></ul><ol start="3"><li>å…³é—­æ–‡ä»¶ï¼š</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fclose(file);</span><br></pre></td></tr></table></figure><p>å…³é—­æ–‡ä»¶ï¼Œç¡®ä¿æ‰€æœ‰æ•°æ®å†™å…¥ç£ç›˜ã€‚</p><ol start="4"><li>è¿è¡Œç»“æœ</li></ol><ul><li>å¦‚æœç¨‹åºè¿è¡ŒæˆåŠŸï¼Œæ–‡ä»¶ output.txt ä¸­å°†åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hello, World!</span><br><span class="line">This is a test file.</span><br></pre></td></tr></table></figure><hr><h1>8. fprinfå¾€æ–‡ä»¶ä¸­å†™å…¥æ ¼å¼åŒ–æ•°æ®</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fprintf</span><span class="params">(FILE *stream, <span class="type">const</span> <span class="type">char</span> *format,...)</span></span>;</span><br></pre></td></tr></table></figure><ul><li><p>å‚æ•°</p><ul><li>streamï¼šæŒ‡å‘æ–‡ä»¶æµçš„æŒ‡é’ˆï¼ˆç”± fopen æ‰“å¼€çš„æ–‡ä»¶ï¼‰ã€‚</li><li>formatï¼šæ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼ŒæŒ‡å®šå¦‚ä½•æ ¼å¼åŒ–åç»­å‚æ•°ã€‚</li><li><strong>â€¦</strong>ï¼šå¯å˜å‚æ•°åˆ—è¡¨ï¼Œæ ¹æ® format å­—ç¬¦ä¸²ä¸­çš„æ ¼å¼è¯´æ˜ç¬¦è¿›è¡Œæ ¼å¼åŒ–ã€‚</li></ul></li><li><p>è¿”å›å€¼</p><ul><li>æˆåŠŸæ—¶è¿”å›å†™å…¥çš„å­—ç¬¦æ•°ã€‚</li><li>å¤±è´¥æ—¶è¿”å›è´Ÿå€¼ã€‚</li></ul></li></ul><p>ä½¿ç”¨ fprintf å°†æ ¼å¼åŒ–æ•°æ®å†™å…¥æ–‡ä»¶ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    FILE *file;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *name = <span class="string">&quot;Alice&quot;</span>;</span><br><span class="line">    <span class="type">int</span> age = <span class="number">20</span>;</span><br><span class="line">    <span class="type">float</span> grade = <span class="number">88.5</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»¥å†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">    file = <span class="built_in">fopen</span>(<span class="string">&quot;student.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (file == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;æ— æ³•æ‰“å¼€æ–‡ä»¶&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ fprintf å°†æ ¼å¼åŒ–æ•°æ®å†™å…¥æ–‡ä»¶</span></span><br><span class="line">    <span class="type">int</span> result = <span class="built_in">fprintf</span>(file, <span class="string">&quot;å§“å: %s\nå¹´é¾„: %d\næˆç»©: %.1f\n&quot;</span>, name, age, grade);</span><br><span class="line">    <span class="keyword">if</span> (result &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;å†™å…¥æ–‡ä»¶æ—¶å‡ºé”™&quot;</span>);</span><br><span class="line">        <span class="built_in">fclose</span>(file);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…³é—­æ–‡ä»¶</span></span><br><span class="line">    <span class="built_in">fclose</span>(file);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æ ¼å¼åŒ–æ•°æ®æˆåŠŸå†™å…¥æ–‡ä»¶ã€‚\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœç¨‹åºè¿è¡ŒæˆåŠŸï¼Œæ–‡ä»¶ student.txt ä¸­å°†åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å§“å: Alice</span><br><span class="line">å¹´é¾„: 20</span><br><span class="line">æˆç»©: 88.5</span><br></pre></td></tr></table></figure><hr><h1>9. fgetcå‡½æ•°</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">fgetc</span><span class="params">(FILE *stream)</span></span>;</span><br></pre></td></tr></table></figure><ul><li><p>å‚æ•°</p><ul><li>streamï¼šæŒ‡å‘æ–‡ä»¶æµçš„æŒ‡é’ˆï¼ˆç”± fopen æ‰“å¼€çš„æ–‡ä»¶ï¼‰ã€‚</li></ul></li><li><p>è¿”å›å€¼</p><ul><li>æˆåŠŸæ—¶è¿”å›è¯»å–çš„å­—ç¬¦ï¼ˆä»¥ int å½¢å¼è¿”å›ï¼‰ã€‚</li><li>å¦‚æœåˆ°è¾¾æ–‡ä»¶æœ«å°¾æˆ–å‘ç”Ÿé”™è¯¯ï¼Œè¿”å› EOFã€‚</li></ul></li></ul><p>ä½¿ç”¨ fgetc é€å­—ç¬¦è¯»å–æ–‡ä»¶å†…å®¹å¹¶æ‰“å°åˆ°æ§åˆ¶å°ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    FILE *file;</span><br><span class="line">    <span class="type">int</span> ch;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»¥è¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">    file = fopen(<span class="string">&quot;input.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (file == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        perror(<span class="string">&quot;æ— æ³•æ‰“å¼€æ–‡ä»¶&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€å­—ç¬¦è¯»å–æ–‡ä»¶å†…å®¹</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æ–‡ä»¶å†…å®¹ï¼š\n&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span> ((ch = fgetc(file)) != EOF) &#123;</span><br><span class="line">        <span class="built_in">putchar</span>(ch); <span class="comment">// å°†å­—ç¬¦è¾“å‡ºåˆ°æ§åˆ¶å°</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥æ˜¯å¦å› é”™è¯¯ç»“æŸ</span></span><br><span class="line">    <span class="keyword">if</span> (ferror(file)) &#123;</span><br><span class="line">        perror(<span class="string">&quot;è¯»å–æ–‡ä»¶æ—¶å‡ºé”™&quot;</span>);</span><br><span class="line">        fclose(file);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…³é—­æ–‡ä»¶</span></span><br><span class="line">    fclose(file);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\næ–‡ä»¶è¯»å–å®Œæˆã€‚\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæ–‡ä»¶ input.txt çš„å†…å®¹ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hello, World!</span><br><span class="line">This is a test file.</span><br></pre></td></tr></table></figure><p>ç¨‹åºè¿è¡Œåï¼Œæ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æ–‡ä»¶å†…å®¹ï¼š</span><br><span class="line">Hello, World!</span><br><span class="line">This is a test file.</span><br><span class="line">æ–‡ä»¶è¯»å–å®Œæˆã€‚</span><br></pre></td></tr></table></figure><hr><h1>10. fgetsä»æ ‡å‡†è¾“å…¥æˆ–æ–‡ä»¶ä¸­è¯»å–å­—ç¬¦ä¸²ã€‚</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">char</span> *<span class="title">fgets</span><span class="params">(<span class="type">char</span> *str, <span class="type">int</span> n, FILE *stream)</span></span>;</span><br></pre></td></tr></table></figure><ul><li>å‚æ•°<ul><li>strï¼šæŒ‡å‘å­˜å‚¨è¯»å–æ•°æ®çš„å­—ç¬¦æ•°ç»„ï¼ˆç¼“å†²åŒºï¼‰ã€‚</li><li>nï¼šè¦è¯»å–çš„æœ€å¤§å­—ç¬¦æ•°ï¼ˆåŒ…æ‹¬ç»“å°¾çš„ç©ºå­—ç¬¦ \0ï¼‰ã€‚</li><li>streamï¼šæŒ‡å‘æ–‡ä»¶æµçš„æŒ‡é’ˆï¼ˆç”± fopen æ‰“å¼€çš„æ–‡ä»¶ï¼‰ã€‚</li></ul></li><li>è¿”å›å€¼<ul><li>æˆåŠŸæ—¶è¿”å› strã€‚</li><li>å¦‚æœåˆ°è¾¾æ–‡ä»¶æœ«å°¾æˆ–å‘ç”Ÿé”™è¯¯ï¼Œè¿”å› NULLã€‚</li></ul></li></ul><p>ä½¿ç”¨ fgets é€è¡Œè¯»å–æ–‡ä»¶å†…å®¹å¹¶æ‰“å°åˆ°æ§åˆ¶å°ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    FILE *file;</span><br><span class="line">    <span class="type">char</span> buffer[<span class="number">100</span>]; <span class="comment">// ç”¨äºå­˜å‚¨æ¯è¡Œå†…å®¹çš„ç¼“å†²åŒº</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»¥è¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">    file = <span class="built_in">fopen</span>(<span class="string">&quot;input.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (file == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;æ— æ³•æ‰“å¼€æ–‡ä»¶&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€è¡Œè¯»å–æ–‡ä»¶å†…å®¹</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æ–‡ä»¶å†…å®¹ï¼š\n&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">fgets</span>(buffer, <span class="built_in">sizeof</span>(buffer), file) != <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s&quot;</span>, buffer); <span class="comment">// å°†æ¯è¡Œå†…å®¹è¾“å‡ºåˆ°æ§åˆ¶å°</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥æ˜¯å¦å› é”™è¯¯ç»“æŸ</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">ferror</span>(file)) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;è¯»å–æ–‡ä»¶æ—¶å‡ºé”™&quot;</span>);</span><br><span class="line">        <span class="built_in">fclose</span>(file);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…³é—­æ–‡ä»¶</span></span><br><span class="line">    <span class="built_in">fclose</span>(file);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æ–‡ä»¶è¯»å–å®Œæˆã€‚\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">while (fgets(buffer, sizeof(buffer), file) != NULL) &#123;</span><br><span class="line">    printf(&quot;%s&quot;, buffer);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸­ï¼š</p><ul><li>ä½¿ç”¨ fgets é€è¡Œè¯»å–æ–‡ä»¶å†…å®¹ã€‚</li><li>buffer æ˜¯ç”¨äºå­˜å‚¨æ¯è¡Œå†…å®¹çš„å­—ç¬¦æ•°ç»„ã€‚</li><li>sizeof(buffer) æŒ‡å®šæ¯æ¬¡è¯»å–çš„æœ€å¤§å­—ç¬¦æ•°ï¼ˆåŒ…æ‹¬ç»“å°¾çš„ \0ï¼‰ã€‚</li><li>å¦‚æœæˆåŠŸè¯»å–ä¸€è¡Œï¼Œfgets è¿”å› bufferï¼›å¦‚æœåˆ°è¾¾æ–‡ä»¶æœ«å°¾æˆ–å‘ç”Ÿé”™è¯¯ï¼Œè¿”å› NULLã€‚</li><li>ä½¿ç”¨ printf å°†æ¯è¡Œå†…å®¹è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚</li></ul><p>å¦‚æœæ–‡ä»¶ input.txt çš„å†…å®¹ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Hello, World!</span><br><span class="line">This is a test file.</span><br><span class="line">Welcome to C programming.</span><br></pre></td></tr></table></figure><p>ç¨‹åºè¿è¡Œåï¼Œæ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ–‡ä»¶å†…å®¹ï¼š</span><br><span class="line">Hello, World!</span><br><span class="line">This is a test file.</span><br><span class="line">Welcome to C programming.</span><br><span class="line">æ–‡ä»¶è¯»å–å®Œæˆã€‚</span><br></pre></td></tr></table></figure><hr><h1>11. fscanfä»æ–‡ä»¶æµä¸­è¯»å–æ•°æ®</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">fscanf</span><span class="params">(FILE * stream, <span class="type">const</span> <span class="type">char</span> * format, [argument...])</span></span>;</span><br></pre></td></tr></table></figure><ul><li>å‚æ•°<ul><li>streamï¼šæŒ‡å‘æ–‡ä»¶æµçš„æŒ‡é’ˆï¼ˆç”± fopen æ‰“å¼€çš„æ–‡ä»¶ï¼‰ã€‚</li><li>formatï¼šæ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼ŒæŒ‡å®šå¦‚ä½•è§£ææ–‡ä»¶ä¸­çš„æ•°æ®ã€‚</li><li><strong>â€¦</strong>ï¼šå¯å˜å‚æ•°åˆ—è¡¨ï¼Œç”¨äºå­˜å‚¨è§£æåçš„æ•°æ®ã€‚</li></ul></li><li>è¿”å›å€¼<ul><li>æˆåŠŸæ—¶è¿”å›æˆåŠŸåŒ¹é…å¹¶èµ‹å€¼çš„è¾“å…¥é¡¹æ•°ã€‚</li><li>å¦‚æœåˆ°è¾¾æ–‡ä»¶æœ«å°¾æˆ–å‘ç”Ÿé”™è¯¯ï¼Œè¿”å› EOF</li></ul></li></ul><p>ä½¿ç”¨ fscanf ä»æ–‡ä»¶ä¸­è¯»å–æ ¼å¼åŒ–æ•°æ®å¹¶æ‰“å°åˆ°æ§åˆ¶å°ï¼š<br>å‡è®¾æ–‡ä»¶ data.txt çš„å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Alice 20 88.5</span><br><span class="line">Bob 21 92.0</span><br><span class="line">Charlie 19 85.5</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¸Œæœ›è¯»å–æ¯è¡Œçš„å§“åã€å¹´é¾„å’Œæˆç»©ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    FILE *file;</span><br><span class="line">    <span class="type">char</span> name[<span class="number">50</span>];</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="type">float</span> grade;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»¥è¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">    file = <span class="built_in">fopen</span>(<span class="string">&quot;data.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (file == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;æ— æ³•æ‰“å¼€æ–‡ä»¶&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ fscanf è¯»å–æ ¼å¼åŒ–æ•°æ®</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æ–‡ä»¶å†…å®¹ï¼š\n&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">fscanf</span>(file, <span class="string">&quot;%s %d %f&quot;</span>, name, &amp;age, &amp;grade) == <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;å§“å: %s, å¹´é¾„: %d, æˆç»©: %.1f\n&quot;</span>, name, age, grade);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥æ˜¯å¦å› é”™è¯¯ç»“æŸ</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">ferror</span>(file)) &#123;</span><br><span class="line">        <span class="built_in">perror</span>(<span class="string">&quot;è¯»å–æ–‡ä»¶æ—¶å‡ºé”™&quot;</span>);</span><br><span class="line">        <span class="built_in">fclose</span>(file);</span><br><span class="line">        <span class="keyword">return</span> EXIT_FAILURE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…³é—­æ–‡ä»¶</span></span><br><span class="line">    <span class="built_in">fclose</span>(file);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æ–‡ä»¶è¯»å–å®Œæˆã€‚\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ fscanf ä»æ–‡ä»¶ä¸­è¯»å–æ ¼å¼åŒ–æ•°æ®ã€‚</p><ul><li>æ ¼å¼åŒ–å­—ç¬¦ä¸² â€œ%s %d %fâ€ æŒ‡å®šäº†æ•°æ®çš„æ ¼å¼ï¼š<ul><li>%sï¼šè¯»å–ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆå§“åï¼‰ã€‚</li><li>%dï¼šè¯»å–ä¸€ä¸ªæ•´æ•°ï¼ˆå¹´é¾„ï¼‰ã€‚</li><li>%fï¼šè¯»å–ä¸€ä¸ªæµ®ç‚¹æ•°ï¼ˆæˆç»©ï¼‰ã€‚</li></ul></li><li>fscanf è¿”å›æˆåŠŸåŒ¹é…å¹¶èµ‹å€¼çš„è¾“å…¥é¡¹æ•°ã€‚å¦‚æœè¿”å›å€¼ç­‰äº 3ï¼Œè¯´æ˜æˆåŠŸè¯»å–äº†ä¸€è¡Œæ•°æ®ã€‚</li></ul><p>ç¨‹åºè¿è¡Œåï¼Œæ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ–‡ä»¶å†…å®¹ï¼š</span><br><span class="line">å§“å: Alice, å¹´é¾„: 20, æˆç»©: 88.5</span><br><span class="line">å§“å: Bob, å¹´é¾„: 21, æˆç»©: 92.0</span><br><span class="line">å§“å: Charlie, å¹´é¾„: 19, æˆç»©: 85.5</span><br><span class="line">æ–‡ä»¶è¯»å–å®Œæˆã€‚</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ç³»ç»Ÿè°ƒç”¨IOå‡½æ•°éƒ½æ˜¯å›´ç»•ç€æ–‡ä»¶æè¿°ç¬¦fdè¿›è¡Œç›¸å…³æ“ä½œçš„&lt;/p&gt;
&lt;hr&gt;
&lt;h1&gt;1. fopenæ‰“å¼€æµ&lt;/h1&gt;
&lt;p&gt;FILE *streamï¼Œ æ–‡ä»¶æŒ‡é’ˆï¼ŒFILEç»“æ„ä½“åˆè¢«ç§°ä½œæµã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;t</summary>
      
    
    
    
    <category term="åµŒå…¥å¼" scheme="http://malone-ai.github.io/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/"/>
    
    
    <category term="åµŒå…¥å¼" scheme="http://malone-ai.github.io/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/"/>
    
    <category term="æ–‡ä»¶IO" scheme="http://malone-ai.github.io/tags/%E6%96%87%E4%BB%B6IO/"/>
    
  </entry>
  
  <entry>
    <title>LeNet æ¨å¯¼</title>
    <link href="http://malone-ai.github.io/2025/03/13/LeNet/"/>
    <id>http://malone-ai.github.io/2025/03/13/LeNet/</id>
    <published>2025-03-13T12:58:42.000Z</published>
    <updated>2025-03-13T13:19:09.660Z</updated>
    
    <content type="html"><![CDATA[<p>LeNet-5æ˜¯LeNetç³»åˆ—çš„æœ€ç»ˆç¨³å®šç‰ˆï¼Œå®ƒè¢«ç¾å›½é“¶è¡Œç”¨äºæ‰‹å†™æ•°å­—è¯†åˆ«ï¼Œè¯¥ç½‘ç»œæœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>æ‰€æœ‰å·ç§¯æ ¸å‡ä¸º5x5ï¼Œæ­¥é•¿ä¸º1</li><li>æ‰€æœ‰æ± åŒ–æ–¹æ³•ä¸ºå¹³å‡æ± åŒ–</li><li>æ‰€æœ‰æ¿€æ´»å‡½æ•°é‡‡ç”¨Sigmoid</li></ul><hr><h1>1. LeNet æŸå¤±å‡½æ•°</h1><p>LeNet çš„æŸå¤±å‡½æ•°ä½¿ç”¨ <strong>äº¤å‰ç†µæŸå¤±ï¼ˆCross-Entropy Lossï¼‰</strong>ï¼Œè¿™æ˜¯åˆ†ç±»ä»»åŠ¡ä¸­æœ€å¸¸ç”¨çš„æŸå¤±å‡½æ•°ä¹‹ä¸€ã€‚äº¤å‰ç†µæŸå¤±ç”¨äºè¡¡é‡æ¨¡å‹è¾“å‡ºçš„æ¦‚ç‡åˆ†å¸ƒä¸çœŸå®æ ‡ç­¾ä¹‹é—´çš„å·®å¼‚ã€‚</p><hr><h2 id="1-1-äº¤å‰ç†µæŸå¤±çš„æ•°å­¦å…¬å¼">1.1 äº¤å‰ç†µæŸå¤±çš„æ•°å­¦å…¬å¼</h2><p>å¯¹äºå¤šåˆ†ç±»é—®é¢˜ï¼Œå‡è®¾ï¼š</p><ul><li>æ¨¡å‹çš„è¾“å‡ºæ˜¯ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒ ( \hat{y} = (\hat{y}_1, \hat{y}_2, \dots, \hat{y}_C) )ï¼Œå…¶ä¸­ ( C ) æ˜¯ç±»åˆ«æ•°ï¼ˆLeNet ä¸­ ( C = 10 )ï¼‰ã€‚</li><li>çœŸå®æ ‡ç­¾æ˜¯ä¸€ä¸ª one-hot ç¼–ç çš„å‘é‡ ( y = (y_1, y_2, \dots, y_C) )ï¼Œå…¶ä¸­åªæœ‰ä¸€ä¸ªå…ƒç´ ä¸º 1ï¼Œå…¶ä½™ä¸º 0ã€‚</li></ul><p>äº¤å‰ç†µæŸå¤±çš„å…¬å¼ä¸ºï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext><mi mathvariant="normal">L</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">s</mi><mi mathvariant="normal">s</mi></mtext><mo>=</mo><mo>âˆ’</mo><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow><mi>C</mi></mrow></msubsup><msub><mi>y</mi><mi>i</mi></msub><mi>log</mi><mo>(</mo><msub><mover accent="true"><mrow><mi>y</mi></mrow><mo>^</mo></mover><mi>i</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">\text{Loss} = -\sum_{i=1}^{C} y_i \log(\hat{y}_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.8283360000000002em;"></span><span class="strut bottom" style="height:3.106005em;vertical-align:-1.277669em;"></span><span class="base displaystyle textstyle uncramped"><span class="text mord displaystyle textstyle uncramped"><span class="mord mathrm">L</span><span class="mord mathrm">o</span><span class="mord mathrm">s</span><span class="mord mathrm">s</span></span><span class="mrel">=</span><span class="mord">âˆ’</span><span class="mop op-limits"><span class="vlist"><span style="top:1.1776689999999999em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.000005000000000143778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span><span class="op-symbol large-op mop">âˆ‘</span></span></span><span style="top:-1.2500050000000003em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.07153em;">C</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mopen">(</span><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle cramped"><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span><span style="top:0em;margin-left:0.11112em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p>å…¶ä¸­ï¼š</p><ul><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>y</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">y_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span> æ˜¯çœŸå®æ ‡ç­¾çš„ç¬¬ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span> ä¸ªå…ƒç´ ã€‚</li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mover accent="true"><mrow><mi>y</mi></mrow><mo>^</mo></mover><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\hat{y}_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord textstyle cramped"><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span><span style="top:0em;margin-left:0.11112em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span> æ˜¯æ¨¡å‹é¢„æµ‹çš„ç¬¬ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span> ä¸ªç±»åˆ«çš„æ¦‚ç‡ã€‚</li></ul><hr><h2 id="1-2-LeNet-çš„è¾“å‡ºå±‚å’ŒæŸå¤±å‡½æ•°">1.2 LeNet çš„è¾“å‡ºå±‚å’ŒæŸå¤±å‡½æ•°</h2><p>LeNet çš„è¾“å‡ºå±‚æ˜¯ä¸€ä¸ªå…¨è¿æ¥å±‚ï¼Œè¾“å‡º 10 ä¸ªå€¼ï¼ˆå¯¹åº” 0-9 çš„æ•°å­—ç±»åˆ«ï¼‰ã€‚ä¸ºäº†å°†è¿™äº›å€¼è½¬æ¢ä¸ºæ¦‚ç‡åˆ†å¸ƒï¼Œé€šå¸¸ä½¿ç”¨ <strong>softmax æ¿€æ´»å‡½æ•°</strong>ï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mover accent="true"><mrow><mi>y</mi></mrow><mo>^</mo></mover><mi>i</mi></msub><mo>=</mo><mfrac><mrow><msup><mi>e</mi><mrow><msub><mi>z</mi><mi>i</mi></msub></mrow></msup></mrow><mrow><msubsup><mo>âˆ‘</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mrow><mi>C</mi></mrow></msubsup><msup><mi>e</mi><mrow><msub><mi>z</mi><mi>j</mi></msub></mrow></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex">\hat{y}_i = \frac{e^{z_i}}{\sum_{j=1}^{C} e^{z_j}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.341392em;"></span><span class="strut bottom" style="height:2.5098409999999998em;vertical-align:-1.1684489999999998em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle cramped"><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span><span style="top:0em;margin-left:0.11112em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.7323309999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mop"><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">âˆ‘</span><span class="vlist"><span style="top:0.30001em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.364em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.07153em;">C</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:-0.30997em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:0.15000000000000002em;margin-right:0.07142857142857144em;margin-left:-0.04398em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:-0.04398em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span></p><p>å…¶ä¸­ï¼š</p><ul><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>z</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">z_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.04398em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span> æ˜¯è¾“å‡ºå±‚çš„ç¬¬ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span> ä¸ªå€¼ã€‚</li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mover accent="true"><mrow><mi>y</mi></mrow><mo>^</mo></mover><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\hat{y}_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord textstyle cramped"><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span><span style="top:0em;margin-left:0.11112em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span> æ˜¯ç¬¬ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span> ä¸ªç±»åˆ«çš„é¢„æµ‹æ¦‚ç‡ã€‚</li></ul><p>ç„¶åï¼Œä½¿ç”¨äº¤å‰ç†µæŸå¤±è®¡ç®—æ¨¡å‹è¾“å‡ºä¸çœŸå®æ ‡ç­¾ä¹‹é—´çš„å·®å¼‚ã€‚</p><hr><h1>1.3 äº¤å‰ç†µæŸå¤±çš„ç‰¹ç‚¹</h1><p>äº¤å‰ç†µæŸå¤±æ˜¯åˆ†ç±»ä»»åŠ¡ä¸­æœ€å¸¸ç”¨çš„æŸå¤±å‡½æ•°ä¹‹ä¸€ï¼Œå®ƒç›´æ¥è¡¡é‡æ¨¡å‹è¾“å‡ºçš„æ¦‚ç‡åˆ†å¸ƒä¸çœŸå®åˆ†å¸ƒä¹‹é—´çš„å·®å¼‚ã€‚æ­¤å¤–ï¼Œå®ƒä¸ softmax ç»“åˆæ—¶ï¼Œæ¢¯åº¦è®¡ç®—ç®€å•ä¸”ç¨³å®šï¼Œé€‚åˆåå‘ä¼ æ’­ã€‚</p><p>LeNet çš„æŸå¤±å‡½æ•°ä½¿ç”¨ <strong>äº¤å‰ç†µæŸå¤±</strong>ï¼Œç”¨äºè¡¡é‡æ¨¡å‹è¾“å‡ºä¸çœŸå®æ ‡ç­¾ä¹‹é—´çš„å·®å¼‚ã€‚é€šè¿‡æœ€å°åŒ–äº¤å‰ç†µæŸå¤±ï¼Œæ¨¡å‹å¯ä»¥å­¦ä¹ åˆ°æ›´å¥½çš„å‚æ•°ï¼Œä»è€Œæé«˜åˆ†ç±»å‡†ç¡®ç‡ã€‚äº¤å‰ç†µæŸå¤±ä¸ softmax æ¿€æ´»å‡½æ•°ç»“åˆï¼Œæ˜¯åˆ†ç±»ä»»åŠ¡ä¸­çš„ç»å…¸ç»„åˆã€‚</p><h1>2. ç½‘ç»œæ¶æ„</h1><p>ç½‘ç»œæ¶æ„å›¾ï¼š</p><p><img src="image.png" alt=""><br><img src="/images/LeNet_1.png" alt=""></p><h1>2.1 è¾“å…¥å±‚</h1><p>LeNet-5 çš„è¾“å…¥æ˜¯ <strong>32x32 çš„ç°åº¦å›¾åƒ</strong>ï¼Œé€šé“æ•°ä¸º 1ï¼ˆå› ä¸ºæ˜¯ç°åº¦å›¾ï¼‰ã€‚è¾“å…¥å¼ é‡çš„å½¢çŠ¶ä¸º <code>(1, 32, 32)</code>ã€‚</p><p><img src="image.png" alt=""><br><img src="/images/LeNet_1.png" alt=""></p><hr><h1>2.2 å·ç§¯å±‚ C1</h1><ul><li><strong>å·ç§¯æ ¸å¤§å°</strong>ï¼š5x5</li><li><strong>å·ç§¯æ ¸æ•°é‡</strong>ï¼š6</li><li><strong>æ­¥é•¿ï¼ˆstrideï¼‰</strong>ï¼š1</li><li><strong>å¡«å……ï¼ˆpaddingï¼‰</strong>ï¼š0</li></ul><p><img src="image.png" alt=""><br><img src="/images/LeNet_1.png" alt=""></p><p><strong>è®¡ç®—è¿‡ç¨‹</strong>ï¼š<br>å·ç§¯æ“ä½œçš„è¾“å‡ºå°ºå¯¸å…¬å¼ä¸ºï¼š</p>\text{è¾“å‡ºå°ºå¯¸} = \frac{\text{è¾“å…¥å°ºå¯¸} - \text{å·ç§¯æ ¸å¤§å°} + 2 \times \text{å¡«å……}}{\text{æ­¥å¹…}} + 1<p>å¯¹äº C1 å±‚ï¼š</p>\text{è¾“å‡ºå°ºå¯¸} = \frac{32 - 5 + 2 \times 0}{1} + 1 = 28<p>å› æ­¤ï¼ŒC1 å±‚çš„è¾“å‡ºæ˜¯ <strong>6 ä¸ª 28x28 çš„ç‰¹å¾å›¾</strong>ï¼Œå½¢çŠ¶ä¸º <code>(6, 28, 28)</code>ã€‚</p><hr><h1>2.3 æ± åŒ–å±‚ S2</h1><ul><li><strong>æ± åŒ–ç±»å‹</strong>ï¼šå¹³å‡æ± åŒ–</li><li><strong>æ± åŒ–æ ¸å¤§å°</strong>ï¼š2x2</li><li><strong>æ­¥å¹…ï¼ˆstrideï¼‰</strong>ï¼š2</li><li><strong>å¡«å……ï¼ˆpaddingï¼‰</strong>ï¼š0</li></ul><p><img src="image.png" alt=""><br><img src="/images/LeNet_1.png" alt=""></p><p><strong>è®¡ç®—è¿‡ç¨‹</strong>ï¼š<br>æ± åŒ–æ“ä½œçš„è¾“å‡ºå°ºå¯¸å…¬å¼ä¸ºï¼š</p>\text{è¾“å‡ºå°ºå¯¸} = \frac{\text{è¾“å…¥å°ºå¯¸} - \text{æ± åŒ–æ ¸å¤§å°}}{\text{æ­¥å¹…}} + 1<p>å¯¹äº S2 å±‚ï¼š</p>\text{è¾“å‡ºå°ºå¯¸} = \frac{28 - 2}{2} + 1 = 14<p>å› æ­¤ï¼ŒS2 å±‚çš„è¾“å‡ºæ˜¯ <strong>6 ä¸ª 14x14 çš„ç‰¹å¾å›¾</strong>ï¼Œå½¢çŠ¶ä¸º <code>(6, 14, 14)</code>ã€‚</p><hr><h1>2.4 å·ç§¯å±‚ C3</h1><ul><li><strong>å·ç§¯æ ¸å¤§å°</strong>ï¼š5x5</li><li><strong>å·ç§¯æ ¸æ•°é‡</strong>ï¼š16</li><li><strong>æ­¥å¹…ï¼ˆstrideï¼‰</strong>ï¼š1</li><li><strong>å¡«å……ï¼ˆpaddingï¼‰</strong>ï¼š0</li></ul><p><img src="image.png" alt=""><br><img src="/images/LeNet_1.png" alt=""></p><p><strong>è®¡ç®—è¿‡ç¨‹</strong>ï¼š<br>å¯¹äº C3 å±‚ï¼š</p>\text{è¾“å‡ºå°ºå¯¸} =\frac{\text{è¾“å…¥å°ºå¯¸} - \text{å·ç§¯æ ¸å¤§å°} + 2 \times \text{å¡«å……}}{\text{æ­¥å¹…}} + 1 = \frac{14 - 5 + 2 \times 0}{1} + 1 = 10<p>å› æ­¤ï¼ŒC3 å±‚çš„è¾“å‡ºæ˜¯ <strong>16 ä¸ª 10x10 çš„ç‰¹å¾å›¾</strong>ï¼Œå½¢çŠ¶ä¸º <code>(16, 10, 10)</code>ã€‚</p><hr><h1>2.5 æ± åŒ–å±‚ S4</h1><ul><li><strong>æ± åŒ–ç±»å‹</strong>ï¼šå¹³å‡æ± åŒ–</li><li><strong>æ± åŒ–æ ¸å¤§å°</strong>ï¼š2x2</li><li><strong>æ­¥å¹…ï¼ˆstrideï¼‰</strong>ï¼š2</li><li><strong>å¡«å……ï¼ˆpaddingï¼‰</strong>ï¼š0</li></ul><p><img src="image.png" alt=""><br><img src="/images/LeNet_1.png" alt=""></p><p><strong>è®¡ç®—è¿‡ç¨‹</strong>ï¼š<br>å¯¹äº S4 å±‚ï¼š</p>\text{è¾“å‡ºå°ºå¯¸} = \frac{\text{è¾“å…¥å°ºå¯¸} - \text{æ± åŒ–æ ¸å¤§å°}}{\text{æ­¥å¹…}} + 1 = \frac{10 - 2}{2} + 1 = 5<p>å› æ­¤ï¼ŒS4 å±‚çš„è¾“å‡ºæ˜¯ <strong>16 ä¸ª 5x5 çš„ç‰¹å¾å›¾</strong>ï¼Œå½¢çŠ¶ä¸º <code>(16, 5, 5)</code>ã€‚</p><hr><h1>2.6 å…¨è¿æ¥å±‚ C5</h1><ul><li><strong>è¾“å…¥</strong>ï¼šå°† S4 å±‚çš„è¾“å‡ºå±•å¹³ä¸ºä¸€ç»´å‘é‡ã€‚</li><li><strong>è¾“å…¥å¤§å°</strong>ï¼š<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mn>6</mn><mo>Ã—</mo><mn>5</mn><mo>Ã—</mo><mn>5</mn><mo>=</mo><mn>4</mn><mn>0</mn><mn>0</mn></mrow><annotation encoding="application/x-tex">16 \times 5 \times 5 = 400</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">1</span><span class="mord mathrm">6</span><span class="mbin">Ã—</span><span class="mord mathrm">5</span><span class="mbin">Ã—</span><span class="mord mathrm">5</span><span class="mrel">=</span><span class="mord mathrm">4</span><span class="mord mathrm">0</span><span class="mord mathrm">0</span></span></span></span></li><li><strong>è¾“å‡ºå¤§å°</strong>ï¼š120</li></ul><p><img src="image.png" alt=""><br><img src="/images/LeNet_1.png" alt=""></p><p><strong>è®¡ç®—è¿‡ç¨‹</strong>ï¼š<br>C5 å±‚æ˜¯ä¸€ä¸ªå…¨è¿æ¥å±‚ï¼Œå°† 400 ç»´çš„è¾“å…¥æ˜ å°„åˆ° 120 ç»´çš„è¾“å‡ºï¼š</p>\text{è¾“å‡º} = W \cdot \text{è¾“å…¥} + b<p>å…¶ä¸­ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">W</span></span></span></span> æ˜¯æƒé‡çŸ©é˜µï¼Œå½¢çŠ¶ä¸º <code>(120, 400)</code>ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">b</span></span></span></span> æ˜¯åç½®å‘é‡ï¼Œå½¢çŠ¶ä¸º <code>(120,)</code>ã€‚</p><hr><h1>2.7 å…¨è¿æ¥å±‚ F6</h1><ul><li><strong>è¾“å…¥å¤§å°</strong>ï¼š120</li><li><strong>è¾“å‡ºå¤§å°</strong>ï¼š84</li></ul><p><img src="image.png" alt=""><br><img src="/images/LeNet_1.png" alt=""></p><p><strong>è®¡ç®—è¿‡ç¨‹</strong>ï¼š<br>F6 å±‚å°† 120 ç»´çš„è¾“å…¥æ˜ å°„åˆ° 84 ç»´çš„è¾“å‡ºï¼š</p>\text{è¾“å‡º} = W \cdot \text{è¾“å…¥} + b<p>å…¶ä¸­ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">W</span></span></span></span> æ˜¯æƒé‡çŸ©é˜µï¼Œå½¢çŠ¶ä¸º <code>(84, 120)</code>ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">b</span></span></span></span> æ˜¯åç½®å‘é‡ï¼Œå½¢çŠ¶ä¸º <code>(84,)</code>ã€‚</p><hr><h1>2.8 è¾“å‡ºå±‚</h1><ul><li><strong>è¾“å…¥å¤§å°</strong>ï¼š84</li><li><strong>è¾“å‡ºå¤§å°</strong>ï¼š10ï¼ˆå¯¹åº” 0-9 çš„æ•°å­—ç±»åˆ«ï¼‰</li></ul><p><img src="image.png" alt=""><br><img src="/images/LeNet_1.png" alt=""></p><p><strong>è®¡ç®—è¿‡ç¨‹</strong>ï¼š<br>è¾“å‡ºå±‚å°† 84 ç»´çš„è¾“å…¥æ˜ å°„åˆ° 10 ç»´çš„è¾“å‡ºã€‚å…¶è®¡ç®—ä¸ºï¼š</p>\text{è¾“å‡º} = W \cdot \text{è¾“å…¥} + b<p>å…¶ä¸­ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">W</span></span></span></span> æ˜¯æƒé‡çŸ©é˜µï¼Œå½¢çŠ¶ä¸º <code>(10, 84)</code>ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">b</span></span></span></span> æ˜¯åç½®å‘é‡ï¼Œå½¢çŠ¶ä¸º <code>(10,)</code>ã€‚</p><p>æœ€åï¼Œä½¿ç”¨ <strong>softmax æ¿€æ´»å‡½æ•°</strong> å°†è¾“å‡ºè½¬æ¢ä¸ºæ¦‚ç‡åˆ†å¸ƒã€‚</p><hr><h1>æ€»ç»“</h1><p>LeNet é€šè¿‡å·ç§¯å±‚æå–å±€éƒ¨ç‰¹å¾ï¼Œé€šè¿‡å·ç§¯æ ¸å…±äº«æƒé‡å‡å°‘å‚æ•°ã€‚ä½¿ç”¨æ± åŒ–å±‚é™ä½ç‰¹å¾å›¾ç»´åº¦ï¼Œå¢å¼ºå¹³ç§»ä¸å˜æ€§ã€‚æœ€åé€šè¿‡å…¨è¿æ¥å±‚æ•´åˆç‰¹å¾ï¼Œè¾“å‡ºåˆ†ç±»ç»“æœã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;LeNet-5æ˜¯LeNetç³»åˆ—çš„æœ€ç»ˆç¨³å®šç‰ˆï¼Œå®ƒè¢«ç¾å›½é“¶è¡Œç”¨äºæ‰‹å†™æ•°å­—è¯†åˆ«ï¼Œè¯¥ç½‘ç»œæœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ‰€æœ‰å·ç§¯æ ¸å‡ä¸º5x5ï¼Œæ­¥é•¿ä¸º1&lt;/li&gt;
&lt;li&gt;æ‰€æœ‰æ± åŒ–æ–¹æ³•ä¸ºå¹³å‡æ± åŒ–&lt;/li&gt;
&lt;li&gt;æ‰€æœ‰æ¿€æ´»å‡½æ•°é‡‡ç”¨Sigmoid&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;</summary>
      
    
    
    
    <category term="æ·±åº¦å­¦ä¹ " scheme="http://malone-ai.github.io/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="æ·±åº¦å­¦ä¹ " scheme="http://malone-ai.github.io/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
    <category term="LeNet" scheme="http://malone-ai.github.io/tags/LeNet/"/>
    
  </entry>
  
  <entry>
    <title>Springboot3 + vue3 å®ç°åˆ†é¡µæŸ¥è¯¢</title>
    <link href="http://malone-ai.github.io/2025/03/12/project-test5/"/>
    <id>http://malone-ai.github.io/2025/03/12/project-test5/</id>
    <published>2025-03-12T09:58:12.000Z</published>
    <updated>2025-03-16T06:41:48.761Z</updated>
    
    <content type="html"><![CDATA[<h1>1. æ’ä»¶å®‰è£…ä¸é—®é¢˜å¼•å‡º</h1><p>åœ¨vueå·¥ç¨‹ç›®å½•æ‰“å¼€cmdï¼Œè¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i axios -S</span><br></pre></td></tr></table></figure><p>å®‰è£…æ’ä»¶</p><p>åœ¨vue/src/views/Home.vueä¸­<code>&lt;script&gt;&lt;/script&gt;</code>ä¹‹é—´æ·»åŠ ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">axios.get(&#x27;http://localhost:9999/admin/selectAll&#x27;).then(res =&gt; &#123;</span><br><span class="line">  console.log(res)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>è¿è¡Œvueå·¥ç¨‹åè¿›å…¥manager/homeè·¯ç”±ï¼Œå³é”®æ£€æŸ¥ï¼Œåœ¨æ§åˆ¶å°é‡Œå°±å‘ç°äº†è¯·æ±‚é”™è¯¯ã€‚</p><p>è¿™ä¸ªé”™è¯¯ï¼Œå…¶å®æ˜¯å› ä¸ºvueé¡¹ç›®çš„ç«¯å£å’Œä¸Šé¢ä½¿ç”¨çš„ç«¯å£ä¸ä¸€æ ·ï¼Œè¿™ç§æƒ…å†µä¸‹æµè§ˆå™¨é»˜è®¤ä¼šæœ‰ä¸€ä¸ªè·¨åŸŸçš„é™åˆ¶ï¼Œä¸å…è®¸åœ¨ä¸ä¸€æ ·çš„ç«¯å£å·é‡Œè¯·æ±‚æ•°æ®ï¼š</p><pre><code>Failed to load resource: net::ERR_CONNECTION_REFUSED</code></pre><h2 id="1-2-å¤„ç†è·¨åŸŸé™åˆ¶">1.2 å¤„ç†è·¨åŸŸé™åˆ¶</h2><p>éœ€è¦åœ¨springbooté‡Œè®¾ç½®ç»Ÿä¸€çš„è·¨åŸŸå¤„ç†ã€‚</p><p>åœ¨springbootå·¥ç¨‹çš„com.example.commoné‡Œæ–°å»ºCorsConfigç±»ï¼Œå¹¶å¯¹è¿™ä¸ªç±»æ·»åŠ <code>@Configuration</code>æ³¨è§£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.common;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.CorsConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.UrlBasedCorsConfigurationSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.filter.CorsFilter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CorsConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> CorsFilter <span class="title function_">cosConfig</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">UrlBasedCorsConfigurationSource</span> <span class="variable">source</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UrlBasedCorsConfigurationSource</span>();</span><br><span class="line">        <span class="type">CorsConfiguration</span> <span class="variable">corsConfiguration</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CorsConfiguration</span>();</span><br><span class="line">        corsConfiguration.addAllowedOrigin(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        corsConfiguration.addAllowedHeader(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        corsConfiguration.addAllowedMethod(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        source.registerCorsConfiguration(<span class="string">&quot;/**&quot;</span>, corsConfiguration);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CorsFilter</span>(source);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶è¿è¡Œspringbootå·¥ç¨‹ã€vueå·¥ç¨‹ï¼Œè®¿é—®å‰ç«¯çš„manager/homeï¼Œå³é”®æ£€æŸ¥ï¼ŒæŸ¥çœ‹æ§åˆ¶å°ï¼Œå°±ä¼šå‘ç°æœ‰æ•°æ®ä¼ è¿‡æ¥äº†ã€‚</p><p>ä½†æ˜¯æœ‰æ—¶å»è¯·æ±‚å¹¶ä¸ä¸€å®šä¼šæˆåŠŸï¼Œæ‰€ä»¥å¯ä»¥åˆ¤æ–­ä¸€ä¸‹çŠ¶æ€ç ï¼š<br>æŠŠåœ¨vue/src/views/Home.vueä¸­<code>&lt;script&gt;&lt;/script&gt;</code>ä¹‹é—´æ·»åŠ çš„ä»£ç æ”¹æˆï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">axios.get(&#x27;http://localhost:9999/admin/selectAll&#x27;).then(res =&gt; &#123;</span><br><span class="line">  if (res.code != 200) &#123;</span><br><span class="line">    // é”™è¯¯æç¤º</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    console.log(res)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1>2. å°è£…ç»Ÿä¸€çš„è¯·æ±‚å·¥å…· request.js</h1><p>åœ¨vue/srcä¸­æ–°å»ºä¸€ä¸ªutilsç›®å½•ï¼Œåœ¨è¿™ä¸ªç›®å½•ä¸‹åœ¨åˆ›å»ºrequest.jsï¼Œå†…å®¹ç¼–è¾‘ä¸ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">ElMessage</span>&#125; <span class="keyword">from</span> <span class="string">&quot;element-plus&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> request = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">baseURL</span>: <span class="string">&#x27;http://localhost:9999&#x27;</span>,</span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">30000</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">request.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="function"><span class="params">config</span> =&gt;</span>&#123;</span><br><span class="line">    config.<span class="property">headers</span>[<span class="string">&#x27;Content-Type&#x27;</span>] = <span class="string">&#x27;application/json;charset=utf-8&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">&#125;, <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">request.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">    <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> res = response.<span class="property">data</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> res == <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">            res = res ? <span class="title class_">JSON</span>.<span class="title function_">parse</span>(res) : res</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> === <span class="number">404</span>) &#123;</span><br><span class="line">            <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(<span class="string">&#x27;æœªæ‰¾åˆ°è¯·æ±‚æ¥å£&#x27;</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> === <span class="number">500</span>) &#123;</span><br><span class="line">            <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(<span class="string">&#x27;ç³»ç»Ÿå¼‚å¸¸ï¼Œè¯·æŸ¥çœ‹åç«¯æ§åˆ¶å°æŠ¥é”™&#x27;</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(error.<span class="property">message</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> request</span><br></pre></td></tr></table></figure><ol><li>å¯¼å…¥axios</li><li>å¯¼å…¥äº†ElMessageï¼ˆelement-plusæä¾›çš„å¼¹çª—æç¤ºçš„ç»„ä»¶ï¼‰</li><li>åˆ›å»ºrequestå¯¹è±¡<ul><li>é€šè¿‡axiosçš„createæ–¹æ³•åˆ›å»ºäº†requestå¯¹è±¡</li><li>åœ¨requestå¯¹è±¡é‡Œè®¾ç½®äº†åç«¯åœ°å€ä»¥åŠåå°æ¥å£çš„è¶…æ—¶æ—¶é—´ï¼ˆ30sï¼‰</li></ul></li><li>è¯·æ±‚å¼€å§‹åšæ‹¦æˆªå™¨å¤„ç†<ul><li>æ‹¦æˆªå™¨å¼€å§‹æ—¶è®¾ç½®ç»Ÿä¸€çš„è¯·æ±‚å¤´ä¸º<strong>application/json</strong>ï¼Œå­—ç¬¦é›†ä¸ºutf-i</li></ul></li><li>è¯·æ±‚æ•°æ®åšæ‹¦æˆªå™¨å¤„ç†<ul><li>å…ˆæ‹¿å‡ºç»“æœï¼ˆlet res = response.dataï¼‰</li><li>åˆ¤æ–­ä¸€ä¸‹resçš„ç±»å‹ï¼Œå¦‚æœæ˜¯Stringå°±è½¬æ¢æˆjson</li><li>å½“æœ‰é”™è¯¯æ—¶ï¼Œ<ul><li>å¦‚æœçŠ¶æ€ç ä¸º404æç¤ºæœªæ‰¾åˆ°è¯·æ±‚æ¥å£</li><li>500ï¼Œç³»ç»Ÿå¼‚å¸¸</li><li>å…¶ä»–äº¤ç»™æ§åˆ¶å°æ‰“å°</li></ul></li></ul></li><li>è¿”å›requestå¯¹è±¡<ul><li>æœ€åä¸€è¡Œä»£ç <strong>export default request</strong>ç”¨äºè¿”å›requestå¯¹è±¡</li></ul></li></ol><p>ç„¶åå°±å¯ä»¥æŠŠåœ¨vue/src/views/Home.vueä¸­<code>&lt;script&gt;&lt;/script&gt;</code>ä¹‹é—´æ·»åŠ çš„ä»£ç æ”¹æˆï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">request.<span class="title function_">get</span>(<span class="string">&#x27;/admin/selectAll&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="string">&#x27;200&#x27;</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title class_">ElMessage</span>(res.<span class="property">msg</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1>3. åˆ†é¡µæŸ¥è¯¢</h1><p>ä¸åŒäºselectAllæ¥å£ï¼Œåˆ†é¡µæŸ¥è¯¢selectPageæ¥å£è¿”å›çš„æ˜¯åˆ†é¡µå¯¹è±¡ï¼Œå®ƒåŒ…å«ï¼š</p><ul><li>totalï¼šæ•°æ®åº“è¡¨æ‰€æœ‰æ•°æ®æ€»çš„ä¸ªæ•°</li><li>listï¼šè¿”å›çš„æ•°æ®æ•°ç»„</li><li>pageNumï¼šå½“å‰çš„é¡µç </li><li>pageSizeï¼šæ¯é¡µå±•ç¤ºçš„ä¸ªæ•°</li></ul><h2 id="3-1-æ·»åŠ ä¾èµ–">3.1 æ·»åŠ ä¾èµ–</h2><p>ä½¿ç”¨åˆ†é¡µæ’ä»¶pageHelperæ¥å®Œæˆè¿™ä¸ªåŠŸèƒ½ã€‚<br>åœ¨springbootå·¥ç¨‹çš„pom.xmlä¸‹æ·»åŠ ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--åˆ†é¡µæ’ä»¶pageHelper--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="image.png" alt="alt text"><br><img src="/images/project-test5_1.png" alt=""></p><p>åŠ è½½ä¾èµ–åå°±å¯ä»¥å»å®ç°selectPageæ¥å£äº†ã€‚</p><h2 id="3-2-æ¥å£å®ç°">3.2 æ¥å£å®ç°</h2><p>åœ¨springbootå·¥ç¨‹çš„com/example/controller/AdminController.javaä¸‹æ·»åŠ åˆ†é¡µæŸ¥è¯¢çš„æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/selectPage&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">selectPage</span><span class="params">(<span class="meta">@RequestParam(defaultValue = &quot;1&quot;)</span> Integer pageNum,</span></span><br><span class="line"><span class="params">                         <span class="meta">@RequestParam(defaultValue = &quot;10&quot;)</span> Integer pageSize)</span> &#123;</span><br><span class="line">    PageInfo&lt;Admin&gt; adminPageInfo = adminService.selectPage(pageNum, pageSize);</span><br><span class="line">    <span class="keyword">return</span> Result.success(adminPageInfo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>selectPageæœ€å°‘ä¸¤ä¸ªå‚æ•°ï¼š</p><ul><li>pageNumï¼šå½“å‰çš„é¡µç </li><li>pageSize</li></ul><p><strong>@RequestParam</strong>æ˜¯å‚æ•°çš„è·¯å¾„ï¼Œ**(defaultValue = â€œ1â€)**æ˜¯è®¾ç½®é»˜è®¤å€¼ä¸º1ã€‚</p><p>è¿™ä¸ªæ¥å£ä¸»è¦æ˜¯é€šè¿‡æ³¨å…¥çš„ç±»çš„å…·ä½“å¯¹è±¡adminServiceå¹¶è°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„selectPageæ–¹æ³•æ¥å®ç°çš„ï¼ŒadminServiceé‡Œæˆ‘ä»¬è¿˜æ²¡æœ‰å®ç°è¿™ä¸ªæ–¹æ³•ï¼Œå› æ­¤æˆ‘ä»¬å¾—å»adminServiceæ‰€å±çš„ç±»AdminServiceï¼Œä¹Ÿå°±æ˜¯serviceå±‚çš„ä¸€ä¸ªç±»ä¸­å»å®ç°è¿™ä¸ªæ–¹æ³•ã€‚</p><p>åœ¨springbootå·¥ç¨‹ä¸‹çš„com/example/service/AdminService.javaä¸­æ·»åŠ selectPageæ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> PageInfo&lt;Admin&gt; <span class="title function_">selectPage</span><span class="params">(Integer pageNum, Integer pageSize)</span> &#123;</span><br><span class="line">    <span class="comment">// å¼€å¯åˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line">    PageHelper.startPage(pageNum, pageSize);</span><br><span class="line">    List&lt;Admin&gt; adminList = adminMapper.selectAll();</span><br><span class="line">    <span class="keyword">return</span> PageInfo.of(adminList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä»¥åè®¿é—®å‰ç«¯çš„/manager/adminå°±å¯ä»¥è·å¾—æ•°æ®äº†ï¼Œä½†æ˜¯è¿˜éœ€è¦åœ¨å‰ç«¯æ¸²æŸ“è¿™ä¸ªæ•°æ®ã€‚</p><h2 id="3-3-æ•°æ®æ¸²æŸ“">3.3 æ•°æ®æ¸²æŸ“</h2><p>æŠŠvue/src/views/Home.vueæ›´åä¸ºAdmin.vueï¼Œç„¶ååœ¨<code>&lt;script&gt;&lt;/script&gt;</code>ä¹‹é—´æ·»åŠ çš„ä»£ç æ”¹æˆï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">load</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  request.<span class="title function_">get</span>(<span class="string">&#x27;/admin/selectPage&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    data.<span class="property">tableData</span> = res.<span class="property">data</span>.<span class="property">list</span></span><br><span class="line">    data.<span class="property">total</span> = res.<span class="property">data</span>.<span class="property">total</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">load</span>()</span><br></pre></td></tr></table></figure><p><code>const load = () =&gt; &#123;&#125;</code>éƒ¨åˆ†æ˜¯å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œ<code>load()</code>æ˜¯è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p><p>ç°åœ¨å»è®¿é—®å‰ç«¯çš„/manager/adminæ¥å£å°±å¯ä»¥å®ç°æ•°æ®æ¸²æŸ“ï¼Œä½†æ˜¯æ— æ³•å®ç°åˆ†é¡µã€‚</p><p>æˆ‘ä»¬åœ¨serviceå±‚å’Œcontrollerå±‚çš„æ¥å£éƒ½æ˜¯å¸¦ä¸¤ä¸ªé»˜è®¤å‚æ•°çš„ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨Admin.vueä¸­å¹¶æ²¡æœ‰ä¼ é€’ä»»ä½•å‚æ•°ï¼Œåªä½¿ç”¨äº†é»˜è®¤å‚æ•°ã€‚åº”ä¼ é€’å‚æ•°ã€‚</p><p>æ‰€ä»¥å°†<code>load</code>æ–¹æ³•æ”¹æˆï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">load</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  request.<span class="title function_">get</span>(<span class="string">&#x27;/admin/selectPage&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      <span class="attr">pageNum</span>: data.<span class="property">pageNum</span>,</span><br><span class="line">      <span class="attr">pageSize</span>: data.<span class="property">pageSize</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    data.<span class="property">tableData</span> = res.<span class="property">data</span>.<span class="property">list</span></span><br><span class="line">    data.<span class="property">total</span> = res.<span class="property">data</span>.<span class="property">total</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">load</span>()</span><br></pre></td></tr></table></figure><p>ç°åœ¨å»è®¿é—®å‰ç«¯çš„/manager/adminæ¥å£å‘ç°ä¹‹å‰æ˜¯ä¸€æ¬¡æ€§å±•ç¤ºäº†æ‰€æœ‰æ•°æ®ï¼Œè¿™æ¬¡æ˜¯å±•ç¤ºäº†5ä¸ªæ•°æ®ï¼ˆdata.pageSize=5ï¼‰ã€‚ä½†æ˜¯åˆ‡æ¢é¡µé¢æ²¡æœ‰ä»€ä¹ˆå˜åŒ–ã€‚</p><p>æŠŠel-tableç»„ä»¶ä¸‹æœ‰ä¸€è¡Œä»£ç æ˜¯ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@current-change=<span class="string">&quot;handleCurrentChange&quot;</span></span><br></pre></td></tr></table></figure><p>æŠŠå‚æ•°æ”¹æˆ&quot;load&quot;ï¼Œæ„ä¸ºåˆ‡æ¢é¡µç æ—¶è§¦å‘loadæ–¹æ³•è°ƒç”¨ï¼Œè¿™æ ·å°±å®ç°äº†åˆ†é¡µæŸ¥è¯¢ã€‚</p><p>å†æ·»åŠ è¯·æ±‚æˆåŠŸä¸å¦åˆ¤æ–­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">load</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  request.<span class="title function_">get</span>(<span class="string">&#x27;/admin/selectPage&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      <span class="attr">pageNum</span>: data.<span class="property">pageNum</span>,</span><br><span class="line">      <span class="attr">pageSize</span>: data.<span class="property">pageSize</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="string">&#x27;200&#x27;</span>) &#123;</span><br><span class="line">      data.<span class="property">tableData</span> = res.<span class="property">data</span>.<span class="property">list</span></span><br><span class="line">      data.<span class="property">total</span> = res.<span class="property">data</span>.<span class="property">total</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">load</span>()</span><br></pre></td></tr></table></figure><h2 id="3-4-æŸ¥è¯¢">3.4 æŸ¥è¯¢</h2><p>å‰é¢å®ç°äº†åˆ†é¡µï¼Œç°åœ¨å®ç°æŸ¥è¯¢ã€‚</p><p>é‚£ä¹ˆéœ€è¦åœ¨loadæ–¹æ³•é‡Œå†æ·»åŠ ä¸€ä¸ªå‚æ•°<code>name</code>ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">load</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  request.<span class="title function_">get</span>(<span class="string">&#x27;/admin/selectPage&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      <span class="attr">pageNum</span>: data.<span class="property">pageNum</span>,</span><br><span class="line">      <span class="attr">pageSize</span>: data.<span class="property">pageSize</span>,</span><br><span class="line">      <span class="attr">name</span>: data.<span class="property">name</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="string">&#x27;200&#x27;</span>) &#123;</span><br><span class="line">      data.<span class="property">tableData</span> = res.<span class="property">data</span>.<span class="property">list</span></span><br><span class="line">      data.<span class="property">total</span> = res.<span class="property">data</span>.<span class="property">total</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(res.<span class="property">msg</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">load</span>()</span><br></pre></td></tr></table></figure><p>è¿™é‡Œloadè°ƒç”¨çš„æ˜¯åç«¯controllerå±‚çš„æ¥å£ï¼Œç„¶åcontrollerå±‚å†è°ƒç”¨serviceå±‚ï¼Œserviceå±‚åˆé€šè¿‡mapperå±‚ï¼Œæ‰€ä»¥controllerå±‚å’Œserviceå±‚çš„æ¥å£ä¹Ÿè¦æ·»åŠ ä¸€ä¸ªå‚æ•°ï¼Œmapperå±‚ä¹Ÿè¦è¿›è¡Œä¿®æ”¹ã€‚</p><p>å…ˆæ˜¯controllerå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/selectPage&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">selectPage</span><span class="params">(<span class="meta">@RequestParam(defaultValue = &quot;1&quot;)</span> Integer pageNum,</span></span><br><span class="line"><span class="params">                         <span class="meta">@RequestParam(defaultValue = &quot;10&quot;)</span> Integer pageSize,</span></span><br><span class="line"><span class="params">                         <span class="meta">@RequestParam(required = false)</span> String name)</span> &#123;</span><br><span class="line">    PageInfo&lt;Admin&gt; adminPageInfo = adminService.selectPage(pageNum, pageSize, name);</span><br><span class="line">    <span class="keyword">return</span> Result.success(adminPageInfo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åœ¨å‚æ•°ä¸­æ·»åŠ äº†<code>@RequestParam(required = false) String name</code>,required = falseå°±æ˜¯ä¸å¼ºåˆ¶æ¥æ”¶è¿™ä¸ªå‚æ•°ã€‚</li><li>åœ¨adminServiceçš„selectPageæ–¹æ³•è°ƒç”¨é‡Œæ·»åŠ nameå‚æ•°</li></ul><p>ç„¶åæ˜¯serviceå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Admin&gt; <span class="title function_">selectAll</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> adminMapper.selectAll(<span class="literal">null</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> PageInfo&lt;Admin&gt; <span class="title function_">selectPage</span><span class="params">(Integer pageNum, Integer pageSize, String name)</span> &#123;</span><br><span class="line">    <span class="comment">// å¼€å¯åˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line">    PageHelper.startPage(pageNum, pageSize);</span><br><span class="line">    List&lt;Admin&gt; adminList = adminMapper.selectAll(name);</span><br><span class="line">    <span class="keyword">return</span> PageInfo.of(adminList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>selectAllä¸­è°ƒç”¨AdminMapperç±»å¯¹è±¡adminMapperçš„æ–¹æ³•selectAllæ—¶æ·»åŠ nullå‚æ•°ï¼Œè¡¨ç¤ºä¸è¿›è¡ŒæŸ¥è¯¢</li><li>åœ¨selectPageä¸­è°ƒç”¨adminMapper.selectAllçš„è°ƒç”¨æ·»åŠ nameå‚æ•°</li></ul><p>æ¥ç€ä¿®æ”¹mapperå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AdminMapper</span> &#123;</span><br><span class="line">    List&lt;Admin&gt; <span class="title function_">selectAll</span><span class="params">(String name)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€è¿˜éœ€è¦ä¿®æ”¹mapperå¯¹åº”çš„src/main/resources/mapper/AdminMapper.xmlä¸­çš„SQLè¯­å¥ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.example.mapper.AdminMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.example.entity.Admin&quot;</span>&gt;</span></span><br><span class="line">        select * from `admin`</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null&quot;</span>&gt;</span>name = #&#123;name&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">        order by id desc</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­åŸæ¥çš„</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from `admin` order by id desc</span><br></pre></td></tr></table></figure><p>å˜æˆäº†ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select * from `admin`</span><br><span class="line"><span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null&quot;</span>&gt;</span>name = #&#123;name&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">order by id desc</span><br></pre></td></tr></table></figure><p><code>&lt;where&gt;...&lt;/where&gt;</code>éƒ¨åˆ†æ˜¯åšåˆ¤æ–­ï¼š</p><ul><li>å½“name != nullæ—¶ç›¸å½“äºè¯­å¥<code>select * from </code>admin<code> where name = #&#123;&#125; order by id desc</code></li><li>å½“name == nullæ—¶ç›¸å½“äºè¯­å¥<code>select * from </code>admin<code> order by id desc</code></li><li><code>name = #&#123;name&#125;</code>æ˜¯ç²¾ç¡®æŸ¥è¯¢</li><li><code>name like concat('%', #&#123;name&#125;, '%')</code>æ˜¯æ¨¡ç³ŠæŸ¥è¯¢</li><li>è¿™å…¶å®æ˜¯MyBaticçš„æ”¯æŒ</li></ul><p>å¦å¤–å‰ç«¯è¿˜éœ€è¦åœ¨æŸ¥è¯¢æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶<code>@click=&quot;load&quot;</code></p><h1>4. å£°æ˜</h1><p>æœ¬æ–‡æ˜¯å¯¹Bç«™è§†é¢‘<a href="https://www.bilibili.com/video/BV1wNPNeSEEQ?spm_id_from=333.788.videopod.sections&amp;vd_source=a0f19e79b7da02f4fa318d91be5bc86a">ã€å¸¦å°ç™½åšæ¯•è®¾ã€‘05. Springboot3+vue3å®ç°å¢åˆ æ”¹æŸ¥ã€åˆ†é¡µæŸ¥è¯¢ã€æ‰¹é‡åˆ é™¤ï¼ˆä¸Šï¼‰</a>çš„å­¦ä¹ è®°å½•ï¼Œä¾µæƒè”ç³»åˆ ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;1. æ’ä»¶å®‰è£…ä¸é—®é¢˜å¼•å‡º&lt;/h1&gt;
&lt;p&gt;åœ¨vueå·¥ç¨‹ç›®å½•æ‰“å¼€cmdï¼Œè¿è¡Œï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;</summary>
      
    
    
    
    <category term="Java é¡¹ç›®" scheme="http://malone-ai.github.io/categories/Java-%E9%A1%B9%E7%9B%AE/"/>
    
    
    <category term="Java" scheme="http://malone-ai.github.io/tags/Java/"/>
    
    <category term="Springboot" scheme="http://malone-ai.github.io/tags/Springboot/"/>
    
  </entry>
  
  <entry>
    <title>YOLO</title>
    <link href="http://malone-ai.github.io/2025/03/11/yolo1/"/>
    <id>http://malone-ai.github.io/2025/03/11/yolo1/</id>
    <published>2025-03-11T03:35:43.000Z</published>
    <updated>2025-03-13T12:59:25.744Z</updated>
    
    <content type="html"><![CDATA[<h1>1. ç›®æ ‡æ£€æµ‹ç»¼è¿°</h1><p>ç›®æ ‡æ£€æµ‹åˆ†ä¸ºï¼š</p><ul><li>one-stage detectorï¼ˆå•é˜¶æ®µæ¨¡å‹ï¼‰<ul><li>ä»£è¡¨æœ‰Yoloã€SSDã€Retina-net</li></ul></li><li>two-stage detectorï¼ˆä¸¤é˜¶æ®µæ¨¡å‹ï¼‰<ul><li>å…ˆä»å›¾åƒæå–è‹¥å¹²å€™é€‰æ¡†ï¼Œå†é€ä¸€å¯¹è¿™äº›å€™é€‰æ¡†åšåˆ†ç±»ã€ç”„åˆ«ä»¥åŠè°ƒæ•´å®ƒä»¬çš„åæ ‡ã€‚</li><li>ä»£è¡¨æœ‰RCNNã€SPPNetã€Fast RCNN</li></ul></li></ul><p>R-CNNâ€”â€”Regions with CNN features</p><ol><li>è¾“å…¥å›¾åƒ</li><li>æå–å€™é€‰åŒºåŸŸï¼ˆ~2kï¼‰</li><li>è®¡ç®—CNNç‰¹å¾</li><li>å°†åŒºåŸŸåˆ†ç±»</li></ol><p>YOLOè®ºæ–‡é“¾æ¥<a href="https://arxiv.org/pdf/1506.02640">You Only Look Once:Unifed, Real-Time Obiect Detection</a></p><h1>2. é¢„æµ‹é˜¶æ®µï¼ˆå‰å‘æ¨æ–­ï¼‰</h1><p>æ­¤æ—¶æ¨¡å‹æ˜¯å·²ç»è®­ç»ƒå¥½çš„ï¼Œè¾“å…¥æœªçŸ¥å›¾ç‰‡è¿›è¡Œé¢„æµ‹ï¼Œæ­¤æ—¶æ²¡æœ‰åå‘ä¼ æ’­ï¼Œåªæœ‰å‰å‘æ¨æ–­ã€‚</p><h2 id="2-1-Yolo-ç½‘ç»œæ¶æ„">2.1 Yolo ç½‘ç»œæ¶æ„</h2><p><img src="/images/yolo1_1.png" alt=""><br><img src="image.png" alt="alt text"></p><p>24å±‚å·ç§¯å±‚æå–å›¾åƒç‰¹å¾ï¼Œ2å±‚å…¨è¿æ¥å±‚å›å½’å¾—åˆ°7x7x30çš„å‘é‡ã€‚</p><p>è¾“å…¥æ˜¯448x448x3çš„å›¾åƒï¼Œä¹Ÿå°±æ˜¯å…ˆå°†ä¸€å¼ å½©è‰²å›¾ç‰‡ç¼©æ”¾æˆ448x448åƒç´ çš„å›¾ç‰‡ï¼Œ3æ˜¯3é€šé“RGBã€‚ç„¶åç»è¿‡è‹¥å¹²ä¸ªå·ç§¯å±‚ã€æ± åŒ–å±‚ï¼Œæœ€åå˜æˆä¸€ä¸ª7x7x1024ç»´çš„feature mapã€‚å†æŠŠå®ƒæ‹‰ç›´ï¼Œå–‚åˆ°ä¸€ä¸ª4096ä¸ªç¥ç»å…ƒçš„å…¨è¿æ¥å±‚ä¸­è¾“å‡º4096ç»´çš„å‘é‡ã€‚å†æŠŠè¿™ä¸ª4096ç»´å‘é‡å–‚åˆ°1470ï¼ˆ7x7x30ï¼‰ä¸ªç¥ç»å…ƒçš„å…¨è¿æ¥å±‚ä¸­ï¼Œè¾“å‡º1470ç»´çš„å‘é‡ï¼ˆå…¶å®æœ€åæ˜¯æŠŠè¿™ä¸ª1470ç»´çš„å‘é‡Reshapeæˆäº†7x7x30çš„å‘é‡ï¼‰ã€‚æœ€åè¾“å‡ºçš„7x7x30ç»´çš„å‘é‡åŒ…å«å°±åŒ…å«äº†æ‰€æœ‰é¢„æµ‹æ¡†çš„åæ ‡ã€ç½®ä¿¡åº¦å’Œç±»åˆ«ç»“æœã€‚æˆ‘ä»¬åªéœ€è¦è§£æè¿™ä¸ªå‘é‡å°±å¯ä»¥è·å¾—æœ€ç»ˆçš„ç»“æœã€‚è¿™ä¸ªå°±æ˜¯æ•´ä¸ªé»‘ç®±å­çš„æ¡†æ¶ã€‚</p><h2 id="2-2-ä¸ºä»€ä¹ˆæ˜¯7x7x30å‘¢ï¼Ÿ">2.2 ä¸ºä»€ä¹ˆæ˜¯7x7x30å‘¢ï¼Ÿ</h2><p>å› ä¸ºç½‘ç»œå…ˆæŠŠå›¾åƒåˆ’åˆ†ä¸ºSxSä¸ªgrid cellï¼ˆä¹Ÿå°±æ˜¯ç½‘æ ¼ï¼‰ï¼Œåœ¨YOLOV1ä¸­S=7ã€‚æ¯ä¸ªgrid cellé¢„æµ‹å‡ºBä¸ªbounding boxï¼ˆé¢„æµ‹æ¡†ï¼‰ï¼ŒYOLOV1ä¸­B=2ã€‚æ¯ä¸ªgrid cellé¢„æµ‹å‡ºçš„ä¸¤ä¸ªbounding boxå¯èƒ½å¾ˆå¤§ä¹Ÿå¯èƒ½å¾ˆå°ï¼Œä¹Ÿå¯èƒ½ä¸å…¶ä»–çš„bounding boxå­˜åœ¨é‡å ï¼Œä½†æ˜¯æ— æ‰€è°“ï¼Œåªè¦bounding boxçš„ä¸­å¿ƒç‚¹è½åœ¨è¿™ä¸ªgrid cellé‡Œï¼Œå°±è¯´æ˜è¿™ä¸ªbounding boxæ˜¯ç”±è¿™ä¸ªgrid cellç”Ÿæˆçš„ã€‚</p><p><img src="/images/yolo1_2.png" alt=""><br><img src="image-1.png" alt="alt text"></p><p>7x7=49ä¸ªgrid cellï¼Œæ¯ä¸ªgrid cellç”Ÿæˆä¸¤ä¸ªbounding boxï¼Œé‚£ä¹ˆå°±ç”Ÿæˆäº†98ä¸ªbounding boxã€‚bounding boxåŒ…å«xã€yã€hã€wè¿™å››ä¸ªåæ ‡ï¼Œç”±è¿™å››ä¸ªåæ ‡å¯ä»¥ç¡®å®šbounding boxçš„ä½ç½®ã€‚å¦å¤–bounding boxè¿˜åŒ…å«ä¸€ä¸ªå®ƒå«ä¸å«æœ‰ä¸€ä¸ªobjectçš„ç½®ä¿¡åº¦ï¼ˆæˆ‘ç†è§£ä¸ºè¿™ä¸ªbounding boxä¸­å«æœ‰ç‰©ä½“çš„æ¦‚ç‡P(object)ï¼‰ï¼Œåœ¨å›¾åƒä¸­ç½®ä¿¡åº¦ç”±bounding boxè¾¹æ¡†çº¿çš„ç²—ç»†æ¥è¡¨ç¤ºï¼Œè¶Šç²—ç½®ä¿¡åº¦è¶Šé«˜ã€‚è¿™æ ·ä¸€ä¸ªbounding boxå¯ä»¥ç”±å››ä¸ªä½ç½®å‚æ•°å’Œä¸€ä¸ªç½®ä¿¡åº¦å‚æ•°ç»„æˆçš„(x,y,h,w,c)æ¥è¡¨ç¤ºã€‚å¯è§†åŒ–å‡ºæ¥å°±æ˜¯ä¸Šé¢å›¾ä¸­ç”±å¯†å¯†éº»éº»é»‘çº¿çš„è¿™å¹…å›¾ã€‚</p><p>å¦å¤–ï¼Œæ¯ä¸ªgrid cellè¿˜èƒ½ç”Ÿæˆæ‰€æœ‰ç±»åˆ«çš„æ¡ä»¶æ¦‚ç‡ã€‚ä¹Ÿå°±æ˜¯ï¼Œå‡è®¾è¾“å…¥åœ¨åŒ…å«objectçš„æƒ…å†µä¸‹ï¼Œè¿™äº›objectæ˜¯æŸä¸ªç±»åˆ«çš„æ¦‚ç‡ã€‚ä¹Ÿå°±æ˜¯ä¸Šé¢å›¾ä¸­æœ‰å½©è‰²å—çš„å›¾ã€‚æŠŠæ¯ä¸ªbounding boxçš„ç½®ä¿¡åº¦ä¹˜ä»¥ç±»åˆ«æ¡ä»¶æ¦‚ç‡ï¼Œå°±èƒ½è·å¾—æ¯ä¸ªbounding boxå±äºå„ç±»åˆ«çš„æ¦‚ç‡ã€‚7x7x30ä¸­çš„30ä¸ºSxSx(5xB+C)ã€‚</p><p>å†è¯¦ç»†è§£é‡Šä¸€äº›è¿™ä¸ª30ã€‚</p><p>æ¯ä¸ªgrid cellåŒ…å«2ï¼ˆå³Bï¼‰ä¸ªé¢„æµ‹æ¡†ï¼Œæ¯ä¸ªé¢„æµ‹æ¡†æœ‰5ä¸ªå‚æ•°ï¼Œç„¶ååœ¨Pascal VOCä¸­åŒ…å«20ï¼ˆå³Cï¼‰ä¸ªç±»åˆ«ã€‚è¿™ä¸€ä¸ª30å°±æ˜¯ä¸€ä¸ªgrid cellçš„ä¿¡æ¯ï¼Œæ€»å…±7x7ä¸ªgrid cellï¼Œæ‰€ä»¥æ˜¯7x7x30ç»´çš„å‘é‡ã€‚</p><p><img src="/images/yolo1_3.png" alt=""><br><img src="image-2.png" alt="alt text"><br>æ³¨ï¼šå›¾ä¸­çš„boxå³bounding box</p><p>æ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼Œè¾“å…¥ä¸€å¼ å›¾åƒï¼ŒYOLOå°±èƒ½SxSä¸ªgrid cellçš„ä¿¡æ¯ï¼Œæ¯ä¸ªgrid cellåŒ…å«2ä¸ªbounding boxå’Œ20ä¸ªç±»åˆ«ï¼Œæ¯ä¸ªbounding boxåˆåŒ…å«4ä¸ªä½ç½®å‚æ•°å’Œä¸€ä¸ªç½®ä¿¡åº¦å‚æ•°ã€‚</p><h2 id="2-3-å¯è§†åŒ–è¿‡ç¨‹">2.3 å¯è§†åŒ–è¿‡ç¨‹</h2><ol><li><p>é¦–å…ˆæŠŠå›¾åƒåˆ†æˆSxSä¸ªgrid cellï¼Œè¿™é‡ŒS=7ï¼š<br><img src="/images/yolo1_4.png" alt=""><br><img src="image-3.png" alt="alt text"></p></li><li><p>æ¯ä¸ªgrid cellé¢„æµ‹å‡ºä¸¤ä¸ªbounding boxï¼ˆåŒ…å«å››ä¸ªä½ç½®å‚æ•°å’Œä¸€ä¸ªç½®ä¿¡åº¦å‚æ•°ï¼‰</p></li></ol><p>æ¯”å¦‚å¯¹äºä¸‹é¢å›¾ä¸­è¿™ä¸ªçº¢è‰²çš„grid cellï¼š<br><img src="/images/yolo1_5.png" alt=""><br><img src="image-4.png" alt="alt text"></p><p>å®ƒé¢„æµ‹å‡ºä¸¤ä¸ªbounding boxï¼Œè¿™ä¸¤ä¸ªbounding boxä¸€ä¸ªç½®ä¿¡åº¦æ¯”è¾ƒé«˜ï¼Œä¸€ä¸ªæ¯”è¾ƒä½ï¼ˆç”±çº¿çš„ç²—ç»†è¡¨ç¤ºï¼‰ï¼š</p><p><img src="/images/yolo1_6.png" alt=""><br><img src="image-5.png" alt="alt text"></p><p>ä¸ç®¡å¦‚ä½•ï¼Œè¾“å…¥å›¾åƒéƒ½èƒ½é¢„æµ‹å‡ºSxSx2=98ä¸ªbounding boxï¼Œåªä¸è¿‡æœ‰äº›bounding boxçš„ç½®ä¿¡åº¦é«˜ï¼Œæˆ‘ä»¬å°†å…¶ä¿ç•™ï¼›æœ‰äº›ä½æˆ‘ä»¬å°†å…¶å¿½ç•¥ã€‚</p><ol start="3"><li>æ¯ä¸ªgrid cellè¿˜èƒ½ç”Ÿæˆ20ä¸ªç±»åˆ«çš„æ¡ä»¶æ¦‚ç‡ï¼š</li></ol><p><img src="/images/yolo1_7.png" alt=""><br><img src="image-6.png" alt="alt text"></p><p>è¿™ä¸ªå›¾å°±å±•ç¤ºäº†æ¡ä»¶æ¦‚ç‡æœ€é«˜çš„å‡ ä¸ªç±»åˆ«æ‰€å æœ‰çš„æ¡†ã€‚æ¯”å¦‚ç´«è‰²çš„grid cellæ˜¯Bicycleè¿™ä¸ªç±»åˆ«çš„æ¡ä»¶æ¦‚ç‡é«˜çš„åŒºåŸŸã€‚æ¯ä¸€ä¸ªgrid cellåªèƒ½æœ‰ä¸€ä¸ªç±»åˆ«ï¼Œå®ƒæ˜¯20ä¸ªç±»åˆ«ä¸­æ¡ä»¶æ¦‚ç‡æœ€é«˜çš„é‚£ä¸€ä¸ªã€‚å› æ­¤ä¹Ÿè¯´æ˜äº†ä¸€ä¸ªgrid cellæœ€å¤šé¢„æµ‹å‡ºä¸€ä¸ªä¸€ç‰©ä½“ã€‚7x7çš„grid cellæœ€å¤šé¢„æµ‹å‡º49ä¸ªç‰©ä½“ã€‚è¿™ä¹Ÿæ˜¯YOLOV1å¯¹å°ç›®æ ‡å’Œå¯†é›†ç›®æ ‡è¯†åˆ«æ€§èƒ½å·®çš„åŸå› ã€‚</p><ol start="4"><li>åå¤„ç†<br>æ¯ä¸ªgrid cellåªæœ‰ä¸€ä¸ªæ¡ä»¶æ¦‚ç‡æœ€é«˜çš„ä»£è¡¨ç±»åˆ«ï¼ŒæŠŠè¿™ä¸ªgrid cellçš„ä¸¤ä¸ªbounding boxéƒ½èµ‹äºˆè¿™ä¸ªç±»åˆ«ï¼Œå†è¿›è¡Œä¸€ç³»åˆ—åå¤„ç†å°±å¾—åˆ°äº†æœ€ç»ˆçš„ç›®æ ‡æ£€æµ‹ç»“æœã€‚</li></ol><p><img src="/images/yolo1_8.png" alt=""><br><img src="image-7.png" alt="alt text"></p><p>æŠŠä¸Šé¢å›¾ä¸­ç”¨çº¢è‰²éƒ¨åˆ†æ ‡å‡ºæ¥çš„éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰çš„bounding boxå’Œæ‰€æœ‰grid cellçš„ä»£è¡¨ç±»åˆ«ã€‚æ¯ä¸ªç±»åˆ«èµ‹äºˆä¸åŒçš„é¢œè‰²ï¼ŒæŠŠæ‰€æœ‰çš„bounding boxçš„è¾¹æ¡†éƒ½ç”¨ä»£è¡¨ç±»åˆ«çš„é¢œè‰²æ¥è¡¨ç¤ºï¼Œå°±å¾—åˆ°äº†ä¸‹é¢è¿™å¹…å›¾ï¼š</p><p><img src="/images/yolo1_9.png" alt=""><br><img src="image-8.png" alt="alt text"></p><p>æ€»å…±98ä¸ªbounding boxï¼Œæ¯ä¸ªbounding boxéƒ½æœ‰æœ€é«˜æ¡ä»¶æ¦‚ç‡æ‰€å¯¹åº”çš„ç±»åˆ«ï¼Œå†è¿›è¡Œä¸€ç³»åˆ—åå¤„ç†ï¼Œæ¯”å¦‚è¿‡æ»¤æ‰ä½ç½®ä¿¡åº¦çš„bounding boxï¼Œç„¶åå†å»é™¤æ‰é‡å¤çš„é¢„æµ‹æ¡†ï¼Œå°±è·å¾—äº†æœ€ç»ˆçš„ç›®æ ‡æ£€æµ‹ç»“æœã€‚</p><h1>3. é¢„æµ‹é˜¶æ®µåå¤„ç†</h1><p>æ€»å…±98ä¸ªbounding boxï¼Œè¿‡æ»¤æ‰ä½ç½®ä¿¡åº¦çš„bounding boxï¼Œç„¶åå†å»é™¤æ‰é‡å¤çš„é¢„æµ‹æ¡†ï¼Œå°±è·å¾—äº†æœ€ç»ˆçš„ç›®æ ‡æ£€æµ‹ç»“æœï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸º<strong>NMSéæå¤§å€¼æŠ‘åˆ¶</strong>ã€‚</p><p>ç°åœ¨æƒ³è¦è®²è§£çš„å°±æ˜¯YOLOV1è¾“å‡ºçš„7x7x30çš„å‘é‡æ˜¯å¦‚ä½•å˜ä¸ºæœ€åçš„ç›®æ ‡æ£€æµ‹ç»“æœçš„ã€‚</p><p>7x7x30ä¸­çš„7x7å³7x7ä¸ªgrid cellï¼Œå–å‡ºå…¶ä¸­ä¸€ä¸ªgrid cellæ¥çœ‹ï¼Œä¹Ÿå°±æ˜¯30ä¸ªæ•°å­—ã€‚è¿™30ä¸ªæ•°å­—æ˜¯5+5+20ã€‚ç¬¬ä¸€ä¸ª5æ˜¯ç¬¬ä¸€ä¸ªbounding boxçš„4ä¸ªä½ç½®åæ ‡å’Œ1ä¸ªç½®ä¿¡åº¦åæ ‡ï¼Œç¬¬äºŒä¸ª5æ˜¯ç¬¬äºŒä¸ªbounding boxçš„4ä¸ªä½ç½®åæ ‡å’Œ1ä¸ªç½®ä¿¡åº¦åæ ‡ï¼Œ20æ˜¯è¿™ä¸ªgrid cellä¸­çš„ç‰©ä½“æ˜¯20ä¸ªç±»åˆ«çš„æ¡ä»¶æ¦‚ç‡å³P(ci|object)ï¼ˆP(object)æ˜¯è¿™ä¸ªgrid cellåŒ…å«ç‰©ä½“çš„æ¦‚ç‡ï¼Œè¿™å…¶å®å°±æ˜¯ç½®ä¿¡åº¦ï¼Œciæ˜¯ç¬¬iä¸ªç±»åˆ«ï¼‰ã€‚</p><p>ç¬¬ä¸€ä¸ªbounding boxçš„ç½®ä¿¡åº¦ä¹˜ä»¥è¯¥grid cellçš„20ä¸ªç±»æ¡ä»¶æ¦‚ç‡ï¼š<br><img src="/images/yolo1_10.png" alt=""><br><img src="image-9.png" alt="alt text"><br>å¾—åˆ°ç¬¬ä¸€ä¸ªbounding boxçš„åéªŒæ¦‚ç‡ã€‚</p><p>ç¬¬äºŒä¸ªbounding boxçš„ç½®ä¿¡åº¦ä¹˜ä»¥è¯¥grid cellçš„20ä¸ªç±»æ¡ä»¶æ¦‚ç‡ï¼š<br><img src="/images/yolo1_11.png" alt=""><br><img src="image-10.png" alt="alt text"><br>å¾—åˆ°ç¬¬äºŒä¸ªbounding boxçš„åéªŒæ¦‚ç‡ã€‚</p><p>æ¯ä¸ªgrid cellå°±èƒ½è·å¾—2ä¸ª<strong>20ä¸ªåéªŒæ¦‚ç‡</strong>ï¼š<br><img src="/images/yolo1_12.png" alt=""><br><img src="image-11.png" alt="alt text"></p><p>7x7=49ä¸ªgrid cellå°±èƒ½è·å¾—7x7x2=98ä¸ª<strong>20ä¸ªåéªŒæ¦‚ç‡</strong>ï¼š<br><img src="/images/yolo1_13.png" alt=""><br><img src="image-12.png" alt="alt text"></p><p>ä¹Ÿå°±æ˜¯æˆ‘ä»¬è·å¾—äº†è¿™ä¸ªå¯è§†åŒ–å›¾ï¼š<br><img src="/images/yolo1_9.png" alt=""><br><img src="image-8.png" alt="alt text"></p><p>æ¥ä¸‹æ¥å°±æ˜¯è¿›è¡Œåå¤„ç†å¾—åˆ°ç›®æ ‡æ£€æµ‹ç»“æœå›¾ã€‚</p><p>98ä¸ª<strong>20ä¸ªåéªŒæ¦‚ç‡</strong>ï¼Œç§°å…¶ä¸º98ä¸ªå‘é‡ï¼Œæ¯ä¸ªå‘é‡æ˜¯20x1çš„ã€‚å‡è®¾è¿™98ä¸ªå‘é‡æ¯ä¸ªçš„ç¬¬ä¸€ä¸ªå€¼ä¸ºæ˜¯ç‹—çš„åéªŒæ¦‚ç‡ï¼Œä¹Ÿå°±æ˜¯è¯´æ˜¯ç‹—çš„åéªŒæ¦‚ç‡çš„å€¼æœ‰98ä¸ªï¼Œåœ¨è¿™äº›åéªŒæ¦‚ç‡ä¸­æœ‰å¯èƒ½æœ‰å¾ˆå¤šæ¥è¿‘äº0çš„ï¼Œè®¾ç½®ä¸€ä¸ªé˜ˆå€¼ï¼Œå‡å¦‚è®¾ä¸º0.2ï¼Œé‚£ä¹ˆå°äº0.2çš„å€¼ç›´æ¥ç½®ä¸º0ã€‚ç„¶ååŸºäºä¸Šä¸€æ­¥å¤„ç†åçš„æ˜¯ç‹—çš„åéªŒæ¦‚ç‡å¯¹è¿™98ä¸ªåéªŒæ¦‚ç‡è¿›è¡Œé™åºæ’åºï¼Œç„¶åä½¿ç”¨<strong>NMSéæå¤§å€¼æŠ‘åˆ¶</strong>ç®—æ³•å†æ¬¡è¿›è¡Œå¤„ç†ã€‚</p><p><img src="/images/yolo1_14.png" alt=""><br><img src="image-13.png" alt="alt text"></p><p>å…ˆæŠŠç¬¬ä¸€ä¸ªåéªŒæ¦‚ç‡å€¼å–å‡ºæ¥ï¼Œä¹Ÿå°±æ˜¯æœ€å¤§çš„åéªŒæ¦‚ç‡ï¼ŒæŠŠå®ƒä¸å…¶ä»–97ä¸ªåéªŒæ¦‚ç‡å€¼è¿›è¡Œæ¯”è¾ƒï¼Œè®¡ç®—å®ƒä»¬çš„IoUï¼ˆäº¤å¹¶æ¯”ï¼Œä¹Ÿå°±æ˜¯åº¦é‡å®ƒä»¬çš„é‡å ç¨‹åº¦ï¼‰å¤§äºæŸä¸ªé˜ˆå€¼ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºå®ƒä»¬é‡å¤è¯†åˆ«äº†ä¸€ä¸ªç‰©ä½“ï¼Œå°±æŠŠä½åéªŒæ¦‚ç‡çš„å€¼è¿‡æ»¤æ‰ä¹Ÿå°±æ˜¯ç½®ä¸º0ã€‚</p><ul><li>å¦‚æœè¿™ä¸ªé˜ˆå€¼è®¾å¾—å¾ˆä½ï¼Œé‚£ä¹ˆNMSéæå¤§å€¼æŠ‘åˆ¶æ˜¯å¾ˆå¼ºçš„ï¼Œå®ƒæŠŠIoUå‹å¾—å¾ˆä½ï¼Œç¨å¾®æœ‰ä¸€ç‚¹é‡åˆå°±è¢«è¿‡æ»¤äº†</li><li>å¦‚æœè¿™ä¸ªé˜ˆå€¼è®¾å¾—å¾ˆé«˜ï¼Œé‚£ä¹ˆå®ƒä»¬çš„IoUåœ¨æ›´å¤§çš„æƒ…å†µä¸‹æ‰å¯èƒ½è¢«è¿‡æ»¤æ‰</li></ul><p>å› æ­¤å¦‚æœæƒ³å¢å¼ºNMSéæå¤§å€¼æŠ‘åˆ¶å°±å¯ä»¥è®¾ç½®ä½é˜ˆå€¼ã€‚</p><p>ç„¶åç»è¿‡ä¸€è½®åï¼Œç¬¬ä¸€ä¸ªåéªŒæ¦‚ç‡ä¸å…¶ä»–97ä¸ªåéªŒæ¦‚ç‡ç»è¿‡äº†ä¸€è½®æ¯”è¾ƒï¼Œæœ‰éƒ¨åˆ†å·²ç»è¢«ç½®ä¸º0äº†ã€‚ç„¶åå»æ‰¾ä¸‹ä¸€ä¸ªæœªè¢«ç½®ä¸º0çš„åéªŒæ¦‚ç‡ï¼Œæ¥ç€ä¸åé¢çš„åéªŒæ¦‚ç‡è¿›è¡Œæ¯”è¾ƒï¼Œä¸ä¸Šé¢ç›¸åŒã€‚</p><p>ä¸Šé¢åªæ˜¯å¯¹ç‹—è¿™ä¸ªç±»åˆ«è¿›è¡Œäº†NMSéæå¤§å€¼æŠ‘åˆ¶ï¼Œå¯¹äºå…¶ä»–ç±»åˆ«ä¹Ÿè¦è¿›è¡Œæ­¤æ“ä½œã€‚</p><p>ä¸Šé¢çš„åå¤„ç†<strong>åªåœ¨é¢„æµ‹é˜¶æ®µè¿›è¡Œ</strong>ï¼Œåœ¨<strong>è®­ç»ƒé˜¶æ®µä¸éœ€è¦è¿›è¡Œåå¤„ç†</strong>ï¼Œå› ä¸ºæ¯ä¸€ä¸ªbounding boxéƒ½éœ€è¦åœ¨æŸå¤±å‡½æ•°ä¸­å æ®ä¸€å¸­ä¹‹åœ°ï¼Œå®ƒä¼šå½±å“æŸå¤±å‡½æ•°ã€‚</p><h1>4. è®­ç»ƒé˜¶æ®µï¼ˆé‡ç‚¹ï¼‰</h1><p>ç›®æ ‡æ£€æµ‹æ˜¯ä¸€ä¸ªå…¸å‹çš„<strong>ç›‘ç£å­¦ä¹ </strong>çš„è¿‡ç¨‹ï¼Œè®­ç»ƒé›†å·²ç»è¿›è¡Œäº†äººå·¥æ ‡æ³¨ï¼Œå®ƒæœ‰ç‚¹ç±»ä¼¼äºbounding boxï¼Œä½†æ˜¯ç§°å®ƒä¸ºground truthï¼ˆä¹Ÿå°±æ˜¯æ­£ç¡®æ‰“æ ‡è®°çš„æ•°æ®ï¼‰ã€‚æˆ‘ä»¬çš„ç®—æ³•å°±æ˜¯è¦å»æ‹Ÿåˆè¿™äº›ground truthï¼Œä½¿å¾—æŸå¤±å‡½æ•°æœ€å°åŒ–ã€‚</p><p>ground truthæ˜¯æ ‡å‡†ç­”æ¡ˆï¼Œå®ƒçš„ä¸­å¿ƒç‚¹è½åœ¨å“ªä¸ªgrid cellï¼Œå°±æœ‰å“ªä¸ªgrid cellé¢„æµ‹å‡ºçš„ä¸¤ä¸ªbounding boxä¸­çš„ä¸€ä¸ªè´Ÿè´£å»æ‹Ÿåˆè¿™ä¸ªground truthï¼Œå¹¶ä¸”è¿™ä¸ªgrid cellè¾“å‡ºçš„ç±»åˆ«ä¹Ÿåº”è¯¥æ˜¯è¿™ä¸ªground truthçš„ç±»åˆ«ï¼ˆæ¯ä¸€ä¸ªgrid cellä¸­æœ‰20ä¸ªç±»åˆ«çš„ç±»æ¡ä»¶æ¦‚ç‡ï¼Œè¿™20ä¸ªç±»æ¡ä»¶æ¦‚ç‡ä¹˜ä»¥æ¯ä¸€ä¸ªbounding boxçš„ç½®ä¿¡åº¦è·å¾—åéªŒæ¦‚ç‡ï¼Œå…¶ä¸­æœ€å¤§çš„åéªŒæ¦‚ç‡å¯¹åº”çš„é‚£ä¸ªç±»åº”ä¸ground truthçš„ç±»åˆ«ç›¸åŒï¼‰ã€‚æ¯ä¸€ä¸ªgrid cellåªèƒ½é¢„æµ‹å‡ºä¸€ä¸ªç‰©ä½“ï¼Œ7x7ä¸ªgrid cellåªèƒ½é¢„æµ‹å‡º49ä¸ªç‰©ä½“ï¼ˆYOLOåœ¨é¢„æµ‹å°ç›®æ ‡å’Œå¯†é›†ç›®æ ‡æ€§èƒ½å·®çš„åŸå› ï¼Œå‰é¢æè¿‡äº†ï¼Œå†é‡å¤ä¸€éï¼‰ã€‚</p><p>ä¸€ä¸ªgrid cellé¢„æµ‹å‡ºä¸¤ä¸ªbounding boxï¼Œé‚£ç”±å“ªä¸ªå»è´Ÿè´£æ‹Ÿåˆground truthå‘¢ï¼Ÿç”±å’Œground truthäº¤å¹¶æ¯”IoUæ›´å¤§çš„é‚£ä¸ªbounding boxã€‚å› æ­¤æŸå¤±å‡½æ•°è®¾è®¡å°±è¦åšåˆ°è®©è´Ÿè´£æ‹Ÿåˆground truthçš„é‚£ä¸ªbounding boxä¸ground truthå°½å¯èƒ½å¾—ä¸€è‡´ã€‚</p><p>åˆšåˆšè¯´çš„grid cellæ˜¯æœ‰ground truthçš„ä¸­å¿ƒç‚¹è½åœ¨é‡Œé¢çš„grid cellã€‚æ²¡æœ‰ground truthä¸­å¿ƒç‚¹è½å…¥çš„grid cellï¼Œå…¶é¢„æµ‹å‡ºçš„ä¸¤ä¸ªbounding boxå°±éƒ½è¢«å¿½ç•¥äº†ã€‚</p><p>æ¥ä¸‹æ¥çš„å·¥ä½œå°±æ˜¯æ„å»ºYOLOV1çš„æŸå¤±å‡½æ•°ã€‚</p><h2 id="4-1-æŸå¤±å‡½æ•°">4.1 æŸå¤±å‡½æ•°</h2><p>æŸå¤±å‡½æ•°åŒ…å«5é¡¹ï¼š<br><img src="/images/yolo1_15.png" alt=""><br><img src="image-14.png" alt="alt text"></p><p>è¿™5é¡¹éƒ½æ˜¯æ®‹å·®å¹³æ–¹å’Œçš„å›å½’é—®é¢˜çš„æŸå¤±å‡½æ•°ã€‚å› æ­¤YOLOæ˜¯æŠŠç›®æ ‡æ£€æµ‹é—®é¢˜å½“ä½œäº†å›å½’é—®é¢˜è§£å†³ã€‚</p><p>ç¬¬ä¸€é¡¹æ˜¯è´Ÿè´£é¢„æµ‹ç‰©ä½“çš„bounding box<strong>ä¸­å¿ƒç‚¹å®šä½çš„è¯¯å·®</strong>ï¼Œä¹Ÿå°±æ˜¯è´Ÿè´£é¢„æµ‹ç‰©ä½“çš„bounding boxçš„æ¨ªçºµåæ ‡è¦å’Œground truthçš„æ¨ªçºµåæ ‡å°½å¯èƒ½çš„ä¸€è‡´ã€‚</p><p>ç¬¬äºŒé¡¹æ˜¯è´Ÿè´£é¢„æµ‹ç‰©ä½“çš„bounding box<strong>å®½é«˜å®šä½çš„è¯¯å·®</strong>ï¼Œä¹Ÿå°±æ˜¯è´Ÿè´£é¢„æµ‹ç‰©ä½“çš„bounding boxçš„å®½é«˜è¦å’Œground truthçš„å®½é«˜å°½å¯èƒ½çš„ä¸€è‡´ã€‚åŠ æ ¹å·æ˜¯ä¸ºäº†ä½¿å¾—å°æ¡†å¯¹è¯¯å·®æ›´æ•æ„Ÿï¼ˆä¹Ÿå°±æ˜¯åŒæ ·çš„åå·®å°æ¡†é€ æˆçš„æŸå¤±æ›´å¤§ï¼Œå¤§æ¡†é€ æˆçš„æŸå¤±æ›´å°ï¼‰ã€‚</p><p>ç¬¬ä¸‰é¡¹æ˜¯è´Ÿè´£æ£€æµ‹ç‰©ä½“çš„bounding boxçš„<strong>ç½®ä¿¡åº¦è¯¯å·®</strong>ã€‚æ ‡ç­¾å€¼æ˜¯bounding boxä¸ground truthçš„IoUï¼Œé¢„æµ‹å€¼å³ç½®ä¿¡åº¦ã€‚</p><p>ç¬¬å››é¡¹æ˜¯<strong>ä¸</strong>è´Ÿè´£æ£€æµ‹ç‰©ä½“çš„bounding boxçš„<strong>ç½®ä¿¡åº¦è¯¯å·®</strong>ã€‚ä¹Ÿå°±æ˜¯æ‰€æœ‰è¢«å¿½ç•¥çš„bounding boxå®ƒä»¬çš„ç½®ä¿¡åº¦æœ€å¥½éƒ½ä¸º0ï¼Œå³æ ‡ç­¾å€¼æœ€å¥½ä¸º0ã€‚ä¸è´Ÿè´£æ£€æµ‹ç‰©ä½“çš„bounding boxåŒ…å«ä¸¤ç±»ï¼š</p><ul><li>è´Ÿè´£æ£€æµ‹ç‰©ä½“çš„grid cellä¸­è¢«å¿½ç•¥çš„bounding box</li><li>æœ¬èº«å°±ä¸è´Ÿè´£æ£€æµ‹ç‰©ä½“çš„grid cellé¢„æµ‹å‡ºçš„bounding box</li></ul><p>ç¬¬äº”é¡¹æ˜¯è´Ÿè´£æ£€æµ‹ç‰©ä½“çš„grid cellçš„<strong>åˆ†ç±»è¯¯å·®</strong>ã€‚ä¹Ÿå°±æ˜¯ground truthçš„ä¸­å¿ƒç‚¹è½å…¥çš„é‚£ä¸ªgrid cellï¼Œå®ƒçš„20ä¸ªç±»æ¡ä»¶æ¦‚ç‡çš„æœ€å¤§å€¼æ‰€å¯¹åº”çš„ç±»åˆ«åº”ä¸ground truthç›¸åŒï¼Œå¹¶ä¸”è¿™ä¸ªæ¦‚ç‡è¶Šæ¥è¿‘1è¶Šå¥½ã€‚</p><p>å‰ä¸¤é¡¹æ˜¯<strong>åæ ‡å›å½’è¯¯å·®</strong>ï¼Œç¬¬ä¸‰ã€å››é¡¹æ˜¯<strong>ç½®ä¿¡åº¦Confidenceå›å½’è¯¯å·®</strong>ï¼Œæœ€åä¸€é¡¹æ˜¯<strong>ç±»åˆ«é¢„æµ‹è¯¯å·®</strong>ã€‚</p><h1>å£°æ˜</h1><p>æœ¬æ–‡æ˜¯å­¦ä¹ <a href="https://www.bilibili.com/video/BV15w411Z7LG/?spm_id_from=333.1245.0.0">ã€ç²¾è¯»AIè®ºæ–‡ã€‘YOLO V1ç›®æ ‡æ£€æµ‹ï¼Œçœ‹æˆ‘å°±å¤Ÿäº†</a>çš„è®°å½•ï¼Œç‚¹å‡»å³å¯è·³è½¬è§†é¢‘é“¾æ¥ã€‚</p><p>æ³¨ï¼šæœ¬æ–‡å›¾ç‰‡æ¥æºäºè§†é¢‘ä»¥åŠè®ºæ–‡ä¸­ï¼Œä¾µæƒè”ç³»åˆ ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;1. ç›®æ ‡æ£€æµ‹ç»¼è¿°&lt;/h1&gt;
&lt;p&gt;ç›®æ ‡æ£€æµ‹åˆ†ä¸ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;one-stage detectorï¼ˆå•é˜¶æ®µæ¨¡å‹ï¼‰
&lt;ul&gt;
&lt;li&gt;ä»£è¡¨æœ‰Yoloã€SSDã€Retina-net&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;two-stage detector</summary>
      
    
    
    
    <category term="Yolo" scheme="http://malone-ai.github.io/categories/Yolo/"/>
    
    
    <category term="æ·±åº¦å­¦ä¹ " scheme="http://malone-ai.github.io/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
    <category term="Yolo" scheme="http://malone-ai.github.io/tags/Yolo/"/>
    
  </entry>
  
  <entry>
    <title>Springboot3 é…ç½® MyBatis</title>
    <link href="http://malone-ai.github.io/2025/03/10/project-test4/"/>
    <id>http://malone-ai.github.io/2025/03/10/project-test4/</id>
    <published>2025-03-10T10:17:01.000Z</published>
    <updated>2025-03-17T05:14:04.299Z</updated>
    
    <content type="html"><![CDATA[<h1>å‰è¨€</h1><p>å­¦ä¹ Bç«™UPä¸»ç¨‹åºå‘˜é’æˆˆå‡ºå“çš„è§†é¢‘<a href="https://www.bilibili.com/video/BV1AQAZeNEUJ/?spm_id_from=333.1245.0.0&amp;vd_source=a0f19e79b7da02f4fa318d91be5bc86a">ã€å¸¦å°ç™½åšæ¯•è®¾ã€‘04. Springboot3æ•´åˆMyBatiså®ç°æ•°æ®åº“æ“ä½œ</a>ã€‚</p><p>MyBatis æ˜¯ä¸€ä¸ªæŒä¹…å±‚çš„æ¡†æ¶ï¼Œå®ƒå¯ä»¥è¿æ¥æ•°æ®åº“ï¼Œå®ç°æ•°æ®åº“çš„å¢åˆ æŸ¥æ”¹ã€‚</p><h1>1. åˆ›å»ºæ•°æ®åº“</h1><p><a href="https://malone-ai.github.io/2025/03/01/mysql1/">MySQLä¸€ï¼šMySQLç¯å¢ƒé…ç½®</a>ã€‚ä¹‹å‰å­¦ä¹ MySQLæ—¶çš„å­¦ä¹ è®°å½•ã€‚</p><p>UPç”¨çš„æ—¶Navicatï¼Œæˆ‘ç”¨çš„æ˜¯SQLyog</p><p>åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œåç§°ä¸ºcode2025ã€‚<br>å­—ç¬¦é›†é€‰<code>utf8mb4</code>ï¼Œæ’åºè§„åˆ™é€‰<code>utf8mb4_unicode_ci</code>ã€‚</p><p><img src="/images/project-test4_1.png" alt=""></p><p>æ–°å»ºä¸€ä¸ªè¡¨adminã€‚å¦å¤–æ³¨æ„ï¼Œæ‰€æœ‰è¡¨çš„ä¸»é”®åç§°å«idï¼Œéƒ½æ˜¯è‡ªåŠ¨é€’å¢çš„ï¼Œåˆ é™¤åæ— æ³•å†å¡«å……å›å»ã€‚æ¯”å¦‚åˆ é™¤id=2çš„æ•°æ®ï¼Œé‚£ä¹ˆid=2å°±æ°¸è¿œæ²¡æœ‰äº†ã€‚</p><p><img src="/images/project-test4_2.png" alt=""></p><p>è¿˜éœ€è¦æ·»åŠ å…¶ä»–é¡¹ï¼Œæœ€ç»ˆè¡¨å¦‚ä¸‹ï¼š<br><img src="/images/project-test4_3.png" alt=""></p><p>æ‰¾åˆ°è¡¨çš„DDLä¿¡æ¯ï¼Œå¤åˆ¶ä¸‹æ¥ï¼š</p><p><img src="/images/project-test4_4.png" alt=""></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span> `admin` (</span><br><span class="line">  `id` <span class="type">int</span> <span class="keyword">NOT NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ID&#x27;</span>,</span><br><span class="line">  `username` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è´¦å·&#x27;</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¯†ç &#x27;</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åç§°&#x27;</span>,</span><br><span class="line">  `phone` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ‰‹æœº&#x27;</span>,</span><br><span class="line">  `email` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;é‚®ç®±&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY KEY</span> (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8mb4_unicode_ci COMMENT<span class="operator">=</span><span class="string">&#x27;ç®¡ç†å‘˜ä¿¡æ¯&#x27;</span></span><br></pre></td></tr></table></figure><p>è¿™å°±æ˜¯adminè¡¨çš„ç»“æ„ã€‚</p><p>é€šè¿‡ä»¥ä¸‹æ“ä½œè®¾ç½®è´¦å·å”¯ä¸€ï¼š<br><img src="/images/project-test4_5.png" alt=""></p><p>å‘è¡¨ä¸­æ’å…¥ä¸¤æ¡æ•°æ®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+----+----------+----------+---------+-------------+-----------------+</span><br><span class="line">| id | username | password | name    | phone       | email           |</span><br><span class="line">+----+----------+----------+---------+-------------+-----------------+</span><br><span class="line">|  1 | admin    | admin    | ç®¡ç†å‘˜  | 13877886677 | admin@code.com  |</span><br><span class="line">|  2 | admin1   | admin1   | ç®¡ç†å‘˜1 | 13877886678 | admin1@code.com |</span><br><span class="line">+----+----------+----------+---------+-------------+-----------------+</span><br></pre></td></tr></table></figure><h1>2. æ·»åŠ å·¥ç¨‹ä¾èµ–</h1><p><a href="https://mybatis.net.cn/index.html">MyBatisä¸­æ–‡å®˜ç½‘</a>ã€‚</p><p>åœ¨springbootå·¥ç¨‹ä¸‹çš„pom.xmlæ·»åŠ ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;com.mysql&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;</span><br><span class="line">&lt;scope&gt;runtime&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;3.0.3&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p>ç„¶åç‚¹å‡»ï¼š<br><img src="/images/project-test4_4.png" alt=""></p><p>å³å¯åŠ è½½æ–°å¢çš„ä¾èµ–ã€‚</p><p>åœ¨springbootå·¥ç¨‹ä¸‹çš„src/main/resources/application.ymlæ·»åŠ æ•°æ®åº“é…ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># æ•°æ®åº“é…ç½®</span><br><span class="line">spring:</span><br><span class="line">  datasource:</span><br><span class="line">    driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">    username: root</span><br><span class="line">    password: &#x27;123456&#x27;</span><br><span class="line">    url: jdbc:mysql://localhost:3306/code2025?useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=GMT%2b8</span><br></pre></td></tr></table></figure><p>å…¶ä¸­usernameã€passwordæ˜¯è‡ªå·±è®¾å®šçš„ï¼Œurlä¸­3306/åçš„code2025æ˜¯æ•°æ®åº“çš„åç§°ã€‚</p><p>æ¥ç€æ·»åŠ MyBatisé…ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># é…ç½®mybatiså®ä½“å’Œxmlæ˜ å°„</span><br><span class="line">mybatis:</span><br><span class="line">  # æ˜ å°„xml</span><br><span class="line">  mapper-locations: classpath:mapper/*xml # classpathè¡¨ç¤ºresourcesç›®å½•</span><br><span class="line">  configuration:</span><br><span class="line">    # é…ç½®æ—¥å¿—</span><br><span class="line">    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl</span><br><span class="line">    map-underscore-to-camel-case: true</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨resourcesç›®å½•ä¸‹æ–°å»ºmapperç›®å½•ã€‚</p><h1>3. æ·»åŠ å®ä½“ç±»</h1><h2 id="3-1-æ–°å»ºAdminå®ä½“ç±»">3.1 æ–°å»ºAdminå®ä½“ç±»</h2><p>åœ¨springbootå·¥ç¨‹ä¸‹çš„com.exampleé‡Œæ–°å»ºentityåŒ…ï¼ˆentityå³å®ä½“ç±»ï¼Œå®ƒè·Ÿæˆ‘ä»¬æ•°æ®åº“çš„è¡¨æ‰€å¯¹åº”çš„ä¸€ä¸ªjavaç±»ï¼Œè¿™ä¸ªjavaç±»é‡Œé¢å®ƒçš„æ‰€æœ‰å±æ€§åå­—è·Ÿæˆ‘ä»¬æ•°æ®åº“è¡¨é‡Œé¢çš„å±æ€§åå­—æ˜¯ä¸€è‡´çš„ï¼‰ï¼Œåœ¨è¿™ä¸ªåŒ…ä¸‹å†æ–°å»ºAdminå®ä½“ç±»ã€‚</p><p>åœ¨è¿™ä¸ªAdminå®ä½“ç±»é‡Œæ·»åŠ privateå±æ€§ï¼Œè¿™äº›å±æ€§åŒå‰é¢æˆ‘ä»¬åˆ›å»ºçš„æ•°æ®åº“ä¸­çš„è¡¨çš„å±æ€§ä¸€è‡´ï¼Œç„¶åæŒ‰ä½ALT+Insertå¿«é€Ÿæ·»åŠ setterå’Œgetterï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Admin</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id; <span class="comment">// ç”¨Integeræ˜¯å› ä¸ºå¯ä»¥å…è®¸nullï¼Œä½†intä¸å…è®¸null</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPassword</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPassword</span><span class="params">(String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPhone</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> phone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPhone</span><span class="params">(String phone)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.phone = phone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getEmail</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEmail</span><span class="params">(String email)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.email = email;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-2-åˆ›å»ºAdminMapper-xmlæ–‡ä»¶">3.2 åˆ›å»ºAdminMapper.xmlæ–‡ä»¶</h2><p>åœ¨springbootå·¥ç¨‹ä¸‹çš„src/main/resources/mapperç›®å½•ä¸‹æ–°å»ºAdminMapper.xmlæ–‡ä»¶ï¼Œç¼–è¾‘å†…å®¹ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span><br><span class="line">        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span><br><span class="line">&lt;mapper namespace=&quot;com.example.mapper.AdminMapper&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;select id=&quot;selectAll&quot; resultType=&quot;com.example.entity.Admin&quot;&gt;</span><br><span class="line">        select * from `admin` order by id desc</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure><p><img src="/image/project-test4_7.png" alt=""></p><p>ä¸Šé¢å›¾ä¸­æ ‡æ³¨çš„éƒ¨åˆ†å¯¹äºmapperç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶éƒ½æ˜¯ä¸€æ ·çš„ã€‚ç„¶åæ¥ä¸‹æ¥çš„ä¸€è¡Œçš„namespaceä¸æ¥å£å±‚æ˜ å°„ã€‚</p><p>ä¸‹è½½MyBatisXæ’ä»¶ã€‚</p><h2 id="3-3-åˆ›å»ºAdminMapperæ¥å£">3.3 åˆ›å»ºAdminMapperæ¥å£</h2><p>åœ¨springbootä¸‹çš„com.exampleä¸‹æ–°å»ºmapperåŒ…ï¼Œå†åœ¨è¿™ä¸ªåŒ…ä¸‹åˆ›å»ºAdminMapperæ¥å£ã€‚è¿™ä¸ªAdminMapperä¸å‰é¢åˆ›å»ºçš„AdminMapper.xmlå¯¹åº”ã€‚</p><p>åœ¨è¿™ä¸ªç±»ä¸‹æ·»åŠ ä¸€ä¸ª<code>selectAll</code>æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AdminMapper</span> &#123;</span><br><span class="line">    List&lt;Admin&gt; <span class="title function_">selectAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ³•å…¶å®å¯¹åº”äºAdminMapper.xmlæ–‡ä»¶ä¸­çš„<code>selectAll</code>ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªå¯¹å¤–æŸ¥è¯¢çš„æ¥å£ã€‚</p><p>è¿™ä¸ªæ¥å£æ˜¯å®šä¹‰åœ¨mapperå±‚ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œå¾—é€šè¿‡controllerå±‚æ¥è¿›è¡Œè®¿é—®ã€‚</p><h2 id="3-4-åœ¨å¯åŠ¨ç±»ä¸­æ‰«æmapperæ¥å£å±‚">3.4 åœ¨å¯åŠ¨ç±»ä¸­æ‰«æmapperæ¥å£å±‚</h2><p>åœ¨springbootå·¥ç¨‹ç›®å½•ä¸‹çš„src/main/java/com/example/SpringbootApplication.javaä¸­æ·»åŠ <code>@MapperScan(&quot;com.example.mapper&quot;)</code>ï¼ˆè¿™æ„ä¸ºåœ¨ä¸»ç±»ä¸­æ‰«æmapperæ¥å£å±‚ï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.example.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringbootApplication</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">SpringApplication.run(SpringbootApplication.class, args);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-5-å°†æ¥å£ä»mapperä¼ é€’åˆ°controllerå±‚">3.5 å°†æ¥å£ä»mapperä¼ é€’åˆ°controllerå±‚</h2><p>åœ¨com.example.Serviceä¸­çš„AdminServiceä¸­æ·»åŠ æ–¹æ³•<code>public List&lt;Admin&gt; selectAll</code>ï¼ˆå…ˆé€šè¿‡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Resource</span></span><br><span class="line">AdminMapper adminMapper;</span><br></pre></td></tr></table></figure><p>æ³¨å…¥com/example/service/AdminService.javaä¸­çš„AdminServiceï¼Œä¾¿äºé€šè¿‡å®ƒæ¥è°ƒç”¨mapperé‡Œçš„selectAllï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdminService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    AdminMapper adminMapper;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">admin</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;admin&quot;</span>.equals(name)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;admin&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomerException</span>(<span class="string">&quot;è´¦å·é”™è¯¯&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;Admin&gt; <span class="title function_">selectAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> adminMapper.selectAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨serviceå±‚æœ‰äº†æ•°æ®æŸ¥è¯¢çš„æ–¹æ³•ã€‚</p><p>æ¥ä¸‹æ¥éœ€è¦äº¤ç»™controllerå±‚ä½¿ç”¨ã€‚</p><p>åœ¨com.example.controllerä¸‹æ–°å»ºAdminControllerç±»ï¼Œå¹¶å°†è¿™ä¸ªç±»æ³¨å†Œä¸ºcontrollerï¼ˆæ·»åŠ <code>@RestController</code>ï¼‰ï¼Œé€šè¿‡<code>@Resource</code>å°†com.example.serviceä¸‹çš„AdminServiceæ³¨å…¥ï¼Œç„¶åå®šä¹‰ä¸€ä¸ª<strong>selectAll</strong>æ¥å£ï¼Œå¹¶æ³¨å†ŒselectAllè·¯ç”±ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// com.example.controller.AdminController.java</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/admin&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdminController</span> &#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    AdminService adminService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/selectAll&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">selectAll</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;Admin&gt; admins = adminService.selectAll();</span><br><span class="line">        <span class="keyword">return</span> Result.success(admins);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢æ·»åŠ äº†<code>RequsetMapping(&quot;/admin&quot;)</code>æ˜¯ä¸ºäº†ä¾¿äºåŒºåˆ†ï¼Œä¸º å®ƒä½¿å¾— AdminController ä¸­çš„æ‰€æœ‰æ–¹æ³•æä¾›ä¸€ä¸ªå…¬å…±çš„ URL å‰ç¼€ /adminã€‚</p><p>è¿™æ ·selectAllå°±è¢«ä¼ é€’åˆ°äº†controlleræ¥å£å±‚ï¼Œè®¿é—®è·¯å¾„ä¸º<code>localhost:9999/admin/selectAll</code>ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;å‰è¨€&lt;/h1&gt;
&lt;p&gt;å­¦ä¹ Bç«™UPä¸»ç¨‹åºå‘˜é’æˆˆå‡ºå“çš„è§†é¢‘&lt;a href=&quot;https://www.bilibili.com/video/BV1AQAZeNEUJ/?spm_id_from=333.1245.0.0&amp;amp;vd_source=a0f19e79b7da02f</summary>
      
    
    
    
    <category term="Java é¡¹ç›®" scheme="http://malone-ai.github.io/categories/Java-%E9%A1%B9%E7%9B%AE/"/>
    
    
    <category term="Java" scheme="http://malone-ai.github.io/tags/Java/"/>
    
    <category term="Springboot" scheme="http://malone-ai.github.io/tags/Springboot/"/>
    
  </entry>
  
  <entry>
    <title>æ‰‹æ’•çº¿ç¨‹æ± </title>
    <link href="http://malone-ai.github.io/2025/03/09/cpp-interview4/"/>
    <id>http://malone-ai.github.io/2025/03/09/cpp-interview4/</id>
    <published>2025-03-09T04:24:58.000Z</published>
    <updated>2025-03-10T08:37:12.484Z</updated>
    
    <content type="html"><![CDATA[<h1>å‰è¨€</h1><p>å­¦ä¹ ä¸€ä¸‹çº¿ç¨‹æ± ï¼Œä¸»è¦å‚è€ƒGithubä»£ç ä»“åº“<a href="https://github.com/progschj/ThreadPool">https://github.com/progschj/ThreadPool</a></p><h1>1. ä¸ºä»€ä¹ˆéœ€è¦çº¿ç¨‹æ± </h1><p>åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ï¼Œé¢‘ç¹åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ä¼šå¯¼è‡´ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li>èµ„æºå¼€é”€å¤§ï¼šçº¿ç¨‹åˆ›å»ºéœ€è¦åˆ†é…æ ˆç©ºé—´ã€å¯„å­˜å™¨ç­‰èµ„æºã€‚</li><li>è°ƒåº¦å¼€é”€é«˜ï¼šæ“ä½œç³»ç»Ÿé¢‘ç¹åˆ‡æ¢çº¿ç¨‹ä¸Šä¸‹æ–‡ã€‚</li><li>ç®¡ç†å¤æ‚ï¼šçº¿ç¨‹æ•°é‡è¿‡å¤šæ—¶éš¾ä»¥æ§åˆ¶ã€‚</li></ul><p>å› æ­¤å¼•å…¥çº¿ç¨‹æ± æ¥è§£å†³è¿™äº›é—®é¢˜ã€‚çº¿ç¨‹æ± çš„æ ¸å¿ƒæ€æƒ³æ˜¯<code>é¢„å…ˆåˆ›å»ºä¸€ç»„çº¿ç¨‹ï¼Œé€šè¿‡ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†å¾…æ‰§è¡Œçš„ä»»åŠ¡ã€‚çº¿ç¨‹å¾ªç¯ä»é˜Ÿåˆ—ä¸­è·å–ä»»åŠ¡æ‰§è¡Œï¼Œé¿å…é¢‘ç¹åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹çš„å¼€é”€</code>ã€‚</p><h1>2. è®¾è®¡æ€æƒ³ä¸å…³é”®æœºåˆ¶</h1><ol><li>æ ¸å¿ƒç»„ä»¶</li></ol><ul><li>ä»»åŠ¡é˜Ÿåˆ—ï¼ˆTask Queueï¼‰ï¼šå­˜å‚¨å¾…æ‰§è¡Œçš„ä»»åŠ¡ï¼ˆå°è£…ä¸ºstd::function&lt;void()&gt;ï¼‰ã€‚</li><li>å·¥ä½œçº¿ç¨‹ï¼ˆWorkersï¼‰ï¼šå¤šä¸ªçº¿ç¨‹å¾ªç¯ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­è·å–ä»»åŠ¡ã€‚</li><li>åŒæ­¥æœºåˆ¶ï¼šäº’æ–¥é”ï¼ˆstd::mutexï¼‰ä¿æŠ¤é˜Ÿåˆ—ï¼Œæ¡ä»¶å˜é‡ï¼ˆstd::condition_variableï¼‰å®ç°çº¿ç¨‹ç­‰å¾…/å”¤é†’ã€‚</li></ul><ol start="2"><li>å·¥ä½œæµç¨‹</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">   [ä¸»çº¿ç¨‹]        |       [å·¥ä½œçº¿ç¨‹]</span><br><span class="line">      |            |            |</span><br><span class="line">æäº¤ä»»åŠ¡åˆ°é˜Ÿåˆ—      |      ç­‰å¾…ä»»åŠ¡åˆ°æ¥</span><br><span class="line">      |            |            |</span><br><span class="line">  ä»»åŠ¡å…¥é˜Ÿ         |      ä»é˜Ÿåˆ—å–ä»»åŠ¡</span><br><span class="line">      |            |            |</span><br><span class="line"> å”¤é†’å·¥ä½œçº¿ç¨‹       |      æ‰§è¡Œä»»åŠ¡</span><br><span class="line">      |            |            |</span><br></pre></td></tr></table></figure><h1>3. ä»»åŠ¡é˜Ÿåˆ—ä¸enqueueå‡½æ•°</h1><h1>3.1 ä»»åŠ¡é˜Ÿåˆ—</h1><p>åœ¨å®ç°çº¿ç¨‹æ± æ—¶ï¼Œä»»åŠ¡é˜Ÿåˆ—æ˜¯æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ã€‚å®ƒçš„ä½œç”¨æ˜¯å­˜æ”¾å¾…æ‰§è¡Œçš„ä»»åŠ¡ï¼Œçº¿ç¨‹æ± ä¸­çš„å·¥ä½œçº¿ç¨‹ä¼šä»é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡å¹¶æ‰§è¡Œã€‚é‚£ä¹ˆï¼Œä»€ä¹ˆæ˜¯ä»»åŠ¡å‘¢ï¼Ÿ</p><p>ä»ç¼–ç¨‹çš„è§’åº¦æ¥çœ‹ï¼Œä»»åŠ¡æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª<code>å‡½æ•°</code>ã€‚</p><p>å› æ­¤ä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¹¶ä¸”é˜Ÿåˆ—å­˜å‚¨çš„ç±»å‹æ˜¯å‡½æ•°ï¼Œæ¥ç»„æˆä»»åŠ¡é˜Ÿåˆ—ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">std::queue&lt; std::function&lt;<span class="type">void</span>()&gt; &gt; tasks;</span><br></pre></td></tr></table></figure><p>std::functionæ˜¯ä¸€ä¸ªé€šç”¨çš„å‡½æ•°å°è£…å™¨ï¼Œå…¶ä¸­çš„voidä»£è¡¨æ²¡æœ‰è¿”å›å€¼ï¼ˆæˆ–è€…è¿”å›å€¼ç±»å‹ä¸ºvoidï¼‰ï¼Œåœ†æ‹¬å·è¡¨ç¤ºæ²¡æœ‰å‚æ•°ã€‚å†æ¯”å¦‚<code>std::function&lt;int(int, int)&gt;</code>ä»£è¡¨æ¥æ”¶ä¸¤ä¸ªintç±»å‹å‚æ•°å¹¶ä¸”è¿”å›å€¼ä¸ºintã€‚</p><p>ä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜ï¼Ÿçº¿ç¨‹æ± éœ€è¦æ”¯æŒ<code>ä»»æ„ç±»å‹</code>çš„ä»»åŠ¡ï¼š</p><ul><li>å¯ä»¥æ˜¯æ™®é€šå‡½æ•°ã€ç±»æˆå‘˜å‡½æ•°ã€Lambdaè¡¨è¾¾å¼ç­‰</li><li>å¯ä»¥æºå¸¦ä»»æ„å‚æ•°å’Œè¿”å›å€¼</li></ul><p>ä½†ä¸ºä»€ä¹ˆè¿™é‡Œå´ä½¿ç”¨äº†æ— å‚æ— è¿”å›å€¼çš„<code>std::function&lt;void()&gt;</code>å½“ä½œä»»åŠ¡é˜Ÿåˆ—çš„æˆå‘˜çš„åŸºæœ¬ç±»å‹å‘¢ï¼Ÿ</p><p>è¿™çœ‹ä¼¼çŸ›ç›¾çš„è®¾è®¡èƒŒåï¼Œå®é™…ä¸Šä½“ç°äº†<code>ç±»å‹æ“¦é™¤</code>å’Œ<code>ä»»åŠ¡é€‚é…</code>çš„å·§å¦™ç»“åˆã€‚</p><p>ä¸ºäº†ç»Ÿä¸€ç®¡ç†ä»»åŠ¡ï¼Œå¿…é¡»å°†è¿™äº›ä»»åŠ¡<code>é€‚é…</code>ä¸ºä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ã€‚std::function&lt;void()&gt;å°±æ˜¯è¿™ä¸ªç»Ÿä¸€çš„æ¥å£ã€‚</p><ol><li>ä¸ºä»€ä¹ˆé€‰æ‹©void()ï¼Ÿ</li></ol><ul><li>æœ€å°æ¥å£ï¼švoid()æ˜¯æœ€ç®€å•çš„å‡½æ•°ç­¾åï¼Œä¸æ¶‰åŠå‚æ•°å’Œè¿”å›å€¼ã€‚</li><li>é€šç”¨æ€§ï¼šä»»ä½•ä»»åŠ¡éƒ½å¯ä»¥é€šè¿‡<code>é€‚é…å™¨</code>è½¬æ¢ä¸ºvoid()ç±»å‹ã€‚</li><li>æ‰§è¡Œä¸ç»“æœåˆ†ç¦»ï¼šçº¿ç¨‹æ± åªè´Ÿè´£<code>æ‰§è¡Œä»»åŠ¡</code>ï¼Œç»“æœé€šè¿‡å…¶ä»–æœºåˆ¶è¿”å›ã€‚</li></ul><ol start="2"><li>å¦‚ä½•é€‚é…ï¼Ÿ<br>é€šè¿‡<code>ä»»åŠ¡åŒ…è£…å™¨</code>å°†ä»»æ„ç±»å‹çš„ä»»åŠ¡è½¬æ¢ä¸ºvoid()ç±»å‹ã€‚å…·ä½“æ¥è¯´ï¼š</li></ol><ul><li>ä½¿ç”¨std::bindç»‘å®šä»»åŠ¡å’Œå‚æ•°ï¼Œç”Ÿæˆä¸€ä¸ªæ— å‚çš„å¯è°ƒç”¨å¯¹è±¡ã€‚</li><li>ä½¿ç”¨std::packaged_taskå°†ä»»åŠ¡åŒ…è£…ä¸ºvoid()ç±»å‹ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰è¿”å›å€¼ã€‚å¦‚ä½•è·å–è¿”å›å€¼å‘¢ï¼Ÿä½¿ç”¨è¯¥å¯¹è±¡çš„get_futureæˆå‘˜å‡½æ•°è·å–ä¸€ä¸ªstd::futureå¯¹è±¡ï¼Œåç»­åœ¨è°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„getæˆå‘˜å‡½æ•°å³å¯ã€‚</li></ul><p>æ€»çš„æ¥è¯´ï¼Œå°±æ˜¯ä¸ºäº†æ–¹ä¾¿ç®¡ç†æ‰ä½¿ç”¨<code>std::function&lt;void()&gt;</code>å½“ä½œä»»åŠ¡é˜Ÿåˆ—çš„æˆå‘˜çš„åŸºæœ¬ç±»å‹ï¼Œå¹¶ä¸”çº¿ç¨‹æ± åªæ˜¯æ‰§è¡Œè¿™äº›ä»»åŠ¡ï¼Œè€Œä»»åŠ¡çš„æ‰§è¡Œç»“æœçº¿ç¨‹æ± å¹¶ä¸åœ¨ä¹ï¼Œä½¿ç”¨å…¶ä»–åŠæ³•æ¥è¿”å›è¿™ä¸ªç»“æœã€‚</p><p>æ›´å…·ä½“çš„ï¼Œæˆ‘è§‰å¾—åº”è¯¥ç»“åˆæˆå‘˜å‡½æ•°enqueueæ¥è¯´æ˜ï¼Œ</p><h1>3.2 æˆå‘˜å‡½æ•°enqueue</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// add new work item to the pool</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> F, <span class="keyword">class</span>... Args&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">ThreadPool::enqueue</span><span class="params">(F&amp;&amp; f, Args&amp;&amp;... args)</span> </span></span><br><span class="line"><span class="function">    -&gt; std::future&lt;<span class="keyword">typename</span> std::result_of&lt;<span class="title">F</span><span class="params">(Args...)</span>&gt;::type&gt;</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">using</span> return_type = <span class="keyword">typename</span> std::result_of&lt;<span class="built_in">F</span>(Args...)&gt;::type;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> task = std::make_shared&lt; std::packaged_task&lt;<span class="built_in">return_type</span>()&gt; &gt;(</span><br><span class="line">            std::<span class="built_in">bind</span>(std::forward&lt;F&gt;(f), std::forward&lt;Args&gt;(args)...)</span><br><span class="line">        );</span><br><span class="line">        </span><br><span class="line">    std::future&lt;return_type&gt; res = task-&gt;<span class="built_in">get_future</span>();</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(queue_mutex)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// don&#x27;t allow enqueueing after stopping the pool</span></span><br><span class="line">        <span class="keyword">if</span>(stop)</span><br><span class="line">            <span class="keyword">throw</span> std::<span class="built_in">runtime_error</span>(<span class="string">&quot;enqueue on stopped ThreadPool&quot;</span>);</span><br><span class="line"></span><br><span class="line">        tasks.<span class="built_in">emplace</span>([task]()&#123; (*task)(); &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    condition.<span class="built_in">notify_one</span>();</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…ˆçœ‹ä¸€ä¸‹å‡½æ•°å£°æ˜ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> F, <span class="keyword">class</span>... Args&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">ThreadPool::enqueue</span><span class="params">(F&amp;&amp; f, Args&amp;&amp;... args)</span> -&gt; std::future&lt;<span class="keyword">typename</span> std::result_of&lt;<span class="title">F</span><span class="params">(Args...)</span>&gt;::type&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œä½¿ç”¨äº†C++11çš„æ¨¡æ¿ï¼ˆtemplate&lt;class F, classâ€¦ Args&gt;ï¼‰å’Œå°¾ç½®è¿”å›ç±»å‹ï¼ˆç”±<code>-&gt;</code>æŒ‡æ˜ï¼Œ<code>-&gt;</code>åå³ä¸ºè¿”å›å€¼ç±»å‹ï¼‰ã€‚<code>F</code>æ˜¯ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡çš„ç±»å‹ï¼Œ<code>Args</code>æ˜¯å‚æ•°åŒ…çš„ç±»å‹ï¼ˆ<code>...</code>æ˜¯ å‚æ•°åŒ…å±•å¼€çš„è¯­æ³•ï¼Œç”¨äºå¤„ç†å¯å˜æ¨¡æ¿å‚æ•°ï¼‰ã€‚<code>enqueue</code>å‡½æ•°çš„ä½œç”¨æ˜¯å°†ä»»åŠ¡<code>f</code>å’Œå‚æ•°<code>args</code>æ‰“åŒ…æˆä¸€ä¸ªä»»åŠ¡ï¼Œæ”¾å…¥çº¿ç¨‹æ± çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œå¹¶è¿”å›ä¸€ä¸ª<code>std::future</code>ä»¥ä¾¿è·å–ä»»åŠ¡æ‰§è¡Œçš„ç»“æœã€‚</p><p>æ¥ä¸‹æ¥ï¼Œå‡½æ•°å†…éƒ¨çš„ç¬¬ä¸€è¡Œæ˜¯ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> return_type = <span class="keyword">typename</span> std::result_of&lt;<span class="built_in">F</span>(Args...)&gt;::type;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæœ‰å‡ ä¸ªå…³é”®ç‚¹ï¼š</p><ol><li><p>std::result_of<br><code>std::result_of</code>æ˜¯ä¸€ä¸ªç±»å‹èƒå–å·¥å…·ï¼ˆType Traitï¼‰ï¼Œç”¨äºæ¨å¯¼å¯è°ƒç”¨å¯¹è±¡ï¼ˆå‡½æ•°ã€Lambdaã€å‡½æ•°å¯¹è±¡ç­‰ï¼‰åœ¨ç»™å®šå‚æ•°ç±»å‹ä¸‹çš„è¿”å›ç±»å‹ã€‚</p></li><li><p>typename<br><code>typename</code>åœ¨è¿™é‡Œçš„ä½œç”¨æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨<code>std::result_of&lt;F(Args...)&gt;::type</code>æ˜¯ä¸€ä¸ª ç±»å‹ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡æˆ–å…¶ä»–ä¸œè¥¿ã€‚è¿™æ˜¯C++æ¨¡æ¿ç¼–ç¨‹ä¸­çš„ä¸€ä¸ªå¸¸è§è¯­æ³•è§„åˆ™ï¼Œç§°ä¸º<code>ä¾èµ–åç§°è§£æ</code>ã€‚</p></li><li><p>using<br><code>using</code>åœ¨è¿™é‡Œç”¨äºå®šä¹‰ç±»å‹åˆ«åï¼Œç±»ä¼¼äºtypedefã€‚</p></li></ol><p>è¿™é‡Œä½¿ç”¨äº†<code>std::result_of</code>æ¥æ¨å¯¼è°ƒç”¨<code>F</code>ç±»å‹å¯¹è±¡ä½¿ç”¨<code>Args...</code>å‚æ•°åçš„è¿”å›ç±»å‹ã€‚è¿™è¡Œä»£ç å®šä¹‰äº†<code>return_type</code>ä½œä¸ºä»»åŠ¡æ‰§è¡Œåçš„è¿”å›ç±»å‹ï¼Œç”¨äºåç»­çš„<code>std::packaged_task</code>å’Œ<code>std::future</code>çš„æ¨¡æ¿å‚æ•°ã€‚</p><p>ç„¶åï¼Œåˆ›å»ºäº†ä¸€ä¸ª<code>std::packaged_task</code>å¯¹è±¡ï¼Œå¹¶å°†å…¶åŒ…è£…åœ¨<code>std::shared_ptr</code>ä¸­ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> task = std::make_shared&lt;std::packaged_task&lt;<span class="built_in">return_type</span>()&gt;&gt;(std::<span class="built_in">bind</span>(std::forward&lt;F&gt;(f), std::forward&lt;Args&gt;(args)...));</span><br></pre></td></tr></table></figure><p>å®ƒçš„æ ¸å¿ƒç›®çš„æ˜¯å°†ç”¨æˆ·æäº¤çš„ä»»åŠ¡ï¼ˆå¯èƒ½å¸¦æœ‰å‚æ•°å’Œè¿”å›å€¼ï¼‰é€‚é…ä¸ºçº¿ç¨‹æ± å¯ä»¥å¤„ç†çš„ç»Ÿä¸€å½¢å¼ï¼ˆvoid()ç±»å‹ï¼‰ï¼ŒåŒæ—¶ä¿ç•™ä»»åŠ¡çš„è¿”å›å€¼ä»¥ä¾¿å¼‚æ­¥è·å–ã€‚</p><p>è¿™é‡Œæœ‰å‡ ä¸ªå…³é”®ç‚¹ï¼š</p><ol><li>std::packaged_task</li></ol><p>std::packaged_task æ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ï¼Œç”¨äº åŒ…è£…ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼Œå¹¶å°†å…¶ä¸ä¸€ä¸ª std::future å…³è”èµ·æ¥ï¼Œä»è€Œæ”¯æŒ å¼‚æ­¥è·å–ä»»åŠ¡çš„è¿”å›å€¼ã€‚å®ƒçš„æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬ï¼š</p><ul><li>ä»»åŠ¡åŒ…è£…ï¼šå°†ä»»æ„å¯è°ƒç”¨å¯¹è±¡ï¼ˆå‡½æ•°ã€Lambdaã€å‡½æ•°å¯¹è±¡ç­‰ï¼‰åŒ…è£…ä¸ºä¸€ä¸ªå¯ä»¥å»¶è¿Ÿæ‰§è¡Œçš„ä»»åŠ¡ã€‚</li><li>ç»“æœå…³è”ï¼šé€šè¿‡ get_future() æ–¹æ³•ç”Ÿæˆä¸€ä¸ª std::future å¯¹è±¡ï¼Œç”¨äºå¼‚æ­¥è·å–ä»»åŠ¡çš„è¿”å›å€¼ã€‚</li></ul><p>æ¯”å¦‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::packaged_task&lt;<span class="title">int</span><span class="params">()</span>&gt; <span class="title">task</span><span class="params">([]() &#123; <span class="keyword">return</span> <span class="number">42</span>; &#125;)</span></span>;  <span class="comment">// åŒ…è£…ä¸€ä¸ªä»»åŠ¡</span></span><br><span class="line">std::future&lt;<span class="type">int</span>&gt; result = task.<span class="built_in">get_future</span>();         <span class="comment">// è·å– future</span></span><br><span class="line"><span class="built_in">task</span>();                                              <span class="comment">// æ‰§è¡Œä»»åŠ¡</span></span><br><span class="line">std::cout &lt;&lt; result.<span class="built_in">get</span>() &lt;&lt; std::endl;              <span class="comment">// è·å–ç»“æœ</span></span><br></pre></td></tr></table></figure><ol start="2"><li>std::bind</li></ol><p><code>std::bind</code>ç”¨äºå°†å‡½æ•°<code>f</code>å’Œå‚æ•°<code>args...</code>ç»‘å®šåœ¨ä¸€èµ·ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„å¯è°ƒç”¨å¯¹è±¡ï¼Œå®ƒä½äº<code>&lt;functional&gt;</code>å¤´æ–‡ä»¶ä¸­ã€‚<br>å‡è®¾æœ‰ä¸€ä¸ªå‡½æ•°ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> a + b; &#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨std::bindç»‘å®šå‚æ•°ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> bound_task = std::<span class="built_in">bind</span>(add, <span class="number">2</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œbound_taskæ˜¯ä¸€ä¸ªæ— å‚çš„å¯è°ƒç”¨å¯¹è±¡ï¼Œè°ƒç”¨bound_task()ä¼šè¿”å›5ã€‚</p><ol start="3"><li><p>å®Œç¾è½¬å‘<br><code>std::forward</code>ç”¨äºä¿æŒå‚æ•°çš„å·¦å€¼æˆ–å³å€¼å±æ€§ï¼Œé¿å…ä¸å¿…è¦çš„æ‹·è´ï¼Œå®ç°å®Œç¾è½¬å‘ã€‚</p></li><li><p>std::make_shared<br>ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆç®¡ç†<code>std::packaged_task</code>çš„ç”Ÿå‘½å‘¨æœŸï¼Œç¡®ä¿ä»»åŠ¡åœ¨éœ€è¦æ—¶ä¸ä¼šè¢«æå‰é”€æ¯ã€‚</p></li></ol><p>æ¥ä¸‹æ¥è·å–<code>std::future</code>å¯¹è±¡ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">std::future&lt;return_type&gt; res = task-&gt;<span class="built_in">get_future</span>();</span><br></pre></td></tr></table></figure><p><code>std::packaged_task::get_future</code>è¿”å›ä¸€ä¸ªä¸ä»»åŠ¡ç»“æœå…³è”çš„<code>std::future</code>å¯¹è±¡ï¼Œé€šè¿‡å®ƒå¯ä»¥åœ¨æœªæ¥æŸä¸ªæ—¶é—´ç‚¹è·å–ä»»åŠ¡çš„è¿”å›å€¼ã€‚</p><p>ç„¶åè¿›å…¥ä¸€ä¸ªä½œç”¨åŸŸå—ï¼Œé”å®šäº’æ–¥é‡ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(queue_mutex)</span></span>;</span><br><span class="line">    <span class="keyword">if</span>(stop)</span><br><span class="line">        <span class="keyword">throw</span> std::<span class="built_in">runtime_error</span>(<span class="string">&quot;enqueue on stopped ThreadPool&quot;</span>);</span><br><span class="line">    tasks.<span class="built_in">emplace</span>([task]()&#123; (*task)(); &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæœ‰å‡ ä¸ªå…³é”®ç‚¹ï¼š</p><ol><li><p>äº’æ–¥é”ï¼šä½¿ç”¨<code>std::unique_lock</code>é”å®šäº’æ–¥é‡ï¼Œç¡®ä¿å¯¹ä»»åŠ¡é˜Ÿåˆ—çš„è®¿é—®æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå½“ç¦»å¼€ä½œç”¨åŸŸæ—¶è‡ªåŠ¨è§£é”ã€‚</p></li><li><p>åœæ­¢æ£€æŸ¥ï¼šå¦‚æœçº¿ç¨‹æ± å·²ç»åœæ­¢ï¼ˆ<code>stop</code>ä¸º<code>true</code>ï¼‰ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œé˜²æ­¢æ–°ä»»åŠ¡è¢«åŠ å…¥å·²åœæ­¢çš„çº¿ç¨‹æ± ã€‚</p></li><li><p>ä»»åŠ¡å…¥é˜Ÿï¼šå°†ä»»åŠ¡åŒ…è£…æˆä¸€ä¸ªlambdaè¡¨è¾¾å¼ï¼Œå¹¶æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—<code>tasks</code>ä¸­ã€‚lambdaæ•è·äº†<code>task</code>çš„å…±äº«æŒ‡é’ˆï¼Œå½“lambdaè¢«æ‰§è¡Œæ—¶ï¼Œä¼šè°ƒç”¨<code>(*task)()</code>ï¼Œå³æ‰§è¡Œç»‘å®šçš„ä»»åŠ¡ã€‚</p></li></ol><p>ä¹‹åï¼Œé€šçŸ¥ä¸€ä¸ªç­‰å¾…çš„çº¿ç¨‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">condition.<span class="built_in">notify_one</span>();</span><br></pre></td></tr></table></figure><p>é€šè¿‡æ¡ä»¶å˜é‡<code>condition</code>çš„<code>notify_one</code>æ–¹æ³•ï¼Œå”¤é†’ä¸€ä¸ªæ­£åœ¨ç­‰å¾…çš„å·¥ä½œçº¿ç¨‹ï¼Œè®©å®ƒä»ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºå¹¶æ‰§è¡Œæ–°åŠ å…¥çš„ä»»åŠ¡ã€‚</p><p>æœ€åï¼Œè¿”å›ä¹‹å‰è·å–çš„<code>std::future</code>å¯¹è±¡ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> res;</span><br></pre></td></tr></table></figure><p>ç”¨æˆ·å¯ä»¥é€šè¿‡è¿™ä¸ª<code>std::future</code>å¯¹è±¡è·å–ä»»åŠ¡çš„æ‰§è¡Œç»“æœï¼Œæˆ–è€…ç­‰å¾…ä»»åŠ¡å®Œæˆã€‚</p><p>åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œéœ€è¦æ³¨æ„çš„å‡ ä¸ªå…³é”®ç‚¹ï¼š</p><ol><li><p><strong>å®Œç¾è½¬å‘</strong>ï¼šåœ¨<code>std::bind</code>ä¸­ä½¿ç”¨<code>std::forward</code>ä¿æŒå‚æ•°çš„å€¼ç±»åˆ«ï¼Œç¡®ä¿æ— è®ºæ˜¯å·¦å€¼è¿˜æ˜¯å³å€¼éƒ½èƒ½æ­£ç¡®ä¼ é€’ï¼Œé¿å…ä¸å¿…è¦çš„æ‹·è´ã€‚</p></li><li><p><strong>ç±»å‹æ“¦é™¤</strong>ï¼šä»»åŠ¡é˜Ÿåˆ—ä¸­çš„å…ƒç´ ç±»å‹æ˜¯<code>std::function&lt;void()&gt;</code>ï¼Œè€Œé€šè¿‡lambdaè¡¨è¾¾å¼å°†å…·ä½“çš„<code>std::packaged_task</code>åŒ…è£…æˆæ— å‚æ•°ã€æ— è¿”å›å€¼çš„å‡½æ•°ï¼Œå®ç°äº†ç±»å‹æ“¦é™¤ï¼Œä½¿å¾—ä¸åŒç±»å‹çš„ä»»åŠ¡å¯ä»¥ç»Ÿä¸€å­˜å‚¨åœ¨åŒä¸€ä¸ªé˜Ÿåˆ—ä¸­ã€‚</p></li><li><p><strong>å¼‚å¸¸å®‰å…¨</strong>ï¼šåœ¨äº’æ–¥é”çš„ä¿æŠ¤ä¸‹æ£€æŸ¥<code>stop</code>æ ‡å¿—ï¼Œç¡®ä¿çº¿ç¨‹æ± åœæ­¢åä¸å†æ¥å—æ–°ä»»åŠ¡ï¼Œå¹¶ä¸”é€šè¿‡æ™ºèƒ½æŒ‡é’ˆç®¡ç†ä»»åŠ¡å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œé¿å…èµ„æºæ³„æ¼ã€‚</p></li><li><p><strong>å¼‚æ­¥ç»“æœå¤„ç†</strong>ï¼šé€šè¿‡<code>std::packaged_task</code>å’Œ<code>std::future</code>çš„ç»“åˆï¼Œå®ç°äº†ä»»åŠ¡çš„å¼‚æ­¥æ‰§è¡Œå’Œç»“æœçš„è·å–ï¼Œç”¨æˆ·å¯ä»¥åœ¨é€‚å½“çš„æ—¶å€™è°ƒç”¨<code>future::get()</code>æ¥ç­‰å¾…ä»»åŠ¡å®Œæˆå¹¶è·å–ç»“æœï¼Œæˆ–è€…æ£€æŸ¥ä»»åŠ¡æ˜¯å¦å®Œæˆã€‚</p></li></ol><ul><li><strong><code>std::result_of</code>å’Œ<code>std::invoke_result</code>çš„åŒºåˆ«ï¼Ÿ</strong></li></ul><p>C++17ä¸­<code>std::result_of</code>è¢«åºŸå¼ƒï¼Œæ”¹ç”¨<code>std::invoke_result</code>ã€‚ä½†åœ¨C++11/14ä¸­ï¼Œ<code>std::result_of</code>æ˜¯æ¨å¯¼å¯è°ƒç”¨å¯¹è±¡è¿”å›ç±»å‹çš„æ–¹å¼ã€‚å…¶æ¨¡æ¿å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ç±»å‹ï¼Œè¡¨ç¤ºè°ƒç”¨<code>F</code>ç±»å‹å¯¹è±¡ä½¿ç”¨<code>Args...</code>å‚æ•°æ—¶çš„è¿”å›ç±»å‹ã€‚</p><h1>4. çº¿ç¨‹æ± çš„æ„é€ ä¸ææ„</h1><h1>4.1 æ„é€ å‡½æ•°ï¼šå·¥ä½œçº¿ç¨‹çš„å¯åŠ¨</h1><p>æ„é€ å‡½æ•°çš„æ ¸å¿ƒä»»åŠ¡æ˜¯åˆå§‹åŒ–çº¿ç¨‹æ± å¹¶å¯åŠ¨æŒ‡å®šæ•°é‡çš„å·¥ä½œçº¿ç¨‹ã€‚</p><p>å…¶å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="title">ThreadPool::ThreadPool</span><span class="params">(<span class="type">size_t</span> threads)</span></span></span><br><span class="line"><span class="function">    :   stop(false)</span></span><br><span class="line"><span class="function">&#123;</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">size_t</span> i = <span class="number">0</span>;i&lt;threads;++i)</span><br><span class="line">        workers.<span class="built_in">emplace_back</span>(</span><br><span class="line">            [<span class="keyword">this</span>]</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(;;)</span><br><span class="line">                &#123;</span><br><span class="line">                    std::function&lt;<span class="built_in">void</span>()&gt; task;</span><br><span class="line"></span><br><span class="line">                    &#123;</span><br><span class="line">                        std::unique_lock&lt;std::mutex&gt; <span class="built_in">lock</span>(<span class="keyword">this</span>-&gt;queue_mutex);</span><br><span class="line">                        <span class="keyword">this</span>-&gt;condition.<span class="built_in">wait</span>(lock,</span><br><span class="line">                            [<span class="keyword">this</span>]&#123; <span class="keyword">return</span> <span class="keyword">this</span>-&gt;stop || !<span class="keyword">this</span>-&gt;tasks.<span class="built_in">empty</span>(); &#125;);</span><br><span class="line">                        <span class="keyword">if</span>(<span class="keyword">this</span>-&gt;stop &amp;&amp; <span class="keyword">this</span>-&gt;tasks.<span class="built_in">empty</span>())</span><br><span class="line">                            <span class="keyword">return</span>;</span><br><span class="line">                        task = std::<span class="built_in">move</span>(<span class="keyword">this</span>-&gt;tasks.<span class="built_in">front</span>());</span><br><span class="line">                        <span class="keyword">this</span>-&gt;tasks.<span class="built_in">pop</span>();</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="built_in">task</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç çš„åŸºæœ¬æµç¨‹ï¼š</p><ol><li>çº¿ç¨‹å¯åŠ¨</li></ol><ul><li>å¾ªç¯åˆ›å»º threads ä¸ªå·¥ä½œçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹æ‰§è¡Œä¸€ä¸ª æ— é™å¾ªç¯ã€‚</li><li>çº¿ç¨‹å¯åŠ¨åç«‹å³è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼ˆé€šè¿‡æ¡ä»¶å˜é‡ conditionï¼‰ã€‚</li></ul><ol start="2"><li>åŒæ­¥æœºåˆ¶</li></ol><ul><li>æ¡ä»¶å˜é‡ç­‰å¾…ï¼š</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">condition.<span class="built_in">wait</span>(lock, [<span class="keyword">this</span>] &#123; <span class="keyword">return</span> stop || !tasks.<span class="built_in">empty</span>(); &#125;);</span><br></pre></td></tr></table></figure><ul><li>çº¿ç¨‹åœ¨ä»¥ä¸‹ä¸¤ç§æƒ…å†µä¸‹è¢«å”¤é†’ï¼š<ul><li>æœ‰æ–°ä»»åŠ¡åŠ å…¥é˜Ÿåˆ—ï¼ˆtasks éç©ºï¼‰ã€‚</li><li>çº¿ç¨‹æ± è¢«è¦æ±‚åœæ­¢ï¼ˆstop == trueï¼‰ã€‚</li></ul></li><li>å½“ä»»åŠ¡é˜Ÿåˆ—ä¸ºç©ºï¼ˆtasks.empty()ï¼‰ä¸”çº¿ç¨‹æ± æœªæ”¶åˆ°åœæ­¢ä¿¡å·ï¼ˆstop == falseï¼‰æ—¶ï¼Œå·¥ä½œçº¿ç¨‹ä¼šè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œé¿å…ç©ºè½¬æ¶ˆè€— CPU èµ„æºã€‚</li><li><code>[this]&#123; return stop || !tasks.empty(); &#125;</code> è¿™ä¸ª Lambda è¡¨è¾¾å¼æ˜¯å”¤é†’çº¿ç¨‹çš„æ¡ä»¶åˆ¤æ–­</li><li>åœ¨è°ƒç”¨ condition.wait() æ—¶ï¼Œé”ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾ï¼Œå…è®¸å…¶ä»–çº¿ç¨‹ä¿®æ”¹å…±äº«èµ„æºï¼ˆä¾‹å¦‚æ·»åŠ ä»»åŠ¡æˆ–è®¾ç½®åœæ­¢æ ‡å¿—ï¼‰ã€‚</li><li>å½“çº¿ç¨‹è¢«å”¤é†’æ—¶ï¼Œä¼šé‡æ–°å°è¯•è·å–é”ï¼Œè·å–é”åç»§ç»­æ“ä½œï¼Œä¿è¯åç»­æ“ä½œï¼ˆå¦‚å–ä»»åŠ¡ tasks.pop()ï¼‰çš„çº¿ç¨‹å®‰å…¨</li><li>é˜²æ­¢è™šå‡å”¤é†’<ul><li>æ¡ä»¶å˜é‡çš„ wait() æ–¹æ³•å¯èƒ½å› ç³»ç»ŸåŸå› è¢«è™šå‡å”¤é†’ï¼ˆå³ä½¿æ¡ä»¶æœªæ»¡è¶³ï¼‰ã€‚é€šè¿‡ä¼ å…¥çš„ Lambda è¡¨è¾¾å¼ï¼Œçº¿ç¨‹åœ¨å”¤é†’åå¿…é¡»é‡æ–°æ£€æŸ¥æ¡ä»¶ï¼Œç¡®ä¿åªæœ‰åœ¨æ¡ä»¶çœŸæ­£æ»¡è¶³æ—¶æ‰ä¼šç»§ç»­æ‰§è¡Œã€‚</li></ul></li></ul><ol start="3"><li>ä»»åŠ¡æ‰§è¡Œæµç¨‹ï¼š</li></ol><ul><li>ä»é˜Ÿåˆ—å¤´éƒ¨å–å‡ºä»»åŠ¡ï¼ˆtasks.front()ï¼‰ï¼Œå¹¶é€šè¿‡ std::move è½¬ç§»æ‰€æœ‰æƒã€‚</li><li>åœ¨é”å¤–æ‰§è¡Œä»»åŠ¡ï¼ˆtask()ï¼‰ï¼Œé¿å…é•¿æ—¶é—´å ç”¨é”ã€‚</li></ul><h1>4.2 ææ„å‡½æ•°ï¼šå®‰å…¨å…³é—­çº¿ç¨‹æ± </h1><p>ææ„å‡½æ•°è´Ÿè´£åœæ­¢çº¿ç¨‹æ± å¹¶ç­‰å¾…æ‰€æœ‰å·¥ä½œçº¿ç¨‹é€€å‡ºï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">inline</span> ThreadPool::~<span class="built_in">ThreadPool</span>() &#123;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(queue_mutex)</span></span>;</span><br><span class="line">        stop = <span class="literal">true</span>;  <span class="comment">// è®¾ç½®åœæ­¢æ ‡å¿—</span></span><br><span class="line">    &#125;</span><br><span class="line">    condition.<span class="built_in">notify_all</span>();  <span class="comment">// å”¤é†’æ‰€æœ‰çº¿ç¨‹</span></span><br><span class="line">    <span class="keyword">for</span> (std::thread&amp; worker : workers) &#123;</span><br><span class="line">        worker.<span class="built_in">join</span>();  <span class="comment">// ç­‰å¾…çº¿ç¨‹ç»“æŸ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ‰å¦‚ä¸‹å…³é”®ç‚¹ï¼š</p><ol><li>åœæ­¢ä¿¡å·</li></ol><ul><li>è®¾ç½® stop = trueï¼Œé€šçŸ¥æ‰€æœ‰å·¥ä½œçº¿ç¨‹é€€å‡ºå¾ªç¯ã€‚</li><li>é€šè¿‡ condition.notify_all() å”¤é†’æ‰€æœ‰ç­‰å¾…çš„çº¿ç¨‹ã€‚</li></ul><ol start="2"><li>çº¿ç¨‹å›æ”¶ï¼š</li></ol><ul><li>ä½¿ç”¨ join() ç­‰å¾…æ‰€æœ‰çº¿ç¨‹è‡ªç„¶é€€å‡ºï¼Œç¡®ä¿ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„å‰©ä½™ä»»åŠ¡è¢«æ‰§è¡Œå®Œæ¯•ã€‚</li><li>ææ„å‡½æ•°çš„ å¼‚å¸¸å®‰å…¨ï¼šå³ä½¿æŸä¸ªçº¿ç¨‹æŠ›å‡ºå¼‚å¸¸ï¼Œjoin() ä»èƒ½ä¿è¯æ‰€æœ‰çº¿ç¨‹è¢«æ­£ç¡®å›æ”¶ã€‚</li></ul><h1>5. çº¿ç¨‹æ± çš„å·¥ä½œæµç¨‹</h1><p>æˆ‘ä¸ªäººæ„Ÿè§‰ï¼Œçº¿ç¨‹æ± ç”±å¤šä¸ªçº¿ç¨‹ç»„æˆï¼Œè€Œå¤šçº¿ç¨‹æœ€é‡è¦çš„å°±æ˜¯çº¿ç¨‹åŒæ­¥ï¼Œå› æ­¤åŒæ­¥æœºåˆ¶å°±æ˜¯çº¿ç¨‹æ± ä¸­æ ¸å¿ƒä¸­çš„æ ¸å¿ƒã€‚</p><p>ä¸»è¦è§£å†³çš„é—®é¢˜å°±æ˜¯<code>å¤šä¸ªçº¿ç¨‹å¯¹å…±äº«èµ„æºçš„å®‰å…¨è®¿é—®</code>ã€‚è¿™é‡Œçš„å…±äº«èµ„æºæ˜¯ä»»åŠ¡é˜Ÿåˆ—ã€‚æˆ‘ä»¬é‡‡ç”¨ç»å…¸çš„<code>ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹</code>æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p><ul><li>ç”Ÿäº§è€…ï¼ˆä¸»çº¿ç¨‹ï¼‰ï¼šé€šè¿‡enqueueæ·»åŠ ä»»åŠ¡</li><li>æ¶ˆè´¹è€…ï¼ˆå·¥ä½œçº¿ç¨‹ï¼‰ï¼šä»é˜Ÿåˆ—è·å–ä»»åŠ¡æ‰§è¡Œ</li></ul><h1>5.1 ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹</h1><p>å…¶å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> [ç”Ÿäº§è€…çº¿ç¨‹]                            [æ¶ˆè´¹è€…çº¿ç¨‹]</span><br><span class="line">      |                                      |</span><br><span class="line">æäº¤ä»»åŠ¡åˆ°é˜Ÿåˆ—                                |</span><br><span class="line">      |                                      |</span><br><span class="line">      |-- ä»»åŠ¡å…¥é˜Ÿ --&gt; [ä»»åŠ¡é˜Ÿåˆ—] --&gt; ä»»åŠ¡å‡ºé˜Ÿ --|</span><br><span class="line">      |                                      |</span><br><span class="line">      |-- å”¤é†’æ¶ˆè´¹è€…çº¿ç¨‹ ----------------------&gt;|</span><br><span class="line">      |                                      |</span><br><span class="line">      |                                æ‰§è¡Œä»»åŠ¡</span><br></pre></td></tr></table></figure><h1>5.2 å…³é”®æœºåˆ¶</h1><table><thead><tr><th>æœºåˆ¶</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>äº’æ–¥é”</td><td>ä¿æŠ¤ä»»åŠ¡é˜Ÿåˆ—çš„çº¿ç¨‹å®‰å…¨è®¿é—®</td></tr><tr><td>æ¡ä»¶å˜é‡</td><td>åè°ƒçº¿ç¨‹çš„ç­‰å¾…ä¸å”¤é†’ï¼Œé¿å…å¿™ç­‰å¾…</td></tr><tr><td>ä»»åŠ¡é€‚é…</td><td>å°†ä»»æ„ä»»åŠ¡è½¬æ¢ä¸ºç»Ÿä¸€æ¥å£ï¼ˆstd::function&lt;void()&gt;ï¼‰</td></tr><tr><td>å¼‚æ­¥ç»“æœåé¦ˆ</td><td>é€šè¿‡ std::future å®ç°ä»»åŠ¡ç»“æœçš„å¼‚æ­¥è·å–</td></tr></tbody></table><h1>6. å®Œæ•´ä»£ç </h1><p>å®Œæ•´ä»£ç å¯è§ä»£ç ä»“åº“ï¼Œè¿™é‡Œä¹Ÿé™„ä¸Šï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ThreadPool.h</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> THREAD_POOL_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> THREAD_POOL_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;condition_variable&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;future&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdexcept&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ThreadPool</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">ThreadPool</span>(<span class="type">size_t</span>);</span><br><span class="line">    <span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> F, <span class="keyword">class</span>... Args&gt;</span></span><br><span class="line"><span class="function">    <span class="keyword">auto</span> <span class="title">enqueue</span><span class="params">(F&amp;&amp; f, Args&amp;&amp;... args)</span> </span></span><br><span class="line"><span class="function">        -&gt; std::future&lt;<span class="keyword">typename</span> std::result_of&lt;<span class="title">F</span><span class="params">(Args...)</span>&gt;::type&gt;</span>;</span><br><span class="line">    ~<span class="built_in">ThreadPool</span>();</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">// need to keep track of threads so we can join them</span></span><br><span class="line">    std::vector&lt; std::thread &gt; workers;</span><br><span class="line">    <span class="comment">// the task queue</span></span><br><span class="line">    std::queue&lt; std::function&lt;<span class="type">void</span>()&gt; &gt; tasks;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// synchronization</span></span><br><span class="line">    std::mutex queue_mutex;</span><br><span class="line">    std::condition_variable condition;</span><br><span class="line">    <span class="type">bool</span> stop;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// the constructor just launches some amount of workers</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="title">ThreadPool::ThreadPool</span><span class="params">(<span class="type">size_t</span> threads)</span></span></span><br><span class="line"><span class="function">    :   stop(false)</span></span><br><span class="line"><span class="function">&#123;</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">size_t</span> i = <span class="number">0</span>;i&lt;threads;++i)</span><br><span class="line">        workers.<span class="built_in">emplace_back</span>(</span><br><span class="line">            [<span class="keyword">this</span>]</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(;;)</span><br><span class="line">                &#123;</span><br><span class="line">                    std::function&lt;<span class="built_in">void</span>()&gt; task;</span><br><span class="line"></span><br><span class="line">                    &#123;</span><br><span class="line">                        std::unique_lock&lt;std::mutex&gt; <span class="built_in">lock</span>(<span class="keyword">this</span>-&gt;queue_mutex);</span><br><span class="line">                        <span class="keyword">this</span>-&gt;condition.<span class="built_in">wait</span>(lock,</span><br><span class="line">                            [<span class="keyword">this</span>]&#123; <span class="keyword">return</span> <span class="keyword">this</span>-&gt;stop || !<span class="keyword">this</span>-&gt;tasks.<span class="built_in">empty</span>(); &#125;);</span><br><span class="line">                        <span class="keyword">if</span>(<span class="keyword">this</span>-&gt;stop &amp;&amp; <span class="keyword">this</span>-&gt;tasks.<span class="built_in">empty</span>())</span><br><span class="line">                            <span class="keyword">return</span>;</span><br><span class="line">                        task = std::<span class="built_in">move</span>(<span class="keyword">this</span>-&gt;tasks.<span class="built_in">front</span>());</span><br><span class="line">                        <span class="keyword">this</span>-&gt;tasks.<span class="built_in">pop</span>();</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="built_in">task</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// add new work item to the pool</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> F, <span class="keyword">class</span>... Args&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">ThreadPool::enqueue</span><span class="params">(F&amp;&amp; f, Args&amp;&amp;... args)</span> </span></span><br><span class="line"><span class="function">    -&gt; std::future&lt;<span class="keyword">typename</span> std::result_of&lt;<span class="title">F</span><span class="params">(Args...)</span>&gt;::type&gt;</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">using</span> return_type = <span class="keyword">typename</span> std::result_of&lt;<span class="built_in">F</span>(Args...)&gt;::type;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> task = std::make_shared&lt; std::packaged_task&lt;<span class="built_in">return_type</span>()&gt; &gt;(</span><br><span class="line">            std::<span class="built_in">bind</span>(std::forward&lt;F&gt;(f), std::forward&lt;Args&gt;(args)...)</span><br><span class="line">        );</span><br><span class="line">        </span><br><span class="line">    std::future&lt;return_type&gt; res = task-&gt;<span class="built_in">get_future</span>();</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(queue_mutex)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// don&#x27;t allow enqueueing after stopping the pool</span></span><br><span class="line">        <span class="keyword">if</span>(stop)</span><br><span class="line">            <span class="keyword">throw</span> std::<span class="built_in">runtime_error</span>(<span class="string">&quot;enqueue on stopped ThreadPool&quot;</span>);</span><br><span class="line"></span><br><span class="line">        tasks.<span class="built_in">emplace</span>([task]()&#123; (*task)(); &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    condition.<span class="built_in">notify_one</span>();</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// the destructor joins all threads</span></span><br><span class="line"><span class="keyword">inline</span> ThreadPool::~<span class="built_in">ThreadPool</span>()</span><br><span class="line">&#123;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(queue_mutex)</span></span>;</span><br><span class="line">        stop = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    condition.<span class="built_in">notify_all</span>();</span><br><span class="line">    <span class="keyword">for</span>(std::thread &amp;worker: workers)</span><br><span class="line">        worker.<span class="built_in">join</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;å‰è¨€&lt;/h1&gt;
&lt;p&gt;å­¦ä¹ ä¸€ä¸‹çº¿ç¨‹æ± ï¼Œä¸»è¦å‚è€ƒGithubä»£ç ä»“åº“&lt;a href=&quot;https://github.com/progschj/ThreadPool&quot;&gt;https://github.com/progschj/ThreadPool&lt;/a&gt;&lt;/p&gt;
&lt;h1&gt;1. </summary>
      
    
    
    
    <category term="C/C++ é¢è¯•" scheme="http://malone-ai.github.io/categories/C-C-%E9%9D%A2%E8%AF%95/"/>
    
    
    <category term="C/C++" scheme="http://malone-ai.github.io/tags/C-C/"/>
    
    <category term="çº¿ç¨‹æ± " scheme="http://malone-ai.github.io/tags/%E7%BA%BF%E7%A8%8B%E6%B1%A0/"/>
    
  </entry>
  
  <entry>
    <title>å¥¹çš„ç®—æ³•ï¼Œæˆ‘è§£ä¸å¼€</title>
    <link href="http://malone-ai.github.io/2025/03/09/my-feelings3/"/>
    <id>http://malone-ai.github.io/2025/03/09/my-feelings3/</id>
    <published>2025-03-09T03:42:35.000Z</published>
    <updated>2025-03-09T03:43:11.964Z</updated>
    
    
    
    
    <category term="æ‚è°ˆ" scheme="http://malone-ai.github.io/categories/%E6%9D%82%E8%B0%88/"/>
    
    
    <category term="æ‚è°ˆ" scheme="http://malone-ai.github.io/tags/%E6%9D%82%E8%B0%88/"/>
    
  </entry>
  
  <entry>
    <title>åŠ¨æ€è§„åˆ’å…«ï¼šåŒºé—´DP</title>
    <link href="http://malone-ai.github.io/2025/03/08/dp8/"/>
    <id>http://malone-ai.github.io/2025/03/08/dp8/</id>
    <published>2025-03-08T13:01:24.000Z</published>
    <updated>2025-03-08T16:47:22.407Z</updated>
    
    <content type="html"><![CDATA[<h1>å‰è¨€</h1><p>ä»Šæ—¥å­¦ä¹ çµèŒ¶å±±è‰¾åºœçš„<a href="https://www.bilibili.com/video/BV1Gs4y1E7EU/?spm_id_from=333.1245.0.0&amp;vd_source=a0f19e79b7da02f4fa318d91be5bc86a">åŒºé—´ DPï¼šæœ€é•¿å›æ–‡å­åºåˆ—ã€åŸºç¡€ç®—æ³•ç²¾è®² 22ã€‘</a>ã€‚</p><p>å‰é¢çš„å‡ ä¸ªè¯¾ç¨‹éƒ½æ˜¯åœ¨æ•°ç»„çš„å‰ç¼€æˆ–è€…åç¼€ä¸Šè½¬ç§»çš„ï¼Œè¿™ç±»DPå«åšçº¿æ€§DPã€‚</p><p>å¯¹äºåŒºé—´DPï¼Œä¼šæŠŠé—®é¢˜è§„æ¨¡ç¼©å°åˆ°æ•°ç»„ä¸­é—´çš„åŒºé—´ä¸Šï¼Œè€Œä¸ä»…ä»…æ˜¯å‰ç¼€æˆ–è€…åç½®äº†ã€‚è¿™æ˜¯åŒºé—´DPå’Œçº¿æ€§DPçš„æœ€å¤§åŒºåˆ«ã€‚</p><p>çµèŒ¶å±±è‰¾åºœä¸»è¦é€šè¿‡ä¸¤é“Leetcodeé¢˜ç›®<a href="https://leetcode.cn/problems/longest-palindromic-subsequence/description/">516. æœ€é•¿å›æ–‡å­åºåˆ—</a>å’Œ<a href="https://leetcode.cn/problems/minimum-score-triangulation-of-polygon/description/">1039. å¤šè¾¹å½¢ä¸‰è§’å‰–åˆ†çš„æœ€ä½å¾—åˆ†</a>æ¥è¿›è¡Œè®²è§£ã€‚</p><h1>1. æœ€é•¿å›æ–‡å­åºåˆ—</h1><h1>1.1 é¢˜ç›®æè¿°</h1><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œæ‰¾å‡ºå…¶ä¸­æœ€é•¿çš„å›æ–‡å­åºåˆ—ï¼Œå¹¶è¿”å›è¯¥åºåˆ—çš„é•¿åº¦ã€‚</p><p>å­åºåˆ—å®šä¹‰ä¸ºï¼šä¸æ”¹å˜å‰©ä½™å­—ç¬¦é¡ºåºçš„æƒ…å†µä¸‹ï¼Œåˆ é™¤æŸäº›å­—ç¬¦æˆ–è€…ä¸åˆ é™¤ä»»ä½•å­—ç¬¦å½¢æˆçš„ä¸€ä¸ªåºåˆ—ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><pre><code>è¾“å…¥ï¼šs = &quot;bbbab&quot;è¾“å‡ºï¼š4è§£é‡Šï¼šä¸€ä¸ªå¯èƒ½çš„æœ€é•¿å›æ–‡å­åºåˆ—ä¸º &quot;bbbb&quot; ã€‚</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code>è¾“å…¥ï¼šs = &quot;cbbd&quot;è¾“å‡ºï¼š2è§£é‡Šï¼šä¸€ä¸ªå¯èƒ½çš„æœ€é•¿å›æ–‡å­åºåˆ—ä¸º &quot;bb&quot; ã€‚</code></pre><h1>1.2 åŸºæœ¬æ€è·¯</h1><h1>1.2.1 æ€è·¯ä¸€</h1><p>ç”±äºå›æ–‡å­åºåˆ—ä»å·¦å¾€å³è¯»å’Œä»å³å¾€å·¦è¯»éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥å¯ä»¥æ±‚så’Œåè½¬åçš„sçš„æœ€é•¿å…¬å…±å­åºåˆ—ï¼Œä»è€Œå¯ä»¥å¾—åˆ°æœ€é•¿å›æ–‡å­åºåˆ—çš„é•¿åº¦ã€‚</p><h1>1.2.2 æ€è·¯äºŒ</h1><p>é€‰æˆ–ä¸é€‰çš„æ€è·¯æ¥è§£å†³è¿™é“é¢˜ã€‚</p><p>åªéœ€è¦çœ‹ç¬¬ä¸€ä¸ªå­—æ¯é€‰æˆ–ä¸é€‰ä»¥åŠæœ€åä¸€ä¸ªå­—æ¯é€‰æˆ–ä¸é€‰ã€‚</p><p><img src="/images/dp8_1.png" alt=""></p><p>å®šä¹‰dfs(i, j)è¡¨ç¤ºä»s[i]åˆ°s[j]çš„æœ€é•¿å›æ–‡å­åºåˆ—çš„é•¿åº¦ã€‚</p><ul><li>å¦‚æœs[i] == s[j]ï¼Œé‚£ä¹ˆå°±å¯ä»¥éƒ½é€‰ï¼Œié€’å½’åˆ°i+1ï¼Œjé€’å½’åˆ°j - 1ã€‚</li><li>å¦‚æœs[i] != s[j]ï¼Œé‚£ä¹ˆè¦ä¹ˆä¸é€‰s[i]ï¼Œè¦ä¹ˆä¸é€‰s[j]ã€‚</li></ul><p>é‚£ä¹ˆçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š</p><pre><code>dfs(i, j) = dfs(i+1, j-1) + 2, s[i] == s[j]dfs(i, j) = max(dfs(i+1, j), dfs(i, j-1)), s[i] != s[j]</code></pre><p>å¦‚æœé€’å½’åˆ°ä¸€ä¸ªå­—æ¯çš„æ—¶å€™ï¼Œå®ƒä¸€ä¸ªå­—æ¯ä¹Ÿæ˜¯ä¸€ä¸ªå›æ–‡å­åºåˆ—ï¼Œæ‰€ä»¥è¿”å›1ã€‚å¦‚æœæ²¡æœ‰å­—æ¯å°±è¿”å›0</p><ul><li>é€’å½’è¾¹ç•Œ<ul><li>dfs(i, i) = 1</li><li>dfs(i + 1, i) = 0</li></ul></li><li>é€’å½’å…¥å£<ul><li>dfs(0, n-1)</li></ul></li></ul><h1>1.3 å…·ä½“å®ç°</h1><h1>1.3.1 é€’å½’</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestPalindromeSubseq</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">memo</span>(n, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n, <span class="number">-1</span>));</span><br><span class="line">        <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">this</span> <span class="keyword">auto</span>&amp;&amp; dfs, <span class="type">int</span> i, <span class="type">int</span> j)-&gt;<span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (i == j)</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (i &gt; j)</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            <span class="type">int</span>&amp; res = memo[i][j];</span><br><span class="line">            <span class="keyword">if</span> (res != <span class="number">-1</span>)</span><br><span class="line">                <span class="keyword">return</span> res;</span><br><span class="line">            <span class="keyword">return</span> res = s[i] == s[j] ? <span class="built_in">dfs</span>(i<span class="number">+1</span>, j<span class="number">-1</span>) + <span class="number">2</span> : <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">+1</span>, j), <span class="built_in">dfs</span>(i, j<span class="number">-1</span>));</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(<span class="number">0</span>, n<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>1.3.2 é€’æ¨</h1><p>é€’å½’ç¿»è¯‘æˆé€’æ¨ï¼Œéœ€è¦æ³¨æ„ä¸€ä¸‹å¾ªç¯é¡ºåºã€‚</p><ul><li>ç”±äºf[i]ä»f[i+1]è½¬ç§»è¿‡æ¥ï¼Œæ‰€ä»¥iè¦<code>å€’åº</code>æšä¸¾ã€‚</li><li>ç”±äºf[i][j]ä»f[i][j-1]è½¬ç§»è¿‡æ¥ï¼Œæ‰€ä»¥iè¦<code>å€’åº</code>æšä¸¾ã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’æ¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestPalindromeSubseq</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">f</span>(n, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n, <span class="number">0</span>));          </span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">            f[i][i] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = i + <span class="number">1</span>; j &lt; n; ++j) &#123;</span><br><span class="line">                <span class="keyword">if</span> (s[i] == s[j])</span><br><span class="line">                    f[i][j] = f[i<span class="number">+1</span>][j<span class="number">-1</span>] + <span class="number">2</span>;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    f[i][j] = <span class="built_in">max</span>(f[i<span class="number">+1</span>][j], f[i][j<span class="number">-1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;    </span><br><span class="line">        <span class="keyword">return</span> f[<span class="number">0</span>][n<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’æ¨ ç©ºé—´å¤æ‚åº¦O(n)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestPalindromeSubseq</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">f</span>(<span class="number">2</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n, <span class="number">0</span>));          </span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">            f[i%<span class="number">2</span>][i] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = i + <span class="number">1</span>; j &lt; n; ++j) &#123;</span><br><span class="line">                <span class="keyword">if</span> (s[i] == s[j])</span><br><span class="line">                    f[i%<span class="number">2</span>][j] = f[(i<span class="number">+1</span>)%<span class="number">2</span>][j<span class="number">-1</span>] + <span class="number">2</span>;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    f[i%<span class="number">2</span>][j] = <span class="built_in">max</span>(f[(i<span class="number">+1</span>)%<span class="number">2</span>][j], f[i%<span class="number">2</span>][j<span class="number">-1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;    </span><br><span class="line">        <span class="keyword">return</span> f[<span class="number">0</span>][n<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>2. å¤šè¾¹å½¢ä¸‰è§’å‰–åˆ†çš„æœ€ä½å¾—åˆ†</h1><h1>2.1 é¢˜ç›®æè¿°</h1><p>ä½ æœ‰ä¸€ä¸ªå‡¸çš„ n è¾¹å½¢ï¼Œå…¶æ¯ä¸ªé¡¶ç‚¹éƒ½æœ‰ä¸€ä¸ªæ•´æ•°å€¼ã€‚ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ values ï¼Œå…¶ä¸­ values[i] æ˜¯ç¬¬ i ä¸ªé¡¶ç‚¹çš„å€¼ï¼ˆå³ é¡ºæ—¶é’ˆé¡ºåº ï¼‰ã€‚</p><p>å‡è®¾å°†å¤šè¾¹å½¢ å‰–åˆ† ä¸º n - 2 ä¸ªä¸‰è§’å½¢ã€‚å¯¹äºæ¯ä¸ªä¸‰è§’å½¢ï¼Œè¯¥ä¸‰è§’å½¢çš„å€¼æ˜¯é¡¶ç‚¹æ ‡è®°çš„ä¹˜ç§¯ï¼Œä¸‰è§’å‰–åˆ†çš„åˆ†æ•°æ˜¯è¿›è¡Œä¸‰è§’å‰–åˆ†åæ‰€æœ‰ n - 2 ä¸ªä¸‰è§’å½¢çš„å€¼ä¹‹å’Œã€‚</p><p>è¿”å› å¤šè¾¹å½¢è¿›è¡Œä¸‰è§’å‰–åˆ†åå¯ä»¥å¾—åˆ°çš„æœ€ä½åˆ† ã€‚</p><h1>2.2 åŸºæœ¬æ€è·¯</h1><p>æ•°ç»„valuesè®°ä¸ºvã€‚</p><p>å®šä¹‰<code>ä»iåˆ°j</code>è¡¨ç¤ºæ²¿ç€è¾¹ä»é¡¶ç‚¹ié¡ºæ—¶é’ˆåˆ°é¡¶ç‚¹jçš„æ‰€æœ‰é¡¶ç‚¹ï¼ˆé¡¶ç‚¹iå’Œé¡¶ç‚¹jé™¤å¤–ï¼‰ï¼Œå†åŠ ä¸Šç›´æ¥ä»jåˆ°içš„è¿™æ¡è¾¹æ‰€ç»„æˆçš„å¤šè¾¹å½¢ï¼ˆä¸‰ä¸ªé¡¶ç‚¹ç»„æˆä¸€ä¸ªä¸‰è§’å½¢ï¼‰ã€‚</p><p><img src="/images/dp8_2.png" alt=""></p><p>å­é—®é¢˜ï¼š</p><ul><li>è®¡ç®—ä»iåˆ°jçš„æœ€ä½å¾—åˆ† =&gt; æšä¸¾é¡¶ç‚¹k</li></ul><p>ä¸‹ä¸€ä¸ªå­é—®é¢˜ï¼š</p><ul><li>è®¡ç®—ä»iåˆ°kçš„æœ€ä½å¾—åˆ†</li><li>è®¡ç®—ä»kåˆ°jçš„æœ€ä½å¾—åˆ†</li></ul><p>å®šä¹‰dfs(i, j)è¡¨ç¤ºä»iåˆ°jçš„å¤šè¾¹å½¢çš„æœ€ä½å¾—åˆ†</p><ul><li><p>dfs(i, j) = min{dfs(i, k) + dfs(k, j) + v[i] * v[j] * v[k]}, k = i + 1 ~ j - 1</p></li><li><p>é€’å½’è¾¹ç•Œ</p><ul><li>dfs(i, i+1) = 0</li></ul></li><li><p>é€’å½’å…¥å£</p><ul><li>dfs(0, n-1)</li></ul></li></ul><h1>2.3 å…·ä½“å®ç°</h1><h1>2.3.1 é€’å½’</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’å½’</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minScoreTriangulation</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; values)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = values.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">memo</span>(n, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n, <span class="number">-1</span>));</span><br><span class="line">        <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">this</span> <span class="keyword">auto</span>&amp;&amp; dfs, <span class="type">int</span> i, <span class="type">int</span> j)-&gt;<span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (i + <span class="number">1</span> == j)</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            <span class="type">int</span>&amp; res = memo[i][j];</span><br><span class="line">            <span class="keyword">if</span> (res != <span class="number">-1</span>)</span><br><span class="line">                <span class="keyword">return</span> res;</span><br><span class="line">            res = INT_MAX / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> k = i + <span class="number">1</span>; k &lt; j; ++k)</span><br><span class="line">                res = <span class="built_in">min</span>(res, <span class="built_in">dfs</span>(i, k) + <span class="built_in">dfs</span>(k, j) + values[i] * values[j] * values[k]);</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(<span class="number">0</span>, n<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>2.3.2 é€’æ¨</h1><p>çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸ºï¼š</p><pre><code>f[i][j] = max&#123;f[i][k] + f[k][j] + v[i] * v[j] * v[k]&#125;, k = i + 1 ~ j - 1</code></pre><p>è¿™é‡Œä¹Ÿéœ€è¦æ³¨æ„å¾ªç¯é¡ºåºï¼š</p><pre><code>i &lt; kï¼Œf[i]ä»f[k]è½¬ç§»è¿‡æ¥ï¼Œiéœ€è¦å€’åºæšä¸¾j &gt; k, f[i][j]ä»f[i][k]è½¬ç§»è¿‡æ¥ï¼Œjéœ€è¦æ­£åºæšä¸¾</code></pre><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minScoreTriangulation</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; values)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = values.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">f</span>(n, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n, <span class="number">0</span>));</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = n - <span class="number">3</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = i + <span class="number">2</span>; j &lt; n; ++j) &#123;</span><br><span class="line">                <span class="type">int</span>&amp; res = f[i][j];</span><br><span class="line">                res = INT_MAX / <span class="number">2</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> k = i + <span class="number">1</span>; k &lt; j; ++k) &#123;</span><br><span class="line">                    res = <span class="built_in">min</span>(res, f[i][k] + f[k][j] + values[i] * values[j] * values[k]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[<span class="number">0</span>][n<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>ä¸ºä»€ä¹ˆ i ä» n-3 å¼€å§‹ï¼Ÿ</li></ul><ol><li><p>ä¸‰è§’å½¢çš„é¡¶ç‚¹è¦æ±‚</p><ul><li>è¦å½¢æˆä¸€ä¸ªä¸‰è§’å½¢ï¼Œè‡³å°‘éœ€è¦ 3 ä¸ªé¡¶ç‚¹ã€‚å› æ­¤ï¼Œi å’Œ j ä¹‹é—´è‡³å°‘è¦æœ‰ 2 ä¸ªé¡¶ç‚¹ï¼ˆå³ j &gt;= i + 2ï¼‰ã€‚</li><li>å¦‚æœ i ä» n-1 æˆ– n-2 å¼€å§‹ï¼Œj çš„èŒƒå›´ä¼šè¶…å‡ºæ•°ç»„çš„è¾¹ç•Œï¼Œæ— æ³•å½¢æˆæœ‰æ•ˆçš„ä¸‰è§’å½¢ã€‚</li></ul></li><li><p>è¾¹ç•Œæ¡ä»¶</p><ul><li>å½“ i = n-3 æ—¶ï¼Œj å¯ä»¥ä» i+2 = n-1 å¼€å§‹ï¼Œè¿™æ · iã€j å’Œä¸­é—´çš„ k å¯ä»¥å½¢æˆä¸€ä¸ªæœ‰æ•ˆçš„ä¸‰è§’å½¢ã€‚</li><li>å¦‚æœ i ä» n-2 å¼€å§‹ï¼Œj åªèƒ½ä» n å¼€å§‹ï¼Œè¿™å·²ç»è¶…å‡ºäº†æ•°ç»„çš„è¾¹ç•Œã€‚</li></ul></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;å‰è¨€&lt;/h1&gt;
&lt;p&gt;ä»Šæ—¥å­¦ä¹ çµèŒ¶å±±è‰¾åºœçš„&lt;a href=&quot;https://www.bilibili.com/video/BV1Gs4y1E7EU/?spm_id_from=333.1245.0.0&amp;amp;vd_source=a0f19e79b7da02f4fa318d</summary>
      
    
    
    
    <category term="åŠ¨æ€è§„åˆ’" scheme="http://malone-ai.github.io/categories/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
    
    <category term="åŠ¨æ€è§„åˆ’" scheme="http://malone-ai.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
  </entry>
  
  <entry>
    <title>Springboot3 é¡¹ç›®æ¡†æ¶æ­å»º</title>
    <link href="http://malone-ai.github.io/2025/03/07/project-test3/"/>
    <id>http://malone-ai.github.io/2025/03/07/project-test3/</id>
    <published>2025-03-07T13:36:48.000Z</published>
    <updated>2025-04-10T09:15:09.341Z</updated>
    
    <content type="html"><![CDATA[<h1>å‰è¨€</h1><p>å­¦ä¹ Bç«™UPä¸»ç¨‹åºå‘˜é’æˆˆå‡ºå“çš„è§†é¢‘<a href="https://www.bilibili.com/video/BV1uZAoeGEqM/?spm_id_from=333.1245.0.0">ã€å¸¦å°ç™½åšæ¯•è®¾ã€‘03. Springboot3æ¡†æ¶çš„å¿«é€Ÿæ­å»ºä»¥åŠé¡¹ç›®å·¥ç¨‹çš„è®²è§£</a>å¹¶è¿›è¡Œä¸€ä¸ªå­¦ä¹ è®°å½•ã€‚</p><h1>1. æ–°å»ºå·¥ç¨‹</h1><p>åœ¨ideaæ–°å»ºä¸€ä¸ªå·¥ç¨‹ï¼ˆæ³¨æ„æ–°å»ºå·¥ç¨‹é¡µé¢åœ¨å·¦è¾¹ç”Ÿæˆå™¨ä¸­é€‰æ‹©springbootï¼‰ï¼Œå·¥ç¨‹åä¸ºspringbootï¼Œå­˜æ”¾å·¥ç¨‹çš„æ–‡ä»¶å¤¹ä¸ºå­˜æ”¾vueå·¥ç¨‹çš„æ–‡ä»¶å¤¹ã€‚è¯­è¨€é€‰Javaï¼Œç±»å‹é€‰Mavenï¼Œç»„å¡«com.exampleï¼Œå·¥ä»¶å¡«springbootï¼Œè½¯ä»¶åŒ…åç§°å¡«com.exampleï¼Œjdké€‰jdk21ï¼Œjavaé€‰21ï¼Œæ‰“åŒ…é€‰jarã€‚ç„¶åé€‰æ‹©ä¸‹ä¸€æ­¥ã€‚</p><p><img src="/images/project-test3_1.png" alt=""></p><p>æ³¨ï¼šä¹‹åæœ‰ä¸€æ¬¡å¼€å‘ä½¿ç”¨jdk1.8ï¼Œä½†æ˜¯jdkç‰ˆæœ¬å¯ä»¥é€‰æ‹©1.8ï¼Œä½†æ˜¯javaä¸­æ²¡æœ‰java8ï¼Œäºæ˜¯ç™¾åº¦ï¼Œè®²<strong>æœåŠ¡å™¨URL</strong>è®¾ç½®æˆ<code>https://start.aliyun.com</code>å°±å‡ºç°java8äº†ã€‚</p><p>ç„¶åspringbooté€‰3.4.3ï¼Œä¾èµ–é¡¹ä¸­ä»Webä¸­é€‰æ‹©Spring Webï¼Œç„¶åç‚¹å‡»åˆ›å»ºå³å¯ã€‚springbootå·¥ç¨‹å°±åˆ›å»ºå®Œæ¯•äº†ã€‚</p><p><img src="/images/project-test3_2.png" alt=""></p><h1>2. å·¥ç¨‹ç²¾ç®€</h1><h1>2.1 åˆ é™¤æ— ç”¨æ–‡ä»¶</h1><p><img src="/images/project-test3_3.png" alt=""></p><p>åˆ é™¤å›¾ä¸­ç”»çº¢çº¿çš„æ–‡ä»¶ã€‚æŠŠsrc/testæ–‡ä»¶å¤¹ã€src/main/resourcesä¸‹çš„staticå’Œtemplatesæ–‡ä»¶å¤¹ä¹Ÿåˆ é™¤äº†ã€‚</p><h1>2.2 é…ç½®Maven</h1><p>æ‰“å¼€è®¾ç½®ï¼Œç›´æ¥æœç´¢Mavenï¼Œé…ç½®Mavenä¸»è·¯å¾„ï¼ˆä¹Ÿå°±æ˜¯Mavençš„è§£å‹è·¯å¾„ï¼Œæˆ‘çš„è§£å‹è·¯å¾„ä¸ºD:\ProgramFiles\apache-maven-3.9.9ï¼‰ã€‚å‹¾é€‰ä¸¤ä¸ªé‡å†™ï¼Œç„¶åæŒ‡å®šç”¨æˆ·è®¾ç½®æ–‡ä»¶ä¸ºMavenè§£å‹è·¯å¾„ä¸‹çš„confæ–‡ä»¶å¤¹ä¸‹çš„settings.xmlã€‚åœ¨Mavenè§£å‹è·¯å¾„ä¸‹åˆ›å»ºrepoæ–‡ä»¶å¤¹ï¼Œç„¶åé€‰æ‹©æœ¬åœ°ä»“åº“ä¸ºè¿™ä¸ªrepoæ–‡ä»¶å¤¹ã€‚ç„¶åç‚¹å‡»ç¡®å®šå³å¯ã€‚</p><p><img src="/images/project-test3_4.png" alt=""></p><h1>2.3 pom.xml æ–‡ä»¶ç²¾ç®€</h1><p>pom.xmlæ–‡ä»¶å®šä¹‰äº†ä¸€äº›ä¾èµ–ã€‚</p><p><img src="/images/project-test3_5.png" alt=""></p><p><img src="/images/project-test3_6.png" alt=""></p><p>æŠŠpom.xmlä¸­çš„ä¸Šè¿°å†…å®¹ï¼ˆå¦‚ä¸Šä¸¤å¹…å›¾ç‰‡æ‰€ç¤ºï¼‰åˆ é™¤ã€‚</p><h1>2.3 å·¥ç¨‹ç›®å½•åˆ†æ</h1><pre><code>.idea â€”â€” ideaè½¯ä»¶çš„é…ç½®æ–‡ä»¶src â€”â€” æºç ç›®å½•src/main/java/com/example/SpringbootApplication â€”â€” å·¥ç¨‹çš„å¯åŠ¨ç±»ï¼ˆæ–‡ä»¶åç¼€ä¸º.javaï¼‰ï¼Œmainå‡½æ•°å°±å®šä¹‰åœ¨è¿™é‡Œã€‚src/main/resources/application.properties â€”â€” æ•´ä¸ªspringbootçš„é…ç½®æ–‡ä»¶ï¼Œå°†å…¶é‡å‘½åä¸ºapplication.ymlï¼Œæ–¹ä¾¿ç¼–è¾‘    å°†å…¶ç¼–è¾‘ä¸ºï¼š        server:          port: 9999    ä»¥é‡æ–°è®¾ç½®è½¬å‘ç«¯å£å·targetæ–‡ä»¶å¤¹ â€”â€” æºç ç¼–è¯‘åçš„æ–‡ä»¶pom.xml â€”â€” å®šä¹‰äº†springbootå·¥ç¨‹æ‰€æœ‰çš„ä¾èµ–é¡¹ï¼ŒspringbootåŠ è½½çš„æ—¶å€™ä¼šæ‰«æè¿™ä¸ªæ–‡ä»¶é‡Œé¢æ‰€æœ‰çš„ä¾èµ–é¡¹ï¼Œç„¶åä¸‹è½½</code></pre><h1>2.4 è¿è¡Œå·¥ç¨‹å‡ºç°çš„é—®é¢˜</h1><h1>2.4.1 Errorï¼šjava é”™è¯¯ ä¸æ”¯æŒå‘è¡Œç‰ˆæœ¬ 5</h1><p>å‚è€ƒé“¾æ¥<a href="https://blog.csdn.net/weixin_43553694/article/details/104118190">Springé¡¹ç›® Errorï¼šjava é”™è¯¯ ä¸æ”¯æŒå‘è¡Œç‰ˆæœ¬ 5 IDEAè§£å†³åŠæ³•</a></p><p><img src="/images/project-test3_7.png" alt=""></p><p><img src="/images/project-test3_8.png" alt=""></p><h1>2.4.2 org.springframework.bootä¸å­˜åœ¨</h1><p>å‚è€ƒé“¾æ¥<a href="https://blog.csdn.net/Asa_Prince/article/details/127986463">è§£å†³java: ç¨‹åºåŒ…org.springframework.bootä¸å­˜åœ¨çš„è§£å†³æ–¹æ³•</a>ã€‚</p><p>ä»¥åŠ</p><p>File -&gt; Settings -&gt; Build,Execution,Deployment -&gt; Build Tools -&gt; Maven -&gt; Runner -&gt; Delegate IDE build/run actions to Maven</p><h1>3. é‡å¯å·¥ç¨‹</h1><p>å…³é—­è¿™ä¸ªspringbootå·¥ç¨‹ï¼Œæ‰“å¼€springbootå·¥ç¨‹å’Œvueå·¥ç¨‹å…±å­˜çš„å·¥ç¨‹ç›®å½•ã€‚å°†springbootå·¥ç¨‹ç›®å½•ä¸‹çš„.ideaåˆ é™¤ã€‚</p><h1>3.1 é‡æ–°åŠ è½½springbootä¾èµ–</h1><p>å³é”®springbootå·¥ç¨‹ç›®å½•ä¸‹çš„pom.xmlï¼Œé€‰æ‹©æœ€ä¸‹é¢çš„æ·»åŠ ä¸ºMavené¡¹ç›®ã€‚</p><p><img src="/images/project-test3_9.png" alt=""></p><h1>3.2 è®¾ç½®ç¼–ç </h1><p>è®¾ç½®ç¼–ç ä¸ºUTF-8ã€‚</p><p><img src="/images/project-test3_10.png" alt=""></p><p>ç„¶åè¿è¡Œspringbootå·¥ç¨‹ï¼Œè¿è¡ŒæˆåŠŸåˆ™é…ç½®æˆåŠŸã€‚</p><h1>4. å†™ä¸€ä¸ªæµ‹è¯•æ¥å£</h1><h1>4.1 æ¥å£å±‚</h1><p>å³é”®springbootå·¥ç¨‹ä¸‹çš„src/main/java/com/exampleï¼Œé€‰æ‹©æ–°å»º -&gt; è½¯ä»¶åŒ…<br><img src="/images/project-test3_11.png" alt=""></p><p>åŒ…åè®¾ä¸ºcontrollerï¼ˆcontrolleræ˜¯å¯¹å¤–æä¾›æ¥å£çš„åŒ…ï¼Œåœ¨è¿™ä¸ªåŒ…é‡Œå®šä¹‰çš„æ‰€æœ‰æ–‡ä»¶ï¼Œéƒ½æ˜¯å¯¹å¤–æä¾›æ¥å£æ•°æ®çš„ï¼Œå«æ¥å£å±‚controllerï¼‰ã€‚</p><p>springbootä¸€èˆ¬ä¼šåˆ†ä¸ºä¸‰å±‚ï¼š</p><ul><li>controller<ul><li>æä¾›æ•°æ®æ¥å£</li></ul></li><li>service<ul><li>å¤„ç†ä¸šåŠ¡é€»è¾‘</li></ul></li><li>mapper<ul><li>å¯¹æ¥æ•°æ®åº“</li></ul></li></ul><p>åœ¨controlleråŒ…é‡Œå†åˆ›å»ºä¸€ä¸ªWebControllerï¼Œæ­¤æ—¶å®ƒé»˜è®¤ä¼šæœ‰ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebController</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨public class WebControllerä¸Šæ–°å¢ä¸€è¡Œï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br></pre></td></tr></table></figure><p>å›è½¦è‡ªåŠ¨è¡¥å…¨ï¼Œä¼šå¸®åŠ©æŠŠéœ€è¦çš„åŒ…ä¹Ÿå¯¼è¿›æ¥ã€‚</p><p>è¿™ä¸ªè¡Œä¸ºå°±æ˜¯å°†è¿™ä¸ªç±»å®šä¹‰ä¸ºä¸€ä¸ªcontrollerã€‚</p><p>åœ¨WebControllerç±»ä¸‹å†™ä¸€ä¸ªgetæ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello World&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é”®å…¥<code>@GetMapping</code>æ—¶æŒ‰å›è½¦è‡ªåŠ¨è¡¥å…¨ï¼Œä¼šè‡ªåŠ¨å¯¼åŒ…ã€‚</p><p>åœ¨<code>@GetMapping</code>åé”®å…¥<code>(&quot;/hello&quot;)</code>å®šä¹‰è·¯ç”±ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello World&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥å£å®šä¹‰çš„åŸºæœ¬æ ¼å¼ï¼š</p><ul><li>@GetMapping è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªgetè¯·æ±‚æ¥å£</li><li>æ‹¬å·é‡Œçš„è·¯å¾„æ˜¯è·¯ç”±ï¼ˆè·¯ç”±å…¨å±€å”¯ä¸€ï¼‰</li></ul><p>æ­¤æ—¶è¿è¡Œspringbootå·¥ç¨‹åœ¨ç½‘å€<code>localhost:9999/hello</code>ä¸‹å°±å¯ä»¥çœ‹åˆ°&quot;Hello World&quot;ã€‚</p><h1>4.2 æŸ¥çœ‹ç½‘ç»œè¯·æ±‚</h1><p>åœ¨ç½‘å€<code>localhost:9999/hello</code>ä¸‹æŒ‰F12ï¼Œç„¶åï¼š<br><img src="/images/project-test3_12.png" alt=""></p><p>ä¸€å¼€å§‹å¯èƒ½ä¸æ˜¾ç¤ºï¼ŒæŒ‰F5åˆ·æ–°ä¸€ä¸‹å³å¯~</p><h1>4.3 å®šä¹‰æ¥å£ç»Ÿä¸€è¿”å›çš„å¯¹è±¡</h1><p>å‰é¢æˆ‘ä»¬å®šä¹‰çš„æ¥å£è¿”å›å€¼ç±»å‹ä¸ºStringï¼Œä½†ä¹Ÿå¯èƒ½æ˜¯å…¶ä»–æ•°æ®ç±»å‹ï¼Œæ¯ä¸ªæ¥å£è¿”å›çš„æ•°æ®ç±»å‹ä¸ä¸€æ ·å°±ä¼šé€ æˆæ··ä¹±ã€‚ä¸ºäº†é˜²æ­¢æ··ä¹±ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼ŒæŠŠæˆ‘ä»¬å®é™…éœ€è¦è¿”å›çš„æ•°æ®ï¼ŒåŒ…è£¹åœ¨è¿™ä¸ªå¯¹è±¡é‡Œé¢ï¼Œä½œä¸ºè¿™ä¸ªå¯¹è±¡çš„ä¸€ä¸ªå±æ€§ã€‚</p><p>åœ¨com.exampleä¸‹æ–°å»ºä¸€ä¸ªcommonåŒ…ï¼ˆå³é€šç”¨åŒ…ï¼‰ã€‚åœ¨commonä¸‹å†æ–°å»ºä¸€ä¸ªResultç±»ã€‚åœ¨å…¶ä¸­å®šä¹‰ä¸‰ä¸ªå±æ€§ï¼š</p><ul><li>private String code<ul><li>çŠ¶æ€ç ï¼ˆä½¿ç”¨Stringæ›´é€šç”¨ï¼Œæ—¢å¯ä»¥è¿”å›æ•°å­—ï¼Œä¹Ÿå¯ä»¥è¿”å›å…¶ä»–ç­‰ç­‰ï¼‰</li></ul></li><li>private Object data<ul><li>æˆ‘ä»¬å®é™…è¿”å›çš„æ•°æ®ç±»å‹</li></ul></li><li>private String msg<ul><li>å½“è¯·æ±‚é”™è¯¯æ—¶è¿”å›é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚è¿”å›è´¦å·æˆ–è€…å¯†ç é”™è¯¯ï¼‰</li></ul></li></ul><p>ç„¶åæŒ‰ALT+Insertï¼Œä¼šå‡ºç°ï¼š<br><img src="/images/project-test3_13.png" alt=""></p><p>é€‰æ‹©Getterå’ŒSetterï¼Œæ¥ç€å‡ºç°ï¼š<br><img src="/images/project-test3_14.png" alt=""></p><p>å…¨é€‰åç¡®å®šï¼Œè¿™æ ·å°±è®¾ç½®äº†ä¸Šè¿°ä¸‰ä¸ªprivateå±æ€§çš„setterå’Œgetteræ–¹æ³•ã€‚</p><p>ä»¥ä¸Šå°±æ˜¯ResultåŒ…è£…ç±»ã€‚</p><h1>4.4 å¦‚ä½•ä½¿ç”¨ResultåŒ…è£…ç±»</h1><p>å¦‚æœæˆ‘ä»¬æƒ³åœ¨Webç±»ä¸­ç»Ÿä¸€è¿”å›è¿™ä¸ªResultåŒ…è£…ç±»è¯¥å¦‚ä½•åšï¼Ÿ</p><p>åŸæ¥çš„æ¥å£è¿”å›çš„æ˜¯Stringï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello World&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆç°åœ¨åº”è¯¥è¿”å›ä¸€ä¸ªResultç±»ï¼Œå¹¶ä¸”åº”è¯¥åœ¨å‡½æ•°ä¸­newä¸€ä¸ªResultçš„å¯¹è±¡ï¼Œå¹¶è°ƒç”¨3.5ä¸­å®šä¹‰çš„setteræ–¹æ³•è®¾ç½®è¿™ä¸ªç±»çš„ä¸‰ä¸ªå±æ€§åè¿”å›ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Result</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Result</span>();</span><br><span class="line">    result.setCode(<span class="string">&quot;200&quot;</span>);</span><br><span class="line">    result.setData(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„åœ¨ä¿®æ”¹è¿”å›å€¼ç±»å‹ä¸ºResultçš„æ—¶å€™ä¸€å®šè¦é€‰æ‹©com.example.commoné‡Œçš„Resultç±»ï¼Œé€‰å®ƒä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨å¯¼åŒ…ï¼š<br><img src="/images/project-test3_15.png" alt=""></p><p>æ­¤æ—¶å†è®¿é—®ç½‘å€<code>localhost:9999/hello</code>ï¼š<br><img src="/images/project-test3_16.png" alt=""></p><p>è¿™é‡Œçš„msgä¸ºnullï¼Œä¹Ÿå°±æ˜¯ä¸ºç©ºï¼Œå› ä¸ºæ²¡æœ‰é”™è¯¯æ¶ˆæ¯ã€‚</p><p>åœ¨å‰ç«¯ä¸åç«¯æ•°æ®äº¤äº’çš„æ—¶å€™ï¼Œå¦‚æœæ‹¿åˆ°æ¶ˆæ¯ååˆ¤æ–­çŠ¶æ€ç æ˜¯å¦ä¸º200ï¼Œä¸º200åˆ™è¯´æ˜è¯·æ±‚æˆåŠŸï¼Œé”™è¯¯æ¶ˆæ¯å°±åº”è¯¥ä¸ºnullã€‚å¦‚æœçŠ¶æ€ç ä¸ä¸º200ï¼Œè¯´æ˜è¯·æ±‚å¤±è´¥ï¼Œå¹¶è·å–msgæ¥æ‰“å°é”™è¯¯æ¶ˆæ¯ã€‚</p><p>æ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼Œå¯¹äºResultåŒ…è£…ç±»ï¼š</p><ul><li>code ä½œä¸ºå‰ç«¯åˆ¤æ–­è¯·æ±‚æ˜¯å¦æˆåŠŸçš„ä¾æ®</li><li>msg æ˜¯é”™è¯¯ä¿¡æ¯</li><li>data æ˜¯è¿”å›ç»™å‰ç«¯çš„æ•°æ®</li></ul><h1>4.5 ä¼˜åŒ–ResultåŒ…è£…ç±»</h1><p>å¦‚æœæˆ‘ä»¬æ¯æ¬¡å†™ä¸€ä¸ªæ¥å£ï¼Œéƒ½newä¸€ä¸ªResultç±»ï¼Œç„¶åå†è°ƒç”¨setteræ–¹æ³•å»è®¾ç½®æˆå‘˜å±æ€§ï¼Œæœ‰ç‚¹ç¹çã€‚</p><p>æœ‰æ²¡æœ‰æ›´ç®€å•çš„æ–¹æ³•ï¼Ÿé‚£å°±æ˜¯åœ¨Resulté‡Œå†™ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œæ¥æ”¶ä¸€ä¸ªå‚æ•°ä¸ºObject dataï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">success</span><span class="params">(Object data)</span> &#123;</span><br><span class="line">    <span class="type">Result</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Result</span>();</span><br><span class="line">    result.setCode(<span class="string">&quot;200&quot;</span>);</span><br><span class="line">    result.setData(data);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‚£ä½¿ç”¨è¿™æ ·ä¸€ä¸ªé™æ€æ–¹æ³•æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿå°±æ˜¯ç®€åŒ–äº†æ¥å£ä¸­çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> Result.success(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°æ˜¯æˆåŠŸçš„æƒ…å†µï¼Œå¦‚æœæ˜¯å¤±è´¥çš„æƒ…å†µå‘¢ï¼Ÿé‚£å°±å®šä¹‰ä¸€ä¸ªerroré™æ€æ–¹æ³•ï¼Œæ­¤æ—¶å› ä¸ºè¯·æ±‚å¤±è´¥æ‰€æœ‰å°±æ²¡æœ‰æ•°æ®äº†ï¼Œæ¥æ”¶çš„å‚æ•°å°±ä»Object dataå˜æˆäº†String msgï¼ˆé”™è¯¯æ¶ˆæ¯ï¼‰ï¼Œå¹¶ä¸”åœ¨æ–¹æ³•ä¸­å°†çŠ¶æ€ç codeè®¾ç½®ä¸º500ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">error</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">    <span class="type">Result</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Result</span>();</span><br><span class="line">    result.setCode(<span class="string">&quot;500&quot;</span>);</span><br><span class="line">    result.setMsg(msg);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæƒ³è‡ªå®šä¹‰codeå‘¢ï¼Ÿé‚£å°±é‡è½½erroré™æ€æ–¹æ³•ï¼Œå†é¢å¤–æ¥æ”¶ä¸€ä¸ªString codeå‚æ•°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">error</span><span class="params">(String code, String msg)</span> &#123;</span><br><span class="line">    <span class="type">Result</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Result</span>();</span><br><span class="line">    result.setCode(code);</span><br><span class="line">    result.setMsg(msg);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>5. å¼‚å¸¸å¤„ç†</h1><h1>5.1 500é”™è¯¯</h1><p>å¦‚æœåœ¨å®šä¹‰æ¥å£å‡½æ•°helloçš„æ—¶å€™ï¼š<br><img src="/images/project-test3_17.png" alt=""></p><p>ä¹Ÿå°±æ˜¯ä¸»åŠ¨å»å¼•å‡ºä¸€ä¸ªé™¤0å¼‚å¸¸ï¼Œä½†æ˜¯è¿™é‡Œå¹¶æ²¡æœ‰æŠ¥é”™ï¼Œå¹¶ä¸”ç¼–è¯‘ä¹Ÿèƒ½é€šè¿‡ï¼Œè¿™ä¸ªå°±å«<code>è¿è¡Œæ—¶å¼‚å¸¸</code>ï¼Œåªæœ‰åœ¨è¿è¡Œæ—¶æ‰ä¼šå‘ç°å¼‚å¸¸ã€‚æ­¤æ—¶è¿è¡Œspringbootå·¥ç¨‹ï¼Œè®¿é—®è¿™ä¸ªæ¥å£ä¼šå‘ç°ï¼š<br><img src="/images/project-test3_18.png" alt=""></p><p>ä¹Ÿå°±æ˜¯æŠ›å‡ºäº†500é”™è¯¯ã€‚</p><p>æŠ›å‡ºè¿™äº›é”™è¯¯éå¸¸çš„ç”¨æˆ·ä¸å‹å¥½ï¼Œæˆ‘ä»¬åº”è¯¥ç”¨ç»Ÿä¸€çš„å¤„ç†æ–¹å¼ï¼ˆç”¨ResultåŒ…è£…ç±»å¤„ç†ï¼‰ã€‚</p><p>Resultæ€ä¹ˆå»å¤„ç†å®ƒå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªå…¨å±€å¼‚å¸¸å¤„ç†GlobalExceptionHandlerã€‚åœ¨com.exampleé‡Œæ–°å»ºä¸€ä¸ªåŒ…exceptionï¼Œå†åœ¨è¿™ä¸ªåŒ…é‡Œåˆ›å»ºGlobalExceptionHandlerç±»ã€‚è¿™ä¸ªç±»å°±æ˜¯å…¨å±€å¼‚å¸¸æ•è·å™¨ï¼Œå®ƒè´Ÿè´£æŠŠä»£ç é‡Œçš„é”™è¯¯è¿›è¡Œæ•è·ï¼Œå¹¶ç»Ÿä¸€é€šè¿‡Resultç±»è¿”å›ã€‚</p><p>åœ¨public class GlobalExceptionHandlerä¸Šé¢ä¸€è¡Œæ·»åŠ <code>@ControllerAdvice</code>ï¼Œä¾ç„¶æ˜¯å›è½¦è‡ªåŠ¨è¡¥å…¨ï¼ˆè¿™æ ·è‡ªåŠ¨å¯¼åŒ…ï¼‰ã€‚ç„¶åè¿˜è¦æä¾›Controllerç±»çš„è·¯å¾„ï¼Œ<code>@ControllerAdvice(&quot;com.example.controller&quot;)</code>ã€‚</p><p>åœ¨GlobalExceptionHandlerç±»å†…éƒ¨é”®å…¥<code>@ExceptionHandler</code>ï¼ˆå›è½¦è‡ªåŠ¨è¡¥å…¨è‡ªåŠ¨å¯¼åŒ…ï¼‰ï¼Œç„¶ååœ†æ‹¬å·é”®å…¥Exception.classï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExceptionHandler(Exception.class)</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„Exceptionå°±æ˜¯Javaä¸­æ‰€æœ‰å¼‚å¸¸çš„åŸºç±»ã€‚</p><p>ç„¶åæ¢è¡Œé”®å…¥<code>@ResponseBody</code>ï¼Œ@ResponseBodyçš„ä½œç”¨å…¶å®æ˜¯å°†javaå¯¹è±¡è½¬ä¸ºjsonæ ¼å¼çš„æ•°æ®ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br></pre></td></tr></table></figure><p>ç„¶åæ¥ç€æ¢è¡Œå†™erroræ–¹æ³•ï¼Œè¿”å›å€¼ä¸ºResultå¯¹è±¡ï¼Œæ¥æ”¶ä¸€ä¸ªå‚æ•°Exception eã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice(&quot;com.example.controller&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">error</span><span class="params">(Exception e)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="string">&quot;ç³»ç»Ÿå¼‚å¸¸&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å†è¿è¡Œspringbooté¡¹ç›®ï¼Œè®¿é—®æ¥å£ï¼š<br><img src="/images/project-test3_19.png" alt=""></p><p>å°±ä¸ä¼šåœ¨è¿”å›500é”™è¯¯äº†ã€‚</p><p>å‡ºç°å¼‚å¸¸äº†çœ‹æ§åˆ¶å°ï¼Œè·³è½¬åˆ°å‡ºé”™çš„ä»£ç è¿›è¡Œdebugã€‚</p><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸ªlogåœ¨æ§åˆ¶å°æ‰“å°é”™è¯¯ä¿¡æ¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice(&quot;com.example.controller&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(GlobalExceptionHandler.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">error</span><span class="params">(Exception e)</span> &#123;</span><br><span class="line">        log.error(<span class="string">&quot;ç³»ç»Ÿå¼‚å¸¸&quot;</span>, e);</span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="string">&quot;ç³»ç»Ÿå¼‚å¸¸&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¯”åŸæ¥æ–°å¢ä¸¤è¡Œä»£ç ï¼Œä¸€ä¸ªæ˜¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(GlobalExceptionHandler.class);</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ä¸€è¡Œæ˜¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">log.error(<span class="string">&quot;ç³»ç»Ÿå¼‚å¸¸&quot;</span>, e);</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶è¿è¡Œå·¥ç¨‹å¹¶è®¿é—®æ¥å£ï¼Œåœ¨æ§åˆ¶å°ï¼š<br><img src="/images/project-test3_20.png" alt=""></p><p>å¦å¤–è¿˜æœ‰ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼ä½¿ç”¨lombokä¸­çš„Slf4jï¼Œåªéœ€è¦åœ¨pom.xmlå¼•å…¥ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ç±»ä¸Šæ·»åŠ <code>@Slf4j</code>æ³¨è§£ï¼Œç›´æ¥ä½¿ç”¨log.error(â€œç³»ç»Ÿå¼‚å¸¸â€, e)å³å¯ã€‚</p><h1>5.2 è‡ªå®šä¹‰å¼‚å¸¸</h1><p>ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰å¼‚å¸¸å‘¢ï¼Ÿæ¯”å¦‚å‰ç«¯ä¼ äº†ä¸€ä¸ªè´¦å·å¯†ç è¿‡æ¥ï¼Œä½†æ˜¯è´¦å·æˆ–è€…å¯†ç é”™äº†ï¼Œæ€ä¹ˆå‘Šè¯‰å‰ç«¯è´¦å·æˆ–è€…å¯†ç é”™äº†å‘¢ï¼Ÿå‡è®¾å®ƒåœ¨serviceå±‚ï¼Œè€Œä¸æ˜¯åœ¨controllerå±‚ã€‚</p><p>ä¹Ÿå°±æ˜¯åœ¨serviceå¾€å¤–æŠ›å‡ºé”™è¯¯ã€‚ä¸èƒ½ç›´æ¥returnä¸€ä¸ªResultå¯¹è±¡ï¼Œå› ä¸ºResultå¯¹è±¡æ˜¯åœ¨controllerå±‚è¿›è¡Œå°è£…çš„ã€‚</p><p>å…¶å®å°±æ˜¯ä¸åœ¨controllerå±‚æ—¶ï¼Œå¦‚ä½•æŠ›å‡ºé”™è¯¯ï¼Ÿ</p><p>è¿™é‡Œå°±å±•ç¤ºå¦‚ä½•éªŒè¯ç®¡ç†å‘˜é¡µé¢ä¹Ÿå°±æ˜¯adminè·¯ç”±ä¸‹ç™»é™†çš„è´¦æˆ·åæ˜¯å¦ä¸º&quot;admin&quot;ã€‚</p><p>åœ¨com.exampleæ–°å»ºä¸€ä¸ªserviceåŒ…ï¼Œå†åœ¨è¿™ä¸ªåŒ…ä¸‹åˆ›å»ºAdminServiceç±»ã€‚ç„¶åç»™AdminServieåŠ Servieæ³¨è§£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdminService</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±æŠŠè¿™ä¸ªAdminServiceç±»æ³¨å†Œä¸ºäº†Springbootçš„ä¸€ä¸ªbeanã€‚</p><p>ç„¶ååœ¨è¿™ä¸ªç±»ä¸­æ·»åŠ adminæ–¹æ³•ï¼Œæ¥æ”¶ä¸€ä¸ªString nameå‚æ•°çš„æ–¹æ³•ï¼Œå¦‚æœnameä¸&quot;admin&quot;ç›¸ç­‰å°±è¿”å›&quot;admin&quot;ï¼ˆä¹Ÿå°±æ˜¯adminæ¥å£åªæ¥å—&quot;admin&quot;è´¦å·ï¼‰ï¼Œå…¶ä»–è¿”å›é”™è¯¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">admin</span><span class="params">(String name)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">&quot;admin&quot;</span>.equals(name)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;admin&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// è¿™é‡Œå…ˆç•™ç€</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åˆ°com/example/controller/WebController.javaä¸­å†™ä¸€ä¸ªadminæ¥å£ï¼Œå¹¶ç»™è¿™ä¸ªæ¥å£ä¼ ä¸€ä¸ªå‚æ•°String nameã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦å»è®¿é—®serviceä¸­çš„æ–¹æ³•ã€‚å…ˆé€šè¿‡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Resource</span></span><br><span class="line">AdminService adminService;</span><br></pre></td></tr></table></figure><p>æ³¨å…¥è¿™ä¸ªserviceï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    AdminService adminService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">1</span> / <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> Result.success(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨adminæ¥å£ä¸­é€šè¿‡è¿™ä¸ªadminServiceè°ƒç”¨å®ƒçš„adminæ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    AdminService adminService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">1</span> / <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> Result.success(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/admin&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">admin</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">admin</span> <span class="operator">=</span> adminService.admin(name);</span><br><span class="line">        <span class="keyword">return</span> Result.success(admin);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“å‰ç«¯è°ƒç”¨adminæ¥å£ä¼ æ¥ä¸€ä¸ªnameï¼Œå½“nameç­‰äº&quot;admin&quot;æ—¶ï¼Œè¿”å›&quot;admin&quot;ï¼›å½“ä¸ç­‰äº&quot;admin&quot;çš„æ—¶å€™è¿”å›é”™è¯¯ã€‚</p><p>ä¸èƒ½åœ¨AdminServiceä¸­çš„adminæ–¹æ³•ä¸­ç›´æ¥è¿”å›&quot;è´¦å·é”™è¯¯&quot;ï¼Œå› ä¸ºè¿™ä¸ªadminæ–¹æ³•æ˜¯é€šè¿‡adminæ¥å£è°ƒç”¨çš„ï¼Œè¿™ä¸ª&quot;è´¦å·é”™è¯¯&quot;è¿”å›åè¢«adminæ¥æ”¶ï¼Œç„¶ååˆé€šè¿‡<code>Result.success(admin)</code>è¿”å›ï¼Œä½†æ­¤æ—¶çŠ¶æ€ç codeè¿˜æ˜¯200ï¼ˆè¯·æ±‚æˆåŠŸï¼‰ã€‚</p><p>é‚£ä¹ˆè¯¥å¦‚ä½•è¿”å›é”™è¯¯å‘¢ï¼Ÿè€ƒè™‘è‡ªå®šä¹‰å¼‚å¸¸ã€‚</p><p>åœ¨com/example/exceptionç±»ä¸­æ–°å»ºä¸€ä¸ªCustomerExceptionç±»ï¼Œç„¶åè®©è¿™ä¸ªç±»ç»§æ‰¿RuntimeExceptionç±»ï¼ˆJavaé€šè¿‡extendsç»§æ‰¿ï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomerException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»™è¿™ä¸ªç±»æ·»åŠ ä¸¤ä¸ªprivateå±æ€§ï¼ŒString code å’Œ String msgï¼Œä¹Ÿå°±æ˜¯é”™è¯¯çŠ¶æ€ç å’Œé”™è¯¯ä¿¡æ¯ã€‚ç»§ç»­åˆ©ç”¨ALT+Insertæ¥å¿«é€Ÿå®ç°ä»–ä»¬çš„getterå’Œsetteræ–¹æ³•ä»¥åŠæ„é€ å‡½æ•°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomerException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CustomerException</span><span class="params">(String code, String msg)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CustomerException</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = <span class="string">&quot;500&quot;</span>;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CustomerException</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCode</span><span class="params">(String code)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMsg</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMsg</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å°±å¯ä»¥å®Œå–„AdminServiceç±»é‡Œçš„adminæ–¹æ³•äº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdminService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">admin</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;admin&quot;</span>.equals(name)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;admin&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomerException</span>(<span class="string">&quot;è´¦å·é”™è¯¯&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿˜éœ€è¦åœ¨å…¨å±€æ•è·å™¨ä¸­æ•è·æˆ‘ä»¬çš„è‡ªå®šä¹‰å¼‚å¸¸ï¼ˆåŸæ¥åªæ•è·ExceptionåŸºç±»å¼‚å¸¸ï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// com/example/exception/GlobalExceptionHandler.java</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@ControllerAdvice(&quot;com.example.controller&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(GlobalExceptionHandler.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">error</span><span class="params">(Exception e)</span> &#123;</span><br><span class="line">        log.error(<span class="string">&quot;ç³»ç»Ÿå¼‚å¸¸&quot;</span>, e);</span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="string">&quot;ç³»ç»Ÿå¼‚å¸¸&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(CustomerException.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">customerError</span><span class="params">(CustomerException e)</span> &#123;</span><br><span class="line">        log.error(<span class="string">&quot;è‡ªå®šä¹‰é”™è¯¯&quot;</span>, e);</span><br><span class="line">        <span class="keyword">return</span> Result.error(e.getCode(), e.getMsg());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­customerErrorä¸­ä¸€å®šè¦æŠŠCustomerExceptionå¯¹è±¡eä¸­åŒ…å«çš„msgé€šè¿‡getMsgæ‹¿å‡ºæ¥ã€‚</p><p>ç°åœ¨è®¿é—®<code>localhost:9999/admin?name=1111</code>ï¼Œå…¶ä¸­<code>?name=1111</code>å°±æ˜¯ä¼ é€’å‚æ•°ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;å‰è¨€&lt;/h1&gt;
&lt;p&gt;å­¦ä¹ Bç«™UPä¸»ç¨‹åºå‘˜é’æˆˆå‡ºå“çš„è§†é¢‘&lt;a href=&quot;https://www.bilibili.com/video/BV1uZAoeGEqM/?spm_id_from=333.1245.0.0&quot;&gt;ã€å¸¦å°ç™½åšæ¯•è®¾ã€‘03. Springboot3æ¡†æ¶çš„å¿«é€Ÿ</summary>
      
    
    
    
    <category term="Java é¡¹ç›®" scheme="http://malone-ai.github.io/categories/Java-%E9%A1%B9%E7%9B%AE/"/>
    
    
    <category term="Java" scheme="http://malone-ai.github.io/tags/Java/"/>
    
    <category term="Springboot" scheme="http://malone-ai.github.io/tags/Springboot/"/>
    
  </entry>
  
  <entry>
    <title>åŠ¨æ€è§„åˆ’ä¸ƒï¼šçŠ¶æ€æœºDP</title>
    <link href="http://malone-ai.github.io/2025/03/06/dp7/"/>
    <id>http://malone-ai.github.io/2025/03/06/dp7/</id>
    <published>2025-03-06T12:12:25.000Z</published>
    <updated>2025-03-10T07:24:37.815Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šæ—¥å­¦ä¹ çµèŒ¶å±±è‰¾åºœçš„<a href="https://www.bilibili.com/video/BV1ho4y1W7QK/?spm_id_from=333.1245.0.0&amp;vd_source=a0f19e79b7da02f4fa318d91be5bc86a">ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºã€åŸºç¡€ç®—æ³•ç²¾è®² 21ã€‘</a>ã€‚</p><h1>1. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II</h1><p>Leetcode å®˜æ–¹é¢˜ç›®<a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-ii/description/">122. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II</a>ã€‚</p><h1>1.1 é¢˜ç›®æè¿°</h1><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ prices ï¼Œå…¶ä¸­ prices[i] è¡¨ç¤ºæŸæ”¯è‚¡ç¥¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚</p><p>åœ¨æ¯ä¸€å¤©ï¼Œä½ å¯ä»¥å†³å®šæ˜¯å¦è´­ä¹°å’Œ/æˆ–å‡ºå”®è‚¡ç¥¨ã€‚ä½ åœ¨ä»»ä½•æ—¶å€™ æœ€å¤š åªèƒ½æŒæœ‰ ä¸€è‚¡ è‚¡ç¥¨ã€‚ä½ ä¹Ÿå¯ä»¥å…ˆè´­ä¹°ï¼Œç„¶ååœ¨ åŒä¸€å¤© å‡ºå”®ã€‚</p><p>è¿”å› ä½ èƒ½è·å¾—çš„ æœ€å¤§ åˆ©æ¶¦ ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><pre><code>è¾“å…¥ï¼šprices = [7,1,5,3,6,4]è¾“å‡ºï¼š7è§£é‡Šï¼šåœ¨ç¬¬ 2 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 1ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 3 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 5ï¼‰çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 5 - 1 = 4ã€‚éšåï¼Œåœ¨ç¬¬ 4 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 3ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 5 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 6ï¼‰çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 6 - 3 = 3ã€‚æœ€å¤§æ€»åˆ©æ¶¦ä¸º 4 + 3 = 7 ã€‚</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code>è¾“å…¥ï¼šprices = [1,2,3,4,5]è¾“å‡ºï¼š4è§£é‡Šï¼šåœ¨ç¬¬ 1 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 1ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 5 å¤© ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 5ï¼‰çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 5 - 1 = 4ã€‚æœ€å¤§æ€»åˆ©æ¶¦ä¸º 4 ã€‚</code></pre><p>ç¤ºä¾‹ 3ï¼š</p><pre><code>è¾“å…¥ï¼šprices = [7,6,4,3,1]è¾“å‡ºï¼š0è§£é‡Šï¼šåœ¨è¿™ç§æƒ…å†µä¸‹, äº¤æ˜“æ— æ³•è·å¾—æ­£åˆ©æ¶¦ï¼Œæ‰€ä»¥ä¸å‚ä¸äº¤æ˜“å¯ä»¥è·å¾—æœ€å¤§åˆ©æ¶¦ï¼Œæœ€å¤§åˆ©æ¶¦ä¸º 0ã€‚</code></pre><h1>1.2 æ€è·¯</h1><p><code>å¯å‘æ€è·¯</code>ï¼šæœ€åä¸€å¤©å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p><p>å¯¹äº prices = [7,1,5,3,6,4]</p><pre><code>ä»ç¬¬0å¤©å¼€å§‹åˆ°ç¬¬5å¤©ç»“æŸæ—¶çš„åˆ©æ¶¦= ä»ç¬¬0å¤©å¼€å§‹åˆ°ç¬¬4å¤©ç»“æŸæ—¶çš„åˆ©æ¶¦ + ç¬¬5å¤©çš„åˆ©æ¶¦= ã€‚ã€‚ã€‚</code></pre><p>å¦‚æœç¬¬5å¤©ä»€ä¹ˆä¹Ÿæ²¡åšï¼Œé‚£ä¹ˆåˆ©æ¶¦æ˜¯0ã€‚å¦‚æœä¹°å…¥4å—é’±çš„è‚¡ç¥¨ï¼Œé‚£ä¹ˆåˆ©æ¶¦æ˜¯-4ã€‚å¦‚æœ4å—é’±å–æ‰è‚¡ç¥¨ï¼Œé‚£ä¹ˆåˆ©æ¶¦æ˜¯4ï¼ˆå³èµšäº†4å—é’±ï¼Œä½†æ˜¯è¿™é‡Œè¯´çš„èµšäº†4å—é’±æ²¡æœ‰è€ƒè™‘ä¹°å…¥è‚¡ç¥¨èŠ±çš„é’±ï¼‰ã€‚å‡å¦‚ç¬¬5å¤©å–æ‰çš„è‚¡ç¥¨æ˜¯èŠ±6å—é’±ä¹°å…¥çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªåˆ©æ¶¦-6éœ€è¦ç®—åœ¨ç¬¬0å¤©å¼€å§‹åˆ°ç¬¬4å¤©ç»“æŸæ—¶çš„åˆ©æ¶¦é‡Œé¢ã€‚</p><p>é‚£ä¹ˆç¬¬iå¤©æˆ‘ä»¬å¯ä»¥åšå“ªäº›äº‹å„¿å‘¢ï¼Ÿçœ‹è¿™å¼ å›¾ï¼š<br><img src="/images/dp7_1.png" alt=""></p><ul><li>ä»€ä¹ˆä¹Ÿä¸åš<ul><li>çŠ¶æ€ä¸å˜</li></ul></li><li>ä¹°å…¥è‚¡ç¥¨<ul><li>é‚£ä¹ˆå°±ä»ç¬¬i-1å¤©æœªæŒæœ‰è‚¡ç¥¨çš„çŠ¶æ€ï¼Œå˜æˆç¬¬iå¤©ç»“æŸæ—¶æŒæœ‰è‚¡ç¥¨çš„çŠ¶æ€</li></ul></li><li>å–å‡ºè‚¡ç¥¨<ul><li>é‚£ä¹ˆå°±ä»ç¬¬i-1å¤©æŒæœ‰è‚¡ç¥¨çš„çŠ¶æ€ï¼Œå˜æˆç¬¬iå¤©ç»“æŸæ—¶æœªæŒæœ‰è‚¡ç¥¨çš„çŠ¶æ€</li></ul></li></ul><p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºçŠ¶æ€è½¬ç§»ä¸€å…±æœ‰å››ç§çŠ¶æ€ï¼Œå…¶ä¸­æŒæœ‰è‚¡ç¥¨æˆ–è€…æœªæŒæœ‰è‚¡ç¥¨æ—¶ï¼Œæ—¢ä¸ä¹°å…¥ä¹Ÿä¸å–å‡ºæ˜¯ä¸¤ç§çŠ¶æ€ã€‚</p><ul><li>å®šä¹‰ dfs(i,0)è¡¨ç¤ºåˆ°ç¬¬iå¤©ç»“æŸæ—¶ï¼ŒæœªæŒæœ‰è‚¡ç¥¨ï¼Œæœ€å¤§åˆ©æ¶¦</li><li>å®šä¹‰ dfs(i,1)è¡¨ç¤ºåˆ°ç¬¬iå¤©ç»“æŸæ—¶ï¼ŒæŒæœ‰è‚¡ç¥¨ï¼Œæœ€å¤§åˆ©æ¶¦</li></ul><p>ï¼ˆè¿™é‡Œçš„å‚æ•°0/1æ˜¯ä¸€ä¸ªboolç±»å‹çš„å€¼ã€‚ï¼‰</p><p>ç”±äºç¬¬i-1å¤©çš„ç»“æŸå°±æ˜¯ç¬¬iå¤©çš„å¼€å§‹dfs(i-1,Â·)ä¹Ÿè¡¨ç¤ºåˆ°ç¬¬iå¤©å¼€å§‹æ—¶çš„æœ€å¤§åˆ©æ¶¦ã€‚</p><p>ç»§è€Œå¯ä»¥å¾—åˆ°ä»¥ä¸‹å›¾ï¼š<br><img src="/images/dp7_2.png" alt=""></p><p>ä»æ¯ä¸ªçŠ¶æ€å¯ä»¥è½¬ç§»åˆ°å…¶ä»–çŠ¶æ€ï¼Œå°†è¿™äº›å…¶ä»–çŠ¶æ€å–æœ€å¤§å€¼å°±å¯ä»¥å¾—åˆ°ï¼š</p><pre><code>dfs(i, 0) = max(dfs(i-1, 0) + dfs(i-1, 1) - prices[i])dfs(i, 1) = max(dfs(i-1, 1) + dfs(i-1, 0) + prices[i])</code></pre><p>é€’å½’è¾¹ç•Œï¼š</p><pre><code>dfs(-1, 0) = 0  ç¬¬0å¤©`å¼€å§‹æ—¶`æœªæŒæœ‰è‚¡ç¥¨ï¼Œåˆ©æ¶¦ä¸º0dfs(-1, 1) = 0  ç¬¬0å¤©`å¼€å§‹æ—¶`ä¸å¯èƒ½æŒæœ‰è‚¡ç¥¨</code></pre><p>é€’å½’å…¥å£ï¼š</p><pre><code>max(dfs(n-1, 0), dfs(n-1, 1))= dfs(n-1, 0)</code></pre><p>çœ‹ä¸Šå»æšä¸¾æœ€åä¸€å¤©æ˜¯å¦æŒæœ‰è‚¡ç¥¨å°±å¯ä»¥äº†ï¼Œä½†æ˜¯å¦‚æœæœ€åä¸€å¤©ç»“æŸæ—¶è¿˜æŒæœ‰è‚¡ç¥¨ï¼Œè¿™ä¸ªè‚¡ç¥¨åœ¨åé¢å°±å–ä¸å‡ºå»äº†ï¼ˆæˆ–è€…è¯´ä¸åœ¨é¢˜ç›®è€ƒè™‘çš„èŒƒå›´å†…ï¼‰ã€‚æ‰€ä»¥dfs(n-1, 1)æ˜¯ä¸ä¼šæ¯”dfs(n-1, 0)å¤§çš„ï¼Œæ•…ä»dfs(n-1, 0)å¼€å§‹é€’å½’å³å¯ã€‚</p><h1>1.3 å…·ä½“å®ç°</h1><h1>1.3.1 é€’å½’</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’å½’</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">memo</span>(n, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">2</span>, <span class="number">-1</span>));</span><br><span class="line">        <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">this</span> <span class="keyword">auto</span>&amp;&amp; dfs, <span class="type">int</span> i, <span class="type">int</span> j)-&gt;<span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> j == <span class="number">0</span> ? <span class="number">0</span> : INT_MIN / <span class="number">2</span>;</span><br><span class="line">            <span class="type">int</span>&amp; res = memo[i][j];</span><br><span class="line">            <span class="keyword">if</span> (res != <span class="number">-1</span>)</span><br><span class="line">                <span class="keyword">return</span> res;</span><br><span class="line">            <span class="keyword">return</span> res = j == <span class="number">0</span> ? <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>, <span class="number">0</span>), <span class="built_in">dfs</span>(i<span class="number">-1</span>, <span class="number">1</span>) + prices[i]) : <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>, <span class="number">1</span>), <span class="built_in">dfs</span>(i<span class="number">-1</span>, <span class="number">0</span>) - prices[i]);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(n<span class="number">-1</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>1.3.2 é€’æ¨ ç©ºé—´å¤æ‚åº¦O(n)</h1><p>é€’å½’å¾ˆå®¹æ˜“ç¿»è¯‘æˆé€’æ¨ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’æ¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">f</span>(n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">2</span>, <span class="number">0</span>));</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">1</span>] = INT_MIN / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            f[i + <span class="number">1</span>][<span class="number">0</span>] = <span class="built_in">max</span>(f[i][<span class="number">0</span>], f[i][<span class="number">1</span>] + prices[i]);</span><br><span class="line">            f[i + <span class="number">1</span>][<span class="number">1</span>] = <span class="built_in">max</span>(f[i][<span class="number">1</span>], f[i][<span class="number">0</span>] - prices[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n][<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>1.3.3 é€’æ¨ ç©ºé—´å¤æ‚åº¦O(1) ä¸¤ä¸ªæ•°ç»„</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’æ¨ ç©ºé—´å¤æ‚åº¦O(1) ä¸¤ä¸ªæ•°ç»„</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">f</span>(<span class="number">2</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">2</span>, <span class="number">0</span>));</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">1</span>] = INT_MIN / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            f[(i + <span class="number">1</span>) % <span class="number">2</span>][<span class="number">0</span>] = <span class="built_in">max</span>(f[i % <span class="number">2</span>][<span class="number">0</span>], f[i % <span class="number">2</span>][<span class="number">1</span>] + prices[i]);</span><br><span class="line">            f[(i + <span class="number">1</span>) % <span class="number">2</span>][<span class="number">1</span>] = <span class="built_in">max</span>(f[i % <span class="number">2</span>][<span class="number">1</span>], f[i % <span class="number">2</span>][<span class="number">0</span>] - prices[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n % <span class="number">2</span>][<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>1.3.4 é€’æ¨ ç©ºé—´å¤æ‚åº¦O(1) ä¸ç”¨æ•°ç»„</h1><p>è¿™ç§è²Œä¼¼éš¾æƒ³ï¼Œä½†å…¶å®ç”»ä¸ªå›¾å†å¯¹ç…§ä¸€ä¸‹ä¸¤ä¸ªæ•°ç»„çš„ä»£ç å°±å¾ˆå®¹æ˜“æƒ³åˆ°äº†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’æ¨ ç©ºé—´å¤æ‚åº¦O(1) ä¸ç”¨æ•°ç»„</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> f0 = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> f1 = INT_MIN / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="type">int</span> f0_tmp = f0;</span><br><span class="line">            f0 = <span class="built_in">max</span>(f0, f1 + prices[i]);</span><br><span class="line">            f1 = <span class="built_in">max</span>(f1, f0_tmp - prices[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>1.4 å˜å½¢é¢˜ç›®ï¼š309. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«å†·å†»æœŸ</h1><p><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-cooldown/description/">309. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«å†·å†»æœŸ</a>ã€‚</p><h1>1.4.1 é¢˜ç›®æè¿°</h1><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„pricesï¼Œå…¶ä¸­ prices[i] è¡¨ç¤ºç¬¬ i å¤©çš„è‚¡ç¥¨ä»·æ ¼ ã€‚â€‹</p><p>è®¾è®¡ä¸€ä¸ªç®—æ³•è®¡ç®—å‡ºæœ€å¤§åˆ©æ¶¦ã€‚åœ¨æ»¡è¶³ä»¥ä¸‹çº¦æŸæ¡ä»¶ä¸‹ï¼Œä½ å¯ä»¥å°½å¯èƒ½åœ°å®Œæˆæ›´å¤šçš„äº¤æ˜“ï¼ˆå¤šæ¬¡ä¹°å–ä¸€æ”¯è‚¡ç¥¨ï¼‰:</p><p>å–å‡ºè‚¡ç¥¨åï¼Œä½ æ— æ³•åœ¨ç¬¬äºŒå¤©ä¹°å…¥è‚¡ç¥¨ (å³å†·å†»æœŸä¸º 1 å¤©)ã€‚<br>æ³¨æ„ï¼šä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚</p><p>ç¤ºä¾‹ 1:</p><pre><code>è¾“å…¥: prices = [1,2,3,0,2]è¾“å‡º: 3 è§£é‡Š: å¯¹åº”çš„äº¤æ˜“çŠ¶æ€ä¸º: [ä¹°å…¥, å–å‡º, å†·å†»æœŸ, ä¹°å…¥, å–å‡º]</code></pre><p>ç¤ºä¾‹ 2:</p><pre><code>è¾“å…¥: prices = [1]è¾“å‡º: 0</code></pre><h1>1.4.2 æ€è·¯</h1><p>è¿™é“é¢˜æœ‰å†·å†»æœŸï¼Œå°±æ˜¯åœ¨å–å‡ºåä¸èƒ½ç«‹åˆ»ä¹°å…¥è‚¡ç¥¨ã€‚æ¢å¥è¯å°±æ˜¯ä¹°å…¥è‚¡ç¥¨çš„æ—¶å€™ï¼Œå‰ä¸€å¤©ä¸èƒ½æœ‰å–å‡ºæ“ä½œã€‚è¿™å…¶å®å’Œå’Œ<a href="https://leetcode.cn/problems/house-robber/description/">198. æ‰“å®¶åŠ«èˆ</a>å¾ˆåƒã€‚åœ¨æ‰“å®¶åŠ«èˆä¸­ï¼Œä»å³å¾€å·¦æ€è€ƒï¼Œå¦‚æœé€‰ç¬¬iä¸ªæˆ¿å­ï¼Œé‚£ä¹ˆç¬¬i-1ä¸ªæˆ¿å­ä¸èƒ½é€‰ï¼Œæ‰€ä»¥ç›´æ¥é€’å½’åˆ°ç¬¬i-2ä¸ªæˆ¿å­ã€‚</p><p>è¿™é“é¢˜ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚<br>çŠ¶æ€è½¬ç§»ï¼š</p><ul><li>å¦‚æœä»Šå¤©ä¸æŒæœ‰è‚¡ç¥¨ï¼Œé‚£ä¹ˆæœ‰ä¸¤ç§å¯èƒ½ï¼š<ul><li>å‰ä¸€å¤©ä¹Ÿä¸æŒæœ‰è‚¡ç¥¨ï¼Œä»Šå¤©ä»€ä¹ˆéƒ½ä¸åšã€‚</li><li>å‰ä¸€å¤©æŒæœ‰è‚¡ç¥¨ï¼Œä»Šå¤©å–å‡ºè‚¡ç¥¨ã€‚</li><li>å› æ­¤ï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸ºï¼šdfs(i, 0) = max(dfs(i-1, 0), dfs(i-1, 1) + prices[i])</li></ul></li><li>å¦‚æœä»Šå¤©æŒæœ‰è‚¡ç¥¨ï¼Œé‚£ä¹ˆæœ‰ä¸¤ç§å¯èƒ½ï¼š<ul><li>å‰ä¸€å¤©ä¹ŸæŒæœ‰è‚¡ç¥¨ï¼Œä»Šå¤©ä»€ä¹ˆéƒ½ä¸åšã€‚</li><li>å‰ä¸¤å¤©ä¸æŒæœ‰è‚¡ç¥¨ï¼Œä»Šå¤©ä¹°å…¥è‚¡ç¥¨ï¼ˆå› ä¸ºæœ‰å†·å†»æœŸï¼Œæ‰€ä»¥ä¸èƒ½åœ¨å‰ä¸€å¤©å–å‡ºåç«‹å³ä¹°å…¥ï¼‰ã€‚</li><li>å› æ­¤ï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸ºï¼šdfs(i, 1) = max(dfs(i-1, 1), dfs(i-2, 0) - prices[i])</li></ul></li></ul><p>å½“holdä¸º1çš„æ—¶å€™ï¼Œå½“å‰çŠ¶æ€æ˜¯æŒæœ‰è‚¡ç¥¨ã€‚é‚£è¿™ä¸ªçŠ¶æ€å¯ä»¥æ¥è‡ªä¸¤ç§æƒ…å†µï¼šè¦ä¹ˆåœ¨i-1å¤©å·²ç»æŒæœ‰ï¼Œç»§ç»­æŒæœ‰ï¼›è¦ä¹ˆåœ¨ç¬¬iå¤©ä¹°å…¥ã€‚ä½†ä¹°å…¥çš„è¯ï¼Œå¿…é¡»æ»¡è¶³ä¹‹å‰å¤„äºæœªæŒæœ‰çŠ¶æ€ï¼Œå¹¶ä¸”æ²¡æœ‰åœ¨i-1å¤©å–å‡ºã€‚å› ä¸ºå¦‚æœæœ‰å–å‡ºçš„è¯ï¼Œiå¤©ä¸èƒ½ä¹°å…¥ã€‚</p><p>æ‰€ä»¥ï¼Œå½“åœ¨ç¬¬iå¤©ä¹°å…¥çš„è¯ï¼Œé‚£ä¹ˆå¿…é¡»ä¿è¯i-1å¤©å¤„äºå†·å´æœŸï¼Œä¹Ÿå°±æ˜¯i-1å¤©æ²¡æœ‰æ“ä½œã€‚é‚£ä¹ˆi-1å¤©ä¸æ“ä½œçš„æƒ…å†µä¸‹ï¼Œè¯´æ˜i-2å¤©çš„æ—¶å€™å¯èƒ½å·²ç»å–å‡ºäº†ï¼Œè¿™æ ·i-1å¤©æ˜¯å†·å´æœŸï¼Œiå¤©å°±å¯ä»¥ä¹°å…¥ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆé€’å½’åˆ°i-2å¤©çš„åŸå› ã€‚</p><h1>1.4.3 é€’å½’</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’å½’</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">memo</span>(n, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">2</span>, <span class="number">-1</span>));</span><br><span class="line">        <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">this</span> <span class="keyword">auto</span>&amp;&amp; dfs, <span class="type">int</span> i, <span class="type">int</span> j)-&gt;<span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> j == <span class="number">0</span> ? <span class="number">0</span> : INT_MIN / <span class="number">2</span>;</span><br><span class="line">            <span class="type">int</span>&amp; res = memo[i][j];</span><br><span class="line">            <span class="keyword">if</span> (res != <span class="number">-1</span>)</span><br><span class="line">                <span class="keyword">return</span> res;</span><br><span class="line">            <span class="keyword">return</span> res = j == <span class="number">0</span> ? <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>, <span class="number">0</span>), <span class="built_in">dfs</span>(i<span class="number">-1</span>, <span class="number">1</span>) + prices[i]) : <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>, <span class="number">1</span>), <span class="built_in">dfs</span>(i<span class="number">-2</span>, <span class="number">0</span>) - prices[i]);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(n<span class="number">-1</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>1.4.4 é€’æ¨ ç©ºé—´å¤æ‚åº¦ O(n)</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’æ¨ ç©ºé—´å¤æ‚åº¦ O(n)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">f</span>(n + <span class="number">2</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">2</span>, <span class="number">-1</span>));</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">1</span>] = INT_MIN / <span class="number">2</span>;</span><br><span class="line">        f[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        f[<span class="number">1</span>][<span class="number">1</span>] = -prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            f[i<span class="number">+2</span>][<span class="number">0</span>] = <span class="built_in">max</span>(f[i<span class="number">+1</span>][<span class="number">0</span>], f[i<span class="number">+1</span>][<span class="number">1</span>] + prices[i]);</span><br><span class="line">            f[i<span class="number">+2</span>][<span class="number">1</span>] = <span class="built_in">max</span>(f[i<span class="number">+1</span>][<span class="number">1</span>], f[i][<span class="number">0</span>] - prices[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n + <span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>1.4.5 é€’æ¨ ç©ºé—´å¤æ‚åº¦ O(1)</h1><p>è¿™ä¸ªç©ºé—´å¤æ‚åº¦ä¸ºO(1)çš„æ˜¯çœŸæƒ³ä¸æ˜ç™½ğŸ˜‚ã€‚</p><p>ç°åœ¨æ˜¯3.10ï¼Œä»Šå¤©å¤ä¹ æŠŠè¿™ä¸ªæƒ³å‡ºæ¥äº†ï¼Œè¿˜å¾—æ˜¯ç”»å›¾ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> f0 = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> f1 = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> f2 = INT_MIN / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="type">int</span> f1_tmp = f1;</span><br><span class="line">            f1 = <span class="built_in">max</span>(f1, f2 + prices[i]);</span><br><span class="line">            f2 = <span class="built_in">max</span>(f2, f0 - prices[i]);</span><br><span class="line">            f0 = f1_tmp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>2. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV</h1><p>Leetcode å®˜æ–¹é¢˜ç›®<a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/description/">188. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV</a>ã€‚</p><h1>2.1 é¢˜ç›®æè¿°</h1><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ prices å’Œä¸€ä¸ªæ•´æ•° k ï¼Œå…¶ä¸­ prices[i] æ˜¯æŸæ”¯ç»™å®šçš„è‚¡ç¥¨åœ¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚</p><p>è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚ä½ æœ€å¤šå¯ä»¥å®Œæˆ k ç¬”äº¤æ˜“ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ æœ€å¤šå¯ä»¥ä¹° k æ¬¡ï¼Œå– k æ¬¡ã€‚</p><p>æ³¨æ„ï¼šä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><pre><code>è¾“å…¥ï¼šk = 2, prices = [2,4,1]è¾“å‡ºï¼š2è§£é‡Šï¼šåœ¨ç¬¬ 1 å¤© (è‚¡ç¥¨ä»·æ ¼ = 2) çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 2 å¤© (è‚¡ç¥¨ä»·æ ¼ = 4) çš„æ—¶å€™å–å‡ºï¼Œè¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 4-2 = 2 ã€‚</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code>è¾“å…¥ï¼šk = 2, prices = [3,2,6,5,0,3]è¾“å‡ºï¼š7è§£é‡Šï¼šåœ¨ç¬¬ 2 å¤© (è‚¡ç¥¨ä»·æ ¼ = 2) çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 3 å¤© (è‚¡ç¥¨ä»·æ ¼ = 6) çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 6-2 = 4 ã€‚éšåï¼Œåœ¨ç¬¬ 5 å¤© (è‚¡ç¥¨ä»·æ ¼ = 0) çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 6 å¤© (è‚¡ç¥¨ä»·æ ¼ = 3) çš„æ—¶å€™å–å‡º, è¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 3-0 = 3 ã€‚</code></pre><h1>2.2 åŸºæœ¬æ€è·¯</h1><p>å®šä¹‰ dfs(i,j,0) è¡¨ç¤ºåˆ°ç¬¬ i å¤©<code>ç»“æŸ</code>æ—¶å®Œæˆ<code>è‡³å¤š</code> j ç¬”äº¤æ˜“ï¼ŒæœªæŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦ã€‚<br>å®šä¹‰ dfs(i,j,1) è¡¨ç¤ºåˆ°ç¬¬ i å¤©<code>ç»“æŸ</code>æ—¶å®Œæˆ<code>è‡³å¤š</code> j ç¬”äº¤æ˜“ï¼ŒæŒæœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦ã€‚</p><p>çŠ¶æ€è½¬ç§»å›¾å¦‚ä¸‹å›¾ï¼š</p><p><img src="/images/dp7_3.jpg" alt=""></p><p>æ—¢ç„¶æœ‰æ¬¡æ•°é™åˆ¶ï¼Œå°±åº”å½“åœ¨é€’å½’è¿‡ç¨‹ä¸­è®°å½•æ¬¡æ•°ã€‚æ‰€ä»¥åœ¨æ— é™æ¬¡äº¤æ˜“çš„åŸºç¡€ä¸Šå¢åŠ ä¸€ä¸ªå‚æ•°jï¼Œè¡¨ç¤º<code>è‡³å¤š</code>å®Œæˆjç¬”äº¤æ˜“ã€‚è½¬ç§»æ–¹ç¨‹éœ€è¦ä¿®æ”¹çš„åœ°æ–¹å°±æ˜¯åœ¨ä¹°å…¥æˆ–è€…å–å‡ºçš„åœ°æ–¹æŠŠäº¤æ˜“æ¬¡æ•°å‡1ï¼Œå¦‚æœä¹°å…¥å‡1ï¼Œåé¢å–å‡ºçš„æ—¶å€™å°±ä¸ç”¨å‡1ã€‚</p><pre><code>dfs(i,j,0) = max(dfs(i-1,j,0), dfs(i-1,j,1) + prices[i])dfs(i,j,1) = max(dfs(i-1,j,1), dfs(i-1,j-1,0) - prices[i])</code></pre><p>é€’å½’è¾¹ç•Œï¼š</p><pre><code>dfs(Â·, -1, Â·) = -âˆ, ä»»ä½•æƒ…å†µä¸‹ï¼Œjéƒ½ä¸èƒ½ä¸ºè´Ÿdfs(-1, j, 0) = 0, ç¬¬ 0 å¤©å¼€å§‹æœªæŒæœ‰è‚¡ç¥¨ï¼Œåˆ©æ¶¦ä¸º 0dfs(-1, j, 1) = -âˆï¼Œç¬¬ 0 å¤©å¼€å§‹ä¸å¯èƒ½æŒæœ‰è‚¡ç¥¨</code></pre><h1>2.3 å…·ä½“å®ç°</h1><h1>2.3.1 é€’å½’</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’å½’</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(<span class="type">int</span> k, vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&gt; <span class="built_in">memo</span>(n, vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;(k + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">2</span>, <span class="number">-1</span>)));</span><br><span class="line">        <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">this</span> <span class="keyword">auto</span>&amp;&amp; dfs, <span class="type">int</span> i, <span class="type">int</span> j, <span class="type">int</span> l)-&gt;<span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (j &lt; <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> INT_MIN / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> l == <span class="number">0</span> ? <span class="number">0</span> : INT_MIN / <span class="number">2</span>;</span><br><span class="line">            <span class="type">int</span>&amp; res = memo[i][j][l];</span><br><span class="line">            <span class="keyword">if</span> (res != <span class="number">-1</span>)</span><br><span class="line">                <span class="keyword">return</span> res;</span><br><span class="line">            <span class="keyword">return</span> res = l == <span class="number">0</span> ? <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>, j, <span class="number">0</span>), <span class="built_in">dfs</span>(i<span class="number">-1</span>, j, <span class="number">1</span>) + prices[i]) : <span class="built_in">max</span>(<span class="built_in">dfs</span>(i<span class="number">-1</span>, j, <span class="number">1</span>), <span class="built_in">dfs</span>(i<span class="number">-1</span>, j<span class="number">-1</span>, <span class="number">0</span>) - prices[i]);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(n - <span class="number">1</span>, k, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>2.3.2 é€’æ¨ ç©ºé—´å¤æ‚åº¦O(n*k)</h1><ul><li><p>ä¸ºä»€ä¹ˆç¬¬äºŒç»´åº¦çš„å¤§å°æ˜¯ k+2ï¼Ÿ</p><ul><li>åœ¨è®°å¿†åŒ–æœç´¢ä¸­ï¼Œj çš„èŒƒå›´æ˜¯ [âˆ’1,k]ï¼Œè¿™ä¸€å…±æœ‰ k+2 ä¸ªæ•°ã€‚1:1 ç¿»è¯‘æˆé€’æ¨å°±éœ€è¦ k+2 çš„æ•°ç»„å¤§å°ã€‚</li></ul></li><li><p>f æ•°ç»„ä¸­çš„ j=0 è¡¨ç¤ºä»€ä¹ˆæ„æ€ï¼Ÿ</p><ul><li>è¿™å¯¹åº”ç€è®°å¿†åŒ–æœç´¢ä¸­çš„ j=âˆ’1 çš„çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯äº¤æ˜“ âˆ’1 æ¬¡çš„çŠ¶æ€ã€‚æ³¨æ„è¿™æ˜¯ä¸åˆæ³•çš„ï¼Œæ‰€ä»¥åˆå§‹å€¼ä¸€å®šæ˜¯ âˆ’âˆã€‚</li></ul></li><li><p>f çš„åˆå§‹å€¼æ€ä¹ˆç¡®å®šï¼Ÿ</p><ul><li>f çš„åˆå§‹å€¼æ¥è‡ªè®°å¿†åŒ–æœç´¢çš„é€’å½’è¾¹ç•Œï¼Œé€’å½’è¾¹ç•Œæ€ä¹ˆå†™ï¼Œåˆå§‹å€¼å°±æ€ä¹ˆå†™ã€‚</li></ul></li></ul><p>ä½œè€…ï¼šçµèŒ¶å±±è‰¾åºœ<br>é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/solutions/2201488/shi-pin-jiao-ni-yi-bu-bu-si-kao-dong-tai-kksg/">https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/solutions/2201488/shi-pin-jiao-ni-yi-bu-bu-si-kao-dong-tai-kksg/</a><br>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’æ¨ ç©ºé—´å¤æ‚åº¦O(n*k)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(<span class="type">int</span> k, vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&gt; <span class="built_in">f</span>(n + <span class="number">1</span>, vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;(k + <span class="number">2</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">2</span>, INT_MIN / <span class="number">2</span>)));</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt; k + <span class="number">2</span>; ++j)</span><br><span class="line">            f[<span class="number">0</span>][j][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt; k + <span class="number">2</span>; ++j) &#123;</span><br><span class="line">                f[i<span class="number">+1</span>][j][<span class="number">0</span>] = <span class="built_in">max</span>(f[i][j][<span class="number">0</span>], f[i][j][<span class="number">1</span>] + prices[i]);</span><br><span class="line">                f[i<span class="number">+1</span>][j][<span class="number">1</span>] = <span class="built_in">max</span>(f[i][j][<span class="number">1</span>], f[i][j<span class="number">-1</span>][<span class="number">0</span>] - prices[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n][k<span class="number">+1</span>][<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1>2.3.3 é€’æ¨ ç©ºé—´å¤æ‚åº¦O(k)</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’æ¨ ç©ºé—´å¤æ‚åº¦O(k)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(<span class="type">int</span> k, vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&gt; <span class="built_in">f</span>(<span class="number">2</span>, vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;(k + <span class="number">2</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">2</span>, INT_MIN / <span class="number">2</span>)));</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt; k + <span class="number">2</span>; ++j)</span><br><span class="line">            f[<span class="number">0</span>][j][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt; k + <span class="number">2</span>; ++j) &#123;</span><br><span class="line">                f[(i<span class="number">+1</span>)%<span class="number">2</span>][j][<span class="number">0</span>] = <span class="built_in">max</span>(f[i%<span class="number">2</span>][j][<span class="number">0</span>], f[i%<span class="number">2</span>][j][<span class="number">1</span>] + prices[i]);</span><br><span class="line">                f[(i<span class="number">+1</span>)%<span class="number">2</span>][j][<span class="number">1</span>] = <span class="built_in">max</span>(f[i%<span class="number">2</span>][j][<span class="number">1</span>], f[i%<span class="number">2</span>][j<span class="number">-1</span>][<span class="number">0</span>] - prices[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n%<span class="number">2</span>][k<span class="number">+1</span>][<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šæ—¥å­¦ä¹ çµèŒ¶å±±è‰¾åºœçš„&lt;a href=&quot;https://www.bilibili.com/video/BV1ho4y1W7QK/?spm_id_from=333.1245.0.0&amp;amp;vd_source=a0f19e79b7da02f4fa318d91be5bc86a&quot;&gt;</summary>
      
    
    
    
    <category term="åŠ¨æ€è§„åˆ’" scheme="http://malone-ai.github.io/categories/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
    
    <category term="åŠ¨æ€è§„åˆ’" scheme="http://malone-ai.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
  </entry>
  
</feed>
